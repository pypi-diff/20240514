# Comparing `tmp/telegram_bale_bot-4.17.3.tar.gz` & `tmp/telegram_bale_bot-4.18.3.tar.gz`

## Comparing `telegram_bale_bot-4.17.3.tar` & `telegram_bale_bot-4.18.3.tar`

### file list

```diff
@@ -1,199 +1,199 @@
--rw-r--r--   0        0        0      736 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.readthedocs.yml
--rw-r--r--   0        0        0      209 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.travis.yml
--rw-r--r--   0        0        0       98 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/doc_req.txt
--rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/requirements.txt
--rw-r--r--   0        0        0      947 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/setup.py
--rw-r--r--   0        0        0      189 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.github/ISSUE_TEMPLATE
--rw-r--r--   0        0        0      305 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.github/PULL_REQUEST_TEMPLATE.md
--rw-r--r--   0        0        0     1141 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.github/workflows/python-publish.yml
--rw-r--r--   0        0        0     1061 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.github/workflows/setup_python.yml
--rw-r--r--   0        0        0      638 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/Makefile
--rw-r--r--   0        0        0      376 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/calldata.rst
--rw-r--r--   0        0        0     2350 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/conf.py
--rw-r--r--   0        0        0      298 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/formatting.rst
--rw-r--r--   0        0        0     1371 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/index.rst
--rw-r--r--   0        0        0      940 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/install.rst
--rw-r--r--   0        0        0      390 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/quick_start.rst
--rw-r--r--   0        0        0      126 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/types.rst
--rw-r--r--   0        0        0      259 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/util.rst
--rw-r--r--   0        0        0    58063 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/_static/logo.png
--rw-r--r--   0        0        0    58905 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/_static/logo2.png
--rw-r--r--   0        0        0      747 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/async_version/index.rst
--rw-r--r--   0        0        0   215951 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/async_version.po
--rw-r--r--   0        0        0     3305 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/calldata.po
--rw-r--r--   0        0        0     8031 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/formatting.po
--rw-r--r--   0        0        0     2424 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/index.po
--rw-r--r--   0        0        0     1377 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/install.po
--rw-r--r--   0        0        0      976 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/quick_start.po
--rw-r--r--   0        0        0   194210 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/sync_version.po
--rw-r--r--   0        0        0   227076 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/types.po
--rw-r--r--   0        0        0     9831 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/util.po
--rw-r--r--   0        0        0   348725 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/async_version.po
--rw-r--r--   0        0        0     4529 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/calldata.po
--rw-r--r--   0        0        0    10710 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/formatting.po
--rw-r--r--   0        0        0     3492 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/index.po
--rw-r--r--   0        0        0     1893 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/install.po
--rw-r--r--   0        0        0     1175 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/quick_start.po
--rw-r--r--   0        0        0   336935 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/sync_version.po
--rw-r--r--   0        0        0   227076 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/types.po
--rw-r--r--   0        0        0    15772 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/util.po
--rw-r--r--   0        0        0      737 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/docs/source/sync_version/index.rst
--rw-r--r--   0        0        0     4728 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/anonymous_bot.py
--rw-r--r--   0        0        0      340 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/chat_join_request.py
--rw-r--r--   0        0        0     1610 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/chat_member_example.py
--rw-r--r--   0        0        0      697 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/continue_handling.py
--rw-r--r--   0        0        0     1594 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/create_invite_link.py
--rw-r--r--   0        0        0     3394 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_states.py
--rw-r--r--   0        0        0     2980 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/deep_linking.py
--rw-r--r--   0        0        0      780 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/detect_changes.py
--rw-r--r--   0        0        0      362 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/download_file_example.py
--rw-r--r--   0        0        0      731 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/echo_bot.py
--rw-r--r--   0        0        0     1670 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/formatting_example.py
--rw-r--r--   0        0        0     2709 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/inline_example.py
--rw-r--r--   0        0        0      908 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/inline_keyboard_example.py
--rw-r--r--   0        0        0     1739 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/message_reaction_example.py
--rw-r--r--   0        0        0     3996 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/payments_example.py
--rw-r--r--   0        0        0      690 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/poll_example.py
--rw-r--r--   0        0        0      625 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/register_handler.py
--rw-r--r--   0        0        0     3593 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/reply_keyboard_markup_example.py
--rw-r--r--   0        0        0      969 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/set_command_example.py
--rw-r--r--   0        0        0      369 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/skip_updates_example.py
--rw-r--r--   0        0        0     2661 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/step_example.py
--rw-r--r--   0        0        0     1108 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/timer_bot.py
--rw-r--r--   0        0        0      381 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/chat_join_request.py
--rw-r--r--   0        0        0     1701 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/chat_member_example.py
--rw-r--r--   0        0        0      962 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/continue_handling.py
--rw-r--r--   0        0        0     3165 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_states.py
--rw-r--r--   0        0        0      824 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/detect_changes.py
--rw-r--r--   0        0        0      805 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/download_file_example.py
--rw-r--r--   0        0        0      688 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/echo_bot.py
--rw-r--r--   0        0        0      713 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/exception_handler.py
--rw-r--r--   0        0        0     1763 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/formatting_example.py
--rw-r--r--   0        0        0     1821 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/message_reaction_example.py
--rw-r--r--   0        0        0      664 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/register_handler.py
--rw-r--r--   0        0        0      943 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/send_file_example.py
--rw-r--r--   0        0        0     1149 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/set_command_example.py
--rw-r--r--   0        0        0      427 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/skip_updates_example.py
--rw-r--r--   0        0        0     1364 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/timer_bot_async.py
--rw-r--r--   0        0        0      416 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/update_listener.py
--rw-r--r--   0        0        0     2765 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/simple_products_example.py
--rw-r--r--   0        0        0      893 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/filters.py
--rw-r--r--   0        0        0     2766 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/keyboards.py
--rw-r--r--   0        0        0     2188 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/main.py
--rw-r--r--   0        0        0      413 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/admin_filter_example.py
--rw-r--r--   0        0        0     5393 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/advanced_text_filter.py
--rw-r--r--   0        0        0     1489 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/general_custom_filters.py
--rw-r--r--   0        0        0      662 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/id_filter_example.py
--rw-r--r--   0        0        0      675 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/is_filter_example.py
--rw-r--r--   0        0        0      740 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/text_filter_example.py
--rw-r--r--   0        0        0     1283 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/flooding_middleware.py
--rw-r--r--   0        0        0     1502 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n.py
--rw-r--r--   0        0        0     3879 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/i18n_base_midddleware.py
--rw-r--r--   0        0        0      957 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/keyboards.py
--rw-r--r--   0        0        0     8507 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/main.py
--rw-r--r--   0        0        0     1722 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/en/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     2212 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/ru/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     1894 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/uz_Latn/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0      905 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/README.MD
--rw-r--r--   0        0        0      150 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/config.py
--rw-r--r--   0        0        0      552 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/handlers.py
--rw-r--r--   0        0        0     1661 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/main.py
--rw-r--r--   0        0        0      127 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/nginx_conf.conf
--rw-r--r--   0        0        0     3053 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/webhooks/async_webhook_aiohttp_echo_bot.py
--rw-r--r--   0        0        0     1473 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/webhooks/run_webhooks.py
--rw-r--r--   0        0        0     2618 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/asynchronous_telebot/webhooks/webhook_starlette_echo_bot.py
--rw-r--r--   0        0        0     2628 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/callback_data_examples/simple_products_example.py
--rw-r--r--   0        0        0      817 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/callback_data_examples/advanced_calendar_example/filters.py
--rw-r--r--   0        0        0     2836 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/callback_data_examples/advanced_calendar_example/keyboards.py
--rw-r--r--   0        0        0     2133 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/callback_data_examples/advanced_calendar_example/main.py
--rw-r--r--   0        0        0      349 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_filters/admin_filter_example.py
--rw-r--r--   0        0        0     5070 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_filters/advanced_text_filter.py
--rw-r--r--   0        0        0     1405 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_filters/general_custom_filters.py
--rw-r--r--   0        0        0      601 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_filters/id_filter_example.py
--rw-r--r--   0        0        0      604 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_filters/is_filter_example.py
--rw-r--r--   0        0        0      669 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/custom_filters/text_filter_example.py
--rw-r--r--   0        0        0     4990 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/detailed_example/detailed_example.py
--rw-r--r--   0        0        0    36643 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/detailed_example/kitten.jpg
--rw-r--r--   0        0        0    48847 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/detailed_example/rooster.jpg
--rw-r--r--   0        0        0     1524 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/README.md
--rw-r--r--   0        0        0     1332 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/antiflood_middleware.py
--rw-r--r--   0        0        0     1297 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/basic_example.py
--rw-r--r--   0        0        0     3827 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/i18n_base_middleware.py
--rw-r--r--   0        0        0      957 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/keyboards.py
--rw-r--r--   0        0        0     8295 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/main.py
--rw-r--r--   0        0        0     1722 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/locales/en/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     2212 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/locales/ru/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     1894 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/locales/uz_Latn/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     1386 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n.py
--rw-r--r--   0        0        0     1839 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/session.py
--rw-r--r--   0        0        0     2209 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/i18n_class.py
--rw-r--r--   0        0        0      630 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/keyboards.py
--rw-r--r--   0        0        0     5806 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/main.py
--rw-r--r--   0        0        0     1140 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/locales/en/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     1605 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/locales/ru/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0     1384 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/locales/uz_Latn/LC_MESSAGES/messages.po
--rw-r--r--   0        0        0      905 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/multibot/README.MD
--rw-r--r--   0        0        0      150 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/multibot/config.py
--rw-r--r--   0        0        0      475 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/multibot/handlers.py
--rw-r--r--   0        0        0     1413 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/multibot/main.py
--rw-r--r--   0        0        0      127 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/multibot/nginx_conf.conf
--rw-r--r--   0        0        0     1227 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/serverless/aws_lambda_function.py
--rw-r--r--   0        0        0     1836 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/serverless/azure_functions
--rw-r--r--   0        0        0        4 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/serverless/flask_google_cloud_bot/.gcloudignore
--rw-r--r--   0        0        0       74 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/serverless/flask_google_cloud_bot/app.yaml
--rw-r--r--   0        0        0     1411 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/serverless/flask_google_cloud_bot/main.py
--rw-r--r--   0        0        0       71 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/serverless/flask_google_cloud_bot/requirements.txt
--rw-r--r--   0        0        0     3013 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/telebot_bot/telebot_bot.py
--rw-r--r--   0        0        0     2221 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/README.md
--rw-r--r--   0        0        0     1371 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/run_webhooks.py
--rw-r--r--   0        0        0     2428 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_aiohttp_echo_bot.py
--rw-r--r--   0        0        0     2922 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_cherrypy_echo_bot.py
--rw-r--r--   0        0        0     3192 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_cpython_echo_bot.py
--rw-r--r--   0        0        0     2207 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_fastapi_echo_bot.py
--rw-r--r--   0        0        0     2448 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_flask_echo_bot.py
--rw-r--r--   0        0        0      927 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_flask_heroku_echo.py
--rw-r--r--   0        0        0     3204 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_tornado_echo_bot.py
--rw-r--r--   0        0        0     2637 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_twisted_echo_bot.py
--rw-r--r--   0        0        0   407044 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/__init__.py
--rw-r--r--   0        0        0    90266 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/apihelper.py
--rw-r--r--   0        0        0   379777 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/async_telebot.py
--rw-r--r--   0        0        0    13230 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_filters.py
--rw-r--r--   0        0        0     3793 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_handler_backends.py
--rw-r--r--   0        0        0    91482 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_helper.py
--rw-r--r--   0        0        0     5263 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/callback_data.py
--rw-r--r--   0        0        0    13362 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/custom_filters.py
--rw-r--r--   0        0        0    15113 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/formatting.py
--rw-r--r--   0        0        0     9085 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/handler_backends.py
--rw-r--r--   0        0        0     1972 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/service_utils.py
--rw-r--r--   0        0        0   413414 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/types.py
--rw-r--r--   0        0        0    21298 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/util.py
--rw-r--r--   0        0        0       96 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/version.py
--rw-r--r--   0        0        0      424 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_storage/__init__.py
--rw-r--r--   0        0        0     1710 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_storage/base_storage.py
--rw-r--r--   0        0        0     2309 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_storage/memory_storage.py
--rw-r--r--   0        0        0     3792 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_storage/pickle_storage.py
--rw-r--r--   0        0        0     6025 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/asyncio_storage/redis_storage.py
--rw-r--r--   0        0        0       63 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/ext/__init__.py
--rw-r--r--   0        0        0      766 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/ext/reloader.py
--rw-r--r--   0        0        0      128 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/ext/aio/__init__.py
--rw-r--r--   0        0        0     3742 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/ext/aio/webhooks.py
--rw-r--r--   0        0        0      125 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/ext/sync/__init__.py
--rw-r--r--   0        0        0     3445 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/ext/sync/webhooks.py
--rw-r--r--   0        0        0      392 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/storage/__init__.py
--rw-r--r--   0        0        0     1699 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/storage/base_storage.py
--rw-r--r--   0        0        0     2287 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/storage/memory_storage.py
--rw-r--r--   0        0        0     3954 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/storage/pickle_storage.py
--rw-r--r--   0        0        0     5693 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/telebot/storage/redis_storage.py
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/__init__.py
--rw-r--r--   0        0        0    10848 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_handler_backends.py
--rw-r--r--   0        0        0    27963 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_telebot.py
--rw-r--r--   0        0        0    22202 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_types.py
--rw-r--r--   0        0        0    20096 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_data/record.mp3
--rw-r--r--   0        0        0    10481 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_data/record.ogg
--rw-r--r--   0        0        0    60044 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_data/record.wav
--rw-r--r--   0        0        0   467893 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/tests/test_data/test_video.mp4
--rw-r--r--   0        0        0      806 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/.gitignore
--rw-r--r--   0        0        0    18047 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/LICENSE
--rw-r--r--   0        0        0    46629 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/README.md
--rw-r--r--   0        0        0     1520 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/pyproject.toml
--rw-r--r--   0        0        0    48479 2020-02-02 00:00:00.000000 telegram_bale_bot-4.17.3/PKG-INFO
+-rw-r--r--   0        0        0      736 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.readthedocs.yml
+-rw-r--r--   0        0        0      209 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.travis.yml
+-rw-r--r--   0        0        0       98 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/doc_req.txt
+-rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/requirements.txt
+-rw-r--r--   0        0        0      947 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/setup.py
+-rw-r--r--   0        0        0      189 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.github/ISSUE_TEMPLATE
+-rw-r--r--   0        0        0      305 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.github/PULL_REQUEST_TEMPLATE.md
+-rw-r--r--   0        0        0     1141 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.github/workflows/python-publish.yml
+-rw-r--r--   0        0        0     1061 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.github/workflows/setup_python.yml
+-rw-r--r--   0        0        0      638 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/Makefile
+-rw-r--r--   0        0        0      376 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/calldata.rst
+-rw-r--r--   0        0        0     2350 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/conf.py
+-rw-r--r--   0        0        0      298 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/formatting.rst
+-rw-r--r--   0        0        0     1371 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/index.rst
+-rw-r--r--   0        0        0      940 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/install.rst
+-rw-r--r--   0        0        0      390 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/quick_start.rst
+-rw-r--r--   0        0        0      126 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/types.rst
+-rw-r--r--   0        0        0      259 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/util.rst
+-rw-r--r--   0        0        0    58063 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/_static/logo.png
+-rw-r--r--   0        0        0    58905 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/_static/logo2.png
+-rw-r--r--   0        0        0      747 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/async_version/index.rst
+-rw-r--r--   0        0        0   215951 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/async_version.po
+-rw-r--r--   0        0        0     3305 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/calldata.po
+-rw-r--r--   0        0        0     8031 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/formatting.po
+-rw-r--r--   0        0        0     2424 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/index.po
+-rw-r--r--   0        0        0     1377 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/install.po
+-rw-r--r--   0        0        0      976 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/quick_start.po
+-rw-r--r--   0        0        0   194210 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/sync_version.po
+-rw-r--r--   0        0        0   227076 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/types.po
+-rw-r--r--   0        0        0     9831 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/util.po
+-rw-r--r--   0        0        0   348725 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/async_version.po
+-rw-r--r--   0        0        0     4529 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/calldata.po
+-rw-r--r--   0        0        0    10710 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/formatting.po
+-rw-r--r--   0        0        0     3492 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/index.po
+-rw-r--r--   0        0        0     1893 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/install.po
+-rw-r--r--   0        0        0     1175 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/quick_start.po
+-rw-r--r--   0        0        0   336935 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/sync_version.po
+-rw-r--r--   0        0        0   227076 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/types.po
+-rw-r--r--   0        0        0    15772 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/util.po
+-rw-r--r--   0        0        0      737 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/docs/source/sync_version/index.rst
+-rw-r--r--   0        0        0     4728 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/anonymous_bot.py
+-rw-r--r--   0        0        0      340 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/chat_join_request.py
+-rw-r--r--   0        0        0     1610 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/chat_member_example.py
+-rw-r--r--   0        0        0      697 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/continue_handling.py
+-rw-r--r--   0        0        0     1594 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/create_invite_link.py
+-rw-r--r--   0        0        0     3394 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_states.py
+-rw-r--r--   0        0        0     2980 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/deep_linking.py
+-rw-r--r--   0        0        0      780 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/detect_changes.py
+-rw-r--r--   0        0        0      362 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/download_file_example.py
+-rw-r--r--   0        0        0      731 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/echo_bot.py
+-rw-r--r--   0        0        0     1670 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/formatting_example.py
+-rw-r--r--   0        0        0     2709 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/inline_example.py
+-rw-r--r--   0        0        0      908 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/inline_keyboard_example.py
+-rw-r--r--   0        0        0     1739 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/message_reaction_example.py
+-rw-r--r--   0        0        0     3996 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/payments_example.py
+-rw-r--r--   0        0        0      690 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/poll_example.py
+-rw-r--r--   0        0        0      625 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/register_handler.py
+-rw-r--r--   0        0        0     3593 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/reply_keyboard_markup_example.py
+-rw-r--r--   0        0        0      969 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/set_command_example.py
+-rw-r--r--   0        0        0      369 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/skip_updates_example.py
+-rw-r--r--   0        0        0     2661 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/step_example.py
+-rw-r--r--   0        0        0     1108 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/timer_bot.py
+-rw-r--r--   0        0        0      381 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/chat_join_request.py
+-rw-r--r--   0        0        0     1701 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/chat_member_example.py
+-rw-r--r--   0        0        0      962 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/continue_handling.py
+-rw-r--r--   0        0        0     3165 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_states.py
+-rw-r--r--   0        0        0      824 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/detect_changes.py
+-rw-r--r--   0        0        0      805 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/download_file_example.py
+-rw-r--r--   0        0        0      688 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/echo_bot.py
+-rw-r--r--   0        0        0      713 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/exception_handler.py
+-rw-r--r--   0        0        0     1763 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/formatting_example.py
+-rw-r--r--   0        0        0     1821 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/message_reaction_example.py
+-rw-r--r--   0        0        0      664 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/register_handler.py
+-rw-r--r--   0        0        0      943 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/send_file_example.py
+-rw-r--r--   0        0        0     1149 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/set_command_example.py
+-rw-r--r--   0        0        0      427 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/skip_updates_example.py
+-rw-r--r--   0        0        0     1364 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/timer_bot_async.py
+-rw-r--r--   0        0        0      416 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/update_listener.py
+-rw-r--r--   0        0        0     2765 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/simple_products_example.py
+-rw-r--r--   0        0        0      893 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/filters.py
+-rw-r--r--   0        0        0     2766 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/keyboards.py
+-rw-r--r--   0        0        0     2188 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/main.py
+-rw-r--r--   0        0        0      413 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/admin_filter_example.py
+-rw-r--r--   0        0        0     5393 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/advanced_text_filter.py
+-rw-r--r--   0        0        0     1489 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/general_custom_filters.py
+-rw-r--r--   0        0        0      662 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/id_filter_example.py
+-rw-r--r--   0        0        0      675 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/is_filter_example.py
+-rw-r--r--   0        0        0      740 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/text_filter_example.py
+-rw-r--r--   0        0        0     1283 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/flooding_middleware.py
+-rw-r--r--   0        0        0     1502 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n.py
+-rw-r--r--   0        0        0     3879 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/i18n_base_midddleware.py
+-rw-r--r--   0        0        0      957 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/keyboards.py
+-rw-r--r--   0        0        0     8507 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/main.py
+-rw-r--r--   0        0        0     1722 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/en/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     2212 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/ru/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     1894 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/uz_Latn/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0      905 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/README.MD
+-rw-r--r--   0        0        0      150 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/config.py
+-rw-r--r--   0        0        0      552 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/handlers.py
+-rw-r--r--   0        0        0     1661 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/main.py
+-rw-r--r--   0        0        0      127 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/nginx_conf.conf
+-rw-r--r--   0        0        0     3053 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/webhooks/async_webhook_aiohttp_echo_bot.py
+-rw-r--r--   0        0        0     1473 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/webhooks/run_webhooks.py
+-rw-r--r--   0        0        0     2618 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/asynchronous_telebot/webhooks/webhook_starlette_echo_bot.py
+-rw-r--r--   0        0        0     2628 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/callback_data_examples/simple_products_example.py
+-rw-r--r--   0        0        0      817 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/callback_data_examples/advanced_calendar_example/filters.py
+-rw-r--r--   0        0        0     2836 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/callback_data_examples/advanced_calendar_example/keyboards.py
+-rw-r--r--   0        0        0     2133 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/callback_data_examples/advanced_calendar_example/main.py
+-rw-r--r--   0        0        0      349 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_filters/admin_filter_example.py
+-rw-r--r--   0        0        0     5070 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_filters/advanced_text_filter.py
+-rw-r--r--   0        0        0     1405 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_filters/general_custom_filters.py
+-rw-r--r--   0        0        0      601 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_filters/id_filter_example.py
+-rw-r--r--   0        0        0      604 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_filters/is_filter_example.py
+-rw-r--r--   0        0        0      669 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/custom_filters/text_filter_example.py
+-rw-r--r--   0        0        0     4990 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/detailed_example/detailed_example.py
+-rw-r--r--   0        0        0    36643 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/detailed_example/kitten.jpg
+-rw-r--r--   0        0        0    48847 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/detailed_example/rooster.jpg
+-rw-r--r--   0        0        0     1524 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/README.md
+-rw-r--r--   0        0        0     1332 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/antiflood_middleware.py
+-rw-r--r--   0        0        0     1297 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/basic_example.py
+-rw-r--r--   0        0        0     3827 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/i18n_base_middleware.py
+-rw-r--r--   0        0        0      957 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/keyboards.py
+-rw-r--r--   0        0        0     8295 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/main.py
+-rw-r--r--   0        0        0     1722 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/locales/en/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     2212 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/locales/ru/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     1894 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/locales/uz_Latn/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     1386 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n.py
+-rw-r--r--   0        0        0     1839 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/session.py
+-rw-r--r--   0        0        0     2209 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/i18n_class.py
+-rw-r--r--   0        0        0      630 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/keyboards.py
+-rw-r--r--   0        0        0     5806 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/main.py
+-rw-r--r--   0        0        0     1140 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/locales/en/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     1605 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/locales/ru/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0     1384 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/locales/uz_Latn/LC_MESSAGES/messages.po
+-rw-r--r--   0        0        0      905 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/multibot/README.MD
+-rw-r--r--   0        0        0      150 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/multibot/config.py
+-rw-r--r--   0        0        0      475 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/multibot/handlers.py
+-rw-r--r--   0        0        0     1413 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/multibot/main.py
+-rw-r--r--   0        0        0      127 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/multibot/nginx_conf.conf
+-rw-r--r--   0        0        0     1227 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/serverless/aws_lambda_function.py
+-rw-r--r--   0        0        0     1836 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/serverless/azure_functions
+-rw-r--r--   0        0        0        4 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/serverless/flask_google_cloud_bot/.gcloudignore
+-rw-r--r--   0        0        0       74 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/serverless/flask_google_cloud_bot/app.yaml
+-rw-r--r--   0        0        0     1411 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/serverless/flask_google_cloud_bot/main.py
+-rw-r--r--   0        0        0       71 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/serverless/flask_google_cloud_bot/requirements.txt
+-rw-r--r--   0        0        0     3013 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/telebot_bot/telebot_bot.py
+-rw-r--r--   0        0        0     2221 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/README.md
+-rw-r--r--   0        0        0     1371 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/run_webhooks.py
+-rw-r--r--   0        0        0     2428 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_aiohttp_echo_bot.py
+-rw-r--r--   0        0        0     2922 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_cherrypy_echo_bot.py
+-rw-r--r--   0        0        0     3192 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_cpython_echo_bot.py
+-rw-r--r--   0        0        0     2207 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_fastapi_echo_bot.py
+-rw-r--r--   0        0        0     2448 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_flask_echo_bot.py
+-rw-r--r--   0        0        0      927 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_flask_heroku_echo.py
+-rw-r--r--   0        0        0     3204 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_tornado_echo_bot.py
+-rw-r--r--   0        0        0     2637 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_twisted_echo_bot.py
+-rw-r--r--   0        0        0   407456 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/__init__.py
+-rw-r--r--   0        0        0    90337 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/apihelper.py
+-rw-r--r--   0        0        0   381603 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/async_telebot.py
+-rw-r--r--   0        0        0    13238 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_filters.py
+-rw-r--r--   0        0        0     3793 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_handler_backends.py
+-rw-r--r--   0        0        0    91317 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_helper.py
+-rw-r--r--   0        0        0     5263 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/callback_data.py
+-rw-r--r--   0        0        0    13362 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/custom_filters.py
+-rw-r--r--   0        0        0    15113 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/formatting.py
+-rw-r--r--   0        0        0     9085 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/handler_backends.py
+-rw-r--r--   0        0        0     1972 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/service_utils.py
+-rw-r--r--   0        0        0   426957 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/types.py
+-rw-r--r--   0        0        0    21298 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/util.py
+-rw-r--r--   0        0        0       96 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/version.py
+-rw-r--r--   0        0        0      424 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_storage/__init__.py
+-rw-r--r--   0        0        0     1710 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_storage/base_storage.py
+-rw-r--r--   0        0        0     2309 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_storage/memory_storage.py
+-rw-r--r--   0        0        0     3792 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_storage/pickle_storage.py
+-rw-r--r--   0        0        0     6025 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/asyncio_storage/redis_storage.py
+-rw-r--r--   0        0        0       63 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/ext/__init__.py
+-rw-r--r--   0        0        0      766 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/ext/reloader.py
+-rw-r--r--   0        0        0      128 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/ext/aio/__init__.py
+-rw-r--r--   0        0        0     3742 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/ext/aio/webhooks.py
+-rw-r--r--   0        0        0      125 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/ext/sync/__init__.py
+-rw-r--r--   0        0        0     3445 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/ext/sync/webhooks.py
+-rw-r--r--   0        0        0      392 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/storage/__init__.py
+-rw-r--r--   0        0        0     1699 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/storage/base_storage.py
+-rw-r--r--   0        0        0     2287 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/storage/memory_storage.py
+-rw-r--r--   0        0        0     3954 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/storage/pickle_storage.py
+-rw-r--r--   0        0        0     5693 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/telebot/storage/redis_storage.py
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/__init__.py
+-rw-r--r--   0        0        0    10848 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_handler_backends.py
+-rw-r--r--   0        0        0    27963 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_telebot.py
+-rw-r--r--   0        0        0    22202 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_types.py
+-rw-r--r--   0        0        0    20096 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_data/record.mp3
+-rw-r--r--   0        0        0    10481 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_data/record.ogg
+-rw-r--r--   0        0        0    60044 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_data/record.wav
+-rw-r--r--   0        0        0   467893 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/tests/test_data/test_video.mp4
+-rw-r--r--   0        0        0      806 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/.gitignore
+-rw-r--r--   0        0        0    18047 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/LICENSE
+-rw-r--r--   0        0        0    46629 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/README.md
+-rw-r--r--   0        0        0     1549 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/pyproject.toml
+-rw-r--r--   0        0        0    48508 2020-02-02 00:00:00.000000 telegram_bale_bot-4.18.3/PKG-INFO
```

### Comparing `telegram_bale_bot-4.17.3/.readthedocs.yml` & `telegram_bale_bot-4.18.3/.readthedocs.yml`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/setup.py` & `telegram_bale_bot-4.18.3/setup.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/.github/workflows/python-publish.yml` & `telegram_bale_bot-4.18.3/.github/workflows/python-publish.yml`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/.github/workflows/setup_python.yml` & `telegram_bale_bot-4.18.3/.github/workflows/setup_python.yml`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/Makefile` & `telegram_bale_bot-4.18.3/docs/Makefile`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/conf.py` & `telegram_bale_bot-4.18.3/docs/source/conf.py`

 * *Files 1% similar despite different names*

```diff
@@ -18,15 +18,15 @@
 # -- Project information -----------------------------------------------------
 
 project = "pyTelegramBotAPI"
 author = "coder2020official"
 copyright = f"2022-{datetime.now().year}, {author}"
 
 # The full version, including alpha/beta/rc tags
-release = "4.17.0"
+release = '4.18.0'
 
 
 # -- General configuration ---------------------------------------------------
 
 # Add any Sphinx extension module names here, as strings. They can be
 # extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
 # ones.
```

### Comparing `telegram_bale_bot-4.17.3/docs/source/index.rst` & `telegram_bale_bot-4.18.3/docs/source/index.rst`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/install.rst` & `telegram_bale_bot-4.18.3/docs/source/install.rst`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/_static/logo.png` & `telegram_bale_bot-4.18.3/docs/source/_static/logo.png`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/_static/logo2.png` & `telegram_bale_bot-4.18.3/docs/source/_static/logo2.png`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/async_version/index.rst` & `telegram_bale_bot-4.18.3/docs/source/async_version/index.rst`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/async_version.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/async_version.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/calldata.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/calldata.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/formatting.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/formatting.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/index.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/index.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/install.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/install.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/quick_start.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/quick_start.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/sync_version.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/sync_version.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/types.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/types.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/en/LC_MESSAGES/util.po` & `telegram_bale_bot-4.18.3/docs/source/locales/en/LC_MESSAGES/util.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/async_version.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/async_version.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/calldata.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/calldata.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/formatting.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/formatting.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/index.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/index.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/install.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/install.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/quick_start.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/quick_start.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/sync_version.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/sync_version.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/types.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/types.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/locales/ru/LC_MESSAGES/util.po` & `telegram_bale_bot-4.18.3/docs/source/locales/ru/LC_MESSAGES/util.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/docs/source/sync_version/index.rst` & `telegram_bale_bot-4.18.3/docs/source/sync_version/index.rst`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/anonymous_bot.py` & `telegram_bale_bot-4.18.3/examples/anonymous_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/chat_member_example.py` & `telegram_bale_bot-4.18.3/examples/chat_member_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/continue_handling.py` & `telegram_bale_bot-4.18.3/examples/continue_handling.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/create_invite_link.py` & `telegram_bale_bot-4.18.3/examples/create_invite_link.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/custom_states.py` & `telegram_bale_bot-4.18.3/examples/custom_states.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/deep_linking.py` & `telegram_bale_bot-4.18.3/examples/deep_linking.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/detect_changes.py` & `telegram_bale_bot-4.18.3/examples/detect_changes.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/echo_bot.py` & `telegram_bale_bot-4.18.3/examples/echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/formatting_example.py` & `telegram_bale_bot-4.18.3/examples/formatting_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/inline_example.py` & `telegram_bale_bot-4.18.3/examples/inline_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/inline_keyboard_example.py` & `telegram_bale_bot-4.18.3/examples/inline_keyboard_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/message_reaction_example.py` & `telegram_bale_bot-4.18.3/examples/message_reaction_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/payments_example.py` & `telegram_bale_bot-4.18.3/examples/payments_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/poll_example.py` & `telegram_bale_bot-4.18.3/examples/poll_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/register_handler.py` & `telegram_bale_bot-4.18.3/examples/register_handler.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/reply_keyboard_markup_example.py` & `telegram_bale_bot-4.18.3/examples/reply_keyboard_markup_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/set_command_example.py` & `telegram_bale_bot-4.18.3/examples/set_command_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/step_example.py` & `telegram_bale_bot-4.18.3/examples/step_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/timer_bot.py` & `telegram_bale_bot-4.18.3/examples/timer_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/chat_member_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/chat_member_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/continue_handling.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/continue_handling.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_states.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_states.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/detect_changes.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/detect_changes.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/download_file_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/download_file_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/echo_bot.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/exception_handler.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/exception_handler.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/formatting_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/formatting_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/message_reaction_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/message_reaction_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/register_handler.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/register_handler.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/send_file_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/send_file_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/set_command_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/set_command_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/timer_bot_async.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/timer_bot_async.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/simple_products_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/simple_products_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/filters.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/filters.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/keyboards.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/keyboards.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/main.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/callback_data_examples/advanced_calendar_example/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/advanced_text_filter.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/advanced_text_filter.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/general_custom_filters.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/general_custom_filters.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/id_filter_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/id_filter_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/is_filter_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/is_filter_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/custom_filters/text_filter_example.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/custom_filters/text_filter_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/flooding_middleware.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/flooding_middleware.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/i18n_base_midddleware.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/i18n_base_midddleware.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/keyboards.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/keyboards.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/main.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/en/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/en/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/ru/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/ru/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/uz_Latn/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/middleware/i18n_middleware_example/locales/uz_Latn/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/README.MD` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/README.MD`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/handlers.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/handlers.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/multibot/main.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/multibot/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/webhooks/async_webhook_aiohttp_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/webhooks/async_webhook_aiohttp_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/webhooks/run_webhooks.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/webhooks/run_webhooks.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/asynchronous_telebot/webhooks/webhook_starlette_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/asynchronous_telebot/webhooks/webhook_starlette_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/callback_data_examples/simple_products_example.py` & `telegram_bale_bot-4.18.3/examples/callback_data_examples/simple_products_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/callback_data_examples/advanced_calendar_example/filters.py` & `telegram_bale_bot-4.18.3/examples/callback_data_examples/advanced_calendar_example/filters.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/callback_data_examples/advanced_calendar_example/keyboards.py` & `telegram_bale_bot-4.18.3/examples/callback_data_examples/advanced_calendar_example/keyboards.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/callback_data_examples/advanced_calendar_example/main.py` & `telegram_bale_bot-4.18.3/examples/callback_data_examples/advanced_calendar_example/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/custom_filters/advanced_text_filter.py` & `telegram_bale_bot-4.18.3/examples/custom_filters/advanced_text_filter.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/custom_filters/general_custom_filters.py` & `telegram_bale_bot-4.18.3/examples/custom_filters/general_custom_filters.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/custom_filters/id_filter_example.py` & `telegram_bale_bot-4.18.3/examples/custom_filters/id_filter_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/custom_filters/is_filter_example.py` & `telegram_bale_bot-4.18.3/examples/custom_filters/is_filter_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/custom_filters/text_filter_example.py` & `telegram_bale_bot-4.18.3/examples/custom_filters/text_filter_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/detailed_example/detailed_example.py` & `telegram_bale_bot-4.18.3/examples/detailed_example/detailed_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/detailed_example/kitten.jpg` & `telegram_bale_bot-4.18.3/examples/detailed_example/kitten.jpg`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/detailed_example/rooster.jpg` & `telegram_bale_bot-4.18.3/examples/detailed_example/rooster.jpg`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/README.md` & `telegram_bale_bot-4.18.3/examples/middleware/README.md`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/antiflood_middleware.py` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/antiflood_middleware.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/basic_example.py` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/basic_example.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/i18n_base_middleware.py` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/i18n_base_middleware.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/keyboards.py` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/keyboards.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/main.py` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/locales/en/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/locales/en/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/locales/ru/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/locales/ru/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/class_based/i18n_middleware/locales/uz_Latn/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/middleware/class_based/i18n_middleware/locales/uz_Latn/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n.py` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/session.py` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/session.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/i18n_class.py` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/i18n_class.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/keyboards.py` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/keyboards.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/main.py` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/locales/en/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/locales/en/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/locales/ru/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/locales/ru/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/middleware/function_based/i18n_gettext/locales/uz_Latn/LC_MESSAGES/messages.po` & `telegram_bale_bot-4.18.3/examples/middleware/function_based/i18n_gettext/locales/uz_Latn/LC_MESSAGES/messages.po`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/multibot/README.MD` & `telegram_bale_bot-4.18.3/examples/multibot/README.MD`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/multibot/main.py` & `telegram_bale_bot-4.18.3/examples/multibot/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/serverless/aws_lambda_function.py` & `telegram_bale_bot-4.18.3/examples/serverless/aws_lambda_function.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/serverless/azure_functions` & `telegram_bale_bot-4.18.3/examples/serverless/azure_functions`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/serverless/flask_google_cloud_bot/main.py` & `telegram_bale_bot-4.18.3/examples/serverless/flask_google_cloud_bot/main.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/telebot_bot/telebot_bot.py` & `telegram_bale_bot-4.18.3/examples/telebot_bot/telebot_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/README.md` & `telegram_bale_bot-4.18.3/examples/webhook_examples/README.md`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/run_webhooks.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/run_webhooks.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_aiohttp_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_aiohttp_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_cherrypy_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_cherrypy_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_cpython_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_cpython_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_fastapi_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_fastapi_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_flask_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_flask_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_flask_heroku_echo.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_flask_heroku_echo.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_tornado_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_tornado_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/examples/webhook_examples/webhook_twisted_echo_bot.py` & `telegram_bale_bot-4.18.3/examples/webhook_examples/webhook_twisted_echo_bot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/__init__.py` & `telegram_bale_bot-4.18.3/telebot/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -198,14 +198,15 @@
         self.allow_sending_without_reply = allow_sending_without_reply
         self.webhook_listener = None
         self._user = None
 
         # logs-related
         if colorful_logs:
             try:
+                # noinspection PyPackageRequirements
                 import coloredlogs
 
                 coloredlogs.install(logger=logger, level=logger.level)
             except ImportError:
                 raise ImportError(
                     "Install coloredlogs module to use colorful_logs option."
                 )
@@ -1155,14 +1156,15 @@
         if len(self.update_listener) == 0:
             return
         for listener in self.update_listener:
             self._exec_task(listener, new_messages)
 
     def _setup_change_detector(self, path_to_watch: str):
         try:
+            # noinspection PyPackageRequirements
             from watchdog.observers import Observer
 
             from telebot.ext.reloader import EventHandler
         except ImportError:
             raise ImportError(
                 "Please install watchdog and psutil before using restart_on_change option."
             )
@@ -1704,28 +1706,32 @@
         """
         return types.UserProfilePhotos.de_json(
             apihelper.get_user_profile_photos(
                 self.token, user_id, offset=offset, limit=limit
             )
         )
 
+
     def get_chat(self, chat_id: Union[int, str]) -> types.Chat:
         """
         Use this method to get up to date information about the chat (current name of the user for one-on-one
         conversations, current username of a user, group or channel, etc.). Returns a Chat object on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getchat
 
         :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: Chat information
-        :rtype: :class:`telebot.types.Chat`
+        :rtype: :class:`telebot.types.ChatFullInfo`
         """
-        return types.Chat.de_json(apihelper.get_chat(self.token, chat_id))
+        return types.Chat.de_json(
+            apihelper.get_chat(self.token, chat_id)
+        )
+
 
     def leave_chat(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method for your bot to leave a group, supergroup or channel. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#leavechat
 
@@ -2181,30 +2187,18 @@
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = (
                 self.allow_sending_without_reply
             )
 
         return types.MessageID.de_json(
-            apihelper.copy_message(
-                self.token,
-                chat_id,
-                from_chat_id,
-                message_id,
-                caption=caption,
-                parse_mode=parse_mode,
-                caption_entities=caption_entities,
-                disable_notification=disable_notification,
-                reply_markup=reply_markup,
-                timeout=timeout,
-                protect_content=protect_content,
-                message_thread_id=message_thread_id,
-                reply_parameters=reply_parameters,
-            )
-        )
+            apihelper.copy_message(self.token, chat_id, from_chat_id, message_id, caption=caption,
+                parse_mode=parse_mode, caption_entities=caption_entities, disable_notification=disable_notification,
+                reply_markup=reply_markup, timeout=timeout, protect_content=protect_content,
+               message_thread_id=message_thread_id, reply_parameters=reply_parameters))
 
     def delete_message(
         self, chat_id: Union[int, str], message_id: int, timeout: Optional[int] = None
     ) -> bool:
         """
         Use this method to delete a message, including service messages, with the following limitations:
         - A message can only be deleted if it was sent less than 48 hours ago.
@@ -2817,17 +2811,15 @@
         ] = None,  # deprecated, for backward compatibility
         protect_content: Optional[bool] = None,
         message_thread_id: Optional[int] = None,
         reply_parameters: Optional[types.ReplyParameters] = None,
         business_connection_id: Optional[str] = None,
     ) -> types.Message:
         """
-        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message.
-        For this to work, your audio must be in an .OGG file encoded with OPUS (other formats may be sent as Audio or Document).
-        On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
+        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message. For this to work, your audio must be in an .OGG file encoded with OPUS, or in .MP3 format, or in .M4A format (other formats may be sent as Audio or Document). On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendvoice
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :param voice: Audio file to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended),
@@ -3884,15 +3876,15 @@
 
         :param latitude: Latitude of the location
         :type latitude: :obj:`float`
 
         :param longitude: Longitude of the location
         :type longitude: :obj:`float`
 
-        :param live_period: Period in seconds for which the location will be updated (see Live Locations, should be between 60 and 86400.
+        :param live_period: Period in seconds during which the location will be updated (see Live Locations, should be between 60 and 86400, or 0x7FFFFFFF for live locations that can be edited indefinitely.
         :type live_period: :obj:`int`
 
         :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
             or to force a reply from the user.
         :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
             or :class:`telebot.types.ForceReply`
 
@@ -3988,26 +3980,23 @@
                 message_thread_id=message_thread_id,
                 reply_parameters=reply_parameters,
                 business_connection_id=business_connection_id,
             )
         )
 
     def edit_message_live_location(
-        self,
-        latitude: float,
-        longitude: float,
-        chat_id: Optional[Union[int, str]] = None,
-        message_id: Optional[int] = None,
-        inline_message_id: Optional[str] = None,
-        reply_markup: Optional[types.InlineKeyboardMarkup] = None,
-        timeout: Optional[int] = None,
-        horizontal_accuracy: Optional[float] = None,
-        heading: Optional[int] = None,
-        proximity_alert_radius: Optional[int] = None,
-    ) -> types.Message or bool:
+            self, latitude: float, longitude: float, 
+            chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None,
+            inline_message_id: Optional[str]=None, 
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
+            timeout: Optional[int]=None,
+            horizontal_accuracy: Optional[float]=None, 
+            heading: Optional[int]=None, 
+            proximity_alert_radius: Optional[int]=None) -> types.Message or bool:
         """
         Use this method to edit live location messages. A location can be edited until its live_period expires or editing is explicitly
             disabled by a call to stopMessageLiveLocation. On success, if the edited message is not an inline message, the edited Message
             is returned, otherwise True is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagelivelocation
 
@@ -4038,30 +4027,25 @@
 
         :param heading: Direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
         :type heading: :obj:`int`
 
         :param proximity_alert_radius: The maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
         :type proximity_alert_radius: :obj:`int`
 
+        :param live_period: New period in seconds during which the location can be updated, starting from the message send date. If 0x7FFFFFFF is specified, then the location can be updated forever. Otherwise, the new value must not exceed the current live_period by more than a day, and the live location expiration date must remain within the next 90 days. If not specified, then live_period remains unchanged
+        :type live_period: :obj:`int`
+
         :return: On success, if the edited message is not an inline message, the edited Message is returned, otherwise True is returned.
         :rtype: :class:`telebot.types.Message` or bool
         """
         return types.Message.de_json(
             apihelper.edit_message_live_location(
-                self.token,
-                latitude,
-                longitude,
-                chat_id=chat_id,
-                message_id=message_id,
-                inline_message_id=inline_message_id,
-                reply_markup=reply_markup,
-                timeout=timeout,
-                horizontal_accuracy=horizontal_accuracy,
-                heading=heading,
-                proximity_alert_radius=proximity_alert_radius,
+                self.token, latitude, longitude, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
+                reply_markup=reply_markup, timeout=timeout, horizontal_accuracy=horizontal_accuracy, heading=heading,
+                proximity_alert_radius=proximity_alert_radius)
             )
         )
 
     def stop_message_live_location(
         self,
         chat_id: Optional[Union[int, str]] = None,
         message_id: Optional[int] = None,
@@ -6237,72 +6221,61 @@
             send_phone_number_to_provider=send_phone_number_to_provider,
             send_email_to_provider=send_email_to_provider,
             is_flexible=is_flexible,
         )
 
     # noinspection PyShadowingBuiltins
     def send_poll(
-        self,
-        chat_id: Union[int, str],
-        question: str,
-        options: List[str],
-        is_anonymous: Optional[bool] = None,
-        type: Optional[str] = None,
-        allows_multiple_answers: Optional[bool] = None,
-        correct_option_id: Optional[int] = None,
-        explanation: Optional[str] = None,
-        explanation_parse_mode: Optional[str] = None,
-        open_period: Optional[int] = None,
-        close_date: Optional[Union[int, datetime]] = None,
-        is_closed: Optional[bool] = None,
-        disable_notification: Optional[bool] = False,
-        reply_to_message_id: Optional[
-            int
-        ] = None,  # deprecated, for backward compatibility
-        reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
-        allow_sending_without_reply: Optional[
-            bool
-        ] = None,  # deprecated, for backward compatibility
-        timeout: Optional[int] = None,
-        explanation_entities: Optional[List[types.MessageEntity]] = None,
-        protect_content: Optional[bool] = None,
-        message_thread_id: Optional[int] = None,
-        reply_parameters: Optional[types.ReplyParameters] = None,
-        business_connection_id: Optional[str] = None,
-    ) -> types.Message:
+            self, chat_id: Union[int, str], question: str, options: List[str],
+            is_anonymous: Optional[bool]=None, type: Optional[str]=None, 
+            allows_multiple_answers: Optional[bool]=None, 
+            correct_option_id: Optional[int]=None,
+            explanation: Optional[str]=None, 
+            explanation_parse_mode: Optional[str]=None, 
+            open_period: Optional[int]=None, 
+            close_date: Optional[Union[int, datetime]]=None, 
+            is_closed: Optional[bool]=None,
+            disable_notification: Optional[bool]=False,
+            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
+            timeout: Optional[int]=None,
+            explanation_entities: Optional[List[types.MessageEntity]]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None,
+            reply_parameters: Optional[types.ReplyParameters]=None,
+            business_connection_id: Optional[str]=None) -> types.Message:
         """
         Use this method to send a native poll.
         On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendpoll
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
         :type chat_id: :obj:`int` | :obj:`str`
 
         :param question: Poll question, 1-300 characters
         :type question: :obj:`str`
 
-        :param options: A JSON-serialized list of answer options, 2-10 strings 1-100 characters each
-        :type options: :obj:`list` of :obj:`str`
+        :param options: A JSON-serialized list of 2-10 answer options
+        :type options: :obj:`list` of :obj:`InputPollOption`
 
         :param is_anonymous: True, if the poll needs to be anonymous, defaults to True
         :type is_anonymous: :obj:`bool`
 
         :param type: Poll type, “quiz” or “regular”, defaults to “regular”
         :type type: :obj:`str`
 
         :param allows_multiple_answers: True, if the poll allows multiple answers, ignored for polls in quiz mode, defaults to False
         :type allows_multiple_answers: :obj:`bool`
 
-        :param correct_option_id: 0-based identifier of the correct answer option. Available only for polls in quiz mode,
-            defaults to None
+        :param correct_option_id: 0-based identifier of the correct answer option. Available only for polls in quiz mode, defaults to None
         :type correct_option_id: :obj:`int`
 
-        :param explanation: Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a quiz-style poll,
-            0-200 characters with at most 2 line feeds after entities parsing
+        :param explanation: Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a quiz-style poll, 0-200 characters with at most 2 line feeds after entities parsing
         :type explanation: :obj:`str`
 
         :param explanation_parse_mode: Mode for parsing entities in the explanation. See formatting options for more details.
         :type explanation_parse_mode: :obj:`str`
 
         :param open_period: Amount of time in seconds the poll will be active after creation, 5-600. Can't be used together with close_date.
         :type open_period: :obj:`int`
@@ -6318,37 +6291,41 @@
 
         :param reply_to_message_id: deprecated. If the message is a reply, ID of the original message
         :type reply_to_message_id: :obj:`int`
 
         :param allow_sending_without_reply: deprecated. Pass True, if the message should be sent even if the specified replied-to message is not found
         :type allow_sending_without_reply: :obj:`bool`
 
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard,
-            instructions to remove reply keyboard or to force a reply from the user.
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
         :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
 
         :param timeout: Timeout in seconds for waiting for a response from the user.
         :type timeout: :obj:`int`
 
-        :param explanation_entities: A JSON-serialized list of special entities that appear in the explanation,
-            which can be specified instead of parse_mode
+        :param explanation_entities: A JSON-serialized list of special entities that appear in the explanation, which can be specified instead of parse_mode
         :type explanation_entities: :obj:`list` of :obj:`MessageEntity`
 
         :param protect_content: Protects the contents of the sent message from forwarding and saving
         :type protect_content: :obj:`bool`
 
         :param message_thread_id: The identifier of a message thread, in which the poll will be sent
         :type message_thread_id: :obj:`int`
 
         :param reply_parameters: reply parameters.
         :type reply_parameters: :obj:`ReplyParameters`
 
         :param business_connection_id: Identifier of the business connection to use for the poll
         :type business_connection_id: :obj:`str`
 
+        :param question_parse_mode: Mode for parsing entities in the question. See formatting options for more details. Currently, only custom emoji entities are allowed
+        :type question_parse_mode: :obj:`str`
+
+        :param question_entities: A JSON-serialized list of special entities that appear in the poll question. It can be specified instead of question_parse_mode
+        :type question_entities: :obj:`list` of :obj:`MessageEntity`
+
         :return: On success, the sent Message is returned.
         :rtype: :obj:`types.Message`
         """
         disable_notification = (
             self.disable_notification
             if (disable_notification is None)
             else disable_notification
@@ -6391,43 +6368,26 @@
             )
 
         if isinstance(question, types.Poll):
             raise RuntimeError(
                 "The send_poll signature was changed, please see send_poll function details."
             )
 
-        explanation_parse_mode = (
-            self.parse_mode
-            if (explanation_parse_mode is None)
-            else explanation_parse_mode
-        )
+        explanation_parse_mode = self.parse_mode if (explanation_parse_mode is None) else explanation_parse_mode
 
         return types.Message.de_json(
             apihelper.send_poll(
-                self.token,
-                chat_id,
-                question,
-                options,
-                is_anonymous=is_anonymous,
-                type=type,
-                allows_multiple_answers=allows_multiple_answers,
-                correct_option_id=correct_option_id,
-                explanation=explanation,
-                explanation_parse_mode=explanation_parse_mode,
-                open_period=open_period,
-                close_date=close_date,
-                is_closed=is_closed,
-                disable_notification=disable_notification,
-                reply_markup=reply_markup,
-                timeout=timeout,
-                explanation_entities=explanation_entities,
-                protect_content=protect_content,
-                message_thread_id=message_thread_id,
-                reply_parameters=reply_parameters,
-                business_connection_id=business_connection_id,
+                self.token, chat_id, question, options,
+                is_anonymous=is_anonymous, type=type, allows_multiple_answers=allows_multiple_answers,
+                correct_option_id=correct_option_id, explanation=explanation,
+                explanation_parse_mode=explanation_parse_mode, open_period=open_period,
+                close_date=close_date, is_closed=is_closed, disable_notification=disable_notification,
+                reply_markup=reply_markup, timeout=timeout, explanation_entities=explanation_entities,
+                protect_content=protect_content, message_thread_id=message_thread_id,
+                reply_parameters=reply_parameters, business_connection_id=business_connection_id)
             )
         )
 
     def stop_poll(
         self,
         chat_id: Union[int, str],
         message_id: int,
@@ -6764,21 +6724,16 @@
         :return: On success, a UserChatBoosts object is returned.
         :rtype: :class:`telebot.types.UserChatBoosts`
         """
         return types.UserChatBoosts.de_json(
             apihelper.get_user_chat_boosts(self.token, chat_id, user_id)
         )
 
-    def set_sticker_set_thumbnail(
-        self,
-        name: str,
-        user_id: int,
-        thumbnail: Union[Any, str] = None,
-        format: Optional[str] = None,
-    ) -> bool:
+
+    def set_sticker_set_thumbnail(self, name: str, user_id: int, thumbnail: Union[Any, str]=None, format: Optional[str]=None) -> bool:
         """
         Use this method to set the thumbnail of a sticker set.
         Animated thumbnails can be set for animated sticker sets only. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setstickersetthumbnail
 
         :param name: Sticker set name
```

### Comparing `telegram_bale_bot-4.17.3/telebot/apihelper.py` & `telegram_bale_bot-4.18.3/telebot/apihelper.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,5642 +1,5647 @@
 00000000: 2320 2d2a 2d20 636f 6469 6e67 3a20 7574  # -*- coding: ut
 00000010: 662d 3820 2d2a 2d0a 696d 706f 7274 2074  f-8 -*-.import t
 00000020: 696d 650a 6672 6f6d 2064 6174 6574 696d  ime.from datetim
 00000030: 6520 696d 706f 7274 2064 6174 6574 696d  e import datetim
-00000040: 650a 0a74 7279 3a0a 2020 2020 696d 706f  e..try:.    impo
-00000050: 7274 2075 6a73 6f6e 2061 7320 6a73 6f6e  rt ujson as json
-00000060: 0a65 7863 6570 7420 496d 706f 7274 4572  .except ImportEr
-00000070: 726f 723a 0a20 2020 2069 6d70 6f72 7420  ror:.    import 
-00000080: 6a73 6f6e 0a0a 696d 706f 7274 2072 6571  json..import req
-00000090: 7565 7374 730a 6672 6f6d 2072 6571 7565  uests.from reque
-000000a0: 7374 732e 6164 6170 7465 7273 2069 6d70  sts.adapters imp
-000000b0: 6f72 7420 4854 5450 4164 6170 7465 720a  ort HTTPAdapter.
-000000c0: 6672 6f6d 2072 6571 7565 7374 732e 6578  from requests.ex
-000000d0: 6365 7074 696f 6e73 2069 6d70 6f72 7420  ceptions import 
-000000e0: 436f 6e6e 6563 7469 6f6e 4572 726f 722c  ConnectionError,
-000000f0: 2048 5454 5045 7272 6f72 2c20 5469 6d65   HTTPError, Time
-00000100: 6f75 740a 0a74 7279 3a0a 2020 2020 2320  out..try:.    # 
-00000110: 6e6f 696e 7370 6563 7469 6f6e 2050 7955  noinspection PyU
-00000120: 6e72 6573 6f6c 7665 6452 6566 6572 656e  nresolvedReferen
-00000130: 6365 730a 2020 2020 6672 6f6d 2072 6571  ces.    from req
-00000140: 7565 7374 732e 7061 636b 6167 6573 2e75  uests.packages.u
-00000150: 726c 6c69 6233 2069 6d70 6f72 7420 6669  rllib3 import fi
-00000160: 656c 6473 0a0a 2020 2020 666f 726d 6174  elds..    format
-00000170: 5f68 6561 6465 725f 7061 7261 6d20 3d20  _header_param = 
-00000180: 6669 656c 6473 2e66 6f72 6d61 745f 6865  fields.format_he
-00000190: 6164 6572 5f70 6172 616d 0a65 7863 6570  ader_param.excep
-000001a0: 7420 496d 706f 7274 4572 726f 723a 0a20  t ImportError:. 
-000001b0: 2020 2066 6f72 6d61 745f 6865 6164 6572     format_header
-000001c0: 5f70 6172 616d 203d 204e 6f6e 650a 696d  _param = None.im
-000001d0: 706f 7274 2074 656c 6562 6f74 0a66 726f  port telebot.fro
-000001e0: 6d20 7465 6c65 626f 7420 696d 706f 7274  m telebot import
-000001f0: 2074 7970 6573 2c20 7574 696c 0a0a 6c6f   types, util..lo
-00000200: 6767 6572 203d 2074 656c 6562 6f74 2e6c  gger = telebot.l
-00000210: 6f67 6765 720a 0a70 726f 7879 203d 204e  ogger..proxy = N
-00000220: 6f6e 650a 7365 7373 696f 6e20 3d20 4e6f  one.session = No
-00000230: 6e65 0a0a 4150 495f 5552 4c20 3d20 4e6f  ne..API_URL = No
-00000240: 6e65 0a46 494c 455f 5552 4c20 3d20 4e6f  ne.FILE_URL = No
-00000250: 6e65 0a0a 434f 4e4e 4543 545f 5449 4d45  ne..CONNECT_TIME
-00000260: 4f55 5420 3d20 3135 0a52 4541 445f 5449  OUT = 15.READ_TI
-00000270: 4d45 4f55 5420 3d20 3330 0a0a 4c4f 4e47  MEOUT = 30..LONG
-00000280: 5f50 4f4c 4c49 4e47 5f54 494d 454f 5554  _POLLING_TIMEOUT
-00000290: 203d 2031 3020 2023 2053 686f 756c 6420   = 10  # Should 
-000002a0: 6265 2070 6f73 6974 6976 652c 2073 686f  be positive, sho
-000002b0: 7274 2070 6f6c 6c69 6e67 2073 686f 756c  rt polling shoul
-000002c0: 6420 6265 2075 7365 6420 666f 7220 7465  d be used for te
-000002d0: 7374 696e 6720 7075 7270 6f73 6573 206f  sting purposes o
-000002e0: 6e6c 7920 2868 7474 7073 3a2f 2f63 6f72  nly (https://cor
-000002f0: 652e 7465 6c65 6772 616d 2e6f 7267 2f62  e.telegram.org/b
-00000300: 6f74 732f 6170 6923 6765 7475 7064 6174  ots/api#getupdat
-00000310: 6573 290a 0a53 4553 5349 4f4e 5f54 494d  es)..SESSION_TIM
-00000320: 455f 544f 5f4c 4956 4520 3d20 3630 3020  E_TO_LIVE = 600 
-00000330: 2023 2049 6e20 7365 636f 6e64 732e 204e   # In seconds. N
-00000340: 6f6e 6520 2d20 6c69 7665 2066 6f72 6576  one - live forev
-00000350: 6572 2c20 3020 2d20 6f6e 652d 7469 6d65  er, 0 - one-time
-00000360: 0a0a 5245 5452 595f 4f4e 5f45 5252 4f52  ..RETRY_ON_ERROR
-00000370: 203d 2046 616c 7365 0a52 4554 5259 5f54   = False.RETRY_T
-00000380: 494d 454f 5554 203d 2032 0a4d 4158 5f52  IMEOUT = 2.MAX_R
-00000390: 4554 5249 4553 203d 2031 350a 5245 5452  ETRIES = 15.RETR
-000003a0: 595f 454e 4749 4e45 203d 2031 0a0a 4355  Y_ENGINE = 1..CU
-000003b0: 5354 4f4d 5f53 4552 4941 4c49 5a45 5220  STOM_SERIALIZER 
-000003c0: 3d20 4e6f 6e65 0a43 5553 544f 4d5f 5245  = None.CUSTOM_RE
-000003d0: 5155 4553 545f 5345 4e44 4552 203d 204e  QUEST_SENDER = N
-000003e0: 6f6e 650a 0a45 4e41 424c 455f 4d49 4444  one..ENABLE_MIDD
-000003f0: 4c45 5741 5245 203d 2046 616c 7365 0a0a  LEWARE = False..
-00000400: 0a64 6566 205f 6765 745f 7265 715f 7365  .def _get_req_se
-00000410: 7373 696f 6e28 7265 7365 743d 4661 6c73  ssion(reset=Fals
-00000420: 6529 3a0a 2020 2020 6966 2053 4553 5349  e):.    if SESSI
-00000430: 4f4e 5f54 494d 455f 544f 5f4c 4956 453a  ON_TIME_TO_LIVE:
-00000440: 0a20 2020 2020 2020 2023 2049 6620 7365  .        # If se
-00000450: 7373 696f 6e20 5454 4c20 6973 2073 6574  ssion TTL is set
-00000460: 202d 2063 6865 636b 2074 696d 6520 7061   - check time pa
-00000470: 7373 6564 0a20 2020 2020 2020 2063 7265  ssed.        cre
-00000480: 6174 696f 6e5f 6461 7465 203d 2075 7469  ation_date = uti
-00000490: 6c2e 7065 725f 7468 7265 6164 280a 2020  l.per_thread(.  
-000004a0: 2020 2020 2020 2020 2020 2272 6571 5f73            "req_s
-000004b0: 6573 7369 6f6e 5f74 696d 6522 2c20 6c61  ession_time", la
-000004c0: 6d62 6461 3a20 6461 7465 7469 6d65 2e6e  mbda: datetime.n
-000004d0: 6f77 2829 2c20 7265 7365 740a 2020 2020  ow(), reset.    
-000004e0: 2020 2020 290a 2020 2020 2020 2020 2320      ).        # 
-000004f0: 6e6f 696e 7370 6563 7469 6f6e 2050 7954  noinspection PyT
-00000500: 7970 6543 6865 636b 6572 0a20 2020 2020  ypeChecker.     
-00000510: 2020 2069 6620 2864 6174 6574 696d 652e     if (datetime.
-00000520: 6e6f 7728 2920 2d20 6372 6561 7469 6f6e  now() - creation
-00000530: 5f64 6174 6529 2e74 6f74 616c 5f73 6563  _date).total_sec
-00000540: 6f6e 6473 2829 203e 2053 4553 5349 4f4e  onds() > SESSION
-00000550: 5f54 494d 455f 544f 5f4c 4956 453a 0a20  _TIME_TO_LIVE:. 
-00000560: 2020 2020 2020 2020 2020 2023 2046 6f72             # For
-00000570: 6365 2073 6573 7369 6f6e 2072 6573 6574  ce session reset
-00000580: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00000590: 6574 203d 2054 7275 650a 2020 2020 2020  et = True.      
-000005a0: 2020 2020 2020 2320 5361 7665 2072 6573        # Save res
-000005b0: 6574 2074 696d 650a 2020 2020 2020 2020  et time.        
-000005c0: 2020 2020 7574 696c 2e70 6572 5f74 6872      util.per_thr
-000005d0: 6561 6428 2272 6571 5f73 6573 7369 6f6e  ead("req_session
-000005e0: 5f74 696d 6522 2c20 6c61 6d62 6461 3a20  _time", lambda: 
-000005f0: 6461 7465 7469 6d65 2e6e 6f77 2829 2c20  datetime.now(), 
-00000600: 5472 7565 290a 0a20 2020 2069 6620 5345  True)..    if SE
-00000610: 5353 494f 4e5f 5449 4d45 5f54 4f5f 4c49  SSION_TIME_TO_LI
-00000620: 5645 203d 3d20 303a 0a20 2020 2020 2020  VE == 0:.       
-00000630: 2023 2053 6573 7369 6f6e 2069 7320 6f6e   # Session is on
-00000640: 652d 7469 6d65 2075 7365 0a20 2020 2020  e-time use.     
-00000650: 2020 2072 6574 7572 6e20 7265 7175 6573     return reques
-00000660: 7473 2e73 6573 7369 6f6e 732e 5365 7373  ts.sessions.Sess
-00000670: 696f 6e28 290a 2020 2020 656c 7365 3a0a  ion().    else:.
-00000680: 2020 2020 2020 2020 2320 5365 7373 696f          # Sessio
-00000690: 6e20 6c69 7665 7320 736f 6d65 2074 696d  n lives some tim
-000006a0: 6520 6f72 2066 6f72 6576 6572 206f 6e63  e or forever onc
-000006b0: 6520 6372 6561 7465 642e 2044 6566 6175  e created. Defau
-000006c0: 6c74 0a20 2020 2020 2020 2072 6574 7572  lt.        retur
-000006d0: 6e20 7574 696c 2e70 6572 5f74 6872 6561  n util.per_threa
-000006e0: 6428 0a20 2020 2020 2020 2020 2020 2022  d(.            "
-000006f0: 7265 715f 7365 7373 696f 6e22 2c0a 2020  req_session",.  
-00000700: 2020 2020 2020 2020 2020 6c61 6d62 6461            lambda
-00000710: 3a20 7365 7373 696f 6e20 6966 2073 6573  : session if ses
-00000720: 7369 6f6e 2065 6c73 6520 7265 7175 6573  sion else reques
-00000730: 7473 2e73 6573 7369 6f6e 732e 5365 7373  ts.sessions.Sess
-00000740: 696f 6e28 292c 0a20 2020 2020 2020 2020  ion(),.         
-00000750: 2020 2072 6573 6574 2c0a 2020 2020 2020     reset,.      
-00000760: 2020 290a 0a0a 6465 6620 5f6d 616b 655f    )...def _make_
-00000770: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00000780: 6574 686f 645f 6e61 6d65 2c20 6d65 7468  ethod_name, meth
-00000790: 6f64 3d22 6765 7422 2c20 7061 7261 6d73  od="get", params
-000007a0: 3d4e 6f6e 652c 2066 696c 6573 3d4e 6f6e  =None, files=Non
-000007b0: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
-000007c0: 4d61 6b65 7320 6120 7265 7175 6573 7420  Makes a request 
-000007d0: 746f 2074 6865 2054 656c 6567 7261 6d20  to the Telegram 
-000007e0: 4150 492e 0a20 2020 203a 7061 7261 6d20  API..    :param 
-000007f0: 746f 6b65 6e3a 2054 6865 2062 6f74 2773  token: The bot's
-00000800: 2041 5049 2074 6f6b 656e 2e20 2843 7265   API token. (Cre
-00000810: 6174 6564 2077 6974 6820 4042 6f74 4661  ated with @BotFa
-00000820: 7468 6572 290a 2020 2020 3a70 6172 616d  ther).    :param
-00000830: 206d 6574 686f 645f 6e61 6d65 3a20 4e61   method_name: Na
-00000840: 6d65 206f 6620 7468 6520 4150 4920 6d65  me of the API me
-00000850: 7468 6f64 2074 6f20 6265 2063 616c 6c65  thod to be calle
-00000860: 642e 2028 452e 672e 2027 6765 7455 7064  d. (E.g. 'getUpd
-00000870: 6174 6573 2729 0a20 2020 203a 7061 7261  ates').    :para
-00000880: 6d20 6d65 7468 6f64 3a20 4854 5450 206d  m method: HTTP m
-00000890: 6574 686f 6420 746f 2062 6520 7573 6564  ethod to be used
-000008a0: 2e20 4465 6661 756c 7473 2074 6f20 2767  . Defaults to 'g
-000008b0: 6574 272e 0a20 2020 203a 7061 7261 6d20  et'..    :param 
-000008c0: 7061 7261 6d73 3a20 4f70 7469 6f6e 616c  params: Optional
-000008d0: 2070 6172 616d 6574 6572 732e 2053 686f   parameters. Sho
-000008e0: 756c 6420 6265 2061 2064 6963 7469 6f6e  uld be a diction
-000008f0: 6172 7920 7769 7468 206b 6579 2d76 616c  ary with key-val
-00000900: 7565 2070 6169 7273 2e0a 2020 2020 3a70  ue pairs..    :p
-00000910: 6172 616d 2066 696c 6573 3a20 4f70 7469  aram files: Opti
-00000920: 6f6e 616c 2066 696c 6573 2e0a 2020 2020  onal files..    
-00000930: 3a72 6574 7572 6e3a 2054 6865 2072 6573  :return: The res
-00000940: 756c 7420 7061 7273 6564 2074 6f20 6120  ult parsed to a 
-00000950: 4a53 4f4e 2064 6963 7469 6f6e 6172 792e  JSON dictionary.
-00000960: 0a20 2020 2022 2222 0a20 2020 2069 6620  .    """.    if 
-00000970: 6e6f 7420 746f 6b65 6e3a 0a20 2020 2020  not token:.     
-00000980: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-00000990: 6f6e 2822 426f 7420 746f 6b65 6e20 6973  on("Bot token is
-000009a0: 206e 6f74 2064 6566 696e 6564 2229 0a20   not defined"). 
-000009b0: 2020 2069 6620 4150 495f 5552 4c3a 0a20     if API_URL:. 
-000009c0: 2020 2020 2020 2023 206e 6f69 6e73 7065         # noinspe
-000009d0: 6374 696f 6e20 5079 556e 7265 736f 6c76  ction PyUnresolv
-000009e0: 6564 5265 6665 7265 6e63 6573 0a20 2020  edReferences.   
-000009f0: 2020 2020 2072 6571 7565 7374 5f75 726c       request_url
-00000a00: 203d 2041 5049 5f55 524c 2e66 6f72 6d61   = API_URL.forma
-00000a10: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00000a20: 6e61 6d65 290a 2020 2020 656c 7365 3a0a  name).    else:.
-00000a30: 2020 2020 2020 2020 6966 206c 656e 2874          if len(t
-00000a40: 6f6b 656e 2920 3d3d 2035 313a 0a20 2020  oken) == 51:.   
-00000a50: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00000a60: 5f75 726c 203d 2022 6874 7470 733a 2f2f  _url = "https://
-00000a70: 7461 7069 2e62 616c 652e 6169 2f62 6f74  tapi.bale.ai/bot
-00000a80: 7b30 7d2f 7b31 7d22 2e66 6f72 6d61 7428  {0}/{1}".format(
-00000a90: 746f 6b65 6e2c 206d 6574 686f 645f 6e61  token, method_na
-00000aa0: 6d65 290a 2020 2020 2020 2020 656c 7365  me).        else
-00000ab0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00000ac0: 7175 6573 745f 7572 6c20 3d20 2268 7474  quest_url = "htt
-00000ad0: 7073 3a2f 2f61 7069 2e74 656c 6567 7261  ps://api.telegra
-00000ae0: 6d2e 6f72 672f 626f 747b 307d 2f7b 317d  m.org/bot{0}/{1}
-00000af0: 222e 666f 726d 6174 280a 2020 2020 2020  ".format(.      
-00000b00: 2020 2020 2020 2020 2020 746f 6b65 6e2c            token,
-00000b10: 206d 6574 686f 645f 6e61 6d65 0a20 2020   method_name.   
-00000b20: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-00000b30: 6c6f 6767 6572 2e64 6562 7567 280a 2020  logger.debug(.  
-00000b40: 2020 2020 2020 2252 6571 7565 7374 3a20        "Request: 
-00000b50: 6d65 7468 6f64 3d7b 307d 2075 726c 3d7b  method={0} url={
-00000b60: 317d 2070 6172 616d 733d 7b32 7d20 6669  1} params={2} fi
-00000b70: 6c65 733d 7b33 7d22 2e66 6f72 6d61 7428  les={3}".format(
-00000b80: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00000b90: 686f 642c 2072 6571 7565 7374 5f75 726c  hod, request_url
-00000ba0: 2c20 7061 7261 6d73 2c20 6669 6c65 730a  , params, files.
-00000bb0: 2020 2020 2020 2020 292e 7265 706c 6163          ).replac
-00000bc0: 6528 746f 6b65 6e2c 2074 6f6b 656e 2e73  e(token, token.s
-00000bd0: 706c 6974 2822 3a22 295b 305d 202b 2022  plit(":")[0] + "
-00000be0: 3a7b 544f 4b45 4e7d 2229 0a20 2020 2029  :{TOKEN}").    )
-00000bf0: 0a20 2020 2072 6561 645f 7469 6d65 6f75  .    read_timeou
-00000c00: 7420 3d20 5245 4144 5f54 494d 454f 5554  t = READ_TIMEOUT
-00000c10: 0a20 2020 2063 6f6e 6e65 6374 5f74 696d  .    connect_tim
-00000c20: 656f 7574 203d 2043 4f4e 4e45 4354 5f54  eout = CONNECT_T
-00000c30: 494d 454f 5554 0a0a 2020 2020 6966 2066  IMEOUT..    if f
-00000c40: 696c 6573 3a0a 2020 2020 2020 2020 6669  iles:.        fi
-00000c50: 6c65 735f 636f 7079 203d 2064 6963 7428  les_copy = dict(
-00000c60: 6669 6c65 7329 0a20 2020 2020 2020 2023  files).        #
-00000c70: 2070 726f 6365 7373 2074 7970 6573 2e49   process types.I
-00000c80: 6e70 7574 4669 6c65 0a20 2020 2020 2020  nputFile.       
-00000c90: 2066 6f72 206b 6579 2c20 7661 6c75 6520   for key, value 
-00000ca0: 696e 2066 696c 6573 5f63 6f70 792e 6974  in files_copy.it
-00000cb0: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
-00000cc0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00000cd0: 2876 616c 7565 2c20 7479 7065 732e 496e  (value, types.In
-00000ce0: 7075 7446 696c 6529 3a0a 2020 2020 2020  putFile):.      
-00000cf0: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
-00000d00: 6b65 795d 203d 2076 616c 7565 2e66 696c  key] = value.fil
-00000d10: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
-00000d20: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
-00000d30: 2020 2020 2069 7369 6e73 7461 6e63 6528       isinstance(
-00000d40: 7661 6c75 652c 2074 7570 6c65 290a 2020  value, tuple).  
-00000d50: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00000d60: 6420 286c 656e 2876 616c 7565 2920 3d3d  d (len(value) ==
-00000d70: 2032 290a 2020 2020 2020 2020 2020 2020   2).            
-00000d80: 2020 2020 616e 6420 6973 696e 7374 616e      and isinstan
-00000d90: 6365 2876 616c 7565 5b31 5d2c 2074 7970  ce(value[1], typ
-00000da0: 6573 2e49 6e70 7574 4669 6c65 290a 2020  es.InputFile).  
-00000db0: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
-00000dc0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00000dd0: 6573 5b6b 6579 5d20 3d20 2876 616c 7565  es[key] = (value
-00000de0: 5b30 5d2c 2076 616c 7565 5b31 5d2e 6669  [0], value[1].fi
-00000df0: 6c65 290a 0a20 2020 2069 6620 6669 6c65  le)..    if file
-00000e00: 7320 616e 6420 666f 726d 6174 5f68 6561  s and format_hea
-00000e10: 6465 725f 7061 7261 6d3a 0a20 2020 2020  der_param:.     
-00000e20: 2020 2066 6965 6c64 732e 666f 726d 6174     fields.format
-00000e30: 5f68 6561 6465 725f 7061 7261 6d20 3d20  _header_param = 
-00000e40: 5f6e 6f5f 656e 636f 6465 2866 6f72 6d61  _no_encode(forma
-00000e50: 745f 6865 6164 6572 5f70 6172 616d 290a  t_header_param).
-00000e60: 2020 2020 6966 2070 6172 616d 733a 0a20      if params:. 
-00000e70: 2020 2020 2020 2069 6620 2274 696d 656f         if "timeo
-00000e80: 7574 2220 696e 2070 6172 616d 733a 0a20  ut" in params:. 
-00000e90: 2020 2020 2020 2020 2020 2072 6561 645f             read_
-00000ea0: 7469 6d65 6f75 7420 3d20 7061 7261 6d73  timeout = params
-00000eb0: 2e70 6f70 2822 7469 6d65 6f75 7422 290a  .pop("timeout").
-00000ec0: 2020 2020 2020 2020 2020 2020 636f 6e6e              conn
-00000ed0: 6563 745f 7469 6d65 6f75 7420 3d20 7265  ect_timeout = re
-00000ee0: 6164 5f74 696d 656f 7574 0a20 2020 2020  ad_timeout.     
-00000ef0: 2020 2069 6620 226c 6f6e 675f 706f 6c6c     if "long_poll
-00000f00: 696e 675f 7469 6d65 6f75 7422 2069 6e20  ing_timeout" in 
-00000f10: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
-00000f20: 2020 2020 2320 466f 7220 6765 7455 7064      # For getUpd
-00000f30: 6174 6573 2e20 4974 2773 2074 6865 206f  ates. It's the o
-00000f40: 6e6c 7920 6675 6e63 7469 6f6e 2077 6974  nly function wit
-00000f50: 6820 7469 6d65 6f75 7420 7061 7261 6d65  h timeout parame
-00000f60: 7465 7220 6f6e 2074 6865 2042 4f54 2041  ter on the BOT A
-00000f70: 5049 2073 6964 650a 2020 2020 2020 2020  PI side.        
-00000f80: 2020 2020 6c6f 6e67 5f70 6f6c 6c69 6e67      long_polling
-00000f90: 5f74 696d 656f 7574 203d 2070 6172 616d  _timeout = param
-00000fa0: 732e 706f 7028 226c 6f6e 675f 706f 6c6c  s.pop("long_poll
-00000fb0: 696e 675f 7469 6d65 6f75 7422 290a 2020  ing_timeout").  
-00000fc0: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-00000fd0: 5b22 7469 6d65 6f75 7422 5d20 3d20 6c6f  ["timeout"] = lo
-00000fe0: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00000ff0: 7574 0a20 2020 2020 2020 2020 2020 2023  ut.            #
-00001000: 204c 6f6e 6720 706f 6c6c 696e 6720 6861   Long polling ha
-00001010: 6e67 7320 666f 7220 6120 6769 7665 6e20  ngs for a given 
-00001020: 7469 6d65 2e20 5265 6164 2074 696d 656f  time. Read timeo
-00001030: 7574 2073 686f 756c 6420 6265 2067 7265  ut should be gre
-00001040: 6174 6572 2074 6861 7420 6c6f 6e67 5f70  ater that long_p
-00001050: 6f6c 6c69 6e67 5f74 696d 656f 7574 0a20  olling_timeout. 
-00001060: 2020 2020 2020 2020 2020 2072 6561 645f             read_
-00001070: 7469 6d65 6f75 7420 3d20 6d61 7828 6c6f  timeout = max(lo
-00001080: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00001090: 7574 202b 2035 2c20 7265 6164 5f74 696d  ut + 5, read_tim
-000010a0: 656f 7574 290a 0a20 2020 2070 6172 616d  eout)..    param
-000010b0: 7320 3d20 7061 7261 6d73 206f 7220 4e6f  s = params or No
-000010c0: 6e65 2020 2320 5365 7420 7061 7261 6d73  ne  # Set params
-000010d0: 2074 6f20 4e6f 6e65 2069 6620 656d 7074   to None if empt
-000010e0: 790a 2020 2020 7265 7375 6c74 203d 204e  y.    result = N
-000010f0: 6f6e 650a 0a20 2020 2069 6620 4355 5354  one..    if CUST
-00001100: 4f4d 5f52 4551 5545 5354 5f53 454e 4445  OM_REQUEST_SENDE
-00001110: 523a 0a20 2020 2020 2020 2023 206e 6f69  R:.        # noi
-00001120: 6e73 7065 6374 696f 6e20 5079 4361 6c6c  nspection PyCall
-00001130: 696e 674e 6f6e 4361 6c6c 6162 6c65 0a20  ingNonCallable. 
-00001140: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00001150: 4355 5354 4f4d 5f52 4551 5545 5354 5f53  CUSTOM_REQUEST_S
-00001160: 454e 4445 5228 0a20 2020 2020 2020 2020  ENDER(.         
-00001170: 2020 206d 6574 686f 642c 0a20 2020 2020     method,.     
-00001180: 2020 2020 2020 2072 6571 7565 7374 5f75         request_u
-00001190: 726c 2c0a 2020 2020 2020 2020 2020 2020  rl,.            
-000011a0: 7061 7261 6d73 3d70 6172 616d 732c 0a20  params=params,. 
-000011b0: 2020 2020 2020 2020 2020 2066 696c 6573             files
-000011c0: 3d66 696c 6573 2c0a 2020 2020 2020 2020  =files,.        
-000011d0: 2020 2020 7469 6d65 6f75 743d 2863 6f6e      timeout=(con
-000011e0: 6e65 6374 5f74 696d 656f 7574 2c20 7265  nect_timeout, re
-000011f0: 6164 5f74 696d 656f 7574 292c 0a20 2020  ad_timeout),.   
-00001200: 2020 2020 2020 2020 2070 726f 7869 6573           proxies
-00001210: 3d70 726f 7879 2c0a 2020 2020 2020 2020  =proxy,.        
-00001220: 290a 2020 2020 656c 6966 2052 4554 5259  ).    elif RETRY
-00001230: 5f4f 4e5f 4552 524f 5220 616e 6420 5245  _ON_ERROR and RE
-00001240: 5452 595f 454e 4749 4e45 203d 3d20 313a  TRY_ENGINE == 1:
-00001250: 0a20 2020 2020 2020 2067 6f74 5f72 6573  .        got_res
-00001260: 756c 7420 3d20 4661 6c73 650a 2020 2020  ult = False.    
-00001270: 2020 2020 6375 7272 656e 745f 7472 7920      current_try 
-00001280: 3d20 300a 2020 2020 2020 2020 7768 696c  = 0.        whil
-00001290: 6520 6e6f 7420 676f 745f 7265 7375 6c74  e not got_result
-000012a0: 2061 6e64 2063 7572 7265 6e74 5f74 7279   and current_try
-000012b0: 203c 204d 4158 5f52 4554 5249 4553 202d   < MAX_RETRIES -
-000012c0: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-000012d0: 6375 7272 656e 745f 7472 7920 2b3d 2031  current_try += 1
-000012e0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-000012f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001300: 2020 7265 7375 6c74 203d 205f 6765 745f    result = _get_
-00001310: 7265 715f 7365 7373 696f 6e28 292e 7265  req_session().re
-00001320: 7175 6573 7428 0a20 2020 2020 2020 2020  quest(.         
-00001330: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-00001340: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
-00001350: 2020 2020 2020 2072 6571 7565 7374 5f75         request_u
-00001360: 726c 2c0a 2020 2020 2020 2020 2020 2020  rl,.            
-00001370: 2020 2020 2020 2020 7061 7261 6d73 3d70          params=p
-00001380: 6172 616d 732c 0a20 2020 2020 2020 2020  arams,.         
-00001390: 2020 2020 2020 2020 2020 2066 696c 6573             files
-000013a0: 3d66 696c 6573 2c0a 2020 2020 2020 2020  =files,.        
-000013b0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-000013c0: 6f75 743d 2863 6f6e 6e65 6374 5f74 696d  out=(connect_tim
-000013d0: 656f 7574 2c20 7265 6164 5f74 696d 656f  eout, read_timeo
-000013e0: 7574 292c 0a20 2020 2020 2020 2020 2020  ut),.           
-000013f0: 2020 2020 2020 2020 2070 726f 7869 6573           proxies
-00001400: 3d70 726f 7879 2c0a 2020 2020 2020 2020  =proxy,.        
-00001410: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00001420: 2020 2020 2020 2020 2020 676f 745f 7265            got_re
-00001430: 7375 6c74 203d 2054 7275 650a 2020 2020  sult = True.    
-00001440: 2020 2020 2020 2020 6578 6365 7074 2048          except H
-00001450: 5454 5045 7272 6f72 3a0a 2020 2020 2020  TTPError:.      
-00001460: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
-00001470: 2e64 6562 7567 280a 2020 2020 2020 2020  .debug(.        
-00001480: 2020 2020 2020 2020 2020 2020 2248 5454              "HTT
-00001490: 5020 4572 726f 7220 6f6e 207b 307d 206d  P Error on {0} m
-000014a0: 6574 686f 6420 2854 7279 2023 7b31 7d29  ethod (Try #{1})
-000014b0: 222e 666f 726d 6174 280a 2020 2020 2020  ".format(.      
-000014c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000014d0: 2020 6d65 7468 6f64 5f6e 616d 652c 2063    method_name, c
-000014e0: 7572 7265 6e74 5f74 7279 0a20 2020 2020  urrent_try.     
-000014f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00001500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001510: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-00001520: 2020 2074 696d 652e 736c 6565 7028 5245     time.sleep(RE
-00001530: 5452 595f 5449 4d45 4f55 5429 0a20 2020  TRY_TIMEOUT).   
-00001540: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00001550: 436f 6e6e 6563 7469 6f6e 4572 726f 723a  ConnectionError:
-00001560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001570: 206c 6f67 6765 722e 6465 6275 6728 0a20   logger.debug(. 
-00001580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001590: 2020 2022 436f 6e6e 6563 7469 6f6e 2045     "Connection E
-000015a0: 7272 6f72 206f 6e20 7b30 7d20 6d65 7468  rror on {0} meth
-000015b0: 6f64 2028 5472 7920 237b 317d 2922 2e66  od (Try #{1})".f
-000015c0: 6f72 6d61 7428 0a20 2020 2020 2020 2020  ormat(.         
-000015d0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000015e0: 6574 686f 645f 6e61 6d65 2c20 6375 7272  ethod_name, curr
-000015f0: 656e 745f 7472 790a 2020 2020 2020 2020  ent_try.        
-00001600: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00001610: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00001620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001630: 7469 6d65 2e73 6c65 6570 2852 4554 5259  time.sleep(RETRY
-00001640: 5f54 494d 454f 5554 290a 2020 2020 2020  _TIMEOUT).      
-00001650: 2020 2020 2020 6578 6365 7074 2054 696d        except Tim
-00001660: 656f 7574 3a0a 2020 2020 2020 2020 2020  eout:.          
-00001670: 2020 2020 2020 6c6f 6767 6572 2e64 6562        logger.deb
-00001680: 7567 280a 2020 2020 2020 2020 2020 2020  ug(.            
-00001690: 2020 2020 2020 2020 2254 696d 656f 7574          "Timeout
-000016a0: 2045 7272 6f72 206f 6e20 7b30 7d20 6d65   Error on {0} me
-000016b0: 7468 6f64 2028 5472 7920 237b 317d 2922  thod (Try #{1})"
-000016c0: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
-000016d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000016e0: 206d 6574 686f 645f 6e61 6d65 2c20 6375   method_name, cu
-000016f0: 7272 656e 745f 7472 790a 2020 2020 2020  rrent_try.      
-00001700: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00001710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001720: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00001730: 2020 7469 6d65 2e73 6c65 6570 2852 4554    time.sleep(RET
-00001740: 5259 5f54 494d 454f 5554 290a 2020 2020  RY_TIMEOUT).    
-00001750: 2020 2020 6966 206e 6f74 2067 6f74 5f72      if not got_r
-00001760: 6573 756c 743a 0a20 2020 2020 2020 2020  esult:.         
-00001770: 2020 2072 6573 756c 7420 3d20 5f67 6574     result = _get
-00001780: 5f72 6571 5f73 6573 7369 6f6e 2829 2e72  _req_session().r
-00001790: 6571 7565 7374 280a 2020 2020 2020 2020  equest(.        
-000017a0: 2020 2020 2020 2020 6d65 7468 6f64 2c0a          method,.
-000017b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000017c0: 7265 7175 6573 745f 7572 6c2c 0a20 2020  request_url,.   
-000017d0: 2020 2020 2020 2020 2020 2020 2070 6172               par
-000017e0: 616d 733d 7061 7261 6d73 2c0a 2020 2020  ams=params,.    
-000017f0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00001800: 733d 6669 6c65 732c 0a20 2020 2020 2020  s=files,.       
-00001810: 2020 2020 2020 2020 2074 696d 656f 7574           timeout
-00001820: 3d28 636f 6e6e 6563 745f 7469 6d65 6f75  =(connect_timeou
-00001830: 742c 2072 6561 645f 7469 6d65 6f75 7429  t, read_timeout)
-00001840: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00001850: 2020 7072 6f78 6965 733d 7072 6f78 792c    proxies=proxy,
-00001860: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00001870: 2020 2065 6c69 6620 5245 5452 595f 4f4e     elif RETRY_ON
-00001880: 5f45 5252 4f52 2061 6e64 2052 4554 5259  _ERROR and RETRY
-00001890: 5f45 4e47 494e 4520 3d3d 2032 3a0a 2020  _ENGINE == 2:.  
-000018a0: 2020 2020 2020 6874 7470 203d 205f 6765        http = _ge
-000018b0: 745f 7265 715f 7365 7373 696f 6e28 290a  t_req_session().
-000018c0: 2020 2020 2020 2020 2320 6e6f 696e 7370          # noinsp
-000018d0: 6563 7469 6f6e 2050 7955 6e72 6573 6f6c  ection PyUnresol
-000018e0: 7665 6452 6566 6572 656e 6365 730a 2020  vedReferences.  
-000018f0: 2020 2020 2020 7265 7472 795f 7374 7261        retry_stra
-00001900: 7465 6779 203d 2072 6571 7565 7374 732e  tegy = requests.
-00001910: 7061 636b 6167 6573 2e75 726c 6c69 6233  packages.urllib3
-00001920: 2e75 7469 6c2e 7265 7472 792e 5265 7472  .util.retry.Retr
-00001930: 7928 0a20 2020 2020 2020 2020 2020 2074  y(.            t
-00001940: 6f74 616c 3d4d 4158 5f52 4554 5249 4553  otal=MAX_RETRIES
-00001950: 2c0a 2020 2020 2020 2020 2020 2020 616c  ,.            al
-00001960: 6c6f 7765 645f 6d65 7468 6f64 733d 4e6f  lowed_methods=No
-00001970: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00001980: 6261 636b 6f66 665f 6661 6374 6f72 3d52  backoff_factor=R
-00001990: 4554 5259 5f54 494d 454f 5554 2c0a 2020  ETRY_TIMEOUT,.  
-000019a0: 2020 2020 2020 2020 2020 6261 636b 6f66            backof
-000019b0: 665f 6d61 783d 5245 5452 595f 5449 4d45  f_max=RETRY_TIME
-000019c0: 4f55 542c 0a20 2020 2020 2020 2029 0a20  OUT,.        ). 
-000019d0: 2020 2020 2020 2061 6461 7074 6572 203d         adapter =
-000019e0: 2048 5454 5041 6461 7074 6572 286d 6178   HTTPAdapter(max
-000019f0: 5f72 6574 7269 6573 3d72 6574 7279 5f73  _retries=retry_s
-00001a00: 7472 6174 6567 7929 0a20 2020 2020 2020  trategy).       
-00001a10: 2066 6f72 2070 7265 6669 7820 696e 2028   for prefix in (
-00001a20: 2268 7474 703a 2f2f 222c 2022 6874 7470  "http://", "http
-00001a30: 733a 2f2f 2229 3a0a 2020 2020 2020 2020  s://"):.        
-00001a40: 2020 2020 6874 7470 2e6d 6f75 6e74 2870      http.mount(p
-00001a50: 7265 6669 782c 2061 6461 7074 6572 290a  refix, adapter).
-00001a60: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00001a70: 2068 7474 702e 7265 7175 6573 7428 0a20   http.request(. 
-00001a80: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-00001a90: 642c 0a20 2020 2020 2020 2020 2020 2072  d,.            r
-00001aa0: 6571 7565 7374 5f75 726c 2c0a 2020 2020  equest_url,.    
-00001ab0: 2020 2020 2020 2020 7061 7261 6d73 3d70          params=p
-00001ac0: 6172 616d 732c 0a20 2020 2020 2020 2020  arams,.         
-00001ad0: 2020 2066 696c 6573 3d66 696c 6573 2c0a     files=files,.
-00001ae0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-00001af0: 6f75 743d 2863 6f6e 6e65 6374 5f74 696d  out=(connect_tim
-00001b00: 656f 7574 2c20 7265 6164 5f74 696d 656f  eout, read_timeo
-00001b10: 7574 292c 0a20 2020 2020 2020 2020 2020  ut),.           
-00001b20: 2070 726f 7869 6573 3d70 726f 7879 2c0a   proxies=proxy,.
-00001b30: 2020 2020 2020 2020 290a 2020 2020 656c          ).    el
-00001b40: 7365 3a0a 2020 2020 2020 2020 7265 7375  se:.        resu
-00001b50: 6c74 203d 205f 6765 745f 7265 715f 7365  lt = _get_req_se
-00001b60: 7373 696f 6e28 292e 7265 7175 6573 7428  ssion().request(
-00001b70: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-00001b80: 686f 642c 0a20 2020 2020 2020 2020 2020  hod,.           
-00001b90: 2072 6571 7565 7374 5f75 726c 2c0a 2020   request_url,.  
-00001ba0: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-00001bb0: 3d70 6172 616d 732c 0a20 2020 2020 2020  =params,.       
-00001bc0: 2020 2020 2066 696c 6573 3d66 696c 6573       files=files
-00001bd0: 2c0a 2020 2020 2020 2020 2020 2020 7469  ,.            ti
-00001be0: 6d65 6f75 743d 2863 6f6e 6e65 6374 5f74  meout=(connect_t
-00001bf0: 696d 656f 7574 2c20 7265 6164 5f74 696d  imeout, read_tim
-00001c00: 656f 7574 292c 0a20 2020 2020 2020 2020  eout),.         
-00001c10: 2020 2070 726f 7869 6573 3d70 726f 7879     proxies=proxy
-00001c20: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-00001c30: 206c 6f67 6765 722e 6465 6275 6728 2254   logger.debug("T
-00001c40: 6865 2073 6572 7665 7220 7265 7475 726e  he server return
-00001c50: 6564 3a20 277b 307d 2722 2e66 6f72 6d61  ed: '{0}'".forma
-00001c60: 7428 7265 7375 6c74 2e74 6578 742e 656e  t(result.text.en
-00001c70: 636f 6465 2822 7574 6638 2229 2929 0a0a  code("utf8")))..
-00001c80: 2020 2020 6a73 6f6e 5f72 6573 756c 7420      json_result 
-00001c90: 3d20 5f63 6865 636b 5f72 6573 756c 7428  = _check_result(
-00001ca0: 6d65 7468 6f64 5f6e 616d 652c 2072 6573  method_name, res
-00001cb0: 756c 7429 0a20 2020 2069 6620 6a73 6f6e  ult).    if json
-00001cc0: 5f72 6573 756c 743a 0a20 2020 2020 2020  _result:.       
-00001cd0: 2072 6574 7572 6e20 6a73 6f6e 5f72 6573   return json_res
-00001ce0: 756c 745b 2272 6573 756c 7422 5d0a 0a0a  ult["result"]...
-00001cf0: 6465 6620 5f63 6865 636b 5f72 6573 756c  def _check_resul
-00001d00: 7428 6d65 7468 6f64 5f6e 616d 652c 2072  t(method_name, r
-00001d10: 6573 756c 7429 3a0a 2020 2020 2222 220a  esult):.    """.
-00001d20: 2020 2020 4368 6563 6b73 2077 6865 7468      Checks wheth
-00001d30: 6572 2060 7265 7375 6c74 6020 6973 2061  er `result` is a
-00001d40: 2076 616c 6964 2041 5049 2072 6573 706f   valid API respo
-00001d50: 6e73 652e 0a20 2020 2041 2072 6573 756c  nse..    A resul
-00001d60: 7420 6973 2063 6f6e 7369 6465 7265 6420  t is considered 
-00001d70: 696e 7661 6c69 6420 6966 3a0a 2020 2020  invalid if:.    
-00001d80: 2020 2020 2d20 5468 6520 7365 7276 6572      - The server
-00001d90: 2072 6574 7572 6e65 6420 616e 2048 5454   returned an HTT
-00001da0: 5020 7265 7370 6f6e 7365 2063 6f64 6520  P response code 
-00001db0: 6f74 6865 7220 7468 616e 2032 3030 0a20  other than 200. 
-00001dc0: 2020 2020 2020 202d 2054 6865 2063 6f6e         - The con
-00001dd0: 7465 6e74 206f 6620 7468 6520 7265 7375  tent of the resu
-00001de0: 6c74 2069 7320 696e 7661 6c69 6420 4a53  lt is invalid JS
-00001df0: 4f4e 2e0a 2020 2020 2020 2020 2d20 5468  ON..        - Th
-00001e00: 6520 6d65 7468 6f64 2063 616c 6c20 7761  e method call wa
-00001e10: 7320 756e 7375 6363 6573 7366 756c 2028  s unsuccessful (
-00001e20: 5468 6520 4a53 4f4e 2027 6f6b 2720 6669  The JSON 'ok' fi
-00001e30: 656c 6420 6571 7561 6c73 2046 616c 7365  eld equals False
-00001e40: 290a 0a20 2020 203a 7261 6973 6573 2041  )..    :raises A
-00001e50: 7069 4578 6365 7074 696f 6e3a 2069 6620  piException: if 
-00001e60: 6f6e 6520 6f66 2074 6865 2061 626f 7665  one of the above
-00001e70: 206c 6973 7465 6420 6361 7365 7320 6973   listed cases is
-00001e80: 2061 7070 6c69 6361 626c 650a 2020 2020   applicable.    
-00001e90: 3a70 6172 616d 206d 6574 686f 645f 6e61  :param method_na
-00001ea0: 6d65 3a20 5468 6520 6e61 6d65 206f 6620  me: The name of 
-00001eb0: 7468 6520 6d65 7468 6f64 2063 616c 6c65  the method calle
-00001ec0: 640a 2020 2020 3a70 6172 616d 2072 6573  d.    :param res
-00001ed0: 756c 743a 2054 6865 2072 6574 7572 6e65  ult: The returne
-00001ee0: 6420 7265 7375 6c74 206f 6620 7468 6520  d result of the 
-00001ef0: 6d65 7468 6f64 2072 6571 7565 7374 0a20  method request. 
-00001f00: 2020 203a 7265 7475 726e 3a20 5468 6520     :return: The 
-00001f10: 7265 7375 6c74 2070 6172 7365 6420 746f  result parsed to
-00001f20: 2061 204a 534f 4e20 6469 6374 696f 6e61   a JSON dictiona
-00001f30: 7279 2e0a 2020 2020 2222 220a 2020 2020  ry..    """.    
-00001f40: 7472 793a 0a20 2020 2020 2020 2072 6573  try:.        res
-00001f50: 756c 745f 6a73 6f6e 203d 2072 6573 756c  ult_json = resul
-00001f60: 742e 6a73 6f6e 2829 0a20 2020 2065 7863  t.json().    exc
-00001f70: 6570 743a 0a20 2020 2020 2020 2069 6620  ept:.        if 
-00001f80: 7265 7375 6c74 2e73 7461 7475 735f 636f  result.status_co
-00001f90: 6465 2021 3d20 3230 303a 0a20 2020 2020  de != 200:.     
-00001fa0: 2020 2020 2020 2072 6169 7365 2041 7069         raise Api
-00001fb0: 4854 5450 4578 6365 7074 696f 6e28 6d65  HTTPException(me
-00001fc0: 7468 6f64 5f6e 616d 652c 2072 6573 756c  thod_name, resul
-00001fd0: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
-00001fe0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00001ff0: 7365 2041 7069 496e 7661 6c69 644a 534f  se ApiInvalidJSO
-00002000: 4e45 7863 6570 7469 6f6e 286d 6574 686f  NException(metho
-00002010: 645f 6e61 6d65 2c20 7265 7375 6c74 290a  d_name, result).
-00002020: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00002030: 2020 6966 206e 6f74 2072 6573 756c 745f    if not result_
-00002040: 6a73 6f6e 5b22 6f6b 225d 3a0a 2020 2020  json["ok"]:.    
-00002050: 2020 2020 2020 2020 7261 6973 6520 4170          raise Ap
-00002060: 6954 656c 6567 7261 6d45 7863 6570 7469  iTelegramExcepti
-00002070: 6f6e 286d 6574 686f 645f 6e61 6d65 2c20  on(method_name, 
-00002080: 7265 7375 6c74 2c20 7265 7375 6c74 5f6a  result, result_j
-00002090: 736f 6e29 0a0a 2020 2020 2020 2020 7265  son)..        re
-000020a0: 7475 726e 2072 6573 756c 745f 6a73 6f6e  turn result_json
-000020b0: 0a0a 0a64 6566 2067 6574 5f6d 6528 746f  ...def get_me(to
-000020c0: 6b65 6e29 3a0a 2020 2020 6d65 7468 6f64  ken):.    method
-000020d0: 5f75 726c 203d 2072 2267 6574 4d65 220a  _url = r"getMe".
-000020e0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-000020f0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00002100: 6d65 7468 6f64 5f75 726c 290a 0a0a 6465  method_url)...de
-00002110: 6620 6c6f 675f 6f75 7428 746f 6b65 6e29  f log_out(token)
-00002120: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00002130: 203d 2072 226c 6f67 4f75 7422 0a20 2020   = r"logOut".   
-00002140: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00002150: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00002160: 686f 645f 7572 6c29 0a0a 0a64 6566 2063  hod_url)...def c
-00002170: 6c6f 7365 2874 6f6b 656e 293a 0a20 2020  lose(token):.   
-00002180: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
-00002190: 636c 6f73 6522 0a20 2020 2072 6574 7572  close".    retur
-000021a0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-000021b0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-000021c0: 6c29 0a0a 0a64 6566 2067 6574 5f66 696c  l)...def get_fil
-000021d0: 6528 746f 6b65 6e2c 2066 696c 655f 6964  e(token, file_id
-000021e0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-000021f0: 6c20 3d20 7222 6765 7446 696c 6522 0a20  l = r"getFile". 
-00002200: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00002210: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00002220: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00002230: 733d 7b22 6669 6c65 5f69 6422 3a20 6669  s={"file_id": fi
-00002240: 6c65 5f69 647d 290a 0a0a 6465 6620 6765  le_id})...def ge
-00002250: 745f 6669 6c65 5f75 726c 2874 6f6b 656e  t_file_url(token
-00002260: 2c20 6669 6c65 5f69 6429 3a0a 2020 2020  , file_id):.    
-00002270: 6966 2046 494c 455f 5552 4c20 6973 204e  if FILE_URL is N
-00002280: 6f6e 653a 0a20 2020 2020 2020 2069 6620  one:.        if 
-00002290: 6c65 6e28 746f 6b65 6e29 203d 3d20 3531  len(token) == 51
-000022a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000022b0: 7475 726e 2066 2268 7474 7073 3a2f 2f74  turn f"https://t
-000022c0: 6170 692e 6261 6c65 2e61 692f 6669 6c65  api.bale.ai/file
-000022d0: 2f62 6f74 7b74 6f6b 656e 7d2f 7b66 696c  /bot{token}/{fil
-000022e0: 655f 6964 7d22 0a20 2020 2020 2020 2072  e_id}".        r
-000022f0: 6574 7572 6e20 2268 7474 7073 3a2f 2f61  eturn "https://a
-00002300: 7069 2e74 656c 6567 7261 6d2e 6f72 672f  pi.telegram.org/
-00002310: 6669 6c65 2f62 6f74 7b30 7d2f 7b31 7d22  file/bot{0}/{1}"
-00002320: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
-00002330: 2020 2020 2074 6f6b 656e 2c20 6765 745f       token, get_
-00002340: 6669 6c65 2874 6f6b 656e 2c20 6669 6c65  file(token, file
-00002350: 5f69 6429 5b22 6669 6c65 5f70 6174 6822  _id)["file_path"
-00002360: 5d0a 2020 2020 2020 2020 290a 2020 2020  ].        ).    
-00002370: 656c 7365 3a0a 2020 2020 2020 2020 2320  else:.        # 
-00002380: 6e6f 696e 7370 6563 7469 6f6e 2050 7955  noinspection PyU
-00002390: 6e72 6573 6f6c 7665 6452 6566 6572 656e  nresolvedReferen
-000023a0: 6365 730a 2020 2020 2020 2020 7265 7475  ces.        retu
-000023b0: 726e 2046 494c 455f 5552 4c2e 666f 726d  rn FILE_URL.form
-000023c0: 6174 2874 6f6b 656e 2c20 6765 745f 6669  at(token, get_fi
-000023d0: 6c65 2874 6f6b 656e 2c20 6669 6c65 5f69  le(token, file_i
-000023e0: 6429 5b22 6669 6c65 5f70 6174 6822 5d29  d)["file_path"])
-000023f0: 0a0a 0a64 6566 2064 6f77 6e6c 6f61 645f  ...def download_
-00002400: 6669 6c65 2874 6f6b 656e 2c20 6669 6c65  file(token, file
-00002410: 5f70 6174 6829 3a0a 2020 2020 6966 2046  _path):.    if F
-00002420: 494c 455f 5552 4c20 6973 204e 6f6e 653a  ILE_URL is None:
-00002430: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
-00002440: 746f 6b65 6e29 203d 3d20 3531 3a0a 2020  token) == 51:.  
-00002450: 2020 2020 2020 2020 2020 7572 6c20 3d20            url = 
-00002460: 6622 6874 7470 733a 2f2f 7461 7069 2e62  f"https://tapi.b
-00002470: 616c 652e 6169 2f66 696c 652f 626f 747b  ale.ai/file/bot{
-00002480: 746f 6b65 6e7d 2f7b 6669 6c65 5f70 6174  token}/{file_pat
-00002490: 687d 220a 2020 2020 2020 2020 656c 7365  h}".        else
-000024a0: 3a0a 2020 2020 2020 2020 2020 2020 7572  :.            ur
-000024b0: 6c20 3d20 2268 7474 7073 3a2f 2f61 7069  l = "https://api
-000024c0: 2e74 656c 6567 7261 6d2e 6f72 672f 6669  .telegram.org/fi
-000024d0: 6c65 2f62 6f74 7b30 7d2f 7b31 7d22 2e66  le/bot{0}/{1}".f
-000024e0: 6f72 6d61 7428 746f 6b65 6e2c 2066 696c  ormat(token, fil
-000024f0: 655f 7061 7468 290a 2020 2020 656c 7365  e_path).    else
-00002500: 3a0a 2020 2020 2020 2020 2320 6e6f 696e  :.        # noin
-00002510: 7370 6563 7469 6f6e 2050 7955 6e72 6573  spection PyUnres
-00002520: 6f6c 7665 6452 6566 6572 656e 6365 730a  olvedReferences.
-00002530: 2020 2020 2020 2020 7572 6c20 3d20 4649          url = FI
-00002540: 4c45 5f55 524c 2e66 6f72 6d61 7428 746f  LE_URL.format(to
-00002550: 6b65 6e2c 2066 696c 655f 7061 7468 290a  ken, file_path).
-00002560: 0a20 2020 2072 6573 756c 7420 3d20 5f67  .    result = _g
-00002570: 6574 5f72 6571 5f73 6573 7369 6f6e 2829  et_req_session()
-00002580: 2e67 6574 2875 726c 2c20 7072 6f78 6965  .get(url, proxie
-00002590: 733d 7072 6f78 7929 0a20 2020 2069 6620  s=proxy).    if 
-000025a0: 7265 7375 6c74 2e73 7461 7475 735f 636f  result.status_co
-000025b0: 6465 2021 3d20 3230 303a 0a20 2020 2020  de != 200:.     
-000025c0: 2020 2072 6169 7365 2041 7069 4854 5450     raise ApiHTTP
-000025d0: 4578 6365 7074 696f 6e28 2244 6f77 6e6c  Exception("Downl
-000025e0: 6f61 6420 6669 6c65 222c 2072 6573 756c  oad file", resul
-000025f0: 7429 0a0a 2020 2020 7265 7475 726e 2072  t)..    return r
-00002600: 6573 756c 742e 636f 6e74 656e 740a 0a0a  esult.content...
-00002610: 6465 6620 7365 6e64 5f6d 6573 7361 6765  def send_message
-00002620: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-00002630: 2063 6861 745f 6964 2c0a 2020 2020 7465   chat_id,.    te
-00002640: 7874 2c0a 2020 2020 7265 706c 795f 6d61  xt,.    reply_ma
-00002650: 726b 7570 3d4e 6f6e 652c 0a20 2020 2070  rkup=None,.    p
-00002660: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c0a  arse_mode=None,.
-00002670: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
-00002680: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
-00002690: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
-000026a0: 0a20 2020 2065 6e74 6974 6965 733d 4e6f  .    entities=No
-000026b0: 6e65 2c0a 2020 2020 7072 6f74 6563 745f  ne,.    protect_
-000026c0: 636f 6e74 656e 743d 4e6f 6e65 2c0a 2020  content=None,.  
-000026d0: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
-000026e0: 5f69 643d 4e6f 6e65 2c0a 2020 2020 7265  _id=None,.    re
-000026f0: 706c 795f 7061 7261 6d65 7465 7273 3d4e  ply_parameters=N
-00002700: 6f6e 652c 0a20 2020 206c 696e 6b5f 7072  one,.    link_pr
-00002710: 6576 6965 775f 6f70 7469 6f6e 733d 4e6f  eview_options=No
-00002720: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
-00002730: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
-00002740: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
-00002750: 6f64 5f75 726c 203d 2072 2273 656e 644d  od_url = r"sendM
-00002760: 6573 7361 6765 220a 2020 2020 7061 796c  essage".    payl
-00002770: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
-00002780: 3a20 7374 7228 6368 6174 5f69 6429 2c20  : str(chat_id), 
-00002790: 2274 6578 7422 3a20 7465 7874 7d0a 2020  "text": text}.  
-000027a0: 2020 6966 206c 696e 6b5f 7072 6576 6965    if link_previe
-000027b0: 775f 6f70 7469 6f6e 7320 6973 206e 6f74  w_options is not
-000027c0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000027d0: 6179 6c6f 6164 5b22 6c69 6e6b 5f70 7265  ayload["link_pre
-000027e0: 7669 6577 5f6f 7074 696f 6e73 225d 203d  view_options"] =
-000027f0: 206c 696e 6b5f 7072 6576 6965 775f 6f70   link_preview_op
-00002800: 7469 6f6e 732e 746f 5f6a 736f 6e28 290a  tions.to_json().
-00002810: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
-00002820: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
-00002830: 6c6f 6164 5b22 7265 706c 795f 6d61 726b  load["reply_mark
-00002840: 7570 225d 203d 205f 636f 6e76 6572 745f  up"] = _convert_
-00002850: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-00002860: 6b75 7029 0a20 2020 2069 6620 7061 7273  kup).    if pars
-00002870: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
-00002880: 7061 796c 6f61 645b 2270 6172 7365 5f6d  payload["parse_m
-00002890: 6f64 6522 5d20 3d20 7061 7273 655f 6d6f  ode"] = parse_mo
-000028a0: 6465 0a20 2020 2069 6620 6469 7361 626c  de.    if disabl
-000028b0: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-000028c0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000028d0: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
-000028e0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-000028f0: 6e22 5d20 3d20 6469 7361 626c 655f 6e6f  n"] = disable_no
-00002900: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-00002910: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00002920: 2020 2070 6179 6c6f 6164 5b22 7469 6d65     payload["time
-00002930: 6f75 7422 5d20 3d20 7469 6d65 6f75 740a  out"] = timeout.
-00002940: 2020 2020 6966 2065 6e74 6974 6965 733a      if entities:
-00002950: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00002960: 5b22 656e 7469 7469 6573 225d 203d 206a  ["entities"] = j
-00002970: 736f 6e2e 6475 6d70 7328 7479 7065 732e  son.dumps(types.
-00002980: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
-00002990: 5f6c 6973 745f 6f66 5f64 6963 7473 2865  _list_of_dicts(e
-000029a0: 6e74 6974 6965 7329 290a 2020 2020 6966  ntities)).    if
-000029b0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-000029c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000029d0: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-000029e0: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
-000029f0: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00002a00: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
-00002a10: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
-00002a20: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
-00002a30: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
-00002a40: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-00002a50: 6164 5f69 640a 2020 2020 6966 2072 6570  ad_id.    if rep
-00002a60: 6c79 5f70 6172 616d 6574 6572 7320 6973  ly_parameters is
-00002a70: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00002a80: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
-00002a90: 795f 7061 7261 6d65 7465 7273 225d 203d  y_parameters"] =
-00002aa0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-00002ab0: 732e 746f 5f6a 736f 6e28 290a 2020 2020  s.to_json().    
-00002ac0: 6966 2062 7573 696e 6573 735f 636f 6e6e  if business_conn
-00002ad0: 6563 7469 6f6e 5f69 643a 0a20 2020 2020  ection_id:.     
-00002ae0: 2020 2070 6179 6c6f 6164 5b22 6275 7369     payload["busi
+00000040: 650a 0a74 7279 3a0a 2020 2020 2320 6e6f  e..try:.    # no
+00000050: 696e 7370 6563 7469 6f6e 2050 7950 6163  inspection PyPac
+00000060: 6b61 6765 5265 7175 6972 656d 656e 7473  kageRequirements
+00000070: 0a20 2020 2069 6d70 6f72 7420 756a 736f  .    import ujso
+00000080: 6e20 6173 206a 736f 6e0a 6578 6365 7074  n as json.except
+00000090: 2049 6d70 6f72 7445 7272 6f72 3a0a 2020   ImportError:.  
+000000a0: 2020 696d 706f 7274 206a 736f 6e0a 0a69    import json..i
+000000b0: 6d70 6f72 7420 7265 7175 6573 7473 0a66  mport requests.f
+000000c0: 726f 6d20 7265 7175 6573 7473 2e61 6461  rom requests.ada
+000000d0: 7074 6572 7320 696d 706f 7274 2048 5454  pters import HTT
+000000e0: 5041 6461 7074 6572 0a66 726f 6d20 7265  PAdapter.from re
+000000f0: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
+00000100: 7320 696d 706f 7274 2043 6f6e 6e65 6374  s import Connect
+00000110: 696f 6e45 7272 6f72 2c20 4854 5450 4572  ionError, HTTPEr
+00000120: 726f 722c 2054 696d 656f 7574 0a0a 7472  ror, Timeout..tr
+00000130: 793a 0a20 2020 2023 206e 6f69 6e73 7065  y:.    # noinspe
+00000140: 6374 696f 6e20 5079 556e 7265 736f 6c76  ction PyUnresolv
+00000150: 6564 5265 6665 7265 6e63 6573 0a20 2020  edReferences.   
+00000160: 2066 726f 6d20 7265 7175 6573 7473 2e70   from requests.p
+00000170: 6163 6b61 6765 732e 7572 6c6c 6962 3320  ackages.urllib3 
+00000180: 696d 706f 7274 2066 6965 6c64 730a 0a20  import fields.. 
+00000190: 2020 2066 6f72 6d61 745f 6865 6164 6572     format_header
+000001a0: 5f70 6172 616d 203d 2066 6965 6c64 732e  _param = fields.
+000001b0: 666f 726d 6174 5f68 6561 6465 725f 7061  format_header_pa
+000001c0: 7261 6d0a 6578 6365 7074 2049 6d70 6f72  ram.except Impor
+000001d0: 7445 7272 6f72 3a0a 2020 2020 666f 726d  tError:.    form
+000001e0: 6174 5f68 6561 6465 725f 7061 7261 6d20  at_header_param 
+000001f0: 3d20 4e6f 6e65 0a69 6d70 6f72 7420 7465  = None.import te
+00000200: 6c65 626f 740a 6672 6f6d 2074 656c 6562  lebot.from teleb
+00000210: 6f74 2069 6d70 6f72 7420 7479 7065 732c  ot import types,
+00000220: 2075 7469 6c0a 0a6c 6f67 6765 7220 3d20   util..logger = 
+00000230: 7465 6c65 626f 742e 6c6f 6767 6572 0a0a  telebot.logger..
+00000240: 7072 6f78 7920 3d20 4e6f 6e65 0a73 6573  proxy = None.ses
+00000250: 7369 6f6e 203d 204e 6f6e 650a 0a41 5049  sion = None..API
+00000260: 5f55 524c 203d 204e 6f6e 650a 4649 4c45  _URL = None.FILE
+00000270: 5f55 524c 203d 204e 6f6e 650a 0a43 4f4e  _URL = None..CON
+00000280: 4e45 4354 5f54 494d 454f 5554 203d 2031  NECT_TIMEOUT = 1
+00000290: 350a 5245 4144 5f54 494d 454f 5554 203d  5.READ_TIMEOUT =
+000002a0: 2033 300a 0a4c 4f4e 475f 504f 4c4c 494e   30..LONG_POLLIN
+000002b0: 475f 5449 4d45 4f55 5420 3d20 3130 2020  G_TIMEOUT = 10  
+000002c0: 2320 5368 6f75 6c64 2062 6520 706f 7369  # Should be posi
+000002d0: 7469 7665 2c20 7368 6f72 7420 706f 6c6c  tive, short poll
+000002e0: 696e 6720 7368 6f75 6c64 2062 6520 7573  ing should be us
+000002f0: 6564 2066 6f72 2074 6573 7469 6e67 2070  ed for testing p
+00000300: 7572 706f 7365 7320 6f6e 6c79 2028 6874  urposes only (ht
+00000310: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+00000320: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+00000330: 2367 6574 7570 6461 7465 7329 0a0a 5345  #getupdates)..SE
+00000340: 5353 494f 4e5f 5449 4d45 5f54 4f5f 4c49  SSION_TIME_TO_LI
+00000350: 5645 203d 2036 3030 2020 2320 496e 2073  VE = 600  # In s
+00000360: 6563 6f6e 6473 2e20 4e6f 6e65 202d 206c  econds. None - l
+00000370: 6976 6520 666f 7265 7665 722c 2030 202d  ive forever, 0 -
+00000380: 206f 6e65 2d74 696d 650a 0a52 4554 5259   one-time..RETRY
+00000390: 5f4f 4e5f 4552 524f 5220 3d20 4661 6c73  _ON_ERROR = Fals
+000003a0: 650a 5245 5452 595f 5449 4d45 4f55 5420  e.RETRY_TIMEOUT 
+000003b0: 3d20 320a 4d41 585f 5245 5452 4945 5320  = 2.MAX_RETRIES 
+000003c0: 3d20 3135 0a52 4554 5259 5f45 4e47 494e  = 15.RETRY_ENGIN
+000003d0: 4520 3d20 310a 0a43 5553 544f 4d5f 5345  E = 1..CUSTOM_SE
+000003e0: 5249 414c 495a 4552 203d 204e 6f6e 650a  RIALIZER = None.
+000003f0: 4355 5354 4f4d 5f52 4551 5545 5354 5f53  CUSTOM_REQUEST_S
+00000400: 454e 4445 5220 3d20 4e6f 6e65 0a0a 454e  ENDER = None..EN
+00000410: 4142 4c45 5f4d 4944 444c 4557 4152 4520  ABLE_MIDDLEWARE 
+00000420: 3d20 4661 6c73 650a 0a0a 6465 6620 5f67  = False...def _g
+00000430: 6574 5f72 6571 5f73 6573 7369 6f6e 2872  et_req_session(r
+00000440: 6573 6574 3d46 616c 7365 293a 0a20 2020  eset=False):.   
+00000450: 2069 6620 5345 5353 494f 4e5f 5449 4d45   if SESSION_TIME
+00000460: 5f54 4f5f 4c49 5645 3a0a 2020 2020 2020  _TO_LIVE:.      
+00000470: 2020 2320 4966 2073 6573 7369 6f6e 2054    # If session T
+00000480: 544c 2069 7320 7365 7420 2d20 6368 6563  TL is set - chec
+00000490: 6b20 7469 6d65 2070 6173 7365 640a 2020  k time passed.  
+000004a0: 2020 2020 2020 6372 6561 7469 6f6e 5f64        creation_d
+000004b0: 6174 6520 3d20 7574 696c 2e70 6572 5f74  ate = util.per_t
+000004c0: 6872 6561 6428 0a20 2020 2020 2020 2020  hread(.         
+000004d0: 2020 2022 7265 715f 7365 7373 696f 6e5f     "req_session_
+000004e0: 7469 6d65 222c 206c 616d 6264 613a 2064  time", lambda: d
+000004f0: 6174 6574 696d 652e 6e6f 7728 292c 2072  atetime.now(), r
+00000500: 6573 6574 0a20 2020 2020 2020 2029 0a20  eset.        ). 
+00000510: 2020 2020 2020 2023 206e 6f69 6e73 7065         # noinspe
+00000520: 6374 696f 6e20 5079 5479 7065 4368 6563  ction PyTypeChec
+00000530: 6b65 720a 2020 2020 2020 2020 6966 2028  ker.        if (
+00000540: 6461 7465 7469 6d65 2e6e 6f77 2829 202d  datetime.now() -
+00000550: 2063 7265 6174 696f 6e5f 6461 7465 292e   creation_date).
+00000560: 746f 7461 6c5f 7365 636f 6e64 7328 2920  total_seconds() 
+00000570: 3e20 5345 5353 494f 4e5f 5449 4d45 5f54  > SESSION_TIME_T
+00000580: 4f5f 4c49 5645 3a0a 2020 2020 2020 2020  O_LIVE:.        
+00000590: 2020 2020 2320 466f 7263 6520 7365 7373      # Force sess
+000005a0: 696f 6e20 7265 7365 740a 2020 2020 2020  ion reset.      
+000005b0: 2020 2020 2020 7265 7365 7420 3d20 5472        reset = Tr
+000005c0: 7565 0a20 2020 2020 2020 2020 2020 2023  ue.            #
+000005d0: 2053 6176 6520 7265 7365 7420 7469 6d65   Save reset time
+000005e0: 0a20 2020 2020 2020 2020 2020 2075 7469  .            uti
+000005f0: 6c2e 7065 725f 7468 7265 6164 2822 7265  l.per_thread("re
+00000600: 715f 7365 7373 696f 6e5f 7469 6d65 222c  q_session_time",
+00000610: 206c 616d 6264 613a 2064 6174 6574 696d   lambda: datetim
+00000620: 652e 6e6f 7728 292c 2054 7275 6529 0a0a  e.now(), True)..
+00000630: 2020 2020 6966 2053 4553 5349 4f4e 5f54      if SESSION_T
+00000640: 494d 455f 544f 5f4c 4956 4520 3d3d 2030  IME_TO_LIVE == 0
+00000650: 3a0a 2020 2020 2020 2020 2320 5365 7373  :.        # Sess
+00000660: 696f 6e20 6973 206f 6e65 2d74 696d 6520  ion is one-time 
+00000670: 7573 650a 2020 2020 2020 2020 7265 7475  use.        retu
+00000680: 726e 2072 6571 7565 7374 732e 7365 7373  rn requests.sess
+00000690: 696f 6e73 2e53 6573 7369 6f6e 2829 0a20  ions.Session(). 
+000006a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000006b0: 2023 2053 6573 7369 6f6e 206c 6976 6573   # Session lives
+000006c0: 2073 6f6d 6520 7469 6d65 206f 7220 666f   some time or fo
+000006d0: 7265 7665 7220 6f6e 6365 2063 7265 6174  rever once creat
+000006e0: 6564 2e20 4465 6661 756c 740a 2020 2020  ed. Default.    
+000006f0: 2020 2020 7265 7475 726e 2075 7469 6c2e      return util.
+00000700: 7065 725f 7468 7265 6164 280a 2020 2020  per_thread(.    
+00000710: 2020 2020 2020 2020 2272 6571 5f73 6573          "req_ses
+00000720: 7369 6f6e 222c 0a20 2020 2020 2020 2020  sion",.         
+00000730: 2020 206c 616d 6264 613a 2073 6573 7369     lambda: sessi
+00000740: 6f6e 2069 6620 7365 7373 696f 6e20 656c  on if session el
+00000750: 7365 2072 6571 7565 7374 732e 7365 7373  se requests.sess
+00000760: 696f 6e73 2e53 6573 7369 6f6e 2829 2c0a  ions.Session(),.
+00000770: 2020 2020 2020 2020 2020 2020 7265 7365              rese
+00000780: 742c 0a20 2020 2020 2020 2029 0a0a 0a64  t,.        )...d
+00000790: 6566 205f 6d61 6b65 5f72 6571 7565 7374  ef _make_request
+000007a0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f6e  (token, method_n
+000007b0: 616d 652c 206d 6574 686f 643d 2267 6574  ame, method="get
+000007c0: 222c 2070 6172 616d 733d 4e6f 6e65 2c20  ", params=None, 
+000007d0: 6669 6c65 733d 4e6f 6e65 293a 0a20 2020  files=None):.   
+000007e0: 2022 2222 0a20 2020 204d 616b 6573 2061   """.    Makes a
+000007f0: 2072 6571 7565 7374 2074 6f20 7468 6520   request to the 
+00000800: 5465 6c65 6772 616d 2041 5049 2e0a 2020  Telegram API..  
+00000810: 2020 3a70 6172 616d 2074 6f6b 656e 3a20    :param token: 
+00000820: 5468 6520 626f 7427 7320 4150 4920 746f  The bot's API to
+00000830: 6b65 6e2e 2028 4372 6561 7465 6420 7769  ken. (Created wi
+00000840: 7468 2040 426f 7446 6174 6865 7229 0a20  th @BotFather). 
+00000850: 2020 203a 7061 7261 6d20 6d65 7468 6f64     :param method
+00000860: 5f6e 616d 653a 204e 616d 6520 6f66 2074  _name: Name of t
+00000870: 6865 2041 5049 206d 6574 686f 6420 746f  he API method to
+00000880: 2062 6520 6361 6c6c 6564 2e20 2845 2e67   be called. (E.g
+00000890: 2e20 2767 6574 5570 6461 7465 7327 290a  . 'getUpdates').
+000008a0: 2020 2020 3a70 6172 616d 206d 6574 686f      :param metho
+000008b0: 643a 2048 5454 5020 6d65 7468 6f64 2074  d: HTTP method t
+000008c0: 6f20 6265 2075 7365 642e 2044 6566 6175  o be used. Defau
+000008d0: 6c74 7320 746f 2027 6765 7427 2e0a 2020  lts to 'get'..  
+000008e0: 2020 3a70 6172 616d 2070 6172 616d 733a    :param params:
+000008f0: 204f 7074 696f 6e61 6c20 7061 7261 6d65   Optional parame
+00000900: 7465 7273 2e20 5368 6f75 6c64 2062 6520  ters. Should be 
+00000910: 6120 6469 6374 696f 6e61 7279 2077 6974  a dictionary wit
+00000920: 6820 6b65 792d 7661 6c75 6520 7061 6972  h key-value pair
+00000930: 732e 0a20 2020 203a 7061 7261 6d20 6669  s..    :param fi
+00000940: 6c65 733a 204f 7074 696f 6e61 6c20 6669  les: Optional fi
+00000950: 6c65 732e 0a20 2020 203a 7265 7475 726e  les..    :return
+00000960: 3a20 5468 6520 7265 7375 6c74 2070 6172  : The result par
+00000970: 7365 6420 746f 2061 204a 534f 4e20 6469  sed to a JSON di
+00000980: 6374 696f 6e61 7279 2e0a 2020 2020 2222  ctionary..    ""
+00000990: 220a 2020 2020 6966 206e 6f74 2074 6f6b  ".    if not tok
+000009a0: 656e 3a0a 2020 2020 2020 2020 7261 6973  en:.        rais
+000009b0: 6520 4578 6365 7074 696f 6e28 2242 6f74  e Exception("Bot
+000009c0: 2074 6f6b 656e 2069 7320 6e6f 7420 6465   token is not de
+000009d0: 6669 6e65 6422 290a 2020 2020 6966 2041  fined").    if A
+000009e0: 5049 5f55 524c 3a0a 2020 2020 2020 2020  PI_URL:.        
+000009f0: 2320 6e6f 696e 7370 6563 7469 6f6e 2050  # noinspection P
+00000a00: 7955 6e72 6573 6f6c 7665 6452 6566 6572  yUnresolvedRefer
+00000a10: 656e 6365 730a 2020 2020 2020 2020 7265  ences.        re
+00000a20: 7175 6573 745f 7572 6c20 3d20 4150 495f  quest_url = API_
+00000a30: 5552 4c2e 666f 726d 6174 2874 6f6b 656e  URL.format(token
+00000a40: 2c20 6d65 7468 6f64 5f6e 616d 6529 0a20  , method_name). 
+00000a50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00000a60: 2069 6620 6c65 6e28 746f 6b65 6e29 203d   if len(token) =
+00000a70: 3d20 3531 3a0a 2020 2020 2020 2020 2020  = 51:.          
+00000a80: 2020 7265 7175 6573 745f 7572 6c20 3d20    request_url = 
+00000a90: 2268 7474 7073 3a2f 2f74 6170 692e 6261  "https://tapi.ba
+00000aa0: 6c65 2e61 692f 626f 747b 307d 2f7b 317d  le.ai/bot{0}/{1}
+00000ab0: 222e 666f 726d 6174 2874 6f6b 656e 2c20  ".format(token, 
+00000ac0: 6d65 7468 6f64 5f6e 616d 6529 0a20 2020  method_name).   
+00000ad0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00000ae0: 2020 2020 2020 2072 6571 7565 7374 5f75         request_u
+00000af0: 726c 203d 2022 6874 7470 733a 2f2f 6170  rl = "https://ap
+00000b00: 692e 7465 6c65 6772 616d 2e6f 7267 2f62  i.telegram.org/b
+00000b10: 6f74 7b30 7d2f 7b31 7d22 2e66 6f72 6d61  ot{0}/{1}".forma
+00000b20: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+00000b30: 2020 2074 6f6b 656e 2c20 6d65 7468 6f64     token, method
+00000b40: 5f6e 616d 650a 2020 2020 2020 2020 2020  _name.          
+00000b50: 2020 290a 0a20 2020 206c 6f67 6765 722e    )..    logger.
+00000b60: 6465 6275 6728 0a20 2020 2020 2020 2022  debug(.        "
+00000b70: 5265 7175 6573 743a 206d 6574 686f 643d  Request: method=
+00000b80: 7b30 7d20 7572 6c3d 7b31 7d20 7061 7261  {0} url={1} para
+00000b90: 6d73 3d7b 327d 2066 696c 6573 3d7b 337d  ms={2} files={3}
+00000ba0: 222e 666f 726d 6174 280a 2020 2020 2020  ".format(.      
+00000bb0: 2020 2020 2020 6d65 7468 6f64 2c20 7265        method, re
+00000bc0: 7175 6573 745f 7572 6c2c 2070 6172 616d  quest_url, param
+00000bd0: 732c 2066 696c 6573 0a20 2020 2020 2020  s, files.       
+00000be0: 2029 2e72 6570 6c61 6365 2874 6f6b 656e   ).replace(token
+00000bf0: 2c20 746f 6b65 6e2e 7370 6c69 7428 223a  , token.split(":
+00000c00: 2229 5b30 5d20 2b20 223a 7b54 4f4b 454e  ")[0] + ":{TOKEN
+00000c10: 7d22 290a 2020 2020 290a 2020 2020 7265  }").    ).    re
+00000c20: 6164 5f74 696d 656f 7574 203d 2052 4541  ad_timeout = REA
+00000c30: 445f 5449 4d45 4f55 540a 2020 2020 636f  D_TIMEOUT.    co
+00000c40: 6e6e 6563 745f 7469 6d65 6f75 7420 3d20  nnect_timeout = 
+00000c50: 434f 4e4e 4543 545f 5449 4d45 4f55 540a  CONNECT_TIMEOUT.
+00000c60: 0a20 2020 2069 6620 6669 6c65 733a 0a20  .    if files:. 
+00000c70: 2020 2020 2020 2066 696c 6573 5f63 6f70         files_cop
+00000c80: 7920 3d20 6469 6374 2866 696c 6573 290a  y = dict(files).
+00000c90: 2020 2020 2020 2020 2320 7072 6f63 6573          # proces
+00000ca0: 7320 7479 7065 732e 496e 7075 7446 696c  s types.InputFil
+00000cb0: 650a 2020 2020 2020 2020 666f 7220 6b65  e.        for ke
+00000cc0: 792c 2076 616c 7565 2069 6e20 6669 6c65  y, value in file
+00000cd0: 735f 636f 7079 2e69 7465 6d73 2829 3a0a  s_copy.items():.
+00000ce0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00000cf0: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
+00000d00: 2074 7970 6573 2e49 6e70 7574 4669 6c65   types.InputFile
+00000d10: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00000d20: 2020 2066 696c 6573 5b6b 6579 5d20 3d20     files[key] = 
+00000d30: 7661 6c75 652e 6669 6c65 0a20 2020 2020  value.file.     
+00000d40: 2020 2020 2020 2065 6c69 6620 280a 2020         elif (.  
+00000d50: 2020 2020 2020 2020 2020 2020 2020 6973                is
+00000d60: 696e 7374 616e 6365 2876 616c 7565 2c20  instance(value, 
+00000d70: 7475 706c 6529 0a20 2020 2020 2020 2020  tuple).         
+00000d80: 2020 2020 2020 2061 6e64 2028 6c65 6e28         and (len(
+00000d90: 7661 6c75 6529 203d 3d20 3229 0a20 2020  value) == 2).   
+00000da0: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+00000db0: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
+00000dc0: 655b 315d 2c20 7479 7065 732e 496e 7075  e[1], types.Inpu
+00000dd0: 7446 696c 6529 0a20 2020 2020 2020 2020  tFile).         
+00000de0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+00000df0: 2020 2020 2020 6669 6c65 735b 6b65 795d        files[key]
+00000e00: 203d 2028 7661 6c75 655b 305d 2c20 7661   = (value[0], va
+00000e10: 6c75 655b 315d 2e66 696c 6529 0a0a 2020  lue[1].file)..  
+00000e20: 2020 6966 2066 696c 6573 2061 6e64 2066    if files and f
+00000e30: 6f72 6d61 745f 6865 6164 6572 5f70 6172  ormat_header_par
+00000e40: 616d 3a0a 2020 2020 2020 2020 6669 656c  am:.        fiel
+00000e50: 6473 2e66 6f72 6d61 745f 6865 6164 6572  ds.format_header
+00000e60: 5f70 6172 616d 203d 205f 6e6f 5f65 6e63  _param = _no_enc
+00000e70: 6f64 6528 666f 726d 6174 5f68 6561 6465  ode(format_heade
+00000e80: 725f 7061 7261 6d29 0a20 2020 2069 6620  r_param).    if 
+00000e90: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
+00000ea0: 6966 2022 7469 6d65 6f75 7422 2069 6e20  if "timeout" in 
+00000eb0: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
+00000ec0: 2020 2020 7265 6164 5f74 696d 656f 7574      read_timeout
+00000ed0: 203d 2070 6172 616d 732e 706f 7028 2274   = params.pop("t
+00000ee0: 696d 656f 7574 2229 0a20 2020 2020 2020  imeout").       
+00000ef0: 2020 2020 2063 6f6e 6e65 6374 5f74 696d       connect_tim
+00000f00: 656f 7574 203d 2072 6561 645f 7469 6d65  eout = read_time
+00000f10: 6f75 740a 2020 2020 2020 2020 6966 2022  out.        if "
+00000f20: 6c6f 6e67 5f70 6f6c 6c69 6e67 5f74 696d  long_polling_tim
+00000f30: 656f 7574 2220 696e 2070 6172 616d 733a  eout" in params:
+00000f40: 0a20 2020 2020 2020 2020 2020 2023 2046  .            # F
+00000f50: 6f72 2067 6574 5570 6461 7465 732e 2049  or getUpdates. I
+00000f60: 7427 7320 7468 6520 6f6e 6c79 2066 756e  t's the only fun
+00000f70: 6374 696f 6e20 7769 7468 2074 696d 656f  ction with timeo
+00000f80: 7574 2070 6172 616d 6574 6572 206f 6e20  ut parameter on 
+00000f90: 7468 6520 424f 5420 4150 4920 7369 6465  the BOT API side
+00000fa0: 0a20 2020 2020 2020 2020 2020 206c 6f6e  .            lon
+00000fb0: 675f 706f 6c6c 696e 675f 7469 6d65 6f75  g_polling_timeou
+00000fc0: 7420 3d20 7061 7261 6d73 2e70 6f70 2822  t = params.pop("
+00000fd0: 6c6f 6e67 5f70 6f6c 6c69 6e67 5f74 696d  long_polling_tim
+00000fe0: 656f 7574 2229 0a20 2020 2020 2020 2020  eout").         
+00000ff0: 2020 2070 6172 616d 735b 2274 696d 656f     params["timeo
+00001000: 7574 225d 203d 206c 6f6e 675f 706f 6c6c  ut"] = long_poll
+00001010: 696e 675f 7469 6d65 6f75 740a 2020 2020  ing_timeout.    
+00001020: 2020 2020 2020 2020 2320 4c6f 6e67 2070          # Long p
+00001030: 6f6c 6c69 6e67 2068 616e 6773 2066 6f72  olling hangs for
+00001040: 2061 2067 6976 656e 2074 696d 652e 2052   a given time. R
+00001050: 6561 6420 7469 6d65 6f75 7420 7368 6f75  ead timeout shou
+00001060: 6c64 2062 6520 6772 6561 7465 7220 7468  ld be greater th
+00001070: 6174 206c 6f6e 675f 706f 6c6c 696e 675f  at long_polling_
+00001080: 7469 6d65 6f75 740a 2020 2020 2020 2020  timeout.        
+00001090: 2020 2020 7265 6164 5f74 696d 656f 7574      read_timeout
+000010a0: 203d 206d 6178 286c 6f6e 675f 706f 6c6c   = max(long_poll
+000010b0: 696e 675f 7469 6d65 6f75 7420 2b20 352c  ing_timeout + 5,
+000010c0: 2072 6561 645f 7469 6d65 6f75 7429 0a0a   read_timeout)..
+000010d0: 2020 2020 7061 7261 6d73 203d 2070 6172      params = par
+000010e0: 616d 7320 6f72 204e 6f6e 6520 2023 2053  ams or None  # S
+000010f0: 6574 2070 6172 616d 7320 746f 204e 6f6e  et params to Non
+00001100: 6520 6966 2065 6d70 7479 0a20 2020 2072  e if empty.    r
+00001110: 6573 756c 7420 3d20 4e6f 6e65 0a0a 2020  esult = None..  
+00001120: 2020 6966 2043 5553 544f 4d5f 5245 5155    if CUSTOM_REQU
+00001130: 4553 545f 5345 4e44 4552 3a0a 2020 2020  EST_SENDER:.    
+00001140: 2020 2020 2320 6e6f 696e 7370 6563 7469      # noinspecti
+00001150: 6f6e 2050 7943 616c 6c69 6e67 4e6f 6e43  on PyCallingNonC
+00001160: 616c 6c61 626c 650a 2020 2020 2020 2020  allable.        
+00001170: 7265 7375 6c74 203d 2043 5553 544f 4d5f  result = CUSTOM_
+00001180: 5245 5155 4553 545f 5345 4e44 4552 280a  REQUEST_SENDER(.
+00001190: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+000011a0: 6f64 2c0a 2020 2020 2020 2020 2020 2020  od,.            
+000011b0: 7265 7175 6573 745f 7572 6c2c 0a20 2020  request_url,.   
+000011c0: 2020 2020 2020 2020 2070 6172 616d 733d           params=
+000011d0: 7061 7261 6d73 2c0a 2020 2020 2020 2020  params,.        
+000011e0: 2020 2020 6669 6c65 733d 6669 6c65 732c      files=files,
+000011f0: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+00001200: 656f 7574 3d28 636f 6e6e 6563 745f 7469  eout=(connect_ti
+00001210: 6d65 6f75 742c 2072 6561 645f 7469 6d65  meout, read_time
+00001220: 6f75 7429 2c0a 2020 2020 2020 2020 2020  out),.          
+00001230: 2020 7072 6f78 6965 733d 7072 6f78 792c    proxies=proxy,
+00001240: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
+00001250: 6c69 6620 5245 5452 595f 4f4e 5f45 5252  lif RETRY_ON_ERR
+00001260: 4f52 2061 6e64 2052 4554 5259 5f45 4e47  OR and RETRY_ENG
+00001270: 494e 4520 3d3d 2031 3a0a 2020 2020 2020  INE == 1:.      
+00001280: 2020 676f 745f 7265 7375 6c74 203d 2046    got_result = F
+00001290: 616c 7365 0a20 2020 2020 2020 2063 7572  alse.        cur
+000012a0: 7265 6e74 5f74 7279 203d 2030 0a20 2020  rent_try = 0.   
+000012b0: 2020 2020 2077 6869 6c65 206e 6f74 2067       while not g
+000012c0: 6f74 5f72 6573 756c 7420 616e 6420 6375  ot_result and cu
+000012d0: 7272 656e 745f 7472 7920 3c20 4d41 585f  rrent_try < MAX_
+000012e0: 5245 5452 4945 5320 2d20 313a 0a20 2020  RETRIES - 1:.   
+000012f0: 2020 2020 2020 2020 2063 7572 7265 6e74           current
+00001300: 5f74 7279 202b 3d20 310a 2020 2020 2020  _try += 1.      
+00001310: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00001320: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00001330: 7420 3d20 5f67 6574 5f72 6571 5f73 6573  t = _get_req_ses
+00001340: 7369 6f6e 2829 2e72 6571 7565 7374 280a  sion().request(.
+00001350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001360: 2020 2020 6d65 7468 6f64 2c0a 2020 2020      method,.    
+00001370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001380: 7265 7175 6573 745f 7572 6c2c 0a20 2020  request_url,.   
+00001390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013a0: 2070 6172 616d 733d 7061 7261 6d73 2c0a   params=params,.
+000013b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013c0: 2020 2020 6669 6c65 733d 6669 6c65 732c      files=files,
+000013d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000013e0: 2020 2020 2074 696d 656f 7574 3d28 636f       timeout=(co
+000013f0: 6e6e 6563 745f 7469 6d65 6f75 742c 2072  nnect_timeout, r
+00001400: 6561 645f 7469 6d65 6f75 7429 2c0a 2020  ead_timeout),.  
+00001410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001420: 2020 7072 6f78 6965 733d 7072 6f78 792c    proxies=proxy,
+00001430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001440: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00001450: 2020 2067 6f74 5f72 6573 756c 7420 3d20     got_result = 
+00001460: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+00001470: 2065 7863 6570 7420 4854 5450 4572 726f   except HTTPErro
+00001480: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00001490: 2020 206c 6f67 6765 722e 6465 6275 6728     logger.debug(
+000014a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000014b0: 2020 2020 2022 4854 5450 2045 7272 6f72       "HTTP Error
+000014c0: 206f 6e20 7b30 7d20 6d65 7468 6f64 2028   on {0} method (
+000014d0: 5472 7920 237b 317d 2922 2e66 6f72 6d61  Try #{1})".forma
+000014e0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+000014f0: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00001500: 645f 6e61 6d65 2c20 6375 7272 656e 745f  d_name, current_
+00001510: 7472 790a 2020 2020 2020 2020 2020 2020  try.            
+00001520: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00001530: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00001540: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00001550: 2e73 6c65 6570 2852 4554 5259 5f54 494d  .sleep(RETRY_TIM
+00001560: 454f 5554 290a 2020 2020 2020 2020 2020  EOUT).          
+00001570: 2020 6578 6365 7074 2043 6f6e 6e65 6374    except Connect
+00001580: 696f 6e45 7272 6f72 3a0a 2020 2020 2020  ionError:.      
+00001590: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
+000015a0: 2e64 6562 7567 280a 2020 2020 2020 2020  .debug(.        
+000015b0: 2020 2020 2020 2020 2020 2020 2243 6f6e              "Con
+000015c0: 6e65 6374 696f 6e20 4572 726f 7220 6f6e  nection Error on
+000015d0: 207b 307d 206d 6574 686f 6420 2854 7279   {0} method (Try
+000015e0: 2023 7b31 7d29 222e 666f 726d 6174 280a   #{1})".format(.
+000015f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001600: 2020 2020 2020 2020 6d65 7468 6f64 5f6e          method_n
+00001610: 616d 652c 2063 7572 7265 6e74 5f74 7279  ame, current_try
+00001620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001630: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00001640: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00001650: 2020 2020 2020 2020 2074 696d 652e 736c           time.sl
+00001660: 6565 7028 5245 5452 595f 5449 4d45 4f55  eep(RETRY_TIMEOU
+00001670: 5429 0a20 2020 2020 2020 2020 2020 2065  T).            e
+00001680: 7863 6570 7420 5469 6d65 6f75 743a 0a20  xcept Timeout:. 
+00001690: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+000016a0: 6f67 6765 722e 6465 6275 6728 0a20 2020  ogger.debug(.   
+000016b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016c0: 2022 5469 6d65 6f75 7420 4572 726f 7220   "Timeout Error 
+000016d0: 6f6e 207b 307d 206d 6574 686f 6420 2854  on {0} method (T
+000016e0: 7279 2023 7b31 7d29 222e 666f 726d 6174  ry #{1})".format
+000016f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00001700: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+00001710: 5f6e 616d 652c 2063 7572 7265 6e74 5f74  _name, current_t
+00001720: 7279 0a20 2020 2020 2020 2020 2020 2020  ry.             
+00001730: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00001740: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00001750: 2020 2020 2020 2020 2020 2074 696d 652e             time.
+00001760: 736c 6565 7028 5245 5452 595f 5449 4d45  sleep(RETRY_TIME
+00001770: 4f55 5429 0a20 2020 2020 2020 2069 6620  OUT).        if 
+00001780: 6e6f 7420 676f 745f 7265 7375 6c74 3a0a  not got_result:.
+00001790: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+000017a0: 6c74 203d 205f 6765 745f 7265 715f 7365  lt = _get_req_se
+000017b0: 7373 696f 6e28 292e 7265 7175 6573 7428  ssion().request(
+000017c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000017d0: 206d 6574 686f 642c 0a20 2020 2020 2020   method,.       
+000017e0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000017f0: 5f75 726c 2c0a 2020 2020 2020 2020 2020  _url,.          
+00001800: 2020 2020 2020 7061 7261 6d73 3d70 6172        params=par
+00001810: 616d 732c 0a20 2020 2020 2020 2020 2020  ams,.           
+00001820: 2020 2020 2066 696c 6573 3d66 696c 6573       files=files
+00001830: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00001840: 2020 7469 6d65 6f75 743d 2863 6f6e 6e65    timeout=(conne
+00001850: 6374 5f74 696d 656f 7574 2c20 7265 6164  ct_timeout, read
+00001860: 5f74 696d 656f 7574 292c 0a20 2020 2020  _timeout),.     
+00001870: 2020 2020 2020 2020 2020 2070 726f 7869             proxi
+00001880: 6573 3d70 726f 7879 2c0a 2020 2020 2020  es=proxy,.      
+00001890: 2020 2020 2020 290a 2020 2020 656c 6966        ).    elif
+000018a0: 2052 4554 5259 5f4f 4e5f 4552 524f 5220   RETRY_ON_ERROR 
+000018b0: 616e 6420 5245 5452 595f 454e 4749 4e45  and RETRY_ENGINE
+000018c0: 203d 3d20 323a 0a20 2020 2020 2020 2068   == 2:.        h
+000018d0: 7474 7020 3d20 5f67 6574 5f72 6571 5f73  ttp = _get_req_s
+000018e0: 6573 7369 6f6e 2829 0a20 2020 2020 2020  ession().       
+000018f0: 2023 206e 6f69 6e73 7065 6374 696f 6e20   # noinspection 
+00001900: 5079 556e 7265 736f 6c76 6564 5265 6665  PyUnresolvedRefe
+00001910: 7265 6e63 6573 0a20 2020 2020 2020 2072  rences.        r
+00001920: 6574 7279 5f73 7472 6174 6567 7920 3d20  etry_strategy = 
+00001930: 7265 7175 6573 7473 2e70 6163 6b61 6765  requests.package
+00001940: 732e 7572 6c6c 6962 332e 7574 696c 2e72  s.urllib3.util.r
+00001950: 6574 7279 2e52 6574 7279 280a 2020 2020  etry.Retry(.    
+00001960: 2020 2020 2020 2020 746f 7461 6c3d 4d41          total=MA
+00001970: 585f 5245 5452 4945 532c 0a20 2020 2020  X_RETRIES,.     
+00001980: 2020 2020 2020 2061 6c6c 6f77 6564 5f6d         allowed_m
+00001990: 6574 686f 6473 3d4e 6f6e 652c 0a20 2020  ethods=None,.   
+000019a0: 2020 2020 2020 2020 2062 6163 6b6f 6666           backoff
+000019b0: 5f66 6163 746f 723d 5245 5452 595f 5449  _factor=RETRY_TI
+000019c0: 4d45 4f55 542c 0a20 2020 2020 2020 2020  MEOUT,.         
+000019d0: 2020 2062 6163 6b6f 6666 5f6d 6178 3d52     backoff_max=R
+000019e0: 4554 5259 5f54 494d 454f 5554 2c0a 2020  ETRY_TIMEOUT,.  
+000019f0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00001a00: 6164 6170 7465 7220 3d20 4854 5450 4164  adapter = HTTPAd
+00001a10: 6170 7465 7228 6d61 785f 7265 7472 6965  apter(max_retrie
+00001a20: 733d 7265 7472 795f 7374 7261 7465 6779  s=retry_strategy
+00001a30: 290a 2020 2020 2020 2020 666f 7220 7072  ).        for pr
+00001a40: 6566 6978 2069 6e20 2822 6874 7470 3a2f  efix in ("http:/
+00001a50: 2f22 2c20 2268 7474 7073 3a2f 2f22 293a  /", "https://"):
+00001a60: 0a20 2020 2020 2020 2020 2020 2068 7474  .            htt
+00001a70: 702e 6d6f 756e 7428 7072 6566 6978 2c20  p.mount(prefix, 
+00001a80: 6164 6170 7465 7229 0a20 2020 2020 2020  adapter).       
+00001a90: 2072 6573 756c 7420 3d20 6874 7470 2e72   result = http.r
+00001aa0: 6571 7565 7374 280a 2020 2020 2020 2020  equest(.        
+00001ab0: 2020 2020 6d65 7468 6f64 2c0a 2020 2020      method,.    
+00001ac0: 2020 2020 2020 2020 7265 7175 6573 745f          request_
+00001ad0: 7572 6c2c 0a20 2020 2020 2020 2020 2020  url,.           
+00001ae0: 2070 6172 616d 733d 7061 7261 6d73 2c0a   params=params,.
+00001af0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00001b00: 733d 6669 6c65 732c 0a20 2020 2020 2020  s=files,.       
+00001b10: 2020 2020 2074 696d 656f 7574 3d28 636f       timeout=(co
+00001b20: 6e6e 6563 745f 7469 6d65 6f75 742c 2072  nnect_timeout, r
+00001b30: 6561 645f 7469 6d65 6f75 7429 2c0a 2020  ead_timeout),.  
+00001b40: 2020 2020 2020 2020 2020 7072 6f78 6965            proxie
+00001b50: 733d 7072 6f78 792c 0a20 2020 2020 2020  s=proxy,.       
+00001b60: 2029 0a20 2020 2065 6c73 653a 0a20 2020   ).    else:.   
+00001b70: 2020 2020 2072 6573 756c 7420 3d20 5f67       result = _g
+00001b80: 6574 5f72 6571 5f73 6573 7369 6f6e 2829  et_req_session()
+00001b90: 2e72 6571 7565 7374 280a 2020 2020 2020  .request(.      
+00001ba0: 2020 2020 2020 6d65 7468 6f64 2c0a 2020        method,.  
+00001bb0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00001bc0: 745f 7572 6c2c 0a20 2020 2020 2020 2020  t_url,.         
+00001bd0: 2020 2070 6172 616d 733d 7061 7261 6d73     params=params
+00001be0: 2c0a 2020 2020 2020 2020 2020 2020 6669  ,.            fi
+00001bf0: 6c65 733d 6669 6c65 732c 0a20 2020 2020  les=files,.     
+00001c00: 2020 2020 2020 2074 696d 656f 7574 3d28         timeout=(
+00001c10: 636f 6e6e 6563 745f 7469 6d65 6f75 742c  connect_timeout,
+00001c20: 2072 6561 645f 7469 6d65 6f75 7429 2c0a   read_timeout),.
+00001c30: 2020 2020 2020 2020 2020 2020 7072 6f78              prox
+00001c40: 6965 733d 7072 6f78 792c 0a20 2020 2020  ies=proxy,.     
+00001c50: 2020 2029 0a0a 2020 2020 6c6f 6767 6572     )..    logger
+00001c60: 2e64 6562 7567 2822 5468 6520 7365 7276  .debug("The serv
+00001c70: 6572 2072 6574 7572 6e65 643a 2027 7b30  er returned: '{0
+00001c80: 7d27 222e 666f 726d 6174 2872 6573 756c  }'".format(resul
+00001c90: 742e 7465 7874 2e65 6e63 6f64 6528 2275  t.text.encode("u
+00001ca0: 7466 3822 2929 290a 0a20 2020 206a 736f  tf8")))..    jso
+00001cb0: 6e5f 7265 7375 6c74 203d 205f 6368 6563  n_result = _chec
+00001cc0: 6b5f 7265 7375 6c74 286d 6574 686f 645f  k_result(method_
+00001cd0: 6e61 6d65 2c20 7265 7375 6c74 290a 2020  name, result).  
+00001ce0: 2020 6966 206a 736f 6e5f 7265 7375 6c74    if json_result
+00001cf0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00001d00: 206a 736f 6e5f 7265 7375 6c74 5b22 7265   json_result["re
+00001d10: 7375 6c74 225d 0a0a 0a64 6566 205f 6368  sult"]...def _ch
+00001d20: 6563 6b5f 7265 7375 6c74 286d 6574 686f  eck_result(metho
+00001d30: 645f 6e61 6d65 2c20 7265 7375 6c74 293a  d_name, result):
+00001d40: 0a20 2020 2022 2222 0a20 2020 2043 6865  .    """.    Che
+00001d50: 636b 7320 7768 6574 6865 7220 6072 6573  cks whether `res
+00001d60: 756c 7460 2069 7320 6120 7661 6c69 6420  ult` is a valid 
+00001d70: 4150 4920 7265 7370 6f6e 7365 2e0a 2020  API response..  
+00001d80: 2020 4120 7265 7375 6c74 2069 7320 636f    A result is co
+00001d90: 6e73 6964 6572 6564 2069 6e76 616c 6964  nsidered invalid
+00001da0: 2069 663a 0a20 2020 2020 2020 202d 2054   if:.        - T
+00001db0: 6865 2073 6572 7665 7220 7265 7475 726e  he server return
+00001dc0: 6564 2061 6e20 4854 5450 2072 6573 706f  ed an HTTP respo
+00001dd0: 6e73 6520 636f 6465 206f 7468 6572 2074  nse code other t
+00001de0: 6861 6e20 3230 300a 2020 2020 2020 2020  han 200.        
+00001df0: 2d20 5468 6520 636f 6e74 656e 7420 6f66  - The content of
+00001e00: 2074 6865 2072 6573 756c 7420 6973 2069   the result is i
+00001e10: 6e76 616c 6964 204a 534f 4e2e 0a20 2020  nvalid JSON..   
+00001e20: 2020 2020 202d 2054 6865 206d 6574 686f       - The metho
+00001e30: 6420 6361 6c6c 2077 6173 2075 6e73 7563  d call was unsuc
+00001e40: 6365 7373 6675 6c20 2854 6865 204a 534f  cessful (The JSO
+00001e50: 4e20 276f 6b27 2066 6965 6c64 2065 7175  N 'ok' field equ
+00001e60: 616c 7320 4661 6c73 6529 0a0a 2020 2020  als False)..    
+00001e70: 3a72 6169 7365 7320 4170 6945 7863 6570  :raises ApiExcep
+00001e80: 7469 6f6e 3a20 6966 206f 6e65 206f 6620  tion: if one of 
+00001e90: 7468 6520 6162 6f76 6520 6c69 7374 6564  the above listed
+00001ea0: 2063 6173 6573 2069 7320 6170 706c 6963   cases is applic
+00001eb0: 6162 6c65 0a20 2020 203a 7061 7261 6d20  able.    :param 
+00001ec0: 6d65 7468 6f64 5f6e 616d 653a 2054 6865  method_name: The
+00001ed0: 206e 616d 6520 6f66 2074 6865 206d 6574   name of the met
+00001ee0: 686f 6420 6361 6c6c 6564 0a20 2020 203a  hod called.    :
+00001ef0: 7061 7261 6d20 7265 7375 6c74 3a20 5468  param result: Th
+00001f00: 6520 7265 7475 726e 6564 2072 6573 756c  e returned resul
+00001f10: 7420 6f66 2074 6865 206d 6574 686f 6420  t of the method 
+00001f20: 7265 7175 6573 740a 2020 2020 3a72 6574  request.    :ret
+00001f30: 7572 6e3a 2054 6865 2072 6573 756c 7420  urn: The result 
+00001f40: 7061 7273 6564 2074 6f20 6120 4a53 4f4e  parsed to a JSON
+00001f50: 2064 6963 7469 6f6e 6172 792e 0a20 2020   dictionary..   
+00001f60: 2022 2222 0a20 2020 2074 7279 3a0a 2020   """.    try:.  
+00001f70: 2020 2020 2020 7265 7375 6c74 5f6a 736f        result_jso
+00001f80: 6e20 3d20 7265 7375 6c74 2e6a 736f 6e28  n = result.json(
+00001f90: 290a 2020 2020 6578 6365 7074 3a0a 2020  ).    except:.  
+00001fa0: 2020 2020 2020 6966 2072 6573 756c 742e        if result.
+00001fb0: 7374 6174 7573 5f63 6f64 6520 213d 2032  status_code != 2
+00001fc0: 3030 3a0a 2020 2020 2020 2020 2020 2020  00:.            
+00001fd0: 7261 6973 6520 4170 6948 5454 5045 7863  raise ApiHTTPExc
+00001fe0: 6570 7469 6f6e 286d 6574 686f 645f 6e61  eption(method_na
+00001ff0: 6d65 2c20 7265 7375 6c74 290a 2020 2020  me, result).    
+00002000: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00002010: 2020 2020 2020 7261 6973 6520 4170 6949        raise ApiI
+00002020: 6e76 616c 6964 4a53 4f4e 4578 6365 7074  nvalidJSONExcept
+00002030: 696f 6e28 6d65 7468 6f64 5f6e 616d 652c  ion(method_name,
+00002040: 2072 6573 756c 7429 0a20 2020 2065 6c73   result).    els
+00002050: 653a 0a20 2020 2020 2020 2069 6620 6e6f  e:.        if no
+00002060: 7420 7265 7375 6c74 5f6a 736f 6e5b 226f  t result_json["o
+00002070: 6b22 5d3a 0a20 2020 2020 2020 2020 2020  k"]:.           
+00002080: 2072 6169 7365 2041 7069 5465 6c65 6772   raise ApiTelegr
+00002090: 616d 4578 6365 7074 696f 6e28 6d65 7468  amException(meth
+000020a0: 6f64 5f6e 616d 652c 2072 6573 756c 742c  od_name, result,
+000020b0: 2072 6573 756c 745f 6a73 6f6e 290a 0a20   result_json).. 
+000020c0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+000020d0: 7375 6c74 5f6a 736f 6e0a 0a0a 6465 6620  sult_json...def 
+000020e0: 6765 745f 6d65 2874 6f6b 656e 293a 0a20  get_me(token):. 
+000020f0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00002100: 7222 6765 744d 6522 0a20 2020 2072 6574  r"getMe".    ret
+00002110: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00002120: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00002130: 7572 6c29 0a0a 0a64 6566 206c 6f67 5f6f  url)...def log_o
+00002140: 7574 2874 6f6b 656e 293a 0a20 2020 206d  ut(token):.    m
+00002150: 6574 686f 645f 7572 6c20 3d20 7222 6c6f  ethod_url = r"lo
+00002160: 674f 7574 220a 2020 2020 7265 7475 726e  gOut".    return
+00002170: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00002180: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00002190: 290a 0a0a 6465 6620 636c 6f73 6528 746f  )...def close(to
+000021a0: 6b65 6e29 3a0a 2020 2020 6d65 7468 6f64  ken):.    method
+000021b0: 5f75 726c 203d 2072 2263 6c6f 7365 220a  _url = r"close".
+000021c0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+000021d0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+000021e0: 6d65 7468 6f64 5f75 726c 290a 0a0a 6465  method_url)...de
+000021f0: 6620 6765 745f 6669 6c65 2874 6f6b 656e  f get_file(token
+00002200: 2c20 6669 6c65 5f69 6429 3a0a 2020 2020  , file_id):.    
+00002210: 6d65 7468 6f64 5f75 726c 203d 2072 2267  method_url = r"g
+00002220: 6574 4669 6c65 220a 2020 2020 7265 7475  etFile".    retu
+00002230: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00002240: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00002250: 726c 2c20 7061 7261 6d73 3d7b 2266 696c  rl, params={"fil
+00002260: 655f 6964 223a 2066 696c 655f 6964 7d29  e_id": file_id})
+00002270: 0a0a 0a64 6566 2067 6574 5f66 696c 655f  ...def get_file_
+00002280: 7572 6c28 746f 6b65 6e2c 2066 696c 655f  url(token, file_
+00002290: 6964 293a 0a20 2020 2069 6620 4649 4c45  id):.    if FILE
+000022a0: 5f55 524c 2069 7320 4e6f 6e65 3a0a 2020  _URL is None:.  
+000022b0: 2020 2020 2020 6966 206c 656e 2874 6f6b        if len(tok
+000022c0: 656e 2920 3d3d 2035 313a 0a20 2020 2020  en) == 51:.     
+000022d0: 2020 2020 2020 2072 6574 7572 6e20 6622         return f"
+000022e0: 6874 7470 733a 2f2f 7461 7069 2e62 616c  https://tapi.bal
+000022f0: 652e 6169 2f66 696c 652f 626f 747b 746f  e.ai/file/bot{to
+00002300: 6b65 6e7d 2f7b 6669 6c65 5f69 647d 220a  ken}/{file_id}".
+00002310: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+00002320: 6874 7470 733a 2f2f 6170 692e 7465 6c65  https://api.tele
+00002330: 6772 616d 2e6f 7267 2f66 696c 652f 626f  gram.org/file/bo
+00002340: 747b 307d 2f7b 317d 222e 666f 726d 6174  t{0}/{1}".format
+00002350: 280a 2020 2020 2020 2020 2020 2020 746f  (.            to
+00002360: 6b65 6e2c 2067 6574 5f66 696c 6528 746f  ken, get_file(to
+00002370: 6b65 6e2c 2066 696c 655f 6964 295b 2266  ken, file_id)["f
+00002380: 696c 655f 7061 7468 225d 0a20 2020 2020  ile_path"].     
+00002390: 2020 2029 0a20 2020 2065 6c73 653a 0a20     ).    else:. 
+000023a0: 2020 2020 2020 2023 206e 6f69 6e73 7065         # noinspe
+000023b0: 6374 696f 6e20 5079 556e 7265 736f 6c76  ction PyUnresolv
+000023c0: 6564 5265 6665 7265 6e63 6573 0a20 2020  edReferences.   
+000023d0: 2020 2020 2072 6574 7572 6e20 4649 4c45       return FILE
+000023e0: 5f55 524c 2e66 6f72 6d61 7428 746f 6b65  _URL.format(toke
+000023f0: 6e2c 2067 6574 5f66 696c 6528 746f 6b65  n, get_file(toke
+00002400: 6e2c 2066 696c 655f 6964 295b 2266 696c  n, file_id)["fil
+00002410: 655f 7061 7468 225d 290a 0a0a 6465 6620  e_path"])...def 
+00002420: 646f 776e 6c6f 6164 5f66 696c 6528 746f  download_file(to
+00002430: 6b65 6e2c 2066 696c 655f 7061 7468 293a  ken, file_path):
+00002440: 0a20 2020 2069 6620 4649 4c45 5f55 524c  .    if FILE_URL
+00002450: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00002460: 2020 6966 206c 656e 2874 6f6b 656e 2920    if len(token) 
+00002470: 3d3d 2035 313a 0a20 2020 2020 2020 2020  == 51:.         
+00002480: 2020 2075 726c 203d 2066 2268 7474 7073     url = f"https
+00002490: 3a2f 2f74 6170 692e 6261 6c65 2e61 692f  ://tapi.bale.ai/
+000024a0: 6669 6c65 2f62 6f74 7b74 6f6b 656e 7d2f  file/bot{token}/
+000024b0: 7b66 696c 655f 7061 7468 7d22 0a20 2020  {file_path}".   
+000024c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000024d0: 2020 2020 2020 2075 726c 203d 2022 6874         url = "ht
+000024e0: 7470 733a 2f2f 6170 692e 7465 6c65 6772  tps://api.telegr
+000024f0: 616d 2e6f 7267 2f66 696c 652f 626f 747b  am.org/file/bot{
+00002500: 307d 2f7b 317d 222e 666f 726d 6174 2874  0}/{1}".format(t
+00002510: 6f6b 656e 2c20 6669 6c65 5f70 6174 6829  oken, file_path)
+00002520: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00002530: 2020 2023 206e 6f69 6e73 7065 6374 696f     # noinspectio
+00002540: 6e20 5079 556e 7265 736f 6c76 6564 5265  n PyUnresolvedRe
+00002550: 6665 7265 6e63 6573 0a20 2020 2020 2020  ferences.       
+00002560: 2075 726c 203d 2046 494c 455f 5552 4c2e   url = FILE_URL.
+00002570: 666f 726d 6174 2874 6f6b 656e 2c20 6669  format(token, fi
+00002580: 6c65 5f70 6174 6829 0a0a 2020 2020 7265  le_path)..    re
+00002590: 7375 6c74 203d 205f 6765 745f 7265 715f  sult = _get_req_
+000025a0: 7365 7373 696f 6e28 292e 6765 7428 7572  session().get(ur
+000025b0: 6c2c 2070 726f 7869 6573 3d70 726f 7879  l, proxies=proxy
+000025c0: 290a 2020 2020 6966 2072 6573 756c 742e  ).    if result.
+000025d0: 7374 6174 7573 5f63 6f64 6520 213d 2032  status_code != 2
+000025e0: 3030 3a0a 2020 2020 2020 2020 7261 6973  00:.        rais
+000025f0: 6520 4170 6948 5454 5045 7863 6570 7469  e ApiHTTPExcepti
+00002600: 6f6e 2822 446f 776e 6c6f 6164 2066 696c  on("Download fil
+00002610: 6522 2c20 7265 7375 6c74 290a 0a20 2020  e", result)..   
+00002620: 2072 6574 7572 6e20 7265 7375 6c74 2e63   return result.c
+00002630: 6f6e 7465 6e74 0a0a 0a64 6566 2073 656e  ontent...def sen
+00002640: 645f 6d65 7373 6167 6528 0a20 2020 2074  d_message(.    t
+00002650: 6f6b 656e 2c0a 2020 2020 6368 6174 5f69  oken,.    chat_i
+00002660: 642c 0a20 2020 2074 6578 742c 0a20 2020  d,.    text,.   
+00002670: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00002680: 6e65 2c0a 2020 2020 7061 7273 655f 6d6f  ne,.    parse_mo
+00002690: 6465 3d4e 6f6e 652c 0a20 2020 2064 6973  de=None,.    dis
+000026a0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000026b0: 6e3d 4e6f 6e65 2c0a 2020 2020 7469 6d65  n=None,.    time
+000026c0: 6f75 743d 4e6f 6e65 2c0a 2020 2020 656e  out=None,.    en
+000026d0: 7469 7469 6573 3d4e 6f6e 652c 0a20 2020  tities=None,.   
+000026e0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+000026f0: 3d4e 6f6e 652c 0a20 2020 206d 6573 7361  =None,.    messa
+00002700: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
+00002710: 652c 0a20 2020 2072 6570 6c79 5f70 6172  e,.    reply_par
+00002720: 616d 6574 6572 733d 4e6f 6e65 2c0a 2020  ameters=None,.  
+00002730: 2020 6c69 6e6b 5f70 7265 7669 6577 5f6f    link_preview_o
+00002740: 7074 696f 6e73 3d4e 6f6e 652c 0a20 2020  ptions=None,.   
+00002750: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00002760: 7469 6f6e 5f69 643d 4e6f 6e65 2c0a 293a  tion_id=None,.):
+00002770: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00002780: 3d20 7222 7365 6e64 4d65 7373 6167 6522  = r"sendMessage"
+00002790: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000027a0: 2263 6861 745f 6964 223a 2073 7472 2863  "chat_id": str(c
+000027b0: 6861 745f 6964 292c 2022 7465 7874 223a  hat_id), "text":
+000027c0: 2074 6578 747d 0a20 2020 2069 6620 6c69   text}.    if li
+000027d0: 6e6b 5f70 7265 7669 6577 5f6f 7074 696f  nk_preview_optio
+000027e0: 6e73 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ns is not None:.
+000027f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00002800: 226c 696e 6b5f 7072 6576 6965 775f 6f70  "link_preview_op
+00002810: 7469 6f6e 7322 5d20 3d20 6c69 6e6b 5f70  tions"] = link_p
+00002820: 7265 7669 6577 5f6f 7074 696f 6e73 2e74  review_options.t
+00002830: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
+00002840: 7265 706c 795f 6d61 726b 7570 3a0a 2020  reply_markup:.  
+00002850: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
+00002860: 6570 6c79 5f6d 6172 6b75 7022 5d20 3d20  eply_markup"] = 
+00002870: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
+00002880: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
+00002890: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
+000028a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000028b0: 5b22 7061 7273 655f 6d6f 6465 225d 203d  ["parse_mode"] =
+000028c0: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
+000028d0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+000028e0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+000028f0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00002900: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
+00002910: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
+00002920: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00002930: 696f 6e0a 2020 2020 6966 2074 696d 656f  ion.    if timeo
+00002940: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
+00002950: 6f61 645b 2274 696d 656f 7574 225d 203d  oad["timeout"] =
+00002960: 2074 696d 656f 7574 0a20 2020 2069 6620   timeout.    if 
+00002970: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
+00002980: 2020 7061 796c 6f61 645b 2265 6e74 6974    payload["entit
+00002990: 6965 7322 5d20 3d20 6a73 6f6e 2e64 756d  ies"] = json.dum
+000029a0: 7073 2874 7970 6573 2e4d 6573 7361 6765  ps(types.Message
+000029b0: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
+000029c0: 665f 6469 6374 7328 656e 7469 7469 6573  f_dicts(entities
+000029d0: 2929 0a20 2020 2069 6620 7072 6f74 6563  )).    if protec
+000029e0: 745f 636f 6e74 656e 7420 6973 206e 6f74  t_content is not
+000029f0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00002a00: 6179 6c6f 6164 5b22 7072 6f74 6563 745f  ayload["protect_
+00002a10: 636f 6e74 656e 7422 5d20 3d20 7072 6f74  content"] = prot
+00002a20: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
+00002a30: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
+00002a40: 645f 6964 3a0a 2020 2020 2020 2020 7061  d_id:.        pa
+00002a50: 796c 6f61 645b 226d 6573 7361 6765 5f74  yload["message_t
+00002a60: 6872 6561 645f 6964 225d 203d 206d 6573  hread_id"] = mes
+00002a70: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
+00002a80: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
+00002a90: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
+00002aa0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00002ab0: 6f61 645b 2272 6570 6c79 5f70 6172 616d  oad["reply_param
+00002ac0: 6574 6572 7322 5d20 3d20 7265 706c 795f  eters"] = reply_
+00002ad0: 7061 7261 6d65 7465 7273 2e74 6f5f 6a73  parameters.to_js
+00002ae0: 6f6e 2829 0a20 2020 2069 6620 6275 7369  on().    if busi
 00002af0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00002b00: 6964 225d 203d 2062 7573 696e 6573 735f  id"] = business_
-00002b10: 636f 6e6e 6563 7469 6f6e 5f69 640a 2020  connection_id.  
-00002b20: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00002b30: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00002b40: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00002b50: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-00002b60: 3d22 706f 7374 2229 0a0a 0a64 6566 2073  ="post")...def s
-00002b70: 6574 5f77 6562 686f 6f6b 280a 2020 2020  et_webhook(.    
-00002b80: 746f 6b65 6e2c 0a20 2020 2075 726c 3d4e  token,.    url=N
-00002b90: 6f6e 652c 0a20 2020 2063 6572 7469 6669  one,.    certifi
-00002ba0: 6361 7465 3d4e 6f6e 652c 0a20 2020 206d  cate=None,.    m
-00002bb0: 6178 5f63 6f6e 6e65 6374 696f 6e73 3d4e  ax_connections=N
-00002bc0: 6f6e 652c 0a20 2020 2061 6c6c 6f77 6564  one,.    allowed
-00002bd0: 5f75 7064 6174 6573 3d4e 6f6e 652c 0a20  _updates=None,. 
-00002be0: 2020 2069 705f 6164 6472 6573 733d 4e6f     ip_address=No
-00002bf0: 6e65 2c0a 2020 2020 6472 6f70 5f70 656e  ne,.    drop_pen
-00002c00: 6469 6e67 5f75 7064 6174 6573 3d4e 6f6e  ding_updates=Non
-00002c10: 652c 0a20 2020 2074 696d 656f 7574 3d4e  e,.    timeout=N
-00002c20: 6f6e 652c 0a20 2020 2073 6563 7265 745f  one,.    secret_
-00002c30: 746f 6b65 6e3d 4e6f 6e65 2c0a 293a 0a20  token=None,.):. 
-00002c40: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00002c50: 7222 7365 7457 6562 686f 6f6b 220a 2020  r"setWebhook".  
-00002c60: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
-00002c70: 2020 2020 2020 2275 726c 223a 2075 726c        "url": url
-00002c80: 2069 6620 7572 6c20 656c 7365 2022 222c   if url else "",
-00002c90: 0a20 2020 207d 0a20 2020 2066 696c 6573  .    }.    files
-00002ca0: 203d 204e 6f6e 650a 2020 2020 6966 2063   = None.    if c
-00002cb0: 6572 7469 6669 6361 7465 3a0a 2020 2020  ertificate:.    
-00002cc0: 2020 2020 6669 6c65 7320 3d20 7b22 6365      files = {"ce
-00002cd0: 7274 6966 6963 6174 6522 3a20 6365 7274  rtificate": cert
-00002ce0: 6966 6963 6174 657d 0a20 2020 2069 6620  ificate}.    if 
-00002cf0: 6d61 785f 636f 6e6e 6563 7469 6f6e 733a  max_connections:
-00002d00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00002d10: 5b22 6d61 785f 636f 6e6e 6563 7469 6f6e  ["max_connection
-00002d20: 7322 5d20 3d20 6d61 785f 636f 6e6e 6563  s"] = max_connec
-00002d30: 7469 6f6e 730a 2020 2020 6966 2061 6c6c  tions.    if all
-00002d40: 6f77 6564 5f75 7064 6174 6573 2069 7320  owed_updates is 
-00002d50: 6e6f 7420 4e6f 6e65 3a20 2023 2045 6d70  not None:  # Emp
-00002d60: 7479 206c 6973 7473 2073 686f 756c 6420  ty lists should 
-00002d70: 7061 7373 0a20 2020 2020 2020 2070 6179  pass.        pay
-00002d80: 6c6f 6164 5b22 616c 6c6f 7765 645f 7570  load["allowed_up
-00002d90: 6461 7465 7322 5d20 3d20 6a73 6f6e 2e64  dates"] = json.d
-00002da0: 756d 7073 2861 6c6c 6f77 6564 5f75 7064  umps(allowed_upd
-00002db0: 6174 6573 290a 2020 2020 6966 2069 705f  ates).    if ip_
-00002dc0: 6164 6472 6573 7320 6973 206e 6f74 204e  address is not N
-00002dd0: 6f6e 653a 2020 2320 456d 7074 7920 7374  one:  # Empty st
-00002de0: 7269 6e67 2073 686f 756c 6420 7061 7373  ring should pass
-00002df0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00002e00: 5b22 6970 5f61 6464 7265 7373 225d 203d  ["ip_address"] =
-00002e10: 2069 705f 6164 6472 6573 730a 2020 2020   ip_address.    
-00002e20: 6966 2064 726f 705f 7065 6e64 696e 675f  if drop_pending_
-00002e30: 7570 6461 7465 7320 6973 206e 6f74 204e  updates is not N
-00002e40: 6f6e 653a 2020 2320 416e 7920 626f 6f6c  one:  # Any bool
-00002e50: 2076 616c 7565 2073 686f 756c 6420 7061   value should pa
-00002e60: 7373 0a20 2020 2020 2020 2070 6179 6c6f  ss.        paylo
-00002e70: 6164 5b22 6472 6f70 5f70 656e 6469 6e67  ad["drop_pending
-00002e80: 5f75 7064 6174 6573 225d 203d 2064 726f  _updates"] = dro
-00002e90: 705f 7065 6e64 696e 675f 7570 6461 7465  p_pending_update
-00002ea0: 730a 2020 2020 6966 2074 696d 656f 7574  s.    if timeout
-00002eb0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00002ec0: 645b 2274 696d 656f 7574 225d 203d 2074  d["timeout"] = t
-00002ed0: 696d 656f 7574 0a20 2020 2069 6620 7365  imeout.    if se
-00002ee0: 6372 6574 5f74 6f6b 656e 3a0a 2020 2020  cret_token:.    
-00002ef0: 2020 2020 7061 796c 6f61 645b 2273 6563      payload["sec
-00002f00: 7265 745f 746f 6b65 6e22 5d20 3d20 7365  ret_token"] = se
-00002f10: 6372 6574 5f74 6f6b 656e 0a20 2020 2072  cret_token.    r
-00002f20: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00002f30: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00002f40: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00002f50: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-00002f60: 6573 290a 0a0a 6465 6620 6465 6c65 7465  es)...def delete
-00002f70: 5f77 6562 686f 6f6b 2874 6f6b 656e 2c20  _webhook(token, 
-00002f80: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
-00002f90: 6174 6573 3d4e 6f6e 652c 2074 696d 656f  ates=None, timeo
-00002fa0: 7574 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ut=None):.    me
-00002fb0: 7468 6f64 5f75 726c 203d 2072 2264 656c  thod_url = r"del
-00002fc0: 6574 6557 6562 686f 6f6b 220a 2020 2020  eteWebhook".    
-00002fd0: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
-00002fe0: 2069 6620 6472 6f70 5f70 656e 6469 6e67   if drop_pending
-00002ff0: 5f75 7064 6174 6573 2069 7320 6e6f 7420  _updates is not 
-00003000: 4e6f 6e65 3a20 2023 2041 6e79 2062 6f6f  None:  # Any boo
-00003010: 6c20 7661 6c75 6520 7368 6f75 6c64 2070  l value should p
-00003020: 6173 730a 2020 2020 2020 2020 7061 796c  ass.        payl
-00003030: 6f61 645b 2264 726f 705f 7065 6e64 696e  oad["drop_pendin
-00003040: 675f 7570 6461 7465 7322 5d20 3d20 6472  g_updates"] = dr
-00003050: 6f70 5f70 656e 6469 6e67 5f75 7064 6174  op_pending_updat
-00003060: 6573 0a20 2020 2069 6620 7469 6d65 6f75  es.    if timeou
-00003070: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00003080: 6164 5b22 7469 6d65 6f75 7422 5d20 3d20  ad["timeout"] = 
-00003090: 7469 6d65 6f75 740a 2020 2020 7265 7475  timeout.    retu
-000030a0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-000030b0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000030c0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-000030d0: 6164 290a 0a0a 6465 6620 6765 745f 7765  ad)...def get_we
-000030e0: 6268 6f6f 6b5f 696e 666f 2874 6f6b 656e  bhook_info(token
-000030f0: 2c20 7469 6d65 6f75 743d 4e6f 6e65 293a  , timeout=None):
-00003100: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00003110: 3d20 7222 6765 7457 6562 686f 6f6b 496e  = r"getWebhookIn
-00003120: 666f 220a 2020 2020 7061 796c 6f61 6420  fo".    payload 
-00003130: 3d20 7b7d 0a20 2020 2069 6620 7469 6d65  = {}.    if time
-00003140: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00003150: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
-00003160: 3d20 7469 6d65 6f75 740a 2020 2020 7265  = timeout.    re
-00003170: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00003180: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00003190: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-000031a0: 6c6f 6164 290a 0a0a 6465 6620 6765 745f  load)...def get_
-000031b0: 7570 6461 7465 7328 0a20 2020 2074 6f6b  updates(.    tok
-000031c0: 656e 2c0a 2020 2020 6f66 6673 6574 3d4e  en,.    offset=N
-000031d0: 6f6e 652c 0a20 2020 206c 696d 6974 3d4e  one,.    limit=N
-000031e0: 6f6e 652c 0a20 2020 2074 696d 656f 7574  one,.    timeout
-000031f0: 3d4e 6f6e 652c 0a20 2020 2061 6c6c 6f77  =None,.    allow
-00003200: 6564 5f75 7064 6174 6573 3d4e 6f6e 652c  ed_updates=None,
-00003210: 0a20 2020 206c 6f6e 675f 706f 6c6c 696e  .    long_pollin
-00003220: 675f 7469 6d65 6f75 743d 4e6f 6e65 2c0a  g_timeout=None,.
-00003230: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00003240: 6c20 3d20 7222 6765 7455 7064 6174 6573  l = r"getUpdates
-00003250: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00003260: 7b7d 0a20 2020 2069 6620 6f66 6673 6574  {}.    if offset
-00003270: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00003280: 645b 226f 6666 7365 7422 5d20 3d20 6f66  d["offset"] = of
-00003290: 6673 6574 0a20 2020 2069 6620 6c69 6d69  fset.    if limi
-000032a0: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-000032b0: 6164 5b22 6c69 6d69 7422 5d20 3d20 6c69  ad["limit"] = li
-000032c0: 6d69 740a 2020 2020 6966 2074 696d 656f  mit.    if timeo
-000032d0: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
-000032e0: 6f61 645b 2274 696d 656f 7574 225d 203d  oad["timeout"] =
-000032f0: 2074 696d 656f 7574 0a20 2020 2070 6179   timeout.    pay
-00003300: 6c6f 6164 5b22 6c6f 6e67 5f70 6f6c 6c69  load["long_polli
-00003310: 6e67 5f74 696d 656f 7574 225d 203d 2028  ng_timeout"] = (
-00003320: 0a20 2020 2020 2020 206c 6f6e 675f 706f  .        long_po
-00003330: 6c6c 696e 675f 7469 6d65 6f75 7420 6966  lling_timeout if
-00003340: 206c 6f6e 675f 706f 6c6c 696e 675f 7469   long_polling_ti
-00003350: 6d65 6f75 7420 656c 7365 204c 4f4e 475f  meout else LONG_
-00003360: 504f 4c4c 494e 475f 5449 4d45 4f55 540a  POLLING_TIMEOUT.
-00003370: 2020 2020 290a 2020 2020 6966 2061 6c6c      ).    if all
-00003380: 6f77 6564 5f75 7064 6174 6573 2069 7320  owed_updates is 
-00003390: 6e6f 7420 4e6f 6e65 3a20 2023 2045 6d70  not None:  # Emp
-000033a0: 7479 206c 6973 7473 2073 686f 756c 6420  ty lists should 
-000033b0: 7061 7373 0a20 2020 2020 2020 2070 6179  pass.        pay
-000033c0: 6c6f 6164 5b22 616c 6c6f 7765 645f 7570  load["allowed_up
-000033d0: 6461 7465 7322 5d20 3d20 6a73 6f6e 2e64  dates"] = json.d
-000033e0: 756d 7073 2861 6c6c 6f77 6564 5f75 7064  umps(allowed_upd
-000033f0: 6174 6573 290a 2020 2020 7265 7475 726e  ates).    return
-00003400: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00003410: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00003420: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00003430: 290a 0a0a 6465 6620 6765 745f 7573 6572  )...def get_user
-00003440: 5f70 726f 6669 6c65 5f70 686f 746f 7328  _profile_photos(
-00003450: 746f 6b65 6e2c 2075 7365 725f 6964 2c20  token, user_id, 
-00003460: 6f66 6673 6574 3d4e 6f6e 652c 206c 696d  offset=None, lim
-00003470: 6974 3d4e 6f6e 6529 3a0a 2020 2020 6d65  it=None):.    me
-00003480: 7468 6f64 5f75 726c 203d 2072 2267 6574  thod_url = r"get
-00003490: 5573 6572 5072 6f66 696c 6550 686f 746f  UserProfilePhoto
-000034a0: 7322 0a20 2020 2070 6179 6c6f 6164 203d  s".    payload =
-000034b0: 207b 2275 7365 725f 6964 223a 2075 7365   {"user_id": use
-000034c0: 725f 6964 7d0a 2020 2020 6966 206f 6666  r_id}.    if off
-000034d0: 7365 743a 0a20 2020 2020 2020 2070 6179  set:.        pay
-000034e0: 6c6f 6164 5b22 6f66 6673 6574 225d 203d  load["offset"] =
-000034f0: 206f 6666 7365 740a 2020 2020 6966 206c   offset.    if l
-00003500: 696d 6974 3a0a 2020 2020 2020 2020 7061  imit:.        pa
-00003510: 796c 6f61 645b 226c 696d 6974 225d 203d  yload["limit"] =
-00003520: 206c 696d 6974 0a20 2020 2072 6574 7572   limit.    retur
-00003530: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00003540: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00003550: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00003560: 6429 0a0a 0a64 6566 2073 6574 5f6d 6573  d)...def set_mes
-00003570: 7361 6765 5f72 6561 6374 696f 6e28 746f  sage_reaction(to
-00003580: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
-00003590: 7373 6167 655f 6964 2c20 7265 6163 7469  ssage_id, reacti
-000035a0: 6f6e 3d4e 6f6e 652c 2069 735f 6269 673d  on=None, is_big=
-000035b0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-000035c0: 645f 7572 6c20 3d20 7222 7365 744d 6573  d_url = r"setMes
-000035d0: 7361 6765 5265 6163 7469 6f6e 220a 2020  sageReaction".  
-000035e0: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
-000035f0: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
-00003600: 2022 6d65 7373 6167 655f 6964 223a 206d   "message_id": m
-00003610: 6573 7361 6765 5f69 647d 0a20 2020 2069  essage_id}.    i
-00003620: 6620 7265 6163 7469 6f6e 3a0a 2020 2020  f reaction:.    
-00003630: 2020 2020 7061 796c 6f61 645b 2272 6561      payload["rea
-00003640: 6374 696f 6e22 5d20 3d20 6a73 6f6e 2e64  ction"] = json.d
-00003650: 756d 7073 285b 722e 746f 5f64 6963 7428  umps([r.to_dict(
-00003660: 2920 666f 7220 7220 696e 2072 6561 6374  ) for r in react
-00003670: 696f 6e5d 290a 2020 2020 6966 2069 735f  ion]).    if is_
-00003680: 6269 6720 6973 206e 6f74 204e 6f6e 653a  big is not None:
-00003690: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000036a0: 5b22 6973 5f62 6967 225d 203d 2069 735f  ["is_big"] = is_
-000036b0: 6269 670a 2020 2020 7265 7475 726e 205f  big.    return _
-000036c0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-000036d0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-000036e0: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
-000036f0: 0a0a 6465 6620 6765 745f 6368 6174 2874  ..def get_chat(t
-00003700: 6f6b 656e 2c20 6368 6174 5f69 6429 3a0a  oken, chat_id):.
-00003710: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00003720: 2072 2267 6574 4368 6174 220a 2020 2020   r"getChat".    
-00003730: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-00003740: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
-00003750: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00003760: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00003770: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00003780: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
-00003790: 206c 6561 7665 5f63 6861 7428 746f 6b65   leave_chat(toke
-000037a0: 6e2c 2063 6861 745f 6964 293a 0a20 2020  n, chat_id):.   
-000037b0: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
-000037c0: 6c65 6176 6543 6861 7422 0a20 2020 2070  leaveChat".    p
-000037d0: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-000037e0: 6964 223a 2063 6861 745f 6964 7d0a 2020  id": chat_id}.  
-000037f0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00003800: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00003810: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00003820: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00003830: 6765 745f 6368 6174 5f61 646d 696e 6973  get_chat_adminis
-00003840: 7472 6174 6f72 7328 746f 6b65 6e2c 2063  trators(token, c
-00003850: 6861 745f 6964 293a 0a20 2020 206d 6574  hat_id):.    met
-00003860: 686f 645f 7572 6c20 3d20 7222 6765 7443  hod_url = r"getC
-00003870: 6861 7441 646d 696e 6973 7472 6174 6f72  hatAdministrator
-00003880: 7322 0a20 2020 2070 6179 6c6f 6164 203d  s".    payload =
-00003890: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
-000038a0: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
-000038b0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-000038c0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000038d0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000038e0: 290a 0a0a 6465 6620 6765 745f 6368 6174  )...def get_chat
-000038f0: 5f6d 656d 6265 725f 636f 756e 7428 746f  _member_count(to
-00003900: 6b65 6e2c 2063 6861 745f 6964 293a 0a20  ken, chat_id):. 
-00003910: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00003920: 7222 6765 7443 6861 744d 656d 6265 7243  r"getChatMemberC
-00003930: 6f75 6e74 220a 2020 2020 7061 796c 6f61  ount".    payloa
-00003940: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-00003950: 6368 6174 5f69 647d 0a20 2020 2072 6574  chat_id}.    ret
-00003960: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00003970: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00003980: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00003990: 6f61 6429 0a0a 0a64 6566 2073 6574 5f73  oad)...def set_s
-000039a0: 7469 636b 6572 5f73 6574 5f74 6875 6d62  ticker_set_thumb
-000039b0: 6e61 696c 2874 6f6b 656e 2c20 6e61 6d65  nail(token, name
-000039c0: 2c20 7573 6572 5f69 642c 2074 6875 6d62  , user_id, thumb
-000039d0: 6e61 696c 2c20 666f 726d 6174 293a 0a20  nail, format):. 
-000039e0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000039f0: 7222 7365 7453 7469 636b 6572 5365 7454  r"setStickerSetT
-00003a00: 6875 6d62 6e61 696c 220a 2020 2020 7061  humbnail".    pa
-00003a10: 796c 6f61 6420 3d20 7b22 6e61 6d65 223a  yload = {"name":
-00003a20: 206e 616d 652c 2022 7573 6572 5f69 6422   name, "user_id"
-00003a30: 3a20 7573 6572 5f69 642c 2022 666f 726d  : user_id, "form
-00003a40: 6174 223a 2066 6f72 6d61 747d 0a20 2020  at": format}.   
-00003a50: 2066 696c 6573 203d 207b 7d0a 2020 2020   files = {}.    
-00003a60: 6966 2074 6875 6d62 6e61 696c 3a0a 2020  if thumbnail:.  
-00003a70: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00003a80: 6e73 7461 6e63 6528 7468 756d 626e 6169  nstance(thumbnai
-00003a90: 6c2c 2073 7472 293a 0a20 2020 2020 2020  l, str):.       
-00003aa0: 2020 2020 2066 696c 6573 5b22 7468 756d       files["thum
-00003ab0: 626e 6169 6c22 5d20 3d20 7468 756d 626e  bnail"] = thumbn
-00003ac0: 6169 6c0a 2020 2020 2020 2020 656c 7365  ail.        else
-00003ad0: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
-00003ae0: 796c 6f61 645b 2274 6875 6d62 6e61 696c  yload["thumbnail
-00003af0: 225d 203d 2074 6875 6d62 6e61 696c 0a20  "] = thumbnail. 
-00003b00: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00003b10: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00003b20: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00003b30: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
-00003b40: 3d66 696c 6573 206f 7220 4e6f 6e65 290a  =files or None).
-00003b50: 0a0a 6465 6620 7265 706c 6163 655f 7374  ..def replace_st
-00003b60: 6963 6b65 725f 696e 5f73 6574 2874 6f6b  icker_in_set(tok
-00003b70: 656e 2c20 7573 6572 5f69 642c 206e 616d  en, user_id, nam
-00003b80: 652c 206f 6c64 5f73 7469 636b 6572 2c20  e, old_sticker, 
-00003b90: 7374 6963 6b65 7229 3a0a 2020 2020 6d65  sticker):.    me
-00003ba0: 7468 6f64 5f75 726c 203d 2072 2272 6570  thod_url = r"rep
-00003bb0: 6c61 6365 5374 6963 6b65 7249 6e53 6574  laceStickerInSet
-00003bc0: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00003bd0: 7b0a 2020 2020 2020 2020 2275 7365 725f  {.        "user_
-00003be0: 6964 223a 2075 7365 725f 6964 2c0a 2020  id": user_id,.  
-00003bf0: 2020 2020 2020 226e 616d 6522 3a20 6e61        "name": na
-00003c00: 6d65 2c0a 2020 2020 2020 2020 226f 6c64  me,.        "old
-00003c10: 5f73 7469 636b 6572 223a 206f 6c64 5f73  _sticker": old_s
-00003c20: 7469 636b 6572 2c0a 2020 2020 2020 2020  ticker,.        
-00003c30: 2273 7469 636b 6572 223a 2073 7469 636b  "sticker": stick
-00003c40: 6572 2e74 6f5f 6a73 6f6e 2829 2c0a 2020  er.to_json(),.  
-00003c50: 2020 7d0a 2020 2020 7265 7475 726e 205f    }.    return _
-00003c60: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00003c70: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00003c80: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
-00003c90: 0a0a 6465 6620 7365 745f 6368 6174 5f73  ..def set_chat_s
-00003ca0: 7469 636b 6572 5f73 6574 2874 6f6b 656e  ticker_set(token
-00003cb0: 2c20 6368 6174 5f69 642c 2073 7469 636b  , chat_id, stick
-00003cc0: 6572 5f73 6574 5f6e 616d 6529 3a0a 2020  er_set_name):.  
-00003cd0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00003ce0: 2273 6574 4368 6174 5374 6963 6b65 7253  "setChatStickerS
-00003cf0: 6574 220a 2020 2020 7061 796c 6f61 6420  et".    payload 
-00003d00: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
-00003d10: 6174 5f69 642c 2022 7374 6963 6b65 725f  at_id, "sticker_
-00003d20: 7365 745f 6e61 6d65 223a 2073 7469 636b  set_name": stick
-00003d30: 6572 5f73 6574 5f6e 616d 657d 0a20 2020  er_set_name}.   
-00003d40: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00003d50: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00003d60: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00003d70: 7061 796c 6f61 6429 0a0a 0a64 6566 2064  payload)...def d
-00003d80: 656c 6574 655f 6368 6174 5f73 7469 636b  elete_chat_stick
-00003d90: 6572 5f73 6574 2874 6f6b 656e 2c20 6368  er_set(token, ch
-00003da0: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
-00003db0: 6f64 5f75 726c 203d 2072 2264 656c 6574  od_url = r"delet
-00003dc0: 6543 6861 7453 7469 636b 6572 5365 7422  eChatStickerSet"
-00003dd0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00003de0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-00003df0: 6964 7d0a 2020 2020 7265 7475 726e 205f  id}.    return _
-00003e00: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00003e10: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00003e20: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
-00003e30: 0a0a 6465 6620 6765 745f 6368 6174 5f6d  ..def get_chat_m
-00003e40: 656d 6265 7228 746f 6b65 6e2c 2063 6861  ember(token, cha
-00003e50: 745f 6964 2c20 7573 6572 5f69 6429 3a0a  t_id, user_id):.
-00003e60: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00003e70: 2072 2267 6574 4368 6174 4d65 6d62 6572   r"getChatMember
-00003e80: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00003e90: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-00003ea0: 5f69 642c 2022 7573 6572 5f69 6422 3a20  _id, "user_id": 
-00003eb0: 7573 6572 5f69 647d 0a20 2020 2072 6574  user_id}.    ret
-00003ec0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00003ed0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00003ee0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00003ef0: 6f61 6429 0a0a 0a64 6566 2066 6f72 7761  oad)...def forwa
-00003f00: 7264 5f6d 6573 7361 6765 280a 2020 2020  rd_message(.    
-00003f10: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
-00003f20: 6964 2c0a 2020 2020 6672 6f6d 5f63 6861  id,.    from_cha
-00003f30: 745f 6964 2c0a 2020 2020 6d65 7373 6167  t_id,.    messag
-00003f40: 655f 6964 2c0a 2020 2020 6469 7361 626c  e_id,.    disabl
-00003f50: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-00003f60: 6f6e 652c 0a20 2020 2074 696d 656f 7574  one,.    timeout
-00003f70: 3d4e 6f6e 652c 0a20 2020 2070 726f 7465  =None,.    prote
-00003f80: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-00003f90: 0a20 2020 206d 6573 7361 6765 5f74 6872  .    message_thr
-00003fa0: 6561 645f 6964 3d4e 6f6e 652c 0a29 3a0a  ead_id=None,.):.
-00003fb0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00003fc0: 2072 2266 6f72 7761 7264 4d65 7373 6167   r"forwardMessag
-00003fd0: 6522 0a20 2020 2070 6179 6c6f 6164 203d  e".    payload =
-00003fe0: 207b 0a20 2020 2020 2020 2022 6368 6174   {.        "chat
-00003ff0: 5f69 6422 3a20 6368 6174 5f69 642c 0a20  _id": chat_id,. 
-00004000: 2020 2020 2020 2022 6672 6f6d 5f63 6861         "from_cha
-00004010: 745f 6964 223a 2066 726f 6d5f 6368 6174  t_id": from_chat
-00004020: 5f69 642c 0a20 2020 2020 2020 2022 6d65  _id,.        "me
-00004030: 7373 6167 655f 6964 223a 206d 6573 7361  ssage_id": messa
-00004040: 6765 5f69 642c 0a20 2020 207d 0a20 2020  ge_id,.    }.   
-00004050: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
-00004060: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
-00004070: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00004080: 796c 6f61 645b 2264 6973 6162 6c65 5f6e  yload["disable_n
-00004090: 6f74 6966 6963 6174 696f 6e22 5d20 3d20  otification"] = 
+00002b00: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+00002b10: 6f61 645b 2262 7573 696e 6573 735f 636f  oad["business_co
+00002b20: 6e6e 6563 7469 6f6e 5f69 6422 5d20 3d20  nnection_id"] = 
+00002b30: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+00002b40: 696f 6e5f 6964 0a20 2020 2072 6574 7572  ion_id.    retur
+00002b50: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00002b60: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00002b70: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00002b80: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+00002b90: 290a 0a0a 6465 6620 7365 745f 7765 6268  )...def set_webh
+00002ba0: 6f6f 6b28 0a20 2020 2074 6f6b 656e 2c0a  ook(.    token,.
+00002bb0: 2020 2020 7572 6c3d 4e6f 6e65 2c0a 2020      url=None,.  
+00002bc0: 2020 6365 7274 6966 6963 6174 653d 4e6f    certificate=No
+00002bd0: 6e65 2c0a 2020 2020 6d61 785f 636f 6e6e  ne,.    max_conn
+00002be0: 6563 7469 6f6e 733d 4e6f 6e65 2c0a 2020  ections=None,.  
+00002bf0: 2020 616c 6c6f 7765 645f 7570 6461 7465    allowed_update
+00002c00: 733d 4e6f 6e65 2c0a 2020 2020 6970 5f61  s=None,.    ip_a
+00002c10: 6464 7265 7373 3d4e 6f6e 652c 0a20 2020  ddress=None,.   
+00002c20: 2064 726f 705f 7065 6e64 696e 675f 7570   drop_pending_up
+00002c30: 6461 7465 733d 4e6f 6e65 2c0a 2020 2020  dates=None,.    
+00002c40: 7469 6d65 6f75 743d 4e6f 6e65 2c0a 2020  timeout=None,.  
+00002c50: 2020 7365 6372 6574 5f74 6f6b 656e 3d4e    secret_token=N
+00002c60: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
+00002c70: 6f64 5f75 726c 203d 2072 2273 6574 5765  od_url = r"setWe
+00002c80: 6268 6f6f 6b22 0a20 2020 2070 6179 6c6f  bhook".    paylo
+00002c90: 6164 203d 207b 0a20 2020 2020 2020 2022  ad = {.        "
+00002ca0: 7572 6c22 3a20 7572 6c20 6966 2075 726c  url": url if url
+00002cb0: 2065 6c73 6520 2222 2c0a 2020 2020 7d0a   else "",.    }.
+00002cc0: 2020 2020 6669 6c65 7320 3d20 4e6f 6e65      files = None
+00002cd0: 0a20 2020 2069 6620 6365 7274 6966 6963  .    if certific
+00002ce0: 6174 653a 0a20 2020 2020 2020 2066 696c  ate:.        fil
+00002cf0: 6573 203d 207b 2263 6572 7469 6669 6361  es = {"certifica
+00002d00: 7465 223a 2063 6572 7469 6669 6361 7465  te": certificate
+00002d10: 7d0a 2020 2020 6966 206d 6178 5f63 6f6e  }.    if max_con
+00002d20: 6e65 6374 696f 6e73 3a0a 2020 2020 2020  nections:.      
+00002d30: 2020 7061 796c 6f61 645b 226d 6178 5f63    payload["max_c
+00002d40: 6f6e 6e65 6374 696f 6e73 225d 203d 206d  onnections"] = m
+00002d50: 6178 5f63 6f6e 6e65 6374 696f 6e73 0a20  ax_connections. 
+00002d60: 2020 2069 6620 616c 6c6f 7765 645f 7570     if allowed_up
+00002d70: 6461 7465 7320 6973 206e 6f74 204e 6f6e  dates is not Non
+00002d80: 653a 2020 2320 456d 7074 7920 6c69 7374  e:  # Empty list
+00002d90: 7320 7368 6f75 6c64 2070 6173 730a 2020  s should pass.  
+00002da0: 2020 2020 2020 7061 796c 6f61 645b 2261        payload["a
+00002db0: 6c6c 6f77 6564 5f75 7064 6174 6573 225d  llowed_updates"]
+00002dc0: 203d 206a 736f 6e2e 6475 6d70 7328 616c   = json.dumps(al
+00002dd0: 6c6f 7765 645f 7570 6461 7465 7329 0a20  lowed_updates). 
+00002de0: 2020 2069 6620 6970 5f61 6464 7265 7373     if ip_address
+00002df0: 2069 7320 6e6f 7420 4e6f 6e65 3a20 2023   is not None:  #
+00002e00: 2045 6d70 7479 2073 7472 696e 6720 7368   Empty string sh
+00002e10: 6f75 6c64 2070 6173 730a 2020 2020 2020  ould pass.      
+00002e20: 2020 7061 796c 6f61 645b 2269 705f 6164    payload["ip_ad
+00002e30: 6472 6573 7322 5d20 3d20 6970 5f61 6464  dress"] = ip_add
+00002e40: 7265 7373 0a20 2020 2069 6620 6472 6f70  ress.    if drop
+00002e50: 5f70 656e 6469 6e67 5f75 7064 6174 6573  _pending_updates
+00002e60: 2069 7320 6e6f 7420 4e6f 6e65 3a20 2023   is not None:  #
+00002e70: 2041 6e79 2062 6f6f 6c20 7661 6c75 6520   Any bool value 
+00002e80: 7368 6f75 6c64 2070 6173 730a 2020 2020  should pass.    
+00002e90: 2020 2020 7061 796c 6f61 645b 2264 726f      payload["dro
+00002ea0: 705f 7065 6e64 696e 675f 7570 6461 7465  p_pending_update
+00002eb0: 7322 5d20 3d20 6472 6f70 5f70 656e 6469  s"] = drop_pendi
+00002ec0: 6e67 5f75 7064 6174 6573 0a20 2020 2069  ng_updates.    i
+00002ed0: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
+00002ee0: 2020 2070 6179 6c6f 6164 5b22 7469 6d65     payload["time
+00002ef0: 6f75 7422 5d20 3d20 7469 6d65 6f75 740a  out"] = timeout.
+00002f00: 2020 2020 6966 2073 6563 7265 745f 746f      if secret_to
+00002f10: 6b65 6e3a 0a20 2020 2020 2020 2070 6179  ken:.        pay
+00002f20: 6c6f 6164 5b22 7365 6372 6574 5f74 6f6b  load["secret_tok
+00002f30: 656e 225d 203d 2073 6563 7265 745f 746f  en"] = secret_to
+00002f40: 6b65 6e0a 2020 2020 7265 7475 726e 205f  ken.    return _
+00002f50: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+00002f60: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00002f70: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+00002f80: 6669 6c65 733d 6669 6c65 7329 0a0a 0a64  files=files)...d
+00002f90: 6566 2064 656c 6574 655f 7765 6268 6f6f  ef delete_webhoo
+00002fa0: 6b28 746f 6b65 6e2c 2064 726f 705f 7065  k(token, drop_pe
+00002fb0: 6e64 696e 675f 7570 6461 7465 733d 4e6f  nding_updates=No
+00002fc0: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
+00002fd0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+00002fe0: 6c20 3d20 7222 6465 6c65 7465 5765 6268  l = r"deleteWebh
+00002ff0: 6f6f 6b22 0a20 2020 2070 6179 6c6f 6164  ook".    payload
+00003000: 203d 207b 7d0a 2020 2020 6966 2064 726f   = {}.    if dro
+00003010: 705f 7065 6e64 696e 675f 7570 6461 7465  p_pending_update
+00003020: 7320 6973 206e 6f74 204e 6f6e 653a 2020  s is not None:  
+00003030: 2320 416e 7920 626f 6f6c 2076 616c 7565  # Any bool value
+00003040: 2073 686f 756c 6420 7061 7373 0a20 2020   should pass.   
+00003050: 2020 2020 2070 6179 6c6f 6164 5b22 6472       payload["dr
+00003060: 6f70 5f70 656e 6469 6e67 5f75 7064 6174  op_pending_updat
+00003070: 6573 225d 203d 2064 726f 705f 7065 6e64  es"] = drop_pend
+00003080: 696e 675f 7570 6461 7465 730a 2020 2020  ing_updates.    
+00003090: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
+000030a0: 2020 2020 7061 796c 6f61 645b 2274 696d      payload["tim
+000030b0: 656f 7574 225d 203d 2074 696d 656f 7574  eout"] = timeout
+000030c0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+000030d0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+000030e0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+000030f0: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
+00003100: 6566 2067 6574 5f77 6562 686f 6f6b 5f69  ef get_webhook_i
+00003110: 6e66 6f28 746f 6b65 6e2c 2074 696d 656f  nfo(token, timeo
+00003120: 7574 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ut=None):.    me
+00003130: 7468 6f64 5f75 726c 203d 2072 2267 6574  thod_url = r"get
+00003140: 5765 6268 6f6f 6b49 6e66 6f22 0a20 2020  WebhookInfo".   
+00003150: 2070 6179 6c6f 6164 203d 207b 7d0a 2020   payload = {}.  
+00003160: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
+00003170: 2020 2020 2020 7061 796c 6f61 645b 2274        payload["t
+00003180: 696d 656f 7574 225d 203d 2074 696d 656f  imeout"] = timeo
+00003190: 7574 0a20 2020 2072 6574 7572 6e20 5f6d  ut.    return _m
+000031a0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+000031b0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000031c0: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
+000031d0: 0a64 6566 2067 6574 5f75 7064 6174 6573  .def get_updates
+000031e0: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
+000031f0: 206f 6666 7365 743d 4e6f 6e65 2c0a 2020   offset=None,.  
+00003200: 2020 6c69 6d69 743d 4e6f 6e65 2c0a 2020    limit=None,.  
+00003210: 2020 7469 6d65 6f75 743d 4e6f 6e65 2c0a    timeout=None,.
+00003220: 2020 2020 616c 6c6f 7765 645f 7570 6461      allowed_upda
+00003230: 7465 733d 4e6f 6e65 2c0a 2020 2020 6c6f  tes=None,.    lo
+00003240: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
+00003250: 7574 3d4e 6f6e 652c 0a29 3a0a 2020 2020  ut=None,.):.    
+00003260: 6d65 7468 6f64 5f75 726c 203d 2072 2267  method_url = r"g
+00003270: 6574 5570 6461 7465 7322 0a20 2020 2070  etUpdates".    p
+00003280: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
+00003290: 6966 206f 6666 7365 743a 0a20 2020 2020  if offset:.     
+000032a0: 2020 2070 6179 6c6f 6164 5b22 6f66 6673     payload["offs
+000032b0: 6574 225d 203d 206f 6666 7365 740a 2020  et"] = offset.  
+000032c0: 2020 6966 206c 696d 6974 3a0a 2020 2020    if limit:.    
+000032d0: 2020 2020 7061 796c 6f61 645b 226c 696d      payload["lim
+000032e0: 6974 225d 203d 206c 696d 6974 0a20 2020  it"] = limit.   
+000032f0: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
+00003300: 2020 2020 2070 6179 6c6f 6164 5b22 7469       payload["ti
+00003310: 6d65 6f75 7422 5d20 3d20 7469 6d65 6f75  meout"] = timeou
+00003320: 740a 2020 2020 7061 796c 6f61 645b 226c  t.    payload["l
+00003330: 6f6e 675f 706f 6c6c 696e 675f 7469 6d65  ong_polling_time
+00003340: 6f75 7422 5d20 3d20 280a 2020 2020 2020  out"] = (.      
+00003350: 2020 6c6f 6e67 5f70 6f6c 6c69 6e67 5f74    long_polling_t
+00003360: 696d 656f 7574 2069 6620 6c6f 6e67 5f70  imeout if long_p
+00003370: 6f6c 6c69 6e67 5f74 696d 656f 7574 2065  olling_timeout e
+00003380: 6c73 6520 4c4f 4e47 5f50 4f4c 4c49 4e47  lse LONG_POLLING
+00003390: 5f54 494d 454f 5554 0a20 2020 2029 0a20  _TIMEOUT.    ). 
+000033a0: 2020 2069 6620 616c 6c6f 7765 645f 7570     if allowed_up
+000033b0: 6461 7465 7320 6973 206e 6f74 204e 6f6e  dates is not Non
+000033c0: 653a 2020 2320 456d 7074 7920 6c69 7374  e:  # Empty list
+000033d0: 7320 7368 6f75 6c64 2070 6173 730a 2020  s should pass.  
+000033e0: 2020 2020 2020 7061 796c 6f61 645b 2261        payload["a
+000033f0: 6c6c 6f77 6564 5f75 7064 6174 6573 225d  llowed_updates"]
+00003400: 203d 206a 736f 6e2e 6475 6d70 7328 616c   = json.dumps(al
+00003410: 6c6f 7765 645f 7570 6461 7465 7329 0a20  lowed_updates). 
+00003420: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+00003430: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00003440: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00003450: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
+00003460: 2067 6574 5f75 7365 725f 7072 6f66 696c   get_user_profil
+00003470: 655f 7068 6f74 6f73 2874 6f6b 656e 2c20  e_photos(token, 
+00003480: 7573 6572 5f69 642c 206f 6666 7365 743d  user_id, offset=
+00003490: 4e6f 6e65 2c20 6c69 6d69 743d 4e6f 6e65  None, limit=None
+000034a0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+000034b0: 6c20 3d20 7222 6765 7455 7365 7250 726f  l = r"getUserPro
+000034c0: 6669 6c65 5068 6f74 6f73 220a 2020 2020  filePhotos".    
+000034d0: 7061 796c 6f61 6420 3d20 7b22 7573 6572  payload = {"user
+000034e0: 5f69 6422 3a20 7573 6572 5f69 647d 0a20  _id": user_id}. 
+000034f0: 2020 2069 6620 6f66 6673 6574 3a0a 2020     if offset:.  
+00003500: 2020 2020 2020 7061 796c 6f61 645b 226f        payload["o
+00003510: 6666 7365 7422 5d20 3d20 6f66 6673 6574  ffset"] = offset
+00003520: 0a20 2020 2069 6620 6c69 6d69 743a 0a20  .    if limit:. 
+00003530: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00003540: 6c69 6d69 7422 5d20 3d20 6c69 6d69 740a  limit"] = limit.
+00003550: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00003560: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00003570: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00003580: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
+00003590: 6620 7365 745f 6d65 7373 6167 655f 7265  f set_message_re
+000035a0: 6163 7469 6f6e 2874 6f6b 656e 2c20 6368  action(token, ch
+000035b0: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
+000035c0: 642c 2072 6561 6374 696f 6e3d 4e6f 6e65  d, reaction=None
+000035d0: 2c20 6973 5f62 6967 3d4e 6f6e 6529 3a0a  , is_big=None):.
+000035e0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000035f0: 2072 2273 6574 4d65 7373 6167 6552 6561   r"setMessageRea
+00003600: 6374 696f 6e22 0a20 2020 2070 6179 6c6f  ction".    paylo
+00003610: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+00003620: 2063 6861 745f 6964 2c20 226d 6573 7361   chat_id, "messa
+00003630: 6765 5f69 6422 3a20 6d65 7373 6167 655f  ge_id": message_
+00003640: 6964 7d0a 2020 2020 6966 2072 6561 6374  id}.    if react
+00003650: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
+00003660: 6c6f 6164 5b22 7265 6163 7469 6f6e 225d  load["reaction"]
+00003670: 203d 206a 736f 6e2e 6475 6d70 7328 5b72   = json.dumps([r
+00003680: 2e74 6f5f 6469 6374 2829 2066 6f72 2072  .to_dict() for r
+00003690: 2069 6e20 7265 6163 7469 6f6e 5d29 0a20   in reaction]). 
+000036a0: 2020 2069 6620 6973 5f62 6967 2069 7320     if is_big is 
+000036b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000036c0: 2020 7061 796c 6f61 645b 2269 735f 6269    payload["is_bi
+000036d0: 6722 5d20 3d20 6973 5f62 6967 0a20 2020  g"] = is_big.   
+000036e0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+000036f0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00003700: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00003710: 7061 796c 6f61 6429 0a0a 0a64 6566 2067  payload)...def g
+00003720: 6574 5f63 6861 7428 746f 6b65 6e2c 2063  et_chat(token, c
+00003730: 6861 745f 6964 293a 0a20 2020 206d 6574  hat_id):.    met
+00003740: 686f 645f 7572 6c20 3d20 7222 6765 7443  hod_url = r"getC
+00003750: 6861 7422 0a20 2020 2070 6179 6c6f 6164  hat".    payload
+00003760: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
+00003770: 6861 745f 6964 7d0a 2020 2020 7265 7475  hat_id}.    retu
+00003780: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00003790: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+000037a0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+000037b0: 6164 290a 0a0a 6465 6620 6c65 6176 655f  ad)...def leave_
+000037c0: 6368 6174 2874 6f6b 656e 2c20 6368 6174  chat(token, chat
+000037d0: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
+000037e0: 5f75 726c 203d 2072 226c 6561 7665 4368  _url = r"leaveCh
+000037f0: 6174 220a 2020 2020 7061 796c 6f61 6420  at".    payload 
+00003800: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
+00003810: 6174 5f69 647d 0a20 2020 2072 6574 7572  at_id}.    retur
+00003820: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00003830: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00003840: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00003850: 6429 0a0a 0a64 6566 2067 6574 5f63 6861  d)...def get_cha
+00003860: 745f 6164 6d69 6e69 7374 7261 746f 7273  t_administrators
+00003870: 2874 6f6b 656e 2c20 6368 6174 5f69 6429  (token, chat_id)
+00003880: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00003890: 203d 2072 2267 6574 4368 6174 4164 6d69   = r"getChatAdmi
+000038a0: 6e69 7374 7261 746f 7273 220a 2020 2020  nistrators".    
+000038b0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+000038c0: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
+000038d0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+000038e0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+000038f0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00003900: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
+00003910: 2067 6574 5f63 6861 745f 6d65 6d62 6572   get_chat_member
+00003920: 5f63 6f75 6e74 2874 6f6b 656e 2c20 6368  _count(token, ch
+00003930: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
+00003940: 6f64 5f75 726c 203d 2072 2267 6574 4368  od_url = r"getCh
+00003950: 6174 4d65 6d62 6572 436f 756e 7422 0a20  atMemberCount". 
+00003960: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
+00003970: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
+00003980: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+00003990: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+000039a0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000039b0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+000039c0: 2320 6e6f 696e 7370 6563 7469 6f6e 2050  # noinspection P
+000039d0: 7953 6861 646f 7769 6e67 4275 696c 7469  yShadowingBuilti
+000039e0: 6e73 0a64 6566 2073 6574 5f73 7469 636b  ns.def set_stick
+000039f0: 6572 5f73 6574 5f74 6875 6d62 6e61 696c  er_set_thumbnail
+00003a00: 2874 6f6b 656e 2c20 6e61 6d65 2c20 7573  (token, name, us
+00003a10: 6572 5f69 642c 2074 6875 6d62 6e61 696c  er_id, thumbnail
+00003a20: 2c20 666f 726d 6174 293a 0a20 2020 206d  , format):.    m
+00003a30: 6574 686f 645f 7572 6c20 3d20 7222 7365  ethod_url = r"se
+00003a40: 7453 7469 636b 6572 5365 7454 6875 6d62  tStickerSetThumb
+00003a50: 6e61 696c 220a 2020 2020 7061 796c 6f61  nail".    payloa
+00003a60: 6420 3d20 7b22 6e61 6d65 223a 206e 616d  d = {"name": nam
+00003a70: 652c 2022 7573 6572 5f69 6422 3a20 7573  e, "user_id": us
+00003a80: 6572 5f69 642c 2022 666f 726d 6174 223a  er_id, "format":
+00003a90: 2066 6f72 6d61 747d 0a20 2020 2066 696c   format}.    fil
+00003aa0: 6573 203d 207b 7d0a 2020 2020 6966 2074  es = {}.    if t
+00003ab0: 6875 6d62 6e61 696c 3a0a 2020 2020 2020  humbnail:.      
+00003ac0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00003ad0: 6e63 6528 7468 756d 626e 6169 6c2c 2073  nce(thumbnail, s
+00003ae0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00003af0: 2066 696c 6573 5b22 7468 756d 626e 6169   files["thumbnai
+00003b00: 6c22 5d20 3d20 7468 756d 626e 6169 6c0a  l"] = thumbnail.
+00003b10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00003b20: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
+00003b30: 645b 2274 6875 6d62 6e61 696c 225d 203d  d["thumbnail"] =
+00003b40: 2074 6875 6d62 6e61 696c 0a20 2020 2072   thumbnail.    r
+00003b50: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00003b60: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00003b70: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00003b80: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00003b90: 6573 206f 7220 4e6f 6e65 290a 0a0a 6465  es or None)...de
+00003ba0: 6620 7265 706c 6163 655f 7374 6963 6b65  f replace_sticke
+00003bb0: 725f 696e 5f73 6574 2874 6f6b 656e 2c20  r_in_set(token, 
+00003bc0: 7573 6572 5f69 642c 206e 616d 652c 206f  user_id, name, o
+00003bd0: 6c64 5f73 7469 636b 6572 2c20 7374 6963  ld_sticker, stic
+00003be0: 6b65 7229 3a0a 2020 2020 6d65 7468 6f64  ker):.    method
+00003bf0: 5f75 726c 203d 2072 2272 6570 6c61 6365  _url = r"replace
+00003c00: 5374 6963 6b65 7249 6e53 6574 220a 2020  StickerInSet".  
+00003c10: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
+00003c20: 2020 2020 2020 2275 7365 725f 6964 223a        "user_id":
+00003c30: 2075 7365 725f 6964 2c0a 2020 2020 2020   user_id,.      
+00003c40: 2020 226e 616d 6522 3a20 6e61 6d65 2c0a    "name": name,.
+00003c50: 2020 2020 2020 2020 226f 6c64 5f73 7469          "old_sti
+00003c60: 636b 6572 223a 206f 6c64 5f73 7469 636b  cker": old_stick
+00003c70: 6572 2c0a 2020 2020 2020 2020 2273 7469  er,.        "sti
+00003c80: 636b 6572 223a 2073 7469 636b 6572 2e74  cker": sticker.t
+00003c90: 6f5f 6a73 6f6e 2829 2c0a 2020 2020 7d0a  o_json(),.    }.
+00003ca0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00003cb0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00003cc0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00003cd0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
+00003ce0: 6620 7365 745f 6368 6174 5f73 7469 636b  f set_chat_stick
+00003cf0: 6572 5f73 6574 2874 6f6b 656e 2c20 6368  er_set(token, ch
+00003d00: 6174 5f69 642c 2073 7469 636b 6572 5f73  at_id, sticker_s
+00003d10: 6574 5f6e 616d 6529 3a0a 2020 2020 6d65  et_name):.    me
+00003d20: 7468 6f64 5f75 726c 203d 2072 2273 6574  thod_url = r"set
+00003d30: 4368 6174 5374 6963 6b65 7253 6574 220a  ChatStickerSet".
+00003d40: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00003d50: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+00003d60: 642c 2022 7374 6963 6b65 725f 7365 745f  d, "sticker_set_
+00003d70: 6e61 6d65 223a 2073 7469 636b 6572 5f73  name": sticker_s
+00003d80: 6574 5f6e 616d 657d 0a20 2020 2072 6574  et_name}.    ret
+00003d90: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00003da0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00003db0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00003dc0: 6f61 6429 0a0a 0a64 6566 2064 656c 6574  oad)...def delet
+00003dd0: 655f 6368 6174 5f73 7469 636b 6572 5f73  e_chat_sticker_s
+00003de0: 6574 2874 6f6b 656e 2c20 6368 6174 5f69  et(token, chat_i
+00003df0: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
+00003e00: 726c 203d 2072 2264 656c 6574 6543 6861  rl = r"deleteCha
+00003e10: 7453 7469 636b 6572 5365 7422 0a20 2020  tStickerSet".   
+00003e20: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+00003e30: 745f 6964 223a 2063 6861 745f 6964 7d0a  t_id": chat_id}.
+00003e40: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00003e50: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00003e60: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00003e70: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
+00003e80: 6620 6765 745f 6368 6174 5f6d 656d 6265  f get_chat_membe
+00003e90: 7228 746f 6b65 6e2c 2063 6861 745f 6964  r(token, chat_id
+00003ea0: 2c20 7573 6572 5f69 6429 3a0a 2020 2020  , user_id):.    
+00003eb0: 6d65 7468 6f64 5f75 726c 203d 2072 2267  method_url = r"g
+00003ec0: 6574 4368 6174 4d65 6d62 6572 220a 2020  etChatMember".  
+00003ed0: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+00003ee0: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
+00003ef0: 2022 7573 6572 5f69 6422 3a20 7573 6572   "user_id": user
+00003f00: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
+00003f10: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00003f20: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00003f30: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00003f40: 0a0a 0a64 6566 2066 6f72 7761 7264 5f6d  ...def forward_m
+00003f50: 6573 7361 6765 280a 2020 2020 746f 6b65  essage(.    toke
+00003f60: 6e2c 0a20 2020 2063 6861 745f 6964 2c0a  n,.    chat_id,.
+00003f70: 2020 2020 6672 6f6d 5f63 6861 745f 6964      from_chat_id
+00003f80: 2c0a 2020 2020 6d65 7373 6167 655f 6964  ,.    message_id
+00003f90: 2c0a 2020 2020 6469 7361 626c 655f 6e6f  ,.    disable_no
+00003fa0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+00003fb0: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
+00003fc0: 652c 0a20 2020 2070 726f 7465 6374 5f63  e,.    protect_c
+00003fd0: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
+00003fe0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00003ff0: 6964 3d4e 6f6e 652c 0a29 3a0a 2020 2020  id=None,.):.    
+00004000: 6d65 7468 6f64 5f75 726c 203d 2072 2266  method_url = r"f
+00004010: 6f72 7761 7264 4d65 7373 6167 6522 0a20  orwardMessage". 
+00004020: 2020 2070 6179 6c6f 6164 203d 207b 0a20     payload = {. 
+00004030: 2020 2020 2020 2022 6368 6174 5f69 6422         "chat_id"
+00004040: 3a20 6368 6174 5f69 642c 0a20 2020 2020  : chat_id,.     
+00004050: 2020 2022 6672 6f6d 5f63 6861 745f 6964     "from_chat_id
+00004060: 223a 2066 726f 6d5f 6368 6174 5f69 642c  ": from_chat_id,
+00004070: 0a20 2020 2020 2020 2022 6d65 7373 6167  .        "messag
+00004080: 655f 6964 223a 206d 6573 7361 6765 5f69  e_id": message_i
+00004090: 642c 0a20 2020 207d 0a20 2020 2069 6620  d,.    }.    if 
 000040a0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-000040b0: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
-000040c0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-000040d0: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
-000040e0: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-000040f0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00004100: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00004110: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-00004120: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
-00004130: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00004140: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
-00004150: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
-00004160: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
-00004170: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
-00004180: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-00004190: 6164 5f69 640a 2020 2020 7265 7475 726e  ad_id.    return
-000041a0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-000041b0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000041c0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000041d0: 290a 0a0a 6465 6620 636f 7079 5f6d 6573  )...def copy_mes
-000041e0: 7361 6765 280a 2020 2020 746f 6b65 6e2c  sage(.    token,
-000041f0: 0a20 2020 2063 6861 745f 6964 2c0a 2020  .    chat_id,.  
-00004200: 2020 6672 6f6d 5f63 6861 745f 6964 2c0a    from_chat_id,.
-00004210: 2020 2020 6d65 7373 6167 655f 6964 2c0a      message_id,.
-00004220: 2020 2020 6361 7074 696f 6e3d 4e6f 6e65      caption=None
-00004230: 2c0a 2020 2020 7061 7273 655f 6d6f 6465  ,.    parse_mode
-00004240: 3d4e 6f6e 652c 0a20 2020 2063 6170 7469  =None,.    capti
-00004250: 6f6e 5f65 6e74 6974 6965 733d 4e6f 6e65  on_entities=None
-00004260: 2c0a 2020 2020 6469 7361 626c 655f 6e6f  ,.    disable_no
-00004270: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00004280: 0a20 2020 2072 6570 6c79 5f6d 6172 6b75  .    reply_marku
-00004290: 703d 4e6f 6e65 2c0a 2020 2020 7469 6d65  p=None,.    time
-000042a0: 6f75 743d 4e6f 6e65 2c0a 2020 2020 7072  out=None,.    pr
-000042b0: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
-000042c0: 6e65 2c0a 2020 2020 6d65 7373 6167 655f  ne,.    message_
-000042d0: 7468 7265 6164 5f69 643d 4e6f 6e65 2c0a  thread_id=None,.
-000042e0: 2020 2020 7265 706c 795f 7061 7261 6d65      reply_parame
-000042f0: 7465 7273 3d4e 6f6e 652c 0a29 3a0a 2020  ters=None,.):.  
-00004300: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00004310: 2263 6f70 794d 6573 7361 6765 220a 2020  "copyMessage".  
-00004320: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
-00004330: 2020 2020 2020 2263 6861 745f 6964 223a        "chat_id":
-00004340: 2063 6861 745f 6964 2c0a 2020 2020 2020   chat_id,.      
-00004350: 2020 2266 726f 6d5f 6368 6174 5f69 6422    "from_chat_id"
-00004360: 3a20 6672 6f6d 5f63 6861 745f 6964 2c0a  : from_chat_id,.
-00004370: 2020 2020 2020 2020 226d 6573 7361 6765          "message
-00004380: 5f69 6422 3a20 6d65 7373 6167 655f 6964  _id": message_id
-00004390: 2c0a 2020 2020 7d0a 2020 2020 6966 2063  ,.    }.    if c
-000043a0: 6170 7469 6f6e 2069 7320 6e6f 7420 4e6f  aption is not No
-000043b0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000043c0: 6f61 645b 2263 6170 7469 6f6e 225d 203d  oad["caption"] =
-000043d0: 2063 6170 7469 6f6e 0a20 2020 2069 6620   caption.    if 
-000043e0: 7061 7273 655f 6d6f 6465 3a0a 2020 2020  parse_mode:.    
-000043f0: 2020 2020 7061 796c 6f61 645b 2270 6172      payload["par
-00004400: 7365 5f6d 6f64 6522 5d20 3d20 7061 7273  se_mode"] = pars
-00004410: 655f 6d6f 6465 0a20 2020 2069 6620 6361  e_mode.    if ca
-00004420: 7074 696f 6e5f 656e 7469 7469 6573 2069  ption_entities i
-00004430: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00004440: 2020 2020 7061 796c 6f61 645b 2263 6170      payload["cap
-00004450: 7469 6f6e 5f65 6e74 6974 6965 7322 5d20  tion_entities"] 
-00004460: 3d20 6a73 6f6e 2e64 756d 7073 280a 2020  = json.dumps(.  
-00004470: 2020 2020 2020 2020 2020 7479 7065 732e            types.
-00004480: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
-00004490: 5f6c 6973 745f 6f66 5f64 6963 7473 2863  _list_of_dicts(c
-000044a0: 6170 7469 6f6e 5f65 6e74 6974 6965 7329  aption_entities)
-000044b0: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
-000044c0: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-000044d0: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-000044e0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000044f0: 6f61 645b 2264 6973 6162 6c65 5f6e 6f74  oad["disable_not
-00004500: 6966 6963 6174 696f 6e22 5d20 3d20 6469  ification"] = di
+000040b0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+000040c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000040d0: 645b 2264 6973 6162 6c65 5f6e 6f74 6966  d["disable_notif
+000040e0: 6963 6174 696f 6e22 5d20 3d20 6469 7361  ication"] = disa
+000040f0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00004100: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00004110: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00004120: 5b22 7469 6d65 6f75 7422 5d20 3d20 7469  ["timeout"] = ti
+00004130: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
+00004140: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+00004150: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00004160: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
+00004170: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
+00004180: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00004190: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+000041a0: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
+000041b0: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
+000041c0: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
+000041d0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+000041e0: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
+000041f0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00004200: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00004210: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+00004220: 6465 6620 636f 7079 5f6d 6573 7361 6765  def copy_message
+00004230: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
+00004240: 2063 6861 745f 6964 2c0a 2020 2020 6672   chat_id,.    fr
+00004250: 6f6d 5f63 6861 745f 6964 2c0a 2020 2020  om_chat_id,.    
+00004260: 6d65 7373 6167 655f 6964 2c0a 2020 2020  message_id,.    
+00004270: 6361 7074 696f 6e3d 4e6f 6e65 2c0a 2020  caption=None,.  
+00004280: 2020 7061 7273 655f 6d6f 6465 3d4e 6f6e    parse_mode=Non
+00004290: 652c 0a20 2020 2063 6170 7469 6f6e 5f65  e,.    caption_e
+000042a0: 6e74 6974 6965 733d 4e6f 6e65 2c0a 2020  ntities=None,.  
+000042b0: 2020 6469 7361 626c 655f 6e6f 7469 6669    disable_notifi
+000042c0: 6361 7469 6f6e 3d4e 6f6e 652c 0a20 2020  cation=None,.   
+000042d0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+000042e0: 6e65 2c0a 2020 2020 7469 6d65 6f75 743d  ne,.    timeout=
+000042f0: 4e6f 6e65 2c0a 2020 2020 7072 6f74 6563  None,.    protec
+00004300: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0a  t_content=None,.
+00004310: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
+00004320: 6164 5f69 643d 4e6f 6e65 2c0a 2020 2020  ad_id=None,.    
+00004330: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00004340: 3d4e 6f6e 652c 0a29 3a0a 2020 2020 6d65  =None,.):.    me
+00004350: 7468 6f64 5f75 726c 203d 2072 2263 6f70  thod_url = r"cop
+00004360: 794d 6573 7361 6765 220a 2020 2020 7061  yMessage".    pa
+00004370: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
+00004380: 2020 2263 6861 745f 6964 223a 2063 6861    "chat_id": cha
+00004390: 745f 6964 2c0a 2020 2020 2020 2020 2266  t_id,.        "f
+000043a0: 726f 6d5f 6368 6174 5f69 6422 3a20 6672  rom_chat_id": fr
+000043b0: 6f6d 5f63 6861 745f 6964 2c0a 2020 2020  om_chat_id,.    
+000043c0: 2020 2020 226d 6573 7361 6765 5f69 6422      "message_id"
+000043d0: 3a20 6d65 7373 6167 655f 6964 2c0a 2020  : message_id,.  
+000043e0: 2020 7d0a 2020 2020 6966 2063 6170 7469    }.    if capti
+000043f0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
+00004400: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00004410: 2263 6170 7469 6f6e 225d 203d 2063 6170  "caption"] = cap
+00004420: 7469 6f6e 0a20 2020 2069 6620 7061 7273  tion.    if pars
+00004430: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
+00004440: 7061 796c 6f61 645b 2270 6172 7365 5f6d  payload["parse_m
+00004450: 6f64 6522 5d20 3d20 7061 7273 655f 6d6f  ode"] = parse_mo
+00004460: 6465 0a20 2020 2069 6620 6361 7074 696f  de.    if captio
+00004470: 6e5f 656e 7469 7469 6573 2069 7320 6e6f  n_entities is no
+00004480: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00004490: 7061 796c 6f61 645b 2263 6170 7469 6f6e  payload["caption
+000044a0: 5f65 6e74 6974 6965 7322 5d20 3d20 6a73  _entities"] = js
+000044b0: 6f6e 2e64 756d 7073 280a 2020 2020 2020  on.dumps(.      
+000044c0: 2020 2020 2020 7479 7065 732e 4d65 7373        types.Mess
+000044d0: 6167 6545 6e74 6974 792e 746f 5f6c 6973  ageEntity.to_lis
+000044e0: 745f 6f66 5f64 6963 7473 2863 6170 7469  t_of_dicts(capti
+000044f0: 6f6e 5f65 6e74 6974 6965 7329 0a20 2020  on_entities).   
+00004500: 2020 2020 2029 0a20 2020 2069 6620 6469       ).    if di
 00004510: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00004520: 6f6e 0a20 2020 2069 6620 7265 706c 795f  on.    if reply_
-00004530: 7061 7261 6d65 7465 7273 2069 7320 6e6f  parameters is no
-00004540: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00004550: 7061 796c 6f61 645b 2272 6570 6c79 5f70  payload["reply_p
-00004560: 6172 616d 6574 6572 7322 5d20 3d20 7265  arameters"] = re
-00004570: 706c 795f 7061 7261 6d65 7465 7273 2e74  ply_parameters.t
-00004580: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
-00004590: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
-000045a0: 2070 6179 6c6f 6164 5b22 7469 6d65 6f75   payload["timeou
-000045b0: 7422 5d20 3d20 7469 6d65 6f75 740a 2020  t"] = timeout.  
-000045c0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
-000045d0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
-000045e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000045f0: 645b 2270 726f 7465 6374 5f63 6f6e 7465  d["protect_conte
-00004600: 6e74 225d 203d 2070 726f 7465 6374 5f63  nt"] = protect_c
-00004610: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
-00004620: 7373 6167 655f 7468 7265 6164 5f69 6420  ssage_thread_id 
-00004630: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00004640: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
-00004650: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
-00004660: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-00004670: 6164 5f69 640a 2020 2020 7265 7475 726e  ad_id.    return
-00004680: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00004690: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000046a0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000046b0: 290a 0a0a 6465 6620 7365 6e64 5f64 6963  )...def send_dic
-000046c0: 6528 0a20 2020 2074 6f6b 656e 2c0a 2020  e(.    token,.  
-000046d0: 2020 6368 6174 5f69 642c 0a20 2020 2065    chat_id,.    e
-000046e0: 6d6f 6a69 3d4e 6f6e 652c 0a20 2020 2064  moji=None,.    d
-000046f0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00004700: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 7265  ion=None,.    re
-00004710: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-00004720: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
-00004730: 652c 0a20 2020 2070 726f 7465 6374 5f63  e,.    protect_c
-00004740: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
-00004750: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00004760: 6964 3d4e 6f6e 652c 0a20 2020 2072 6570  id=None,.    rep
-00004770: 6c79 5f70 6172 616d 6574 6572 733d 4e6f  ly_parameters=No
-00004780: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
-00004790: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
-000047a0: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
-000047b0: 6f64 5f75 726c 203d 2072 2273 656e 6444  od_url = r"sendD
-000047c0: 6963 6522 0a20 2020 2070 6179 6c6f 6164  ice".    payload
-000047d0: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-000047e0: 6861 745f 6964 7d0a 2020 2020 6966 2065  hat_id}.    if e
-000047f0: 6d6f 6a69 3a0a 2020 2020 2020 2020 7061  moji:.        pa
-00004800: 796c 6f61 645b 2265 6d6f 6a69 225d 203d  yload["emoji"] =
-00004810: 2065 6d6f 6a69 0a20 2020 2069 6620 6469   emoji.    if di
-00004820: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00004830: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
-00004840: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00004850: 2264 6973 6162 6c65 5f6e 6f74 6966 6963  "disable_notific
-00004860: 6174 696f 6e22 5d20 3d20 6469 7361 626c  ation"] = disabl
-00004870: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
-00004880: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-00004890: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
-000048a0: 6f61 645b 2272 6570 6c79 5f6d 6172 6b75  oad["reply_marku
-000048b0: 7022 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p"] = _convert_m
-000048c0: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
-000048d0: 7570 290a 2020 2020 6966 2074 696d 656f  up).    if timeo
-000048e0: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
-000048f0: 6f61 645b 2274 696d 656f 7574 225d 203d  oad["timeout"] =
-00004900: 2074 696d 656f 7574 0a20 2020 2069 6620   timeout.    if 
-00004910: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-00004920: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00004930: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
-00004940: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
-00004950: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-00004960: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-00004970: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
-00004980: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
-00004990: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
-000049a0: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-000049b0: 645f 6964 0a20 2020 2069 6620 7265 706c  d_id.    if repl
-000049c0: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
+00004520: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
+00004530: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00004540: 2264 6973 6162 6c65 5f6e 6f74 6966 6963  "disable_notific
+00004550: 6174 696f 6e22 5d20 3d20 6469 7361 626c  ation"] = disabl
+00004560: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
+00004570: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
+00004580: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
+00004590: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+000045a0: 6f61 645b 2772 6570 6c79 5f70 6172 616d  oad['reply_param
+000045b0: 6574 6572 7327 5d20 3d20 7265 706c 795f  eters'] = reply_
+000045c0: 7061 7261 6d65 7465 7273 2e74 6f5f 6a73  parameters.to_js
+000045d0: 6f6e 2829 0a20 2020 2069 6620 7265 706c  on().    if repl
+000045e0: 795f 6d61 726b 7570 2069 7320 6e6f 7420  y_markup is not 
+000045f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00004600: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+00004610: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
+00004620: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+00004630: 726b 7570 290a 2020 2020 6966 2074 696d  rkup).    if tim
+00004640: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+00004650: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
+00004660: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+00004670: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
+00004680: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+00004690: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000046a0: 7072 6f74 6563 745f 636f 6e74 656e 7422  protect_content"
+000046b0: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
+000046c0: 656e 740a 2020 2020 6966 206d 6573 7361  ent.    if messa
+000046d0: 6765 5f74 6872 6561 645f 6964 2069 7320  ge_thread_id is 
+000046e0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000046f0: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
+00004700: 6765 5f74 6872 6561 645f 6964 225d 203d  ge_thread_id"] =
+00004710: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00004720: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
+00004730: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00004740: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00004750: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
+00004760: 0a64 6566 2073 656e 645f 6469 6365 280a  .def send_dice(.
+00004770: 2020 2020 746f 6b65 6e2c 0a20 2020 2063      token,.    c
+00004780: 6861 745f 6964 2c0a 2020 2020 656d 6f6a  hat_id,.    emoj
+00004790: 693d 4e6f 6e65 2c0a 2020 2020 6469 7361  i=None,.    disa
+000047a0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000047b0: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
+000047c0: 5f6d 6172 6b75 703d 4e6f 6e65 2c0a 2020  _markup=None,.  
+000047d0: 2020 7469 6d65 6f75 743d 4e6f 6e65 2c0a    timeout=None,.
+000047e0: 2020 2020 7072 6f74 6563 745f 636f 6e74      protect_cont
+000047f0: 656e 743d 4e6f 6e65 2c0a 2020 2020 6d65  ent=None,.    me
+00004800: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
+00004810: 4e6f 6e65 2c0a 2020 2020 7265 706c 795f  None,.    reply_
+00004820: 7061 7261 6d65 7465 7273 3d4e 6f6e 652c  parameters=None,
+00004830: 0a20 2020 2062 7573 696e 6573 735f 636f  .    business_co
+00004840: 6e6e 6563 7469 6f6e 5f69 643d 4e6f 6e65  nnection_id=None
+00004850: 2c0a 293a 0a20 2020 206d 6574 686f 645f  ,.):.    method_
+00004860: 7572 6c20 3d20 7222 7365 6e64 4469 6365  url = r"sendDice
+00004870: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+00004880: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
+00004890: 5f69 647d 0a20 2020 2069 6620 656d 6f6a  _id}.    if emoj
+000048a0: 693a 0a20 2020 2020 2020 2070 6179 6c6f  i:.        paylo
+000048b0: 6164 5b22 656d 6f6a 6922 5d20 3d20 656d  ad["emoji"] = em
+000048c0: 6f6a 690a 2020 2020 6966 2064 6973 6162  oji.    if disab
+000048d0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
+000048e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000048f0: 2020 2020 2070 6179 6c6f 6164 5b22 6469       payload["di
+00004900: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00004910: 6f6e 225d 203d 2064 6973 6162 6c65 5f6e  on"] = disable_n
+00004920: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
+00004930: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+00004940: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00004950: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
+00004960: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+00004970: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+00004980: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00004990: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000049a0: 5b22 7469 6d65 6f75 7422 5d20 3d20 7469  ["timeout"] = ti
+000049b0: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
+000049c0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
 000049d0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000049e0: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
-000049f0: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
-00004a00: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00004a10: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
-00004a20: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
-00004a30: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
-00004a40: 2020 7061 796c 6f61 645b 2262 7573 696e    payload["busin
-00004a50: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00004a60: 6422 5d20 3d20 6275 7369 6e65 7373 5f63  d"] = business_c
-00004a70: 6f6e 6e65 6374 696f 6e5f 6964 0a20 2020  onnection_id.   
-00004a80: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00004a90: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00004aa0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00004ab0: 7061 796c 6f61 6429 0a0a 0a64 6566 2073  payload)...def s
-00004ac0: 656e 645f 7068 6f74 6f28 0a20 2020 2074  end_photo(.    t
-00004ad0: 6f6b 656e 2c0a 2020 2020 6368 6174 5f69  oken,.    chat_i
-00004ae0: 642c 0a20 2020 2070 686f 746f 2c0a 2020  d,.    photo,.  
-00004af0: 2020 6361 7074 696f 6e3d 4e6f 6e65 2c0a    caption=None,.
-00004b00: 2020 2020 7265 706c 795f 6d61 726b 7570      reply_markup
-00004b10: 3d4e 6f6e 652c 0a20 2020 2070 6172 7365  =None,.    parse
-00004b20: 5f6d 6f64 653d 4e6f 6e65 2c0a 2020 2020  _mode=None,.    
-00004b30: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00004b40: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2074  tion=None,.    t
-00004b50: 696d 656f 7574 3d4e 6f6e 652c 0a20 2020  imeout=None,.   
-00004b60: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
-00004b70: 733d 4e6f 6e65 2c0a 2020 2020 7072 6f74  s=None,.    prot
-00004b80: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
-00004b90: 2c0a 2020 2020 6d65 7373 6167 655f 7468  ,.    message_th
-00004ba0: 7265 6164 5f69 643d 4e6f 6e65 2c0a 2020  read_id=None,.  
-00004bb0: 2020 6861 735f 7370 6f69 6c65 723d 4e6f    has_spoiler=No
-00004bc0: 6e65 2c0a 2020 2020 7265 706c 795f 7061  ne,.    reply_pa
-00004bd0: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
-00004be0: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
-00004bf0: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
-00004c00: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00004c10: 6c20 3d20 7222 7365 6e64 5068 6f74 6f22  l = r"sendPhoto"
-00004c20: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00004c30: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-00004c40: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
-00004c50: 4e6f 6e65 0a20 2020 2069 6620 7574 696c  None.    if util
-00004c60: 2e69 735f 7374 7269 6e67 2870 686f 746f  .is_string(photo
-00004c70: 293a 0a20 2020 2020 2020 2070 6179 6c6f  ):.        paylo
-00004c80: 6164 5b22 7068 6f74 6f22 5d20 3d20 7068  ad["photo"] = ph
-00004c90: 6f74 6f0a 2020 2020 656c 6966 2075 7469  oto.    elif uti
-00004ca0: 6c2e 6973 5f70 696c 5f69 6d61 6765 2870  l.is_pil_image(p
-00004cb0: 686f 746f 293a 0a20 2020 2020 2020 2066  hoto):.        f
-00004cc0: 696c 6573 203d 207b 2270 686f 746f 223a  iles = {"photo":
-00004cd0: 2075 7469 6c2e 7069 6c5f 696d 6167 655f   util.pil_image_
-00004ce0: 746f 5f66 696c 6528 7068 6f74 6f29 7d0a  to_file(photo)}.
-00004cf0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00004d00: 2020 6669 6c65 7320 3d20 7b22 7068 6f74    files = {"phot
-00004d10: 6f22 3a20 7068 6f74 6f7d 0a20 2020 2069  o": photo}.    i
-00004d20: 6620 6361 7074 696f 6e3a 0a20 2020 2020  f caption:.     
-00004d30: 2020 2070 6179 6c6f 6164 5b22 6361 7074     payload["capt
-00004d40: 696f 6e22 5d20 3d20 6361 7074 696f 6e0a  ion"] = caption.
-00004d50: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
-00004d60: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
-00004d70: 6c6f 6164 5b22 7265 706c 795f 6d61 726b  load["reply_mark
-00004d80: 7570 225d 203d 205f 636f 6e76 6572 745f  up"] = _convert_
-00004d90: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-00004da0: 6b75 7029 0a20 2020 2069 6620 7061 7273  kup).    if pars
-00004db0: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
-00004dc0: 7061 796c 6f61 645b 2270 6172 7365 5f6d  payload["parse_m
-00004dd0: 6f64 6522 5d20 3d20 7061 7273 655f 6d6f  ode"] = parse_mo
-00004de0: 6465 0a20 2020 2069 6620 6469 7361 626c  de.    if disabl
-00004df0: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-00004e00: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00004e10: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
-00004e20: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00004e30: 6e22 5d20 3d20 6469 7361 626c 655f 6e6f  n"] = disable_no
-00004e40: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-00004e50: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00004e60: 2020 2070 6179 6c6f 6164 5b22 7469 6d65     payload["time
-00004e70: 6f75 7422 5d20 3d20 7469 6d65 6f75 740a  out"] = timeout.
-00004e80: 2020 2020 6966 2063 6170 7469 6f6e 5f65      if caption_e
-00004e90: 6e74 6974 6965 733a 0a20 2020 2020 2020  ntities:.       
-00004ea0: 2070 6179 6c6f 6164 5b22 6361 7074 696f   payload["captio
-00004eb0: 6e5f 656e 7469 7469 6573 225d 203d 206a  n_entities"] = j
-00004ec0: 736f 6e2e 6475 6d70 7328 0a20 2020 2020  son.dumps(.     
-00004ed0: 2020 2020 2020 2074 7970 6573 2e4d 6573         types.Mes
-00004ee0: 7361 6765 456e 7469 7479 2e74 6f5f 6c69  sageEntity.to_li
-00004ef0: 7374 5f6f 665f 6469 6374 7328 6361 7074  st_of_dicts(capt
-00004f00: 696f 6e5f 656e 7469 7469 6573 290a 2020  ion_entities).  
-00004f10: 2020 2020 2020 290a 2020 2020 6966 2070        ).    if p
-00004f20: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
-00004f30: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00004f40: 2020 2020 7061 796c 6f61 645b 2270 726f      payload["pro
-00004f50: 7465 6374 5f63 6f6e 7465 6e74 225d 203d  tect_content"] =
-00004f60: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00004f70: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
-00004f80: 7468 7265 6164 5f69 6420 6973 206e 6f74  thread_id is not
-00004f90: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00004fa0: 6179 6c6f 6164 5b22 6d65 7373 6167 655f  ayload["message_
-00004fb0: 7468 7265 6164 5f69 6422 5d20 3d20 6d65  thread_id"] = me
-00004fc0: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-00004fd0: 2020 2020 6966 2068 6173 5f73 706f 696c      if has_spoil
-00004fe0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-00004ff0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00005000: 2268 6173 5f73 706f 696c 6572 225d 203d  "has_spoiler"] =
-00005010: 2068 6173 5f73 706f 696c 6572 0a20 2020   has_spoiler.   
-00005020: 2069 6620 7265 706c 795f 7061 7261 6d65   if reply_parame
-00005030: 7465 7273 2069 7320 6e6f 7420 4e6f 6e65  ters is not None
-00005040: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005050: 645b 2272 6570 6c79 5f70 6172 616d 6574  d["reply_paramet
-00005060: 6572 7322 5d20 3d20 7265 706c 795f 7061  ers"] = reply_pa
-00005070: 7261 6d65 7465 7273 2e74 6f5f 6a73 6f6e  rameters.to_json
-00005080: 2829 0a20 2020 2069 6620 6275 7369 6e65  ().    if busine
-00005090: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-000050a0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000050b0: 645b 2262 7573 696e 6573 735f 636f 6e6e  d["business_conn
-000050c0: 6563 7469 6f6e 5f69 6422 5d20 3d20 6275  ection_id"] = bu
-000050d0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-000050e0: 6e5f 6964 0a20 2020 2072 6574 7572 6e20  n_id.    return 
-000050f0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00005100: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00005110: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-00005120: 2066 696c 6573 3d66 696c 6573 2c20 6d65   files=files, me
-00005130: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-00005140: 6566 2073 656e 645f 6d65 6469 615f 6772  ef send_media_gr
-00005150: 6f75 7028 0a20 2020 2074 6f6b 656e 2c0a  oup(.    token,.
-00005160: 2020 2020 6368 6174 5f69 642c 0a20 2020      chat_id,.   
-00005170: 206d 6564 6961 2c0a 2020 2020 6469 7361   media,.    disa
-00005180: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00005190: 3d4e 6f6e 652c 0a20 2020 2074 696d 656f  =None,.    timeo
-000051a0: 7574 3d4e 6f6e 652c 0a20 2020 2070 726f  ut=None,.    pro
-000051b0: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-000051c0: 652c 0a20 2020 206d 6573 7361 6765 5f74  e,.    message_t
-000051d0: 6872 6561 645f 6964 3d4e 6f6e 652c 0a20  hread_id=None,. 
-000051e0: 2020 2072 6570 6c79 5f70 6172 616d 6574     reply_paramet
-000051f0: 6572 733d 4e6f 6e65 2c0a 2020 2020 6275  ers=None,.    bu
-00005200: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00005210: 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a 2020  n_id=None,.):.  
-00005220: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00005230: 2273 656e 644d 6564 6961 4772 6f75 7022  "sendMediaGroup"
-00005240: 0a20 2020 206d 6564 6961 5f6a 736f 6e2c  .    media_json,
-00005250: 2066 696c 6573 203d 2063 6f6e 7665 7274   files = convert
-00005260: 5f69 6e70 7574 5f6d 6564 6961 5f61 7272  _input_media_arr
-00005270: 6179 286d 6564 6961 290a 2020 2020 7061  ay(media).    pa
-00005280: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-00005290: 6422 3a20 6368 6174 5f69 642c 2022 6d65  d": chat_id, "me
-000052a0: 6469 6122 3a20 6d65 6469 615f 6a73 6f6e  dia": media_json
-000052b0: 7d0a 2020 2020 6966 2064 6973 6162 6c65  }.    if disable
-000052c0: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
-000052d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000052e0: 2020 2070 6179 6c6f 6164 5b22 6469 7361     payload["disa
-000052f0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00005300: 225d 203d 2064 6973 6162 6c65 5f6e 6f74  "] = disable_not
-00005310: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
-00005320: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
-00005330: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
-00005340: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
-00005350: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
-00005360: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
-00005370: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00005380: 6164 5b22 7072 6f74 6563 745f 636f 6e74  ad["protect_cont
-00005390: 656e 7422 5d20 3d20 7072 6f74 6563 745f  ent"] = protect_
-000053a0: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
-000053b0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000053c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000053d0: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
-000053e0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000053f0: 225d 203d 206d 6573 7361 6765 5f74 6872  "] = message_thr
-00005400: 6561 645f 6964 0a20 2020 2069 6620 7265  ead_id.    if re
-00005410: 706c 795f 7061 7261 6d65 7465 7273 2069  ply_parameters i
-00005420: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00005430: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
-00005440: 6c79 5f70 6172 616d 6574 6572 7322 5d20  ly_parameters"] 
-00005450: 3d20 7265 706c 795f 7061 7261 6d65 7465  = reply_paramete
-00005460: 7273 2e74 6f5f 6a73 6f6e 2829 0a20 2020  rs.to_json().   
-00005470: 2069 6620 6275 7369 6e65 7373 5f63 6f6e   if business_con
-00005480: 6e65 6374 696f 6e5f 6964 3a0a 2020 2020  nection_id:.    
-00005490: 2020 2020 7061 796c 6f61 645b 2262 7573      payload["bus
-000054a0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-000054b0: 5f69 6422 5d20 3d20 6275 7369 6e65 7373  _id"] = business
-000054c0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 0a20  _connection_id. 
-000054d0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-000054e0: 7265 7175 6573 7428 0a20 2020 2020 2020  request(.       
-000054f0: 2074 6f6b 656e 2c0a 2020 2020 2020 2020   token,.        
-00005500: 6d65 7468 6f64 5f75 726c 2c0a 2020 2020  method_url,.    
-00005510: 2020 2020 7061 7261 6d73 3d70 6179 6c6f      params=paylo
-00005520: 6164 2c0a 2020 2020 2020 2020 6d65 7468  ad,.        meth
-00005530: 6f64 3d22 706f 7374 2220 6966 2066 696c  od="post" if fil
-00005540: 6573 2065 6c73 6520 2267 6574 222c 0a20  es else "get",. 
-00005550: 2020 2020 2020 2066 696c 6573 3d66 696c         files=fil
-00005560: 6573 2069 6620 6669 6c65 7320 656c 7365  es if files else
-00005570: 204e 6f6e 652c 0a20 2020 2029 0a0a 0a64   None,.    )...d
-00005580: 6566 2073 656e 645f 6c6f 6361 7469 6f6e  ef send_location
-00005590: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-000055a0: 2063 6861 745f 6964 2c0a 2020 2020 6c61   chat_id,.    la
-000055b0: 7469 7475 6465 2c0a 2020 2020 6c6f 6e67  titude,.    long
-000055c0: 6974 7564 652c 0a20 2020 206c 6976 655f  itude,.    live_
-000055d0: 7065 7269 6f64 3d4e 6f6e 652c 0a20 2020  period=None,.   
-000055e0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
-000055f0: 6e65 2c0a 2020 2020 6469 7361 626c 655f  ne,.    disable_
-00005600: 6e6f 7469 6669 6361 7469 6f6e 3d4e 6f6e  notification=Non
-00005610: 652c 0a20 2020 2074 696d 656f 7574 3d4e  e,.    timeout=N
-00005620: 6f6e 652c 0a20 2020 2068 6f72 697a 6f6e  one,.    horizon
-00005630: 7461 6c5f 6163 6375 7261 6379 3d4e 6f6e  tal_accuracy=Non
-00005640: 652c 0a20 2020 2068 6561 6469 6e67 3d4e  e,.    heading=N
-00005650: 6f6e 652c 0a20 2020 2070 726f 7869 6d69  one,.    proximi
-00005660: 7479 5f61 6c65 7274 5f72 6164 6975 733d  ty_alert_radius=
-00005670: 4e6f 6e65 2c0a 2020 2020 7072 6f74 6563  None,.    protec
-00005680: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0a  t_content=None,.
-00005690: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
-000056a0: 6164 5f69 643d 4e6f 6e65 2c0a 2020 2020  ad_id=None,.    
-000056b0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-000056c0: 3d4e 6f6e 652c 0a20 2020 2062 7573 696e  =None,.    busin
-000056d0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-000056e0: 643d 4e6f 6e65 2c0a 293a 0a20 2020 206d  d=None,.):.    m
-000056f0: 6574 686f 645f 7572 6c20 3d20 7222 7365  ethod_url = r"se
-00005700: 6e64 4c6f 6361 7469 6f6e 220a 2020 2020  ndLocation".    
-00005710: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-00005720: 5f69 6422 3a20 6368 6174 5f69 642c 2022  _id": chat_id, "
-00005730: 6c61 7469 7475 6465 223a 206c 6174 6974  latitude": latit
-00005740: 7564 652c 2022 6c6f 6e67 6974 7564 6522  ude, "longitude"
-00005750: 3a20 6c6f 6e67 6974 7564 657d 0a20 2020  : longitude}.   
-00005760: 2069 6620 6c69 7665 5f70 6572 696f 643a   if live_period:
-00005770: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00005780: 5b22 6c69 7665 5f70 6572 696f 6422 5d20  ["live_period"] 
-00005790: 3d20 6c69 7665 5f70 6572 696f 640a 2020  = live_period.  
-000057a0: 2020 6966 2068 6f72 697a 6f6e 7461 6c5f    if horizontal_
-000057b0: 6163 6375 7261 6379 3a0a 2020 2020 2020  accuracy:.      
-000057c0: 2020 7061 796c 6f61 645b 2268 6f72 697a    payload["horiz
-000057d0: 6f6e 7461 6c5f 6163 6375 7261 6379 225d  ontal_accuracy"]
-000057e0: 203d 2068 6f72 697a 6f6e 7461 6c5f 6163   = horizontal_ac
-000057f0: 6375 7261 6379 0a20 2020 2069 6620 6865  curacy.    if he
-00005800: 6164 696e 673a 0a20 2020 2020 2020 2070  ading:.        p
-00005810: 6179 6c6f 6164 5b22 6865 6164 696e 6722  ayload["heading"
-00005820: 5d20 3d20 6865 6164 696e 670a 2020 2020  ] = heading.    
-00005830: 6966 2070 726f 7869 6d69 7479 5f61 6c65  if proximity_ale
-00005840: 7274 5f72 6164 6975 733a 0a20 2020 2020  rt_radius:.     
-00005850: 2020 2070 6179 6c6f 6164 5b22 7072 6f78     payload["prox
-00005860: 696d 6974 795f 616c 6572 745f 7261 6469  imity_alert_radi
-00005870: 7573 225d 203d 2070 726f 7869 6d69 7479  us"] = proximity
-00005880: 5f61 6c65 7274 5f72 6164 6975 730a 2020  _alert_radius.  
-00005890: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-000058a0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-000058b0: 6164 5b22 7265 706c 795f 6d61 726b 7570  ad["reply_markup
-000058c0: 225d 203d 205f 636f 6e76 6572 745f 6d61  "] = _convert_ma
-000058d0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
-000058e0: 7029 0a20 2020 2069 6620 6469 7361 626c  p).    if disabl
-000058f0: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-00005900: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00005910: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
-00005920: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00005930: 6e22 5d20 3d20 6469 7361 626c 655f 6e6f  n"] = disable_no
-00005940: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-00005950: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00005960: 2020 2070 6179 6c6f 6164 5b22 7469 6d65     payload["time
-00005970: 6f75 7422 5d20 3d20 7469 6d65 6f75 740a  out"] = timeout.
-00005980: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
-00005990: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
-000059a0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000059b0: 6f61 645b 2270 726f 7465 6374 5f63 6f6e  oad["protect_con
-000059c0: 7465 6e74 225d 203d 2070 726f 7465 6374  tent"] = protect
-000059d0: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
-000059e0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-000059f0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-00005a00: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00005a10: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00005a20: 6422 5d20 3d20 6d65 7373 6167 655f 7468  d"] = message_th
-00005a30: 7265 6164 5f69 640a 2020 2020 6966 2072  read_id.    if r
-00005a40: 6570 6c79 5f70 6172 616d 6574 6572 7320  eply_parameters 
-00005a50: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00005a60: 2020 2020 2070 6179 6c6f 6164 5b22 7265       payload["re
-00005a70: 706c 795f 7061 7261 6d65 7465 7273 225d  ply_parameters"]
-00005a80: 203d 2072 6570 6c79 5f70 6172 616d 6574   = reply_paramet
-00005a90: 6572 732e 746f 5f6a 736f 6e28 290a 2020  ers.to_json().  
-00005aa0: 2020 6966 2062 7573 696e 6573 735f 636f    if business_co
-00005ab0: 6e6e 6563 7469 6f6e 5f69 643a 0a20 2020  nnection_id:.   
-00005ac0: 2020 2020 2070 6179 6c6f 6164 5b22 6275       payload["bu
-00005ad0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00005ae0: 6e5f 6964 225d 203d 2062 7573 696e 6573  n_id"] = busines
-00005af0: 735f 636f 6e6e 6563 7469 6f6e 5f69 640a  s_connection_id.
-00005b00: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00005b10: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00005b20: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00005b30: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
-00005b40: 6620 6564 6974 5f6d 6573 7361 6765 5f6c  f edit_message_l
-00005b50: 6976 655f 6c6f 6361 7469 6f6e 280a 2020  ive_location(.  
-00005b60: 2020 746f 6b65 6e2c 0a20 2020 206c 6174    token,.    lat
-00005b70: 6974 7564 652c 0a20 2020 206c 6f6e 6769  itude,.    longi
-00005b80: 7475 6465 2c0a 2020 2020 6368 6174 5f69  tude,.    chat_i
-00005b90: 643d 4e6f 6e65 2c0a 2020 2020 6d65 7373  d=None,.    mess
-00005ba0: 6167 655f 6964 3d4e 6f6e 652c 0a20 2020  age_id=None,.   
-00005bb0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-00005bc0: 6964 3d4e 6f6e 652c 0a20 2020 2072 6570  id=None,.    rep
-00005bd0: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-00005be0: 2020 2020 7469 6d65 6f75 743d 4e6f 6e65      timeout=None
-00005bf0: 2c0a 2020 2020 686f 7269 7a6f 6e74 616c  ,.    horizontal
-00005c00: 5f61 6363 7572 6163 793d 4e6f 6e65 2c0a  _accuracy=None,.
-00005c10: 2020 2020 6865 6164 696e 673d 4e6f 6e65      heading=None
-00005c20: 2c0a 2020 2020 7072 6f78 696d 6974 795f  ,.    proximity_
-00005c30: 616c 6572 745f 7261 6469 7573 3d4e 6f6e  alert_radius=Non
-00005c40: 652c 0a29 3a0a 2020 2020 6d65 7468 6f64  e,.):.    method
-00005c50: 5f75 726c 203d 2072 2265 6469 744d 6573  _url = r"editMes
-00005c60: 7361 6765 4c69 7665 4c6f 6361 7469 6f6e  sageLiveLocation
-00005c70: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00005c80: 7b22 6c61 7469 7475 6465 223a 206c 6174  {"latitude": lat
-00005c90: 6974 7564 652c 2022 6c6f 6e67 6974 7564  itude, "longitud
-00005ca0: 6522 3a20 6c6f 6e67 6974 7564 657d 0a20  e": longitude}. 
-00005cb0: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
-00005cc0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00005cd0: 6368 6174 5f69 6422 5d20 3d20 6368 6174  chat_id"] = chat
-00005ce0: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
-00005cf0: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-00005d00: 6179 6c6f 6164 5b22 6d65 7373 6167 655f  ayload["message_
-00005d10: 6964 225d 203d 206d 6573 7361 6765 5f69  id"] = message_i
-00005d20: 640a 2020 2020 6966 2068 6f72 697a 6f6e  d.    if horizon
-00005d30: 7461 6c5f 6163 6375 7261 6379 3a0a 2020  tal_accuracy:.  
-00005d40: 2020 2020 2020 7061 796c 6f61 645b 2268        payload["h
-00005d50: 6f72 697a 6f6e 7461 6c5f 6163 6375 7261  orizontal_accura
-00005d60: 6379 225d 203d 2068 6f72 697a 6f6e 7461  cy"] = horizonta
-00005d70: 6c5f 6163 6375 7261 6379 0a20 2020 2069  l_accuracy.    i
-00005d80: 6620 6865 6164 696e 673a 0a20 2020 2020  f heading:.     
-00005d90: 2020 2070 6179 6c6f 6164 5b22 6865 6164     payload["head
-00005da0: 696e 6722 5d20 3d20 6865 6164 696e 670a  ing"] = heading.
-00005db0: 2020 2020 6966 2070 726f 7869 6d69 7479      if proximity
-00005dc0: 5f61 6c65 7274 5f72 6164 6975 733a 0a20  _alert_radius:. 
-00005dd0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00005de0: 7072 6f78 696d 6974 795f 616c 6572 745f  proximity_alert_
-00005df0: 7261 6469 7573 225d 203d 2070 726f 7869  radius"] = proxi
-00005e00: 6d69 7479 5f61 6c65 7274 5f72 6164 6975  mity_alert_radiu
-00005e10: 730a 2020 2020 6966 2069 6e6c 696e 655f  s.    if inline_
-00005e20: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
-00005e30: 2020 2020 7061 796c 6f61 645b 2269 6e6c      payload["inl
-00005e40: 696e 655f 6d65 7373 6167 655f 6964 225d  ine_message_id"]
-00005e50: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
-00005e60: 655f 6964 0a20 2020 2069 6620 7265 706c  e_id.    if repl
-00005e70: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-00005e80: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
-00005e90: 5f6d 6172 6b75 7022 5d20 3d20 5f63 6f6e  _markup"] = _con
-00005ea0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
-00005eb0: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
-00005ec0: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
-00005ed0: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
-00005ee0: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
-00005ef0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00005f00: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00005f10: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00005f20: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
-00005f30: 2073 746f 705f 6d65 7373 6167 655f 6c69   stop_message_li
-00005f40: 7665 5f6c 6f63 6174 696f 6e28 0a20 2020  ve_location(.   
-00005f50: 2074 6f6b 656e 2c0a 2020 2020 6368 6174   token,.    chat
-00005f60: 5f69 643d 4e6f 6e65 2c0a 2020 2020 6d65  _id=None,.    me
-00005f70: 7373 6167 655f 6964 3d4e 6f6e 652c 0a20  ssage_id=None,. 
-00005f80: 2020 2069 6e6c 696e 655f 6d65 7373 6167     inline_messag
-00005f90: 655f 6964 3d4e 6f6e 652c 0a20 2020 2072  e_id=None,.    r
-00005fa0: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
-00005fb0: 2c0a 2020 2020 7469 6d65 6f75 743d 4e6f  ,.    timeout=No
-00005fc0: 6e65 2c0a 293a 0a20 2020 206d 6574 686f  ne,.):.    metho
-00005fd0: 645f 7572 6c20 3d20 7222 7374 6f70 4d65  d_url = r"stopMe
-00005fe0: 7373 6167 654c 6976 654c 6f63 6174 696f  ssageLiveLocatio
-00005ff0: 6e22 0a20 2020 2070 6179 6c6f 6164 203d  n".    payload =
-00006000: 207b 7d0a 2020 2020 6966 2063 6861 745f   {}.    if chat_
-00006010: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00006020: 6f61 645b 2263 6861 745f 6964 225d 203d  oad["chat_id"] =
-00006030: 2063 6861 745f 6964 0a20 2020 2069 6620   chat_id.    if 
-00006040: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
-00006050: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
-00006060: 7361 6765 5f69 6422 5d20 3d20 6d65 7373  sage_id"] = mess
-00006070: 6167 655f 6964 0a20 2020 2069 6620 696e  age_id.    if in
-00006080: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
-00006090: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000060a0: 5b22 696e 6c69 6e65 5f6d 6573 7361 6765  ["inline_message
-000060b0: 5f69 6422 5d20 3d20 696e 6c69 6e65 5f6d  _id"] = inline_m
-000060c0: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-000060d0: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-000060e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000060f0: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
-00006100: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-00006110: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-00006120: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
-00006130: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00006140: 7469 6d65 6f75 7422 5d20 3d20 7469 6d65  timeout"] = time
-00006150: 6f75 740a 2020 2020 7265 7475 726e 205f  out.    return _
-00006160: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00006170: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00006180: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
-00006190: 0a0a 6465 6620 7365 6e64 5f76 656e 7565  ..def send_venue
-000061a0: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-000061b0: 2063 6861 745f 6964 2c0a 2020 2020 6c61   chat_id,.    la
-000061c0: 7469 7475 6465 2c0a 2020 2020 6c6f 6e67  titude,.    long
-000061d0: 6974 7564 652c 0a20 2020 2074 6974 6c65  itude,.    title
-000061e0: 2c0a 2020 2020 6164 6472 6573 732c 0a20  ,.    address,. 
-000061f0: 2020 2066 6f75 7273 7175 6172 655f 6964     foursquare_id
-00006200: 3d4e 6f6e 652c 0a20 2020 2066 6f75 7273  =None,.    fours
-00006210: 7175 6172 655f 7479 7065 3d4e 6f6e 652c  quare_type=None,
-00006220: 0a20 2020 2064 6973 6162 6c65 5f6e 6f74  .    disable_not
-00006230: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c0a  ification=None,.
-00006240: 2020 2020 7265 706c 795f 6d61 726b 7570      reply_markup
-00006250: 3d4e 6f6e 652c 0a20 2020 2074 696d 656f  =None,.    timeo
-00006260: 7574 3d4e 6f6e 652c 0a20 2020 2067 6f6f  ut=None,.    goo
-00006270: 676c 655f 706c 6163 655f 6964 3d4e 6f6e  gle_place_id=Non
-00006280: 652c 0a20 2020 2067 6f6f 676c 655f 706c  e,.    google_pl
-00006290: 6163 655f 7479 7065 3d4e 6f6e 652c 0a20  ace_type=None,. 
-000062a0: 2020 2070 726f 7465 6374 5f63 6f6e 7465     protect_conte
-000062b0: 6e74 3d4e 6f6e 652c 0a20 2020 206d 6573  nt=None,.    mes
-000062c0: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
-000062d0: 6f6e 652c 0a20 2020 2072 6570 6c79 5f70  one,.    reply_p
-000062e0: 6172 616d 6574 6572 733d 4e6f 6e65 2c0a  arameters=None,.
-000062f0: 2020 2020 6275 7369 6e65 7373 5f63 6f6e      business_con
-00006300: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 652c  nection_id=None,
-00006310: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
-00006320: 726c 203d 2072 2273 656e 6456 656e 7565  rl = r"sendVenue
-00006330: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00006340: 7b0a 2020 2020 2020 2020 2263 6861 745f  {.        "chat_
-00006350: 6964 223a 2063 6861 745f 6964 2c0a 2020  id": chat_id,.  
-00006360: 2020 2020 2020 226c 6174 6974 7564 6522        "latitude"
-00006370: 3a20 6c61 7469 7475 6465 2c0a 2020 2020  : latitude,.    
-00006380: 2020 2020 226c 6f6e 6769 7475 6465 223a      "longitude":
-00006390: 206c 6f6e 6769 7475 6465 2c0a 2020 2020   longitude,.    
-000063a0: 2020 2020 2274 6974 6c65 223a 2074 6974      "title": tit
-000063b0: 6c65 2c0a 2020 2020 2020 2020 2261 6464  le,.        "add
-000063c0: 7265 7373 223a 2061 6464 7265 7373 2c0a  ress": address,.
-000063d0: 2020 2020 7d0a 2020 2020 6966 2066 6f75      }.    if fou
-000063e0: 7273 7175 6172 655f 6964 3a0a 2020 2020  rsquare_id:.    
-000063f0: 2020 2020 7061 796c 6f61 645b 2266 6f75      payload["fou
-00006400: 7273 7175 6172 655f 6964 225d 203d 2066  rsquare_id"] = f
-00006410: 6f75 7273 7175 6172 655f 6964 0a20 2020  oursquare_id.   
-00006420: 2069 6620 666f 7572 7371 7561 7265 5f74   if foursquare_t
-00006430: 7970 653a 0a20 2020 2020 2020 2070 6179  ype:.        pay
-00006440: 6c6f 6164 5b22 666f 7572 7371 7561 7265  load["foursquare
-00006450: 5f74 7970 6522 5d20 3d20 666f 7572 7371  _type"] = foursq
-00006460: 7561 7265 5f74 7970 650a 2020 2020 6966  uare_type.    if
-00006470: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00006480: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00006490: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000064a0: 6164 5b22 6469 7361 626c 655f 6e6f 7469  ad["disable_noti
-000064b0: 6669 6361 7469 6f6e 225d 203d 2064 6973  fication"] = dis
-000064c0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-000064d0: 6e0a 2020 2020 6966 2072 6570 6c79 5f6d  n.    if reply_m
-000064e0: 6172 6b75 703a 0a20 2020 2020 2020 2070  arkup:.        p
-000064f0: 6179 6c6f 6164 5b22 7265 706c 795f 6d61  ayload["reply_ma
-00006500: 726b 7570 225d 203d 205f 636f 6e76 6572  rkup"] = _conver
-00006510: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
-00006520: 6172 6b75 7029 0a20 2020 2069 6620 7469  arkup).    if ti
-00006530: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-00006540: 6179 6c6f 6164 5b22 7469 6d65 6f75 7422  ayload["timeout"
-00006550: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-00006560: 6966 2067 6f6f 676c 655f 706c 6163 655f  if google_place_
-00006570: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00006580: 6f61 645b 2267 6f6f 676c 655f 706c 6163  oad["google_plac
-00006590: 655f 6964 225d 203d 2067 6f6f 676c 655f  e_id"] = google_
-000065a0: 706c 6163 655f 6964 0a20 2020 2069 6620  place_id.    if 
-000065b0: 676f 6f67 6c65 5f70 6c61 6365 5f74 7970  google_place_typ
-000065c0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000065d0: 6164 5b22 676f 6f67 6c65 5f70 6c61 6365  ad["google_place
-000065e0: 5f74 7970 6522 5d20 3d20 676f 6f67 6c65  _type"] = google
-000065f0: 5f70 6c61 6365 5f74 7970 650a 2020 2020  _place_type.    
-00006600: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
-00006610: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-00006620: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00006630: 2270 726f 7465 6374 5f63 6f6e 7465 6e74  "protect_content
-00006640: 225d 203d 2070 726f 7465 6374 5f63 6f6e  "] = protect_con
-00006650: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
-00006660: 6167 655f 7468 7265 6164 5f69 6420 6973  age_thread_id is
-00006670: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00006680: 2020 2070 6179 6c6f 6164 5b22 6d65 7373     payload["mess
-00006690: 6167 655f 7468 7265 6164 5f69 6422 5d20  age_thread_id"] 
-000066a0: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
-000066b0: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
-000066c0: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
-000066d0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000066e0: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
-000066f0: 7061 7261 6d65 7465 7273 225d 203d 2072  parameters"] = r
-00006700: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
-00006710: 746f 5f6a 736f 6e28 290a 2020 2020 6966  to_json().    if
-00006720: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00006730: 7469 6f6e 5f69 643a 0a20 2020 2020 2020  tion_id:.       
-00006740: 2070 6179 6c6f 6164 5b22 6275 7369 6e65   payload["busine
-00006750: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-00006760: 225d 203d 2062 7573 696e 6573 735f 636f  "] = business_co
-00006770: 6e6e 6563 7469 6f6e 5f69 640a 2020 2020  nnection_id.    
-00006780: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-00006790: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-000067a0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-000067b0: 6179 6c6f 6164 290a 0a0a 6465 6620 7365  ayload)...def se
-000067c0: 6e64 5f63 6f6e 7461 6374 280a 2020 2020  nd_contact(.    
-000067d0: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
-000067e0: 6964 2c0a 2020 2020 7068 6f6e 655f 6e75  id,.    phone_nu
-000067f0: 6d62 6572 2c0a 2020 2020 6669 7273 745f  mber,.    first_
-00006800: 6e61 6d65 2c0a 2020 2020 6c61 7374 5f6e  name,.    last_n
-00006810: 616d 653d 4e6f 6e65 2c0a 2020 2020 7663  ame=None,.    vc
-00006820: 6172 643d 4e6f 6e65 2c0a 2020 2020 6469  ard=None,.    di
-00006830: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00006840: 6f6e 3d4e 6f6e 652c 0a20 2020 2072 6570  on=None,.    rep
-00006850: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-00006860: 2020 2020 7469 6d65 6f75 743d 4e6f 6e65      timeout=None
-00006870: 2c0a 2020 2020 7072 6f74 6563 745f 636f  ,.    protect_co
-00006880: 6e74 656e 743d 4e6f 6e65 2c0a 2020 2020  ntent=None,.    
-00006890: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-000068a0: 643d 4e6f 6e65 2c0a 2020 2020 7265 706c  d=None,.    repl
-000068b0: 795f 7061 7261 6d65 7465 7273 3d4e 6f6e  y_parameters=Non
-000068c0: 652c 0a20 2020 2062 7573 696e 6573 735f  e,.    business_
-000068d0: 636f 6e6e 6563 7469 6f6e 5f69 643d 4e6f  connection_id=No
-000068e0: 6e65 2c0a 293a 0a20 2020 206d 6574 686f  ne,.):.    metho
-000068f0: 645f 7572 6c20 3d20 7222 7365 6e64 436f  d_url = r"sendCo
-00006900: 6e74 6163 7422 0a20 2020 2070 6179 6c6f  ntact".    paylo
-00006910: 6164 203d 207b 0a20 2020 2020 2020 2022  ad = {.        "
-00006920: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
-00006930: 642c 0a20 2020 2020 2020 2022 7068 6f6e  d,.        "phon
-00006940: 655f 6e75 6d62 6572 223a 2070 686f 6e65  e_number": phone
-00006950: 5f6e 756d 6265 722c 0a20 2020 2020 2020  _number,.       
-00006960: 2022 6669 7273 745f 6e61 6d65 223a 2066   "first_name": f
-00006970: 6972 7374 5f6e 616d 652c 0a20 2020 207d  irst_name,.    }
-00006980: 0a20 2020 2069 6620 6c61 7374 5f6e 616d  .    if last_nam
-00006990: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000069a0: 6164 5b22 6c61 7374 5f6e 616d 6522 5d20  ad["last_name"] 
-000069b0: 3d20 6c61 7374 5f6e 616d 650a 2020 2020  = last_name.    
-000069c0: 6966 2076 6361 7264 3a0a 2020 2020 2020  if vcard:.      
-000069d0: 2020 7061 796c 6f61 645b 2276 6361 7264    payload["vcard
-000069e0: 225d 203d 2076 6361 7264 0a20 2020 2069  "] = vcard.    i
-000069f0: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-00006a00: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-00006a10: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00006a20: 6f61 645b 2264 6973 6162 6c65 5f6e 6f74  oad["disable_not
-00006a30: 6966 6963 6174 696f 6e22 5d20 3d20 6469  ification"] = di
-00006a40: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00006a50: 6f6e 0a20 2020 2069 6620 7265 706c 795f  on.    if reply_
-00006a60: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-00006a70: 7061 796c 6f61 645b 2272 6570 6c79 5f6d  payload["reply_m
-00006a80: 6172 6b75 7022 5d20 3d20 5f63 6f6e 7665  arkup"] = _conve
-00006a90: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
-00006aa0: 6d61 726b 7570 290a 2020 2020 6966 2074  markup).    if t
-00006ab0: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
-00006ac0: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
-00006ad0: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
-00006ae0: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
-00006af0: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
-00006b00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006b10: 5b22 7072 6f74 6563 745f 636f 6e74 656e  ["protect_conten
-00006b20: 7422 5d20 3d20 7072 6f74 6563 745f 636f  t"] = protect_co
-00006b30: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
-00006b40: 7361 6765 5f74 6872 6561 645f 6964 2069  sage_thread_id i
-00006b50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00006b60: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
-00006b70: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
-00006b80: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00006b90: 645f 6964 0a20 2020 2069 6620 7265 706c  d_id.    if repl
-00006ba0: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
-00006bb0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00006bc0: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
-00006bd0: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
-00006be0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00006bf0: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
-00006c00: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
-00006c10: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
-00006c20: 2020 7061 796c 6f61 645b 2262 7573 696e    payload["busin
-00006c30: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00006c40: 6422 5d20 3d20 6275 7369 6e65 7373 5f63  d"] = business_c
-00006c50: 6f6e 6e65 6374 696f 6e5f 6964 0a0a 2020  onnection_id..  
-00006c60: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00006c70: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00006c80: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00006c90: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00006ca0: 7365 6e64 5f63 6861 745f 6163 7469 6f6e  send_chat_action
-00006cb0: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-00006cc0: 2063 6861 745f 6964 2c0a 2020 2020 6163   chat_id,.    ac
-00006cd0: 7469 6f6e 2c0a 2020 2020 7469 6d65 6f75  tion,.    timeou
-00006ce0: 743d 4e6f 6e65 2c0a 2020 2020 6d65 7373  t=None,.    mess
-00006cf0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-00006d00: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
-00006d10: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
-00006d20: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
-00006d30: 6f64 5f75 726c 203d 2072 2273 656e 6443  od_url = r"sendC
-00006d40: 6861 7441 6374 696f 6e22 0a20 2020 2070  hatAction".    p
-00006d50: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-00006d60: 6964 223a 2063 6861 745f 6964 2c20 2261  id": chat_id, "a
-00006d70: 6374 696f 6e22 3a20 6163 7469 6f6e 7d0a  ction": action}.
-00006d80: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-00006d90: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00006da0: 2274 696d 656f 7574 225d 203d 2074 696d  "timeout"] = tim
-00006db0: 656f 7574 0a20 2020 2069 6620 6d65 7373  eout.    if mess
-00006dc0: 6167 655f 7468 7265 6164 5f69 6420 6973  age_thread_id is
-00006dd0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00006de0: 2020 2070 6179 6c6f 6164 5b22 6d65 7373     payload["mess
-00006df0: 6167 655f 7468 7265 6164 5f69 6422 5d20  age_thread_id"] 
-00006e00: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
-00006e10: 5f69 640a 2020 2020 6966 2062 7573 696e  _id.    if busin
-00006e20: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00006e30: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00006e40: 6164 5b22 6275 7369 6e65 7373 5f63 6f6e  ad["business_con
-00006e50: 6e65 6374 696f 6e5f 6964 225d 203d 2062  nection_id"] = b
-00006e60: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-00006e70: 6f6e 5f69 640a 2020 2020 7265 7475 726e  on_id.    return
-00006e80: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00006e90: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00006ea0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00006eb0: 290a 0a0a 6465 6620 7365 6e64 5f76 6964  )...def send_vid
-00006ec0: 656f 280a 2020 2020 746f 6b65 6e2c 0a20  eo(.    token,. 
-00006ed0: 2020 2063 6861 745f 6964 2c0a 2020 2020     chat_id,.    
-00006ee0: 6461 7461 2c0a 2020 2020 6475 7261 7469  data,.    durati
-00006ef0: 6f6e 3d4e 6f6e 652c 0a20 2020 2063 6170  on=None,.    cap
-00006f00: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2072  tion=None,.    r
-00006f10: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
-00006f20: 2c0a 2020 2020 7061 7273 655f 6d6f 6465  ,.    parse_mode
-00006f30: 3d4e 6f6e 652c 0a20 2020 2073 7570 706f  =None,.    suppo
-00006f40: 7274 735f 7374 7265 616d 696e 673d 4e6f  rts_streaming=No
-00006f50: 6e65 2c0a 2020 2020 6469 7361 626c 655f  ne,.    disable_
-00006f60: 6e6f 7469 6669 6361 7469 6f6e 3d4e 6f6e  notification=Non
-00006f70: 652c 0a20 2020 2074 696d 656f 7574 3d4e  e,.    timeout=N
-00006f80: 6f6e 652c 0a20 2020 2074 6875 6d62 6e61  one,.    thumbna
-00006f90: 696c 3d4e 6f6e 652c 0a20 2020 2077 6964  il=None,.    wid
-00006fa0: 7468 3d4e 6f6e 652c 0a20 2020 2068 6569  th=None,.    hei
-00006fb0: 6768 743d 4e6f 6e65 2c0a 2020 2020 6361  ght=None,.    ca
-00006fc0: 7074 696f 6e5f 656e 7469 7469 6573 3d4e  ption_entities=N
-00006fd0: 6f6e 652c 0a20 2020 2070 726f 7465 6374  one,.    protect
-00006fe0: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 0a20  _content=None,. 
-00006ff0: 2020 206d 6573 7361 6765 5f74 6872 6561     message_threa
-00007000: 645f 6964 3d4e 6f6e 652c 0a20 2020 2068  d_id=None,.    h
-00007010: 6173 5f73 706f 696c 6572 3d4e 6f6e 652c  as_spoiler=None,
-00007020: 0a20 2020 2072 6570 6c79 5f70 6172 616d  .    reply_param
-00007030: 6574 6572 733d 4e6f 6e65 2c0a 2020 2020  eters=None,.    
-00007040: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00007050: 696f 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a  ion_id=None,.):.
-00007060: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00007070: 2072 2273 656e 6456 6964 656f 220a 2020   r"sendVideo".  
-00007080: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
-00007090: 6174 5f69 6422 3a20 6368 6174 5f69 647d  at_id": chat_id}
-000070a0: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
-000070b0: 650a 2020 2020 6966 206e 6f74 2075 7469  e.    if not uti
-000070c0: 6c2e 6973 5f73 7472 696e 6728 6461 7461  l.is_string(data
-000070d0: 293a 0a20 2020 2020 2020 2066 696c 6573  ):.        files
-000070e0: 203d 207b 2276 6964 656f 223a 2064 6174   = {"video": dat
-000070f0: 617d 0a20 2020 2065 6c73 653a 0a20 2020  a}.    else:.   
-00007100: 2020 2020 2070 6179 6c6f 6164 5b22 7669       payload["vi
-00007110: 6465 6f22 5d20 3d20 6461 7461 0a20 2020  deo"] = data.   
-00007120: 2069 6620 6475 7261 7469 6f6e 3a0a 2020   if duration:.  
-00007130: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
-00007140: 7572 6174 696f 6e22 5d20 3d20 6475 7261  uration"] = dura
-00007150: 7469 6f6e 0a20 2020 2069 6620 6361 7074  tion.    if capt
-00007160: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
-00007170: 6c6f 6164 5b22 6361 7074 696f 6e22 5d20  load["caption"] 
-00007180: 3d20 6361 7074 696f 6e0a 2020 2020 6966  = caption.    if
-00007190: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-000071a0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000071b0: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
-000071c0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-000071d0: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-000071e0: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
-000071f0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007200: 645b 2270 6172 7365 5f6d 6f64 6522 5d20  d["parse_mode"] 
-00007210: 3d20 7061 7273 655f 6d6f 6465 0a20 2020  = parse_mode.   
-00007220: 2069 6620 7375 7070 6f72 7473 5f73 7472   if supports_str
-00007230: 6561 6d69 6e67 2069 7320 6e6f 7420 4e6f  eaming is not No
-00007240: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00007250: 6f61 645b 2273 7570 706f 7274 735f 7374  oad["supports_st
-00007260: 7265 616d 696e 6722 5d20 3d20 7375 7070  reaming"] = supp
-00007270: 6f72 7473 5f73 7472 6561 6d69 6e67 0a20  orts_streaming. 
-00007280: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
-00007290: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
-000072a0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000072b0: 7061 796c 6f61 645b 2264 6973 6162 6c65  payload["disable
-000072c0: 5f6e 6f74 6966 6963 6174 696f 6e22 5d20  _notification"] 
-000072d0: 3d20 6469 7361 626c 655f 6e6f 7469 6669  = disable_notifi
-000072e0: 6361 7469 6f6e 0a20 2020 2069 6620 7469  cation.    if ti
-000072f0: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-00007300: 6179 6c6f 6164 5b22 7469 6d65 6f75 7422  ayload["timeout"
-00007310: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-00007320: 6966 2074 6875 6d62 6e61 696c 3a0a 2020  if thumbnail:.  
-00007330: 2020 2020 2020 6966 206e 6f74 2075 7469        if not uti
-00007340: 6c2e 6973 5f73 7472 696e 6728 7468 756d  l.is_string(thum
-00007350: 626e 6169 6c29 3a0a 2020 2020 2020 2020  bnail):.        
-00007360: 2020 2020 6966 2066 696c 6573 3a0a 2020      if files:.  
-00007370: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00007380: 6c65 735b 2274 6875 6d62 6e61 696c 225d  les["thumbnail"]
-00007390: 203d 2074 6875 6d62 6e61 696c 0a20 2020   = thumbnail.   
-000073a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000073b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000073c0: 696c 6573 203d 207b 2274 6875 6d62 6e61  iles = {"thumbna
-000073d0: 696c 223a 2074 6875 6d62 6e61 696c 7d0a  il": thumbnail}.
-000073e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000073f0: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
-00007400: 645b 2274 6875 6d62 6e61 696c 225d 203d  d["thumbnail"] =
-00007410: 2074 6875 6d62 6e61 696c 0a20 2020 2069   thumbnail.    i
-00007420: 6620 7769 6474 683a 0a20 2020 2020 2020  f width:.       
-00007430: 2070 6179 6c6f 6164 5b22 7769 6474 6822   payload["width"
-00007440: 5d20 3d20 7769 6474 680a 2020 2020 6966  ] = width.    if
-00007450: 2068 6569 6768 743a 0a20 2020 2020 2020   height:.       
-00007460: 2070 6179 6c6f 6164 5b22 6865 6967 6874   payload["height
-00007470: 225d 203d 2068 6569 6768 740a 2020 2020  "] = height.    
-00007480: 6966 2063 6170 7469 6f6e 5f65 6e74 6974  if caption_entit
-00007490: 6965 733a 0a20 2020 2020 2020 2070 6179  ies:.        pay
-000074a0: 6c6f 6164 5b22 6361 7074 696f 6e5f 656e  load["caption_en
-000074b0: 7469 7469 6573 225d 203d 206a 736f 6e2e  tities"] = json.
-000074c0: 6475 6d70 7328 0a20 2020 2020 2020 2020  dumps(.         
-000074d0: 2020 2074 7970 6573 2e4d 6573 7361 6765     types.Message
-000074e0: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
-000074f0: 665f 6469 6374 7328 6361 7074 696f 6e5f  f_dicts(caption_
-00007500: 656e 7469 7469 6573 290a 2020 2020 2020  entities).      
-00007510: 2020 290a 2020 2020 6966 2070 726f 7465    ).    if prote
-00007520: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-00007530: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00007540: 7061 796c 6f61 645b 2270 726f 7465 6374  payload["protect
-00007550: 5f63 6f6e 7465 6e74 225d 203d 2070 726f  _content"] = pro
-00007560: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-00007570: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-00007580: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-00007590: 6179 6c6f 6164 5b22 6d65 7373 6167 655f  ayload["message_
-000075a0: 7468 7265 6164 5f69 6422 5d20 3d20 6d65  thread_id"] = me
-000075b0: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-000075c0: 2020 2020 6966 2068 6173 5f73 706f 696c      if has_spoil
-000075d0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-000075e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000075f0: 2268 6173 5f73 706f 696c 6572 225d 203d  "has_spoiler"] =
-00007600: 2068 6173 5f73 706f 696c 6572 0a20 2020   has_spoiler.   
-00007610: 2069 6620 7265 706c 795f 7061 7261 6d65   if reply_parame
-00007620: 7465 7273 2069 7320 6e6f 7420 4e6f 6e65  ters is not None
-00007630: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007640: 645b 2272 6570 6c79 5f70 6172 616d 6574  d["reply_paramet
-00007650: 6572 7322 5d20 3d20 7265 706c 795f 7061  ers"] = reply_pa
-00007660: 7261 6d65 7465 7273 2e74 6f5f 6a73 6f6e  rameters.to_json
-00007670: 2829 0a20 2020 2069 6620 6275 7369 6e65  ().    if busine
-00007680: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-00007690: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000076a0: 645b 2262 7573 696e 6573 735f 636f 6e6e  d["business_conn
-000076b0: 6563 7469 6f6e 5f69 6422 5d20 3d20 6275  ection_id"] = bu
-000076c0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-000076d0: 6e5f 6964 0a0a 2020 2020 7265 7475 726e  n_id..    return
-000076e0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-000076f0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00007700: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00007710: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
-00007720: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-00007730: 6465 6620 7365 6e64 5f61 6e69 6d61 7469  def send_animati
-00007740: 6f6e 280a 2020 2020 746f 6b65 6e2c 0a20  on(.    token,. 
-00007750: 2020 2063 6861 745f 6964 2c0a 2020 2020     chat_id,.    
-00007760: 6461 7461 2c0a 2020 2020 6475 7261 7469  data,.    durati
-00007770: 6f6e 3d4e 6f6e 652c 0a20 2020 2063 6170  on=None,.    cap
-00007780: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2072  tion=None,.    r
-00007790: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
-000077a0: 2c0a 2020 2020 7061 7273 655f 6d6f 6465  ,.    parse_mode
-000077b0: 3d4e 6f6e 652c 0a20 2020 2064 6973 6162  =None,.    disab
-000077c0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-000077d0: 4e6f 6e65 2c0a 2020 2020 7469 6d65 6f75  None,.    timeou
-000077e0: 743d 4e6f 6e65 2c0a 2020 2020 7468 756d  t=None,.    thum
-000077f0: 626e 6169 6c3d 4e6f 6e65 2c0a 2020 2020  bnail=None,.    
-00007800: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00007810: 3d4e 6f6e 652c 0a20 2020 2070 726f 7465  =None,.    prote
-00007820: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-00007830: 0a20 2020 2077 6964 7468 3d4e 6f6e 652c  .    width=None,
-00007840: 0a20 2020 2068 6569 6768 743d 4e6f 6e65  .    height=None
-00007850: 2c0a 2020 2020 6d65 7373 6167 655f 7468  ,.    message_th
-00007860: 7265 6164 5f69 643d 4e6f 6e65 2c0a 2020  read_id=None,.  
-00007870: 2020 7265 706c 795f 7061 7261 6d65 7465    reply_paramete
-00007880: 7273 3d4e 6f6e 652c 0a20 2020 2068 6173  rs=None,.    has
-00007890: 5f73 706f 696c 6572 3d4e 6f6e 652c 0a20  _spoiler=None,. 
-000078a0: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
-000078b0: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
-000078c0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-000078d0: 6c20 3d20 7222 7365 6e64 416e 696d 6174  l = r"sendAnimat
-000078e0: 696f 6e22 0a20 2020 2070 6179 6c6f 6164  ion".    payload
-000078f0: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-00007900: 6861 745f 6964 7d0a 2020 2020 6669 6c65  hat_id}.    file
-00007910: 7320 3d20 4e6f 6e65 0a20 2020 2069 6620  s = None.    if 
-00007920: 6e6f 7420 7574 696c 2e69 735f 7374 7269  not util.is_stri
-00007930: 6e67 2864 6174 6129 3a0a 2020 2020 2020  ng(data):.      
-00007940: 2020 6669 6c65 7320 3d20 7b22 616e 696d    files = {"anim
-00007950: 6174 696f 6e22 3a20 6461 7461 7d0a 2020  ation": data}.  
-00007960: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00007970: 7061 796c 6f61 645b 2261 6e69 6d61 7469  payload["animati
-00007980: 6f6e 225d 203d 2064 6174 610a 2020 2020  on"] = data.    
-00007990: 6966 2064 7572 6174 696f 6e3a 0a20 2020  if duration:.   
-000079a0: 2020 2020 2070 6179 6c6f 6164 5b22 6475       payload["du
-000079b0: 7261 7469 6f6e 225d 203d 2064 7572 6174  ration"] = durat
-000079c0: 696f 6e0a 2020 2020 6966 2063 6170 7469  ion.    if capti
-000079d0: 6f6e 3a0a 2020 2020 2020 2020 7061 796c  on:.        payl
-000079e0: 6f61 645b 2263 6170 7469 6f6e 225d 203d  oad["caption"] =
-000079f0: 2063 6170 7469 6f6e 0a20 2020 2069 6620   caption.    if 
-00007a00: 7265 706c 795f 6d61 726b 7570 3a0a 2020  reply_markup:.  
-00007a10: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
-00007a20: 6570 6c79 5f6d 6172 6b75 7022 5d20 3d20  eply_markup"] = 
-00007a30: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-00007a40: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00007a50: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
-00007a60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007a70: 5b22 7061 7273 655f 6d6f 6465 225d 203d  ["parse_mode"] =
-00007a80: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
-00007a90: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-00007aa0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-00007ab0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00007ac0: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
-00007ad0: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
-00007ae0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00007af0: 696f 6e0a 2020 2020 6966 2074 696d 656f  ion.    if timeo
-00007b00: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
-00007b10: 6f61 645b 2274 696d 656f 7574 225d 203d  oad["timeout"] =
-00007b20: 2074 696d 656f 7574 0a20 2020 2069 6620   timeout.    if 
-00007b30: 7468 756d 626e 6169 6c3a 0a20 2020 2020  thumbnail:.     
-00007b40: 2020 2069 6620 6e6f 7420 7574 696c 2e69     if not util.i
-00007b50: 735f 7374 7269 6e67 2874 6875 6d62 6e61  s_string(thumbna
-00007b60: 696c 293a 0a20 2020 2020 2020 2020 2020  il):.           
-00007b70: 2069 6620 6669 6c65 733a 0a20 2020 2020   if files:.     
-00007b80: 2020 2020 2020 2020 2020 2066 696c 6573             files
-00007b90: 5b22 7468 756d 626e 6169 6c22 5d20 3d20  ["thumbnail"] = 
-00007ba0: 7468 756d 626e 6169 6c0a 2020 2020 2020  thumbnail.      
-00007bb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00007bc0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00007bd0: 7320 3d20 7b22 7468 756d 626e 6169 6c22  s = {"thumbnail"
-00007be0: 3a20 7468 756d 626e 6169 6c7d 0a20 2020  : thumbnail}.   
-00007bf0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00007c00: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00007c10: 7468 756d 626e 6169 6c22 5d20 3d20 7468  thumbnail"] = th
-00007c20: 756d 626e 6169 6c0a 2020 2020 6966 2063  umbnail.    if c
-00007c30: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
-00007c40: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007c50: 5b22 6361 7074 696f 6e5f 656e 7469 7469  ["caption_entiti
-00007c60: 6573 225d 203d 206a 736f 6e2e 6475 6d70  es"] = json.dump
-00007c70: 7328 0a20 2020 2020 2020 2020 2020 2074  s(.            t
-00007c80: 7970 6573 2e4d 6573 7361 6765 456e 7469  ypes.MessageEnti
-00007c90: 7479 2e74 6f5f 6c69 7374 5f6f 665f 6469  ty.to_list_of_di
-00007ca0: 6374 7328 6361 7074 696f 6e5f 656e 7469  cts(caption_enti
-00007cb0: 7469 6573 290a 2020 2020 2020 2020 290a  ties).        ).
-00007cc0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
-00007cd0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
-00007ce0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00007cf0: 6f61 645b 2270 726f 7465 6374 5f63 6f6e  oad["protect_con
-00007d00: 7465 6e74 225d 203d 2070 726f 7465 6374  tent"] = protect
-00007d10: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
-00007d20: 7769 6474 683a 0a20 2020 2020 2020 2070  width:.        p
-00007d30: 6179 6c6f 6164 5b22 7769 6474 6822 5d20  ayload["width"] 
-00007d40: 3d20 7769 6474 680a 2020 2020 6966 2068  = width.    if h
-00007d50: 6569 6768 743a 0a20 2020 2020 2020 2070  eight:.        p
-00007d60: 6179 6c6f 6164 5b22 6865 6967 6874 225d  ayload["height"]
-00007d70: 203d 2068 6569 6768 740a 2020 2020 6966   = height.    if
-00007d80: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00007d90: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00007da0: 6f61 645b 226d 6573 7361 6765 5f74 6872  oad["message_thr
-00007db0: 6561 645f 6964 225d 203d 206d 6573 7361  ead_id"] = messa
-00007dc0: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
-00007dd0: 2069 6620 6861 735f 7370 6f69 6c65 7220   if has_spoiler 
-00007de0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00007df0: 2020 2020 2070 6179 6c6f 6164 5b22 6861       payload["ha
-00007e00: 735f 7370 6f69 6c65 7222 5d20 3d20 6861  s_spoiler"] = ha
-00007e10: 735f 7370 6f69 6c65 720a 2020 2020 6966  s_spoiler.    if
-00007e20: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-00007e30: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00007e40: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00007e50: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00007e60: 225d 203d 2072 6570 6c79 5f70 6172 616d  "] = reply_param
-00007e70: 6574 6572 732e 746f 5f6a 736f 6e28 290a  eters.to_json().
-00007e80: 2020 2020 6966 2062 7573 696e 6573 735f      if business_
-00007e90: 636f 6e6e 6563 7469 6f6e 5f69 643a 0a20  connection_id:. 
-00007ea0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00007eb0: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00007ec0: 696f 6e5f 6964 225d 203d 2062 7573 696e  ion_id"] = busin
-00007ed0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00007ee0: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
-00007ef0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00007f00: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00007f10: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
-00007f20: 6c65 733d 6669 6c65 732c 206d 6574 686f  les=files, metho
-00007f30: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
-00007f40: 7365 6e64 5f76 6f69 6365 280a 2020 2020  send_voice(.    
-00007f50: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
-00007f60: 6964 2c0a 2020 2020 766f 6963 652c 0a20  id,.    voice,. 
-00007f70: 2020 2063 6170 7469 6f6e 3d4e 6f6e 652c     caption=None,
-00007f80: 0a20 2020 2064 7572 6174 696f 6e3d 4e6f  .    duration=No
-00007f90: 6e65 2c0a 2020 2020 7265 706c 795f 6d61  ne,.    reply_ma
-00007fa0: 726b 7570 3d4e 6f6e 652c 0a20 2020 2070  rkup=None,.    p
-00007fb0: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c0a  arse_mode=None,.
-00007fc0: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
-00007fd0: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
-00007fe0: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
-00007ff0: 0a20 2020 2063 6170 7469 6f6e 5f65 6e74  .    caption_ent
-00008000: 6974 6965 733d 4e6f 6e65 2c0a 2020 2020  ities=None,.    
-00008010: 7072 6f74 6563 745f 636f 6e74 656e 743d  protect_content=
-00008020: 4e6f 6e65 2c0a 2020 2020 6d65 7373 6167  None,.    messag
-00008030: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
-00008040: 2c0a 2020 2020 7265 706c 795f 7061 7261  ,.    reply_para
-00008050: 6d65 7465 7273 3d4e 6f6e 652c 0a20 2020  meters=None,.   
-00008060: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00008070: 7469 6f6e 5f69 643d 4e6f 6e65 2c0a 293a  tion_id=None,.):
-00008080: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00008090: 3d20 7222 7365 6e64 566f 6963 6522 0a20  = r"sendVoice". 
-000080a0: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
-000080b0: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
-000080c0: 7d0a 2020 2020 6669 6c65 7320 3d20 4e6f  }.    files = No
-000080d0: 6e65 0a20 2020 2069 6620 6e6f 7420 7574  ne.    if not ut
-000080e0: 696c 2e69 735f 7374 7269 6e67 2876 6f69  il.is_string(voi
-000080f0: 6365 293a 0a20 2020 2020 2020 2066 696c  ce):.        fil
-00008100: 6573 203d 207b 2276 6f69 6365 223a 2076  es = {"voice": v
-00008110: 6f69 6365 7d0a 2020 2020 656c 7365 3a0a  oice}.    else:.
-00008120: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00008130: 2276 6f69 6365 225d 203d 2076 6f69 6365  "voice"] = voice
-00008140: 0a20 2020 2069 6620 6361 7074 696f 6e3a  .    if caption:
-00008150: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008160: 5b22 6361 7074 696f 6e22 5d20 3d20 6361  ["caption"] = ca
-00008170: 7074 696f 6e0a 2020 2020 6966 2064 7572  ption.    if dur
-00008180: 6174 696f 6e3a 0a20 2020 2020 2020 2070  ation:.        p
-00008190: 6179 6c6f 6164 5b22 6475 7261 7469 6f6e  ayload["duration
-000081a0: 225d 203d 2064 7572 6174 696f 6e0a 2020  "] = duration.  
-000081b0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-000081c0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-000081d0: 6164 5b22 7265 706c 795f 6d61 726b 7570  ad["reply_markup
-000081e0: 225d 203d 205f 636f 6e76 6572 745f 6d61  "] = _convert_ma
-000081f0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
-00008200: 7029 0a20 2020 2069 6620 7061 7273 655f  p).    if parse_
-00008210: 6d6f 6465 3a0a 2020 2020 2020 2020 7061  mode:.        pa
-00008220: 796c 6f61 645b 2270 6172 7365 5f6d 6f64  yload["parse_mod
-00008230: 6522 5d20 3d20 7061 7273 655f 6d6f 6465  e"] = parse_mode
-00008240: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
-00008250: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
-00008260: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00008270: 2020 7061 796c 6f61 645b 2264 6973 6162    payload["disab
-00008280: 6c65 5f6e 6f74 6966 6963 6174 696f 6e22  le_notification"
-00008290: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
-000082a0: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
-000082b0: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
-000082c0: 2070 6179 6c6f 6164 5b22 7469 6d65 6f75   payload["timeou
-000082d0: 7422 5d20 3d20 7469 6d65 6f75 740a 2020  t"] = timeout.  
-000082e0: 2020 6966 2063 6170 7469 6f6e 5f65 6e74    if caption_ent
-000082f0: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
-00008300: 6179 6c6f 6164 5b22 6361 7074 696f 6e5f  ayload["caption_
-00008310: 656e 7469 7469 6573 225d 203d 206a 736f  entities"] = jso
-00008320: 6e2e 6475 6d70 7328 0a20 2020 2020 2020  n.dumps(.       
-00008330: 2020 2020 2074 7970 6573 2e4d 6573 7361       types.Messa
-00008340: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
-00008350: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
-00008360: 6e5f 656e 7469 7469 6573 290a 2020 2020  n_entities).    
-00008370: 2020 2020 290a 2020 2020 6966 2070 726f      ).    if pro
-00008380: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-00008390: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000083a0: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
-000083b0: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
-000083c0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-000083d0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-000083e0: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
-000083f0: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
-00008400: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
-00008410: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00008420: 640a 2020 2020 6966 2072 6570 6c79 5f70  d.    if reply_p
-00008430: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
-00008440: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00008450: 6179 6c6f 6164 5b22 7265 706c 795f 7061  ayload["reply_pa
-00008460: 7261 6d65 7465 7273 225d 203d 2072 6570  rameters"] = rep
-00008470: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
-00008480: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
-00008490: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-000084a0: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
-000084b0: 6179 6c6f 6164 5b22 6275 7369 6e65 7373  ayload["business
-000084c0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 225d  _connection_id"]
-000084d0: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
-000084e0: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
-000084f0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00008500: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00008510: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00008520: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00008530: 732c 206d 6574 686f 643d 2270 6f73 7422  s, method="post"
-00008540: 290a 0a0a 6465 6620 7365 6e64 5f76 6964  )...def send_vid
-00008550: 656f 5f6e 6f74 6528 0a20 2020 2074 6f6b  eo_note(.    tok
-00008560: 656e 2c0a 2020 2020 6368 6174 5f69 642c  en,.    chat_id,
-00008570: 0a20 2020 2064 6174 612c 0a20 2020 2064  .    data,.    d
-00008580: 7572 6174 696f 6e3d 4e6f 6e65 2c0a 2020  uration=None,.  
-00008590: 2020 6c65 6e67 7468 3d4e 6f6e 652c 0a20    length=None,. 
-000085a0: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
-000085b0: 4e6f 6e65 2c0a 2020 2020 6469 7361 626c  None,.    disabl
-000085c0: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-000085d0: 6f6e 652c 0a20 2020 2074 696d 656f 7574  one,.    timeout
-000085e0: 3d4e 6f6e 652c 0a20 2020 2074 6875 6d62  =None,.    thumb
-000085f0: 6e61 696c 3d4e 6f6e 652c 0a20 2020 2070  nail=None,.    p
-00008600: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
-00008610: 6f6e 652c 0a20 2020 206d 6573 7361 6765  one,.    message
-00008620: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
-00008630: 0a20 2020 2072 6570 6c79 5f70 6172 616d  .    reply_param
-00008640: 6574 6572 733d 4e6f 6e65 2c0a 2020 2020  eters=None,.    
-00008650: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00008660: 696f 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a  ion_id=None,.):.
-00008670: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00008680: 2072 2273 656e 6456 6964 656f 4e6f 7465   r"sendVideoNote
-00008690: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-000086a0: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-000086b0: 5f69 647d 0a20 2020 2066 696c 6573 203d  _id}.    files =
-000086c0: 204e 6f6e 650a 2020 2020 6966 206e 6f74   None.    if not
-000086d0: 2075 7469 6c2e 6973 5f73 7472 696e 6728   util.is_string(
-000086e0: 6461 7461 293a 0a20 2020 2020 2020 2066  data):.        f
-000086f0: 696c 6573 203d 207b 2276 6964 656f 5f6e  iles = {"video_n
-00008700: 6f74 6522 3a20 6461 7461 7d0a 2020 2020  ote": data}.    
-00008710: 656c 7365 3a0a 2020 2020 2020 2020 7061  else:.        pa
-00008720: 796c 6f61 645b 2276 6964 656f 5f6e 6f74  yload["video_not
-00008730: 6522 5d20 3d20 6461 7461 0a20 2020 2069  e"] = data.    i
-00008740: 6620 6475 7261 7469 6f6e 3a0a 2020 2020  f duration:.    
-00008750: 2020 2020 7061 796c 6f61 645b 2264 7572      payload["dur
-00008760: 6174 696f 6e22 5d20 3d20 6475 7261 7469  ation"] = durati
-00008770: 6f6e 0a20 2020 2069 6620 6c65 6e67 7468  on.    if length
-00008780: 2061 6e64 2028 7374 7228 6c65 6e67 7468   and (str(length
-00008790: 292e 6973 6469 6769 7428 2920 616e 6420  ).isdigit() and 
-000087a0: 696e 7428 6c65 6e67 7468 2920 3c3d 2036  int(length) <= 6
-000087b0: 3339 293a 0a20 2020 2020 2020 2070 6179  39):.        pay
-000087c0: 6c6f 6164 5b22 6c65 6e67 7468 225d 203d  load["length"] =
-000087d0: 206c 656e 6774 680a 2020 2020 656c 7365   length.    else
-000087e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000087f0: 645b 226c 656e 6774 6822 5d20 3d20 3633  d["length"] = 63
-00008800: 3920 2023 2073 6565 6d73 206c 696b 6520  9  # seems like 
-00008810: 6974 2069 7320 4d41 5820 6c65 6e67 7468  it is MAX length
-00008820: 2073 697a 650a 2020 2020 6966 2072 6570   size.    if rep
-00008830: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-00008840: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
-00008850: 795f 6d61 726b 7570 225d 203d 205f 636f  y_markup"] = _co
-00008860: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
-00008870: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
-00008880: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-00008890: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-000088a0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000088b0: 6f61 645b 2264 6973 6162 6c65 5f6e 6f74  oad["disable_not
-000088c0: 6966 6963 6174 696f 6e22 5d20 3d20 6469  ification"] = di
-000088d0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-000088e0: 6f6e 0a20 2020 2069 6620 7469 6d65 6f75  on.    if timeou
-000088f0: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00008900: 6164 5b22 7469 6d65 6f75 7422 5d20 3d20  ad["timeout"] = 
-00008910: 7469 6d65 6f75 740a 2020 2020 6966 2074  timeout.    if t
-00008920: 6875 6d62 6e61 696c 3a0a 2020 2020 2020  humbnail:.      
-00008930: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00008940: 5f73 7472 696e 6728 7468 756d 626e 6169  _string(thumbnai
-00008950: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
-00008960: 6966 2066 696c 6573 3a0a 2020 2020 2020  if files:.      
-00008970: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
-00008980: 2274 6875 6d62 6e61 696c 225d 203d 2074  "thumbnail"] = t
-00008990: 6875 6d62 6e61 696c 0a20 2020 2020 2020  humbnail.       
-000089a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000089b0: 2020 2020 2020 2020 2020 2066 696c 6573             files
-000089c0: 203d 207b 2274 6875 6d62 6e61 696c 223a   = {"thumbnail":
-000089d0: 2074 6875 6d62 6e61 696c 7d0a 2020 2020   thumbnail}.    
-000089e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000089f0: 2020 2020 2020 7061 796c 6f61 645b 2274        payload["t
-00008a00: 6875 6d62 6e61 696c 225d 203d 2074 6875  humbnail"] = thu
-00008a10: 6d62 6e61 696c 0a20 2020 2069 6620 7072  mbnail.    if pr
-00008a20: 6f74 6563 745f 636f 6e74 656e 7420 6973  otect_content is
-00008a30: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00008a40: 2020 2070 6179 6c6f 6164 5b22 7072 6f74     payload["prot
-00008a50: 6563 745f 636f 6e74 656e 7422 5d20 3d20  ect_content"] = 
-00008a60: 7072 6f74 6563 745f 636f 6e74 656e 740a  protect_content.
-00008a70: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
-00008a80: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
-00008a90: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
-00008aa0: 6765 5f74 6872 6561 645f 6964 225d 203d  ge_thread_id"] =
-00008ab0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00008ac0: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
-00008ad0: 7061 7261 6d65 7465 7273 2069 7320 6e6f  parameters is no
-00008ae0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00008af0: 7061 796c 6f61 645b 2272 6570 6c79 5f70  payload["reply_p
-00008b00: 6172 616d 6574 6572 7322 5d20 3d20 7265  arameters"] = re
-00008b10: 706c 795f 7061 7261 6d65 7465 7273 2e74  ply_parameters.t
-00008b20: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
-00008b30: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00008b40: 696f 6e5f 6964 3a0a 2020 2020 2020 2020  ion_id:.        
-00008b50: 7061 796c 6f61 645b 2262 7573 696e 6573  payload["busines
-00008b60: 735f 636f 6e6e 6563 7469 6f6e 5f69 6422  s_connection_id"
-00008b70: 5d20 3d20 6275 7369 6e65 7373 5f63 6f6e  ] = business_con
-00008b80: 6e65 6374 696f 6e5f 6964 0a20 2020 2072  nection_id.    r
-00008b90: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00008ba0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00008bb0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00008bc0: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-00008bd0: 6573 2c20 6d65 7468 6f64 3d22 706f 7374  es, method="post
-00008be0: 2229 0a0a 0a64 6566 2073 656e 645f 6175  ")...def send_au
-00008bf0: 6469 6f28 0a20 2020 2074 6f6b 656e 2c0a  dio(.    token,.
-00008c00: 2020 2020 6368 6174 5f69 642c 0a20 2020      chat_id,.   
-00008c10: 2061 7564 696f 2c0a 2020 2020 6361 7074   audio,.    capt
-00008c20: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 6475  ion=None,.    du
-00008c30: 7261 7469 6f6e 3d4e 6f6e 652c 0a20 2020  ration=None,.   
-00008c40: 2070 6572 666f 726d 6572 3d4e 6f6e 652c   performer=None,
-00008c50: 0a20 2020 2074 6974 6c65 3d4e 6f6e 652c  .    title=None,
-00008c60: 0a20 2020 2072 6570 6c79 5f6d 6172 6b75  .    reply_marku
-00008c70: 703d 4e6f 6e65 2c0a 2020 2020 7061 7273  p=None,.    pars
-00008c80: 655f 6d6f 6465 3d4e 6f6e 652c 0a20 2020  e_mode=None,.   
-00008c90: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00008ca0: 6174 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ation=None,.    
-00008cb0: 7469 6d65 6f75 743d 4e6f 6e65 2c0a 2020  timeout=None,.  
-00008cc0: 2020 7468 756d 626e 6169 6c3d 4e6f 6e65    thumbnail=None
-00008cd0: 2c0a 2020 2020 6361 7074 696f 6e5f 656e  ,.    caption_en
-00008ce0: 7469 7469 6573 3d4e 6f6e 652c 0a20 2020  tities=None,.   
-00008cf0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00008d00: 3d4e 6f6e 652c 0a20 2020 206d 6573 7361  =None,.    messa
-00008d10: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
-00008d20: 652c 0a20 2020 2072 6570 6c79 5f70 6172  e,.    reply_par
-00008d30: 616d 6574 6572 733d 4e6f 6e65 2c0a 2020  ameters=None,.  
-00008d40: 2020 6275 7369 6e65 7373 5f63 6f6e 6e65    business_conne
-00008d50: 6374 696f 6e5f 6964 3d4e 6f6e 652c 0a29  ction_id=None,.)
-00008d60: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00008d70: 203d 2072 2273 656e 6441 7564 696f 220a   = r"sendAudio".
-00008d80: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
-00008d90: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
-00008da0: 647d 0a20 2020 2066 696c 6573 203d 204e  d}.    files = N
-00008db0: 6f6e 650a 2020 2020 6966 206e 6f74 2075  one.    if not u
-00008dc0: 7469 6c2e 6973 5f73 7472 696e 6728 6175  til.is_string(au
-00008dd0: 6469 6f29 3a0a 2020 2020 2020 2020 6669  dio):.        fi
-00008de0: 6c65 7320 3d20 7b22 6175 6469 6f22 3a20  les = {"audio": 
-00008df0: 6175 6469 6f7d 0a20 2020 2065 6c73 653a  audio}.    else:
-00008e00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008e10: 5b22 6175 6469 6f22 5d20 3d20 6175 6469  ["audio"] = audi
-00008e20: 6f0a 2020 2020 6966 2063 6170 7469 6f6e  o.    if caption
-00008e30: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008e40: 645b 2263 6170 7469 6f6e 225d 203d 2063  d["caption"] = c
-00008e50: 6170 7469 6f6e 0a20 2020 2069 6620 6475  aption.    if du
-00008e60: 7261 7469 6f6e 3a0a 2020 2020 2020 2020  ration:.        
-00008e70: 7061 796c 6f61 645b 2264 7572 6174 696f  payload["duratio
-00008e80: 6e22 5d20 3d20 6475 7261 7469 6f6e 0a20  n"] = duration. 
-00008e90: 2020 2069 6620 7065 7266 6f72 6d65 723a     if performer:
-00008ea0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008eb0: 5b22 7065 7266 6f72 6d65 7222 5d20 3d20  ["performer"] = 
-00008ec0: 7065 7266 6f72 6d65 720a 2020 2020 6966  performer.    if
-00008ed0: 2074 6974 6c65 3a0a 2020 2020 2020 2020   title:.        
-00008ee0: 7061 796c 6f61 645b 2274 6974 6c65 225d  payload["title"]
-00008ef0: 203d 2074 6974 6c65 0a20 2020 2069 6620   = title.    if 
-00008f00: 7265 706c 795f 6d61 726b 7570 3a0a 2020  reply_markup:.  
-00008f10: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
-00008f20: 6570 6c79 5f6d 6172 6b75 7022 5d20 3d20  eply_markup"] = 
-00008f30: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-00008f40: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00008f50: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
-00008f60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008f70: 5b22 7061 7273 655f 6d6f 6465 225d 203d  ["parse_mode"] =
-00008f80: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
-00008f90: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-00008fa0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-00008fb0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00008fc0: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
-00008fd0: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
-00008fe0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00008ff0: 696f 6e0a 2020 2020 6966 2074 696d 656f  ion.    if timeo
-00009000: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
-00009010: 6f61 645b 2274 696d 656f 7574 225d 203d  oad["timeout"] =
-00009020: 2074 696d 656f 7574 0a20 2020 2069 6620   timeout.    if 
-00009030: 7468 756d 626e 6169 6c3a 0a20 2020 2020  thumbnail:.     
-00009040: 2020 2069 6620 6e6f 7420 7574 696c 2e69     if not util.i
-00009050: 735f 7374 7269 6e67 2874 6875 6d62 6e61  s_string(thumbna
-00009060: 696c 293a 0a20 2020 2020 2020 2020 2020  il):.           
-00009070: 2069 6620 6669 6c65 733a 0a20 2020 2020   if files:.     
-00009080: 2020 2020 2020 2020 2020 2066 696c 6573             files
-00009090: 5b22 7468 756d 626e 6169 6c22 5d20 3d20  ["thumbnail"] = 
-000090a0: 7468 756d 626e 6169 6c0a 2020 2020 2020  thumbnail.      
-000090b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000090c0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000090d0: 7320 3d20 7b22 7468 756d 626e 6169 6c22  s = {"thumbnail"
-000090e0: 3a20 7468 756d 626e 6169 6c7d 0a20 2020  : thumbnail}.   
-000090f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00009100: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00009110: 7468 756d 626e 6169 6c22 5d20 3d20 7468  thumbnail"] = th
-00009120: 756d 626e 6169 6c0a 2020 2020 6966 2063  umbnail.    if c
-00009130: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
-00009140: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00009150: 5b22 6361 7074 696f 6e5f 656e 7469 7469  ["caption_entiti
-00009160: 6573 225d 203d 206a 736f 6e2e 6475 6d70  es"] = json.dump
-00009170: 7328 0a20 2020 2020 2020 2020 2020 2074  s(.            t
-00009180: 7970 6573 2e4d 6573 7361 6765 456e 7469  ypes.MessageEnti
-00009190: 7479 2e74 6f5f 6c69 7374 5f6f 665f 6469  ty.to_list_of_di
-000091a0: 6374 7328 6361 7074 696f 6e5f 656e 7469  cts(caption_enti
-000091b0: 7469 6573 290a 2020 2020 2020 2020 290a  ties).        ).
-000091c0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
-000091d0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
-000091e0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000091f0: 6f61 645b 2270 726f 7465 6374 5f63 6f6e  oad["protect_con
-00009200: 7465 6e74 225d 203d 2070 726f 7465 6374  tent"] = protect
-00009210: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
-00009220: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00009230: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00009240: 6164 5b22 6d65 7373 6167 655f 7468 7265  ad["message_thre
-00009250: 6164 5f69 6422 5d20 3d20 6d65 7373 6167  ad_id"] = messag
-00009260: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
-00009270: 6966 2072 6570 6c79 5f70 6172 616d 6574  if reply_paramet
-00009280: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
-00009290: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000092a0: 5b22 7265 706c 795f 7061 7261 6d65 7465  ["reply_paramete
-000092b0: 7273 225d 203d 2072 6570 6c79 5f70 6172  rs"] = reply_par
-000092c0: 616d 6574 6572 732e 746f 5f6a 736f 6e28  ameters.to_json(
-000092d0: 290a 2020 2020 6966 2062 7573 696e 6573  ).    if busines
-000092e0: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
-000092f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00009300: 5b22 6275 7369 6e65 7373 5f63 6f6e 6e65  ["business_conne
-00009310: 6374 696f 6e5f 6964 225d 203d 2062 7573  ction_id"] = bus
-00009320: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00009330: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
-00009340: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00009350: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00009360: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00009370: 6669 6c65 733d 6669 6c65 732c 206d 6574  files=files, met
-00009380: 686f 643d 2270 6f73 7422 290a 0a0a 6465  hod="post")...de
-00009390: 6620 7365 6e64 5f64 6174 6128 0a20 2020  f send_data(.   
-000093a0: 2074 6f6b 656e 2c0a 2020 2020 6368 6174   token,.    chat
-000093b0: 5f69 642c 0a20 2020 2064 6174 612c 0a20  _id,.    data,. 
-000093c0: 2020 2064 6174 615f 7479 7065 2c0a 2020     data_type,.  
-000093d0: 2020 7265 706c 795f 6d61 726b 7570 3d4e    reply_markup=N
-000093e0: 6f6e 652c 0a20 2020 2070 6172 7365 5f6d  one,.    parse_m
-000093f0: 6f64 653d 4e6f 6e65 2c0a 2020 2020 6469  ode=None,.    di
-00009400: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00009410: 6f6e 3d4e 6f6e 652c 0a20 2020 2074 696d  on=None,.    tim
-00009420: 656f 7574 3d4e 6f6e 652c 0a20 2020 2063  eout=None,.    c
-00009430: 6170 7469 6f6e 3d4e 6f6e 652c 0a20 2020  aption=None,.   
-00009440: 2074 6875 6d62 6e61 696c 3d4e 6f6e 652c   thumbnail=None,
-00009450: 0a20 2020 2063 6170 7469 6f6e 5f65 6e74  .    caption_ent
-00009460: 6974 6965 733d 4e6f 6e65 2c0a 2020 2020  ities=None,.    
-00009470: 6469 7361 626c 655f 636f 6e74 656e 745f  disable_content_
-00009480: 7479 7065 5f64 6574 6563 7469 6f6e 3d4e  type_detection=N
-00009490: 6f6e 652c 0a20 2020 2076 6973 6962 6c65  one,.    visible
-000094a0: 5f66 696c 655f 6e61 6d65 3d4e 6f6e 652c  _file_name=None,
-000094b0: 0a20 2020 2070 726f 7465 6374 5f63 6f6e  .    protect_con
-000094c0: 7465 6e74 3d4e 6f6e 652c 0a20 2020 206d  tent=None,.    m
-000094d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000094e0: 3d4e 6f6e 652c 0a20 2020 2065 6d6f 6a69  =None,.    emoji
-000094f0: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
-00009500: 5f70 6172 616d 6574 6572 733d 4e6f 6e65  _parameters=None
-00009510: 2c0a 2020 2020 6275 7369 6e65 7373 5f63  ,.    business_c
-00009520: 6f6e 6e65 6374 696f 6e5f 6964 3d4e 6f6e  onnection_id=Non
-00009530: 652c 0a29 3a0a 2020 2020 6d65 7468 6f64  e,.):.    method
-00009540: 5f75 726c 203d 2067 6574 5f6d 6574 686f  _url = get_metho
-00009550: 645f 6279 5f74 7970 6528 6461 7461 5f74  d_by_type(data_t
-00009560: 7970 6529 0a20 2020 2070 6179 6c6f 6164  ype).    payload
-00009570: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-00009580: 6861 745f 6964 7d0a 2020 2020 6669 6c65  hat_id}.    file
-00009590: 7320 3d20 4e6f 6e65 0a20 2020 2069 6620  s = None.    if 
-000095a0: 6e6f 7420 7574 696c 2e69 735f 7374 7269  not util.is_stri
-000095b0: 6e67 2864 6174 6129 3a0a 2020 2020 2020  ng(data):.      
-000095c0: 2020 6669 6c65 5f64 6174 6120 3d20 6461    file_data = da
-000095d0: 7461 0a20 2020 2020 2020 2069 6620 7669  ta.        if vi
-000095e0: 7369 626c 655f 6669 6c65 5f6e 616d 653a  sible_file_name:
-000095f0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-00009600: 655f 6461 7461 203d 2028 7669 7369 626c  e_data = (visibl
-00009610: 655f 6669 6c65 5f6e 616d 652c 2064 6174  e_file_name, dat
-00009620: 6129 0a20 2020 2020 2020 2066 696c 6573  a).        files
-00009630: 203d 207b 6461 7461 5f74 7970 653a 2066   = {data_type: f
-00009640: 696c 655f 6461 7461 7d0a 2020 2020 656c  ile_data}.    el
-00009650: 7365 3a0a 2020 2020 2020 2020 7061 796c  se:.        payl
-00009660: 6f61 645b 6461 7461 5f74 7970 655d 203d  oad[data_type] =
-00009670: 2064 6174 610a 2020 2020 6966 2072 6570   data.    if rep
-00009680: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-00009690: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
-000096a0: 795f 6d61 726b 7570 225d 203d 205f 636f  y_markup"] = _co
-000096b0: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
-000096c0: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
-000096d0: 6620 7061 7273 655f 6d6f 6465 2061 6e64  f parse_mode and
-000096e0: 2064 6174 615f 7479 7065 203d 3d20 2264   data_type == "d
-000096f0: 6f63 756d 656e 7422 3a0a 2020 2020 2020  ocument":.      
-00009700: 2020 7061 796c 6f61 645b 2270 6172 7365    payload["parse
-00009710: 5f6d 6f64 6522 5d20 3d20 7061 7273 655f  _mode"] = parse_
-00009720: 6d6f 6465 0a20 2020 2069 6620 6469 7361  mode.    if disa
-00009730: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00009740: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00009750: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
-00009760: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00009770: 696f 6e22 5d20 3d20 6469 7361 626c 655f  ion"] = disable_
-00009780: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
-00009790: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
-000097a0: 2020 2020 2070 6179 6c6f 6164 5b22 7469       payload["ti
-000097b0: 6d65 6f75 7422 5d20 3d20 7469 6d65 6f75  meout"] = timeou
-000097c0: 740a 2020 2020 6966 2063 6170 7469 6f6e  t.    if caption
-000097d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000097e0: 645b 2263 6170 7469 6f6e 225d 203d 2063  d["caption"] = c
-000097f0: 6170 7469 6f6e 0a20 2020 2069 6620 7468  aption.    if th
-00009800: 756d 626e 6169 6c3a 0a20 2020 2020 2020  umbnail:.       
-00009810: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
-00009820: 7374 7269 6e67 2874 6875 6d62 6e61 696c  string(thumbnail
-00009830: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00009840: 6620 6669 6c65 733a 0a20 2020 2020 2020  f files:.       
-00009850: 2020 2020 2020 2020 2066 696c 6573 5b22           files["
-00009860: 7468 756d 626e 6169 6c22 5d20 3d20 7468  thumbnail"] = th
-00009870: 756d 626e 6169 6c0a 2020 2020 2020 2020  umbnail.        
-00009880: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00009890: 2020 2020 2020 2020 2020 6669 6c65 7320            files 
-000098a0: 3d20 7b22 7468 756d 626e 6169 6c22 3a20  = {"thumbnail": 
-000098b0: 7468 756d 626e 6169 6c7d 0a20 2020 2020  thumbnail}.     
-000098c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000098d0: 2020 2020 2070 6179 6c6f 6164 5b22 7468       payload["th
-000098e0: 756d 626e 6169 6c22 5d20 3d20 7468 756d  umbnail"] = thum
-000098f0: 626e 6169 6c0a 2020 2020 6966 2063 6170  bnail.    if cap
-00009900: 7469 6f6e 5f65 6e74 6974 6965 733a 0a20  tion_entities:. 
-00009910: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00009920: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00009930: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
-00009940: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
-00009950: 6573 2e4d 6573 7361 6765 456e 7469 7479  es.MessageEntity
-00009960: 2e74 6f5f 6c69 7374 5f6f 665f 6469 6374  .to_list_of_dict
-00009970: 7328 6361 7074 696f 6e5f 656e 7469 7469  s(caption_entiti
-00009980: 6573 290a 2020 2020 2020 2020 290a 2020  es).        ).  
-00009990: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
-000099a0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
-000099b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000099c0: 645b 2270 726f 7465 6374 5f63 6f6e 7465  d["protect_conte
-000099d0: 6e74 225d 203d 2070 726f 7465 6374 5f63  nt"] = protect_c
-000099e0: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
-000099f0: 7468 6f64 5f75 726c 203d 3d20 2273 656e  thod_url == "sen
-00009a00: 6444 6f63 756d 656e 7422 2061 6e64 2064  dDocument" and d
-00009a10: 6973 6162 6c65 5f63 6f6e 7465 6e74 5f74  isable_content_t
-00009a20: 7970 655f 6465 7465 6374 696f 6e20 6973  ype_detection is
-00009a30: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00009a40: 2020 2070 6179 6c6f 6164 5b22 6469 7361     payload["disa
-00009a50: 626c 655f 636f 6e74 656e 745f 7479 7065  ble_content_type
-00009a60: 5f64 6574 6563 7469 6f6e 225d 203d 2064  _detection"] = d
-00009a70: 6973 6162 6c65 5f63 6f6e 7465 6e74 5f74  isable_content_t
-00009a80: 7970 655f 6465 7465 6374 696f 6e0a 2020  ype_detection.  
-00009a90: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-00009aa0: 6561 645f 6964 3a0a 2020 2020 2020 2020  ead_id:.        
-00009ab0: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-00009ac0: 5f74 6872 6561 645f 6964 225d 203d 206d  _thread_id"] = m
-00009ad0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00009ae0: 0a20 2020 2069 6620 656d 6f6a 693a 0a20  .    if emoji:. 
-00009af0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00009b00: 656d 6f6a 6922 5d20 3d20 656d 6f6a 690a  emoji"] = emoji.
-00009b10: 2020 2020 6966 2072 6570 6c79 5f70 6172      if reply_par
-00009b20: 616d 6574 6572 7320 6973 206e 6f74 204e  ameters is not N
-00009b30: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00009b40: 6c6f 6164 5b22 7265 706c 795f 7061 7261  load["reply_para
-00009b50: 6d65 7465 7273 225d 203d 2072 6570 6c79  meters"] = reply
-00009b60: 5f70 6172 616d 6574 6572 732e 746f 5f6a  _parameters.to_j
-00009b70: 736f 6e28 290a 2020 2020 6966 2062 7573  son().    if bus
-00009b80: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00009b90: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00009ba0: 6c6f 6164 5b22 6275 7369 6e65 7373 5f63  load["business_c
-00009bb0: 6f6e 6e65 6374 696f 6e5f 6964 225d 203d  onnection_id"] =
-00009bc0: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00009bd0: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
-00009be0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00009bf0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00009c00: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00009c10: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00009c20: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-00009c30: 0a0a 6465 6620 6765 745f 6d65 7468 6f64  ..def get_method
-00009c40: 5f62 795f 7479 7065 2864 6174 615f 7479  _by_type(data_ty
-00009c50: 7065 293a 0a20 2020 2069 6620 6461 7461  pe):.    if data
-00009c60: 5f74 7970 6520 3d3d 2022 646f 6375 6d65  _type == "docume
-00009c70: 6e74 223a 0a20 2020 2020 2020 2072 6574  nt":.        ret
-00009c80: 7572 6e20 7222 7365 6e64 446f 6375 6d65  urn r"sendDocume
-00009c90: 6e74 220a 2020 2020 6966 2064 6174 615f  nt".    if data_
-00009ca0: 7479 7065 203d 3d20 2273 7469 636b 6572  type == "sticker
-00009cb0: 223a 0a20 2020 2020 2020 2072 6574 7572  ":.        retur
-00009cc0: 6e20 7222 7365 6e64 5374 6963 6b65 7222  n r"sendSticker"
-00009cd0: 0a0a 0a64 6566 2062 616e 5f63 6861 745f  ...def ban_chat_
-00009ce0: 6d65 6d62 6572 2874 6f6b 656e 2c20 6368  member(token, ch
-00009cf0: 6174 5f69 642c 2075 7365 725f 6964 2c20  at_id, user_id, 
-00009d00: 756e 7469 6c5f 6461 7465 3d4e 6f6e 652c  until_date=None,
-00009d10: 2072 6576 6f6b 655f 6d65 7373 6167 6573   revoke_messages
-00009d20: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-00009d30: 6f64 5f75 726c 203d 2022 6261 6e43 6861  od_url = "banCha
-00009d40: 744d 656d 6265 7222 0a20 2020 2070 6179  tMember".    pay
-00009d50: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-00009d60: 223a 2063 6861 745f 6964 2c20 2275 7365  ": chat_id, "use
-00009d70: 725f 6964 223a 2075 7365 725f 6964 7d0a  r_id": user_id}.
-00009d80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00009d90: 6528 756e 7469 6c5f 6461 7465 2c20 6461  e(until_date, da
-00009da0: 7465 7469 6d65 293a 0a20 2020 2020 2020  tetime):.       
-00009db0: 2070 6179 6c6f 6164 5b22 756e 7469 6c5f   payload["until_
-00009dc0: 6461 7465 225d 203d 2075 6e74 696c 5f64  date"] = until_d
-00009dd0: 6174 652e 7469 6d65 7374 616d 7028 290a  ate.timestamp().
-00009de0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00009df0: 2020 7061 796c 6f61 645b 2275 6e74 696c    payload["until
-00009e00: 5f64 6174 6522 5d20 3d20 756e 7469 6c5f  _date"] = until_
-00009e10: 6461 7465 0a20 2020 2069 6620 7265 766f  date.    if revo
-00009e20: 6b65 5f6d 6573 7361 6765 7320 6973 206e  ke_messages is n
-00009e30: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00009e40: 2070 6179 6c6f 6164 5b22 7265 766f 6b65   payload["revoke
-00009e50: 5f6d 6573 7361 6765 7322 5d20 3d20 7265  _messages"] = re
-00009e60: 766f 6b65 5f6d 6573 7361 6765 730a 2020  voke_messages.  
-00009e70: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00009e80: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00009e90: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00009ea0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-00009eb0: 3d22 706f 7374 2229 0a0a 0a64 6566 2075  ="post")...def u
-00009ec0: 6e62 616e 5f63 6861 745f 6d65 6d62 6572  nban_chat_member
-00009ed0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-00009ee0: 2075 7365 725f 6964 2c20 6f6e 6c79 5f69   user_id, only_i
-00009ef0: 665f 6261 6e6e 6564 293a 0a20 2020 206d  f_banned):.    m
-00009f00: 6574 686f 645f 7572 6c20 3d20 2275 6e62  ethod_url = "unb
-00009f10: 616e 4368 6174 4d65 6d62 6572 220a 2020  anChatMember".  
-00009f20: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
-00009f30: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
-00009f40: 2022 7573 6572 5f69 6422 3a20 7573 6572   "user_id": user
-00009f50: 5f69 647d 0a20 2020 2069 6620 6f6e 6c79  _id}.    if only
-00009f60: 5f69 665f 6261 6e6e 6564 2069 7320 6e6f  _if_banned is no
-00009f70: 7420 4e6f 6e65 3a20 2023 204e 6f6e 6520  t None:  # None 
-00009f80: 2f20 5472 7565 202f 2046 616c 7365 0a20  / True / False. 
-00009f90: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00009fa0: 6f6e 6c79 5f69 665f 6261 6e6e 6564 225d  only_if_banned"]
-00009fb0: 203d 206f 6e6c 795f 6966 5f62 616e 6e65   = only_if_banne
-00009fc0: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
-00009fd0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00009fe0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00009ff0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000a000: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-0000a010: 6566 2072 6573 7472 6963 745f 6368 6174  ef restrict_chat
-0000a020: 5f6d 656d 6265 7228 0a20 2020 2074 6f6b  _member(.    tok
-0000a030: 656e 2c0a 2020 2020 6368 6174 5f69 642c  en,.    chat_id,
-0000a040: 0a20 2020 2075 7365 725f 6964 2c0a 2020  .    user_id,.  
-0000a050: 2020 7065 726d 6973 7369 6f6e 732c 0a20    permissions,. 
-0000a060: 2020 2075 6e74 696c 5f64 6174 653d 4e6f     until_date=No
-0000a070: 6e65 2c0a 2020 2020 7573 655f 696e 6465  ne,.    use_inde
-0000a080: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
-0000a090: 6d69 7373 696f 6e73 3d4e 6f6e 652c 0a29  missions=None,.)
-0000a0a0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000a0b0: 203d 2022 7265 7374 7269 6374 4368 6174   = "restrictChat
-0000a0c0: 4d65 6d62 6572 220a 2020 2020 7061 796c  Member".    payl
-0000a0d0: 6f61 6420 3d20 7b0a 2020 2020 2020 2020  oad = {.        
-0000a0e0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-0000a0f0: 6964 2c0a 2020 2020 2020 2020 2275 7365  id,.        "use
-0000a100: 725f 6964 223a 2075 7365 725f 6964 2c0a  r_id": user_id,.
-0000a110: 2020 2020 2020 2020 2270 6572 6d69 7373          "permiss
-0000a120: 696f 6e73 223a 2070 6572 6d69 7373 696f  ions": permissio
-0000a130: 6e73 2e74 6f5f 6a73 6f6e 2829 2c0a 2020  ns.to_json(),.  
-0000a140: 2020 7d0a 0a20 2020 2069 6620 7573 655f    }..    if use_
-0000a150: 696e 6465 7065 6e64 656e 745f 6368 6174  independent_chat
-0000a160: 5f70 6572 6d69 7373 696f 6e73 2069 7320  _permissions is 
-0000a170: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a180: 2020 7061 796c 6f61 645b 2275 7365 5f69    payload["use_i
-0000a190: 6e64 6570 656e 6465 6e74 5f63 6861 745f  ndependent_chat_
-0000a1a0: 7065 726d 6973 7369 6f6e 7322 5d20 3d20  permissions"] = 
-0000a1b0: 7573 655f 696e 6465 7065 6e64 656e 745f  use_independent_
-0000a1c0: 6368 6174 5f70 6572 6d69 7373 696f 6e73  chat_permissions
-0000a1d0: 0a20 2020 2069 6620 756e 7469 6c5f 6461  .    if until_da
-0000a1e0: 7465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  te is not None:.
-0000a1f0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0000a200: 7461 6e63 6528 756e 7469 6c5f 6461 7465  tance(until_date
-0000a210: 2c20 6461 7465 7469 6d65 293a 0a20 2020  , datetime):.   
-0000a220: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-0000a230: 5b22 756e 7469 6c5f 6461 7465 225d 203d  ["until_date"] =
-0000a240: 2075 6e74 696c 5f64 6174 652e 7469 6d65   until_date.time
-0000a250: 7374 616d 7028 290a 2020 2020 2020 2020  stamp().        
-0000a260: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000a270: 2020 7061 796c 6f61 645b 2275 6e74 696c    payload["until
-0000a280: 5f64 6174 6522 5d20 3d20 756e 7469 6c5f  _date"] = until_
-0000a290: 6461 7465 0a0a 2020 2020 7265 7475 726e  date..    return
-0000a2a0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000a2b0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000a2c0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000a2d0: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
-0000a2e0: 0a0a 0a64 6566 2070 726f 6d6f 7465 5f63  ...def promote_c
-0000a2f0: 6861 745f 6d65 6d62 6572 280a 2020 2020  hat_member(.    
-0000a300: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
-0000a310: 6964 2c0a 2020 2020 7573 6572 5f69 642c  id,.    user_id,
-0000a320: 0a20 2020 2063 616e 5f63 6861 6e67 655f  .    can_change_
-0000a330: 696e 666f 3d4e 6f6e 652c 0a20 2020 2063  info=None,.    c
-0000a340: 616e 5f70 6f73 745f 6d65 7373 6167 6573  an_post_messages
-0000a350: 3d4e 6f6e 652c 0a20 2020 2063 616e 5f65  =None,.    can_e
-0000a360: 6469 745f 6d65 7373 6167 6573 3d4e 6f6e  dit_messages=Non
-0000a370: 652c 0a20 2020 2063 616e 5f64 656c 6574  e,.    can_delet
-0000a380: 655f 6d65 7373 6167 6573 3d4e 6f6e 652c  e_messages=None,
-0000a390: 0a20 2020 2063 616e 5f69 6e76 6974 655f  .    can_invite_
-0000a3a0: 7573 6572 733d 4e6f 6e65 2c0a 2020 2020  users=None,.    
-0000a3b0: 6361 6e5f 7265 7374 7269 6374 5f6d 656d  can_restrict_mem
-0000a3c0: 6265 7273 3d4e 6f6e 652c 0a20 2020 2063  bers=None,.    c
-0000a3d0: 616e 5f70 696e 5f6d 6573 7361 6765 733d  an_pin_messages=
-0000a3e0: 4e6f 6e65 2c0a 2020 2020 6361 6e5f 7072  None,.    can_pr
-0000a3f0: 6f6d 6f74 655f 6d65 6d62 6572 733d 4e6f  omote_members=No
-0000a400: 6e65 2c0a 2020 2020 6973 5f61 6e6f 6e79  ne,.    is_anony
-0000a410: 6d6f 7573 3d4e 6f6e 652c 0a20 2020 2063  mous=None,.    c
-0000a420: 616e 5f6d 616e 6167 655f 6368 6174 3d4e  an_manage_chat=N
-0000a430: 6f6e 652c 0a20 2020 2063 616e 5f6d 616e  one,.    can_man
-0000a440: 6167 655f 7669 6465 6f5f 6368 6174 733d  age_video_chats=
-0000a450: 4e6f 6e65 2c0a 2020 2020 6361 6e5f 6d61  None,.    can_ma
-0000a460: 6e61 6765 5f74 6f70 6963 733d 4e6f 6e65  nage_topics=None
-0000a470: 2c0a 2020 2020 6361 6e5f 706f 7374 5f73  ,.    can_post_s
-0000a480: 746f 7269 6573 3d4e 6f6e 652c 0a20 2020  tories=None,.   
-0000a490: 2063 616e 5f65 6469 745f 7374 6f72 6965   can_edit_storie
-0000a4a0: 733d 4e6f 6e65 2c0a 2020 2020 6361 6e5f  s=None,.    can_
-0000a4b0: 6465 6c65 7465 5f73 746f 7269 6573 3d4e  delete_stories=N
-0000a4c0: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
-0000a4d0: 6f64 5f75 726c 203d 2022 7072 6f6d 6f74  od_url = "promot
-0000a4e0: 6543 6861 744d 656d 6265 7222 0a20 2020  eChatMember".   
-0000a4f0: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-0000a500: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
-0000a510: 2275 7365 725f 6964 223a 2075 7365 725f  "user_id": user_
-0000a520: 6964 7d0a 2020 2020 6966 2063 616e 5f63  id}.    if can_c
-0000a530: 6861 6e67 655f 696e 666f 2069 7320 6e6f  hange_info is no
-0000a540: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a550: 7061 796c 6f61 645b 2263 616e 5f63 6861  payload["can_cha
-0000a560: 6e67 655f 696e 666f 225d 203d 2063 616e  nge_info"] = can
-0000a570: 5f63 6861 6e67 655f 696e 666f 0a20 2020  _change_info.   
-0000a580: 2069 6620 6361 6e5f 706f 7374 5f6d 6573   if can_post_mes
-0000a590: 7361 6765 7320 6973 206e 6f74 204e 6f6e  sages is not Non
-0000a5a0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-0000a5b0: 6164 5b22 6361 6e5f 706f 7374 5f6d 6573  ad["can_post_mes
-0000a5c0: 7361 6765 7322 5d20 3d20 6361 6e5f 706f  sages"] = can_po
-0000a5d0: 7374 5f6d 6573 7361 6765 730a 2020 2020  st_messages.    
-0000a5e0: 6966 2063 616e 5f65 6469 745f 6d65 7373  if can_edit_mess
-0000a5f0: 6167 6573 2069 7320 6e6f 7420 4e6f 6e65  ages is not None
-0000a600: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000a610: 645b 2263 616e 5f65 6469 745f 6d65 7373  d["can_edit_mess
-0000a620: 6167 6573 225d 203d 2063 616e 5f65 6469  ages"] = can_edi
-0000a630: 745f 6d65 7373 6167 6573 0a20 2020 2069  t_messages.    i
-0000a640: 6620 6361 6e5f 6465 6c65 7465 5f6d 6573  f can_delete_mes
-0000a650: 7361 6765 7320 6973 206e 6f74 204e 6f6e  sages is not Non
-0000a660: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-0000a670: 6164 5b22 6361 6e5f 6465 6c65 7465 5f6d  ad["can_delete_m
-0000a680: 6573 7361 6765 7322 5d20 3d20 6361 6e5f  essages"] = can_
-0000a690: 6465 6c65 7465 5f6d 6573 7361 6765 730a  delete_messages.
-0000a6a0: 2020 2020 6966 2063 616e 5f69 6e76 6974      if can_invit
-0000a6b0: 655f 7573 6572 7320 6973 206e 6f74 204e  e_users is not N
-0000a6c0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000a6d0: 6c6f 6164 5b22 6361 6e5f 696e 7669 7465  load["can_invite
-0000a6e0: 5f75 7365 7273 225d 203d 2063 616e 5f69  _users"] = can_i
-0000a6f0: 6e76 6974 655f 7573 6572 730a 2020 2020  nvite_users.    
-0000a700: 6966 2063 616e 5f72 6573 7472 6963 745f  if can_restrict_
-0000a710: 6d65 6d62 6572 7320 6973 206e 6f74 204e  members is not N
-0000a720: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000a730: 6c6f 6164 5b22 6361 6e5f 7265 7374 7269  load["can_restri
-0000a740: 6374 5f6d 656d 6265 7273 225d 203d 2063  ct_members"] = c
-0000a750: 616e 5f72 6573 7472 6963 745f 6d65 6d62  an_restrict_memb
-0000a760: 6572 730a 2020 2020 6966 2063 616e 5f70  ers.    if can_p
-0000a770: 696e 5f6d 6573 7361 6765 7320 6973 206e  in_messages is n
-0000a780: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000a790: 2070 6179 6c6f 6164 5b22 6361 6e5f 7069   payload["can_pi
-0000a7a0: 6e5f 6d65 7373 6167 6573 225d 203d 2063  n_messages"] = c
-0000a7b0: 616e 5f70 696e 5f6d 6573 7361 6765 730a  an_pin_messages.
-0000a7c0: 2020 2020 6966 2063 616e 5f70 726f 6d6f      if can_promo
-0000a7d0: 7465 5f6d 656d 6265 7273 2069 7320 6e6f  te_members is no
-0000a7e0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a7f0: 7061 796c 6f61 645b 2263 616e 5f70 726f  payload["can_pro
-0000a800: 6d6f 7465 5f6d 656d 6265 7273 225d 203d  mote_members"] =
-0000a810: 2063 616e 5f70 726f 6d6f 7465 5f6d 656d   can_promote_mem
-0000a820: 6265 7273 0a20 2020 2069 6620 6973 5f61  bers.    if is_a
-0000a830: 6e6f 6e79 6d6f 7573 2069 7320 6e6f 7420  nonymous is not 
-0000a840: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000a850: 796c 6f61 645b 2269 735f 616e 6f6e 796d  yload["is_anonym
-0000a860: 6f75 7322 5d20 3d20 6973 5f61 6e6f 6e79  ous"] = is_anony
-0000a870: 6d6f 7573 0a20 2020 2069 6620 6361 6e5f  mous.    if can_
-0000a880: 6d61 6e61 6765 5f63 6861 7420 6973 206e  manage_chat is n
-0000a890: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000a8a0: 2070 6179 6c6f 6164 5b22 6361 6e5f 6d61   payload["can_ma
-0000a8b0: 6e61 6765 5f63 6861 7422 5d20 3d20 6361  nage_chat"] = ca
-0000a8c0: 6e5f 6d61 6e61 6765 5f63 6861 740a 2020  n_manage_chat.  
-0000a8d0: 2020 6966 2063 616e 5f6d 616e 6167 655f    if can_manage_
-0000a8e0: 7669 6465 6f5f 6368 6174 7320 6973 206e  video_chats is n
-0000a8f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000a900: 2070 6179 6c6f 6164 5b22 6361 6e5f 6d61   payload["can_ma
-0000a910: 6e61 6765 5f76 6964 656f 5f63 6861 7473  nage_video_chats
-0000a920: 225d 203d 2063 616e 5f6d 616e 6167 655f  "] = can_manage_
-0000a930: 7669 6465 6f5f 6368 6174 730a 2020 2020  video_chats.    
-0000a940: 6966 2063 616e 5f6d 616e 6167 655f 746f  if can_manage_to
-0000a950: 7069 6373 2069 7320 6e6f 7420 4e6f 6e65  pics is not None
-0000a960: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000a970: 645b 2263 616e 5f6d 616e 6167 655f 746f  d["can_manage_to
-0000a980: 7069 6373 225d 203d 2063 616e 5f6d 616e  pics"] = can_man
-0000a990: 6167 655f 746f 7069 6373 0a20 2020 2069  age_topics.    i
-0000a9a0: 6620 6361 6e5f 706f 7374 5f73 746f 7269  f can_post_stori
-0000a9b0: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a0a  es is not None:.
-0000a9c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000a9d0: 2263 616e 5f70 6f73 745f 7374 6f72 6965  "can_post_storie
-0000a9e0: 7322 5d20 3d20 6361 6e5f 706f 7374 5f73  s"] = can_post_s
-0000a9f0: 746f 7269 6573 0a20 2020 2069 6620 6361  tories.    if ca
-0000aa00: 6e5f 6564 6974 5f73 746f 7269 6573 2069  n_edit_stories i
-0000aa10: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000aa20: 2020 2020 7061 796c 6f61 645b 2263 616e      payload["can
-0000aa30: 5f65 6469 745f 7374 6f72 6965 7322 5d20  _edit_stories"] 
-0000aa40: 3d20 6361 6e5f 6564 6974 5f73 746f 7269  = can_edit_stori
-0000aa50: 6573 0a20 2020 2069 6620 6361 6e5f 6465  es.    if can_de
-0000aa60: 6c65 7465 5f73 746f 7269 6573 2069 7320  lete_stories is 
-0000aa70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000aa80: 2020 7061 796c 6f61 645b 2263 616e 5f64    payload["can_d
-0000aa90: 656c 6574 655f 7374 6f72 6965 7322 5d20  elete_stories"] 
-0000aaa0: 3d20 6361 6e5f 6465 6c65 7465 5f73 746f  = can_delete_sto
-0000aab0: 7269 6573 0a20 2020 2072 6574 7572 6e20  ries.    return 
-0000aac0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000aad0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000aae0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000aaf0: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-0000ab00: 0a0a 6465 6620 7365 745f 6368 6174 5f61  ..def set_chat_a
-0000ab10: 646d 696e 6973 7472 6174 6f72 5f63 7573  dministrator_cus
-0000ab20: 746f 6d5f 7469 746c 6528 746f 6b65 6e2c  tom_title(token,
-0000ab30: 2063 6861 745f 6964 2c20 7573 6572 5f69   chat_id, user_i
-0000ab40: 642c 2063 7573 746f 6d5f 7469 746c 6529  d, custom_title)
-0000ab50: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000ab60: 203d 2022 7365 7443 6861 7441 646d 696e   = "setChatAdmin
-0000ab70: 6973 7472 6174 6f72 4375 7374 6f6d 5469  istratorCustomTi
-0000ab80: 746c 6522 0a20 2020 2070 6179 6c6f 6164  tle".    payload
-0000ab90: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-0000aba0: 6861 745f 6964 2c20 2275 7365 725f 6964  hat_id, "user_id
-0000abb0: 223a 2075 7365 725f 6964 2c20 2263 7573  ": user_id, "cus
-0000abc0: 746f 6d5f 7469 746c 6522 3a20 6375 7374  tom_title": cust
-0000abd0: 6f6d 5f74 6974 6c65 7d0a 2020 2020 7265  om_title}.    re
-0000abe0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-0000abf0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000ac00: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000ac10: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-0000ac20: 7374 2229 0a0a 0a64 6566 2062 616e 5f63  st")...def ban_c
-0000ac30: 6861 745f 7365 6e64 6572 5f63 6861 7428  hat_sender_chat(
-0000ac40: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-0000ac50: 7365 6e64 6572 5f63 6861 745f 6964 293a  sender_chat_id):
-0000ac60: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000ac70: 3d20 2262 616e 4368 6174 5365 6e64 6572  = "banChatSender
-0000ac80: 4368 6174 220a 2020 2020 7061 796c 6f61  Chat".    payloa
-0000ac90: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-0000aca0: 6368 6174 5f69 642c 2022 7365 6e64 6572  chat_id, "sender
-0000acb0: 5f63 6861 745f 6964 223a 2073 656e 6465  _chat_id": sende
-0000acc0: 725f 6368 6174 5f69 647d 0a20 2020 2072  r_chat_id}.    r
-0000acd0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000ace0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000acf0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000ad00: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
-0000ad10: 6f73 7422 290a 0a0a 6465 6620 756e 6261  ost")...def unba
-0000ad20: 6e5f 6368 6174 5f73 656e 6465 725f 6368  n_chat_sender_ch
-0000ad30: 6174 2874 6f6b 656e 2c20 6368 6174 5f69  at(token, chat_i
-0000ad40: 642c 2073 656e 6465 725f 6368 6174 5f69  d, sender_chat_i
-0000ad50: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000ad60: 726c 203d 2022 756e 6261 6e43 6861 7453  rl = "unbanChatS
-0000ad70: 656e 6465 7243 6861 7422 0a20 2020 2070  enderChat".    p
-0000ad80: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-0000ad90: 6964 223a 2063 6861 745f 6964 2c20 2273  id": chat_id, "s
-0000ada0: 656e 6465 725f 6368 6174 5f69 6422 3a20  ender_chat_id": 
-0000adb0: 7365 6e64 6572 5f63 6861 745f 6964 7d0a  sender_chat_id}.
-0000adc0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000add0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000ade0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000adf0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000ae00: 6f64 3d22 706f 7374 2229 0a0a 0a64 6566  od="post")...def
-0000ae10: 2073 6574 5f63 6861 745f 7065 726d 6973   set_chat_permis
-0000ae20: 7369 6f6e 7328 0a20 2020 2074 6f6b 656e  sions(.    token
-0000ae30: 2c20 6368 6174 5f69 642c 2070 6572 6d69  , chat_id, permi
-0000ae40: 7373 696f 6e73 2c20 7573 655f 696e 6465  ssions, use_inde
-0000ae50: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
-0000ae60: 6d69 7373 696f 6e73 3d4e 6f6e 650a 293a  missions=None.):
-0000ae70: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000ae80: 3d20 2273 6574 4368 6174 5065 726d 6973  = "setChatPermis
-0000ae90: 7369 6f6e 7322 0a20 2020 2070 6179 6c6f  sions".    paylo
-0000aea0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
-0000aeb0: 2063 6861 745f 6964 2c20 2270 6572 6d69   chat_id, "permi
-0000aec0: 7373 696f 6e73 223a 2070 6572 6d69 7373  ssions": permiss
-0000aed0: 696f 6e73 2e74 6f5f 6a73 6f6e 2829 7d0a  ions.to_json()}.
-0000aee0: 2020 2020 6966 2075 7365 5f69 6e64 6570      if use_indep
-0000aef0: 656e 6465 6e74 5f63 6861 745f 7065 726d  endent_chat_perm
-0000af00: 6973 7369 6f6e 7320 6973 206e 6f74 204e  issions is not N
-0000af10: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000af20: 6c6f 6164 5b22 7573 655f 696e 6465 7065  load["use_indepe
-0000af30: 6e64 656e 745f 6368 6174 5f70 6572 6d69  ndent_chat_permi
-0000af40: 7373 696f 6e73 225d 203d 2075 7365 5f69  ssions"] = use_i
-0000af50: 6e64 6570 656e 6465 6e74 5f63 6861 745f  ndependent_chat_
-0000af60: 7065 726d 6973 7369 6f6e 730a 2020 2020  permissions.    
-0000af70: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-0000af80: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000af90: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000afa0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
-0000afb0: 706f 7374 2229 0a0a 0a64 6566 2063 7265  post")...def cre
-0000afc0: 6174 655f 6368 6174 5f69 6e76 6974 655f  ate_chat_invite_
-0000afd0: 6c69 6e6b 280a 2020 2020 746f 6b65 6e2c  link(.    token,
-0000afe0: 2063 6861 745f 6964 2c20 6e61 6d65 2c20   chat_id, name, 
-0000aff0: 6578 7069 7265 5f64 6174 652c 206d 656d  expire_date, mem
-0000b000: 6265 725f 6c69 6d69 742c 2063 7265 6174  ber_limit, creat
-0000b010: 6573 5f6a 6f69 6e5f 7265 7175 6573 740a  es_join_request.
-0000b020: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000b030: 6c20 3d20 2263 7265 6174 6543 6861 7449  l = "createChatI
-0000b040: 6e76 6974 654c 696e 6b22 0a20 2020 2070  nviteLink".    p
-0000b050: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-0000b060: 6964 223a 2063 6861 745f 6964 7d0a 0a20  id": chat_id}.. 
-0000b070: 2020 2069 6620 6578 7069 7265 5f64 6174     if expire_dat
-0000b080: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0000b090: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000b0a0: 616e 6365 2865 7870 6972 655f 6461 7465  ance(expire_date
-0000b0b0: 2c20 6461 7465 7469 6d65 293a 0a20 2020  , datetime):.   
-0000b0c0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-0000b0d0: 5b22 6578 7069 7265 5f64 6174 6522 5d20  ["expire_date"] 
-0000b0e0: 3d20 6578 7069 7265 5f64 6174 652e 7469  = expire_date.ti
-0000b0f0: 6d65 7374 616d 7028 290a 2020 2020 2020  mestamp().      
-0000b100: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000b110: 2020 2020 7061 796c 6f61 645b 2265 7870      payload["exp
-0000b120: 6972 655f 6461 7465 225d 203d 2065 7870  ire_date"] = exp
-0000b130: 6972 655f 6461 7465 0a20 2020 2069 6620  ire_date.    if 
-0000b140: 6d65 6d62 6572 5f6c 696d 6974 3a0a 2020  member_limit:.  
-0000b150: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
-0000b160: 656d 6265 725f 6c69 6d69 7422 5d20 3d20  ember_limit"] = 
-0000b170: 6d65 6d62 6572 5f6c 696d 6974 0a20 2020  member_limit.   
-0000b180: 2069 6620 6372 6561 7465 735f 6a6f 696e   if creates_join
-0000b190: 5f72 6571 7565 7374 2069 7320 6e6f 7420  _request is not 
-0000b1a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000b1b0: 796c 6f61 645b 2263 7265 6174 6573 5f6a  yload["creates_j
-0000b1c0: 6f69 6e5f 7265 7175 6573 7422 5d20 3d20  oin_request"] = 
-0000b1d0: 6372 6561 7465 735f 6a6f 696e 5f72 6571  creates_join_req
-0000b1e0: 7565 7374 0a20 2020 2069 6620 6e61 6d65  uest.    if name
-0000b1f0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000b200: 645b 226e 616d 6522 5d20 3d20 6e61 6d65  d["name"] = name
-0000b210: 0a0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
-0000b220: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000b230: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000b240: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000b250: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-0000b260: 6566 2065 6469 745f 6368 6174 5f69 6e76  ef edit_chat_inv
-0000b270: 6974 655f 6c69 6e6b 280a 2020 2020 746f  ite_link(.    to
-0000b280: 6b65 6e2c 2063 6861 745f 6964 2c20 696e  ken, chat_id, in
-0000b290: 7669 7465 5f6c 696e 6b2c 206e 616d 652c  vite_link, name,
-0000b2a0: 2065 7870 6972 655f 6461 7465 2c20 6d65   expire_date, me
-0000b2b0: 6d62 6572 5f6c 696d 6974 2c20 6372 6561  mber_limit, crea
-0000b2c0: 7465 735f 6a6f 696e 5f72 6571 7565 7374  tes_join_request
-0000b2d0: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
-0000b2e0: 726c 203d 2022 6564 6974 4368 6174 496e  rl = "editChatIn
-0000b2f0: 7669 7465 4c69 6e6b 220a 2020 2020 7061  viteLink".    pa
-0000b300: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-0000b310: 6422 3a20 6368 6174 5f69 642c 2022 696e  d": chat_id, "in
-0000b320: 7669 7465 5f6c 696e 6b22 3a20 696e 7669  vite_link": invi
-0000b330: 7465 5f6c 696e 6b7d 0a0a 2020 2020 6966  te_link}..    if
-0000b340: 2065 7870 6972 655f 6461 7465 2069 7320   expire_date is 
-0000b350: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000b360: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0000b370: 6578 7069 7265 5f64 6174 652c 2064 6174  expire_date, dat
-0000b380: 6574 696d 6529 3a0a 2020 2020 2020 2020  etime):.        
-0000b390: 2020 2020 7061 796c 6f61 645b 2265 7870      payload["exp
-0000b3a0: 6972 655f 6461 7465 225d 203d 2065 7870  ire_date"] = exp
-0000b3b0: 6972 655f 6461 7465 2e74 696d 6573 7461  ire_date.timesta
-0000b3c0: 6d70 2829 0a20 2020 2020 2020 2065 6c73  mp().        els
-0000b3d0: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-0000b3e0: 6179 6c6f 6164 5b22 6578 7069 7265 5f64  ayload["expire_d
-0000b3f0: 6174 6522 5d20 3d20 6578 7069 7265 5f64  ate"] = expire_d
-0000b400: 6174 650a 0a20 2020 2069 6620 6d65 6d62  ate..    if memb
-0000b410: 6572 5f6c 696d 6974 2069 7320 6e6f 7420  er_limit is not 
-0000b420: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000b430: 796c 6f61 645b 226d 656d 6265 725f 6c69  yload["member_li
-0000b440: 6d69 7422 5d20 3d20 6d65 6d62 6572 5f6c  mit"] = member_l
-0000b450: 696d 6974 0a20 2020 2069 6620 6e61 6d65  imit.    if name
-0000b460: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000b470: 645b 226e 616d 6522 5d20 3d20 6e61 6d65  d["name"] = name
-0000b480: 0a20 2020 2069 6620 6372 6561 7465 735f  .    if creates_
-0000b490: 6a6f 696e 5f72 6571 7565 7374 2069 7320  join_request is 
-0000b4a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000b4b0: 2020 7061 796c 6f61 645b 2263 7265 6174    payload["creat
-0000b4c0: 6573 5f6a 6f69 6e5f 7265 7175 6573 7422  es_join_request"
-0000b4d0: 5d20 3d20 6372 6561 7465 735f 6a6f 696e  ] = creates_join
-0000b4e0: 5f72 6571 7565 7374 0a0a 2020 2020 7265  _request..    re
-0000b4f0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-0000b500: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000b510: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000b520: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-0000b530: 7374 2229 0a0a 0a64 6566 2072 6576 6f6b  st")...def revok
-0000b540: 655f 6368 6174 5f69 6e76 6974 655f 6c69  e_chat_invite_li
-0000b550: 6e6b 2874 6f6b 656e 2c20 6368 6174 5f69  nk(token, chat_i
-0000b560: 642c 2069 6e76 6974 655f 6c69 6e6b 293a  d, invite_link):
-0000b570: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000b580: 3d20 2272 6576 6f6b 6543 6861 7449 6e76  = "revokeChatInv
-0000b590: 6974 654c 696e 6b22 0a20 2020 2070 6179  iteLink".    pay
-0000b5a0: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-0000b5b0: 223a 2063 6861 745f 6964 2c20 2269 6e76  ": chat_id, "inv
-0000b5c0: 6974 655f 6c69 6e6b 223a 2069 6e76 6974  ite_link": invit
-0000b5d0: 655f 6c69 6e6b 7d0a 2020 2020 7265 7475  e_link}.    retu
-0000b5e0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-0000b5f0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000b600: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000b610: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
-0000b620: 2229 0a0a 0a64 6566 2065 7870 6f72 745f  ")...def export_
-0000b630: 6368 6174 5f69 6e76 6974 655f 6c69 6e6b  chat_invite_link
-0000b640: 2874 6f6b 656e 2c20 6368 6174 5f69 6429  (token, chat_id)
-0000b650: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000b660: 203d 2022 6578 706f 7274 4368 6174 496e   = "exportChatIn
-0000b670: 7669 7465 4c69 6e6b 220a 2020 2020 7061  viteLink".    pa
-0000b680: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-0000b690: 6422 3a20 6368 6174 5f69 647d 0a20 2020  d": chat_id}.   
-0000b6a0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000b6b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b6c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b6d0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b6e0: 2270 6f73 7422 290a 0a0a 6465 6620 6170  "post")...def ap
-0000b6f0: 7072 6f76 655f 6368 6174 5f6a 6f69 6e5f  prove_chat_join_
-0000b700: 7265 7175 6573 7428 746f 6b65 6e2c 2063  request(token, c
-0000b710: 6861 745f 6964 2c20 7573 6572 5f69 6429  hat_id, user_id)
-0000b720: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000b730: 203d 2022 6170 7072 6f76 6543 6861 744a   = "approveChatJ
-0000b740: 6f69 6e52 6571 7565 7374 220a 2020 2020  oinRequest".    
-0000b750: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-0000b760: 5f69 6422 3a20 6368 6174 5f69 642c 2022  _id": chat_id, "
-0000b770: 7573 6572 5f69 6422 3a20 7573 6572 5f69  user_id": user_i
-0000b780: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
-0000b790: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000b7a0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000b7b0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000b7c0: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000b7d0: 6465 6620 6465 636c 696e 655f 6368 6174  def decline_chat
-0000b7e0: 5f6a 6f69 6e5f 7265 7175 6573 7428 746f  _join_request(to
-0000b7f0: 6b65 6e2c 2063 6861 745f 6964 2c20 7573  ken, chat_id, us
-0000b800: 6572 5f69 6429 3a0a 2020 2020 6d65 7468  er_id):.    meth
-0000b810: 6f64 5f75 726c 203d 2022 6465 636c 696e  od_url = "declin
-0000b820: 6543 6861 744a 6f69 6e52 6571 7565 7374  eChatJoinRequest
-0000b830: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-0000b840: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-0000b850: 5f69 642c 2022 7573 6572 5f69 6422 3a20  _id, "user_id": 
-0000b860: 7573 6572 5f69 647d 0a20 2020 2072 6574  user_id}.    ret
-0000b870: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000b880: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000b890: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000b8a0: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
-0000b8b0: 7422 290a 0a0a 6465 6620 7365 745f 6368  t")...def set_ch
-0000b8c0: 6174 5f70 686f 746f 2874 6f6b 656e 2c20  at_photo(token, 
-0000b8d0: 6368 6174 5f69 642c 2070 686f 746f 293a  chat_id, photo):
-0000b8e0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000b8f0: 3d20 2273 6574 4368 6174 5068 6f74 6f22  = "setChatPhoto"
-0000b900: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000b910: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-0000b920: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
-0000b930: 4e6f 6e65 0a20 2020 2069 6620 7574 696c  None.    if util
-0000b940: 2e69 735f 7374 7269 6e67 2870 686f 746f  .is_string(photo
-0000b950: 293a 0a20 2020 2020 2020 2070 6179 6c6f  ):.        paylo
-0000b960: 6164 5b22 7068 6f74 6f22 5d20 3d20 7068  ad["photo"] = ph
-0000b970: 6f74 6f0a 2020 2020 656c 6966 2075 7469  oto.    elif uti
-0000b980: 6c2e 6973 5f70 696c 5f69 6d61 6765 2870  l.is_pil_image(p
-0000b990: 686f 746f 293a 0a20 2020 2020 2020 2066  hoto):.        f
-0000b9a0: 696c 6573 203d 207b 2270 686f 746f 223a  iles = {"photo":
-0000b9b0: 2075 7469 6c2e 7069 6c5f 696d 6167 655f   util.pil_image_
-0000b9c0: 746f 5f66 696c 6528 7068 6f74 6f29 7d0a  to_file(photo)}.
-0000b9d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000b9e0: 2020 6669 6c65 7320 3d20 7b22 7068 6f74    files = {"phot
-0000b9f0: 6f22 3a20 7068 6f74 6f7d 0a20 2020 2072  o": photo}.    r
-0000ba00: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000ba10: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000ba20: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000ba30: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-0000ba40: 6573 2c20 6d65 7468 6f64 3d22 706f 7374  es, method="post
-0000ba50: 2229 0a0a 0a64 6566 2064 656c 6574 655f  ")...def delete_
-0000ba60: 6368 6174 5f70 686f 746f 2874 6f6b 656e  chat_photo(token
-0000ba70: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
-0000ba80: 6d65 7468 6f64 5f75 726c 203d 2022 6465  method_url = "de
-0000ba90: 6c65 7465 4368 6174 5068 6f74 6f22 0a20  leteChatPhoto". 
-0000baa0: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
-0000bab0: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
-0000bac0: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-0000bad0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000bae0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000baf0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000bb00: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-0000bb10: 6566 2073 6574 5f63 6861 745f 7469 746c  ef set_chat_titl
-0000bb20: 6528 746f 6b65 6e2c 2063 6861 745f 6964  e(token, chat_id
-0000bb30: 2c20 7469 746c 6529 3a0a 2020 2020 6d65  , title):.    me
-0000bb40: 7468 6f64 5f75 726c 203d 2022 7365 7443  thod_url = "setC
-0000bb50: 6861 7454 6974 6c65 220a 2020 2020 7061  hatTitle".    pa
-0000bb60: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-0000bb70: 6422 3a20 6368 6174 5f69 642c 2022 7469  d": chat_id, "ti
-0000bb80: 746c 6522 3a20 7469 746c 657d 0a20 2020  tle": title}.   
-0000bb90: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000bba0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000bbb0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000bbc0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000bbd0: 2270 6f73 7422 290a 0a0a 6465 6620 7365  "post")...def se
-0000bbe0: 745f 6d79 5f64 6573 6372 6970 7469 6f6e  t_my_description
-0000bbf0: 2874 6f6b 656e 2c20 6465 7363 7269 7074  (token, descript
-0000bc00: 696f 6e3d 4e6f 6e65 2c20 6c61 6e67 7561  ion=None, langua
-0000bc10: 6765 5f63 6f64 653d 4e6f 6e65 293a 0a20  ge_code=None):. 
-0000bc20: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000bc30: 7222 7365 744d 7944 6573 6372 6970 7469  r"setMyDescripti
-0000bc40: 6f6e 220a 2020 2020 7061 796c 6f61 6420  on".    payload 
-0000bc50: 3d20 7b7d 0a20 2020 2069 6620 6465 7363  = {}.    if desc
-0000bc60: 7269 7074 696f 6e20 6973 206e 6f74 204e  ription is not N
-0000bc70: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000bc80: 6c6f 6164 5b22 6465 7363 7269 7074 696f  load["descriptio
-0000bc90: 6e22 5d20 3d20 6465 7363 7269 7074 696f  n"] = descriptio
-0000bca0: 6e0a 2020 2020 6966 206c 616e 6775 6167  n.    if languag
-0000bcb0: 655f 636f 6465 2069 7320 6e6f 7420 4e6f  e_code is not No
-0000bcc0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000bcd0: 6f61 645b 226c 616e 6775 6167 655f 636f  oad["language_co
-0000bce0: 6465 225d 203d 206c 616e 6775 6167 655f  de"] = language_
-0000bcf0: 636f 6465 0a20 2020 2072 6574 7572 6e20  code.    return 
-0000bd00: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000bd10: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000bd20: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000bd30: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-0000bd40: 0a0a 6465 6620 6765 745f 6d79 5f64 6573  ..def get_my_des
-0000bd50: 6372 6970 7469 6f6e 2874 6f6b 656e 2c20  cription(token, 
-0000bd60: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
-0000bd70: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-0000bd80: 7572 6c20 3d20 7222 6765 744d 7944 6573  url = r"getMyDes
-0000bd90: 6372 6970 7469 6f6e 220a 2020 2020 7061  cription".    pa
-0000bda0: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-0000bdb0: 6620 6c61 6e67 7561 6765 5f63 6f64 653a  f language_code:
-0000bdc0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000bdd0: 5b22 6c61 6e67 7561 6765 5f63 6f64 6522  ["language_code"
-0000bde0: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000bdf0: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-0000be00: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000be10: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000be20: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-0000be30: 6465 6620 7365 745f 6d79 5f73 686f 7274  def set_my_short
-0000be40: 5f64 6573 6372 6970 7469 6f6e 2874 6f6b  _description(tok
-0000be50: 656e 2c20 7368 6f72 745f 6465 7363 7269  en, short_descri
-0000be60: 7074 696f 6e3d 4e6f 6e65 2c20 6c61 6e67  ption=None, lang
-0000be70: 7561 6765 5f63 6f64 653d 4e6f 6e65 293a  uage_code=None):
-0000be80: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000be90: 3d20 7222 7365 744d 7953 686f 7274 4465  = r"setMyShortDe
-0000bea0: 7363 7269 7074 696f 6e22 0a20 2020 2070  scription".    p
-0000beb0: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
-0000bec0: 6966 2073 686f 7274 5f64 6573 6372 6970  if short_descrip
-0000bed0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-0000bee0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000bef0: 645b 2273 686f 7274 5f64 6573 6372 6970  d["short_descrip
-0000bf00: 7469 6f6e 225d 203d 2073 686f 7274 5f64  tion"] = short_d
-0000bf10: 6573 6372 6970 7469 6f6e 0a20 2020 2069  escription.    i
-0000bf20: 6620 6c61 6e67 7561 6765 5f63 6f64 6520  f language_code 
-0000bf30: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000bf40: 2020 2020 2070 6179 6c6f 6164 5b22 6c61       payload["la
-0000bf50: 6e67 7561 6765 5f63 6f64 6522 5d20 3d20  nguage_code"] = 
-0000bf60: 6c61 6e67 7561 6765 5f63 6f64 650a 2020  language_code.  
-0000bf70: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000bf80: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000bf90: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000bfa0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-0000bfb0: 3d22 706f 7374 2229 0a0a 0a64 6566 2067  ="post")...def g
-0000bfc0: 6574 5f6d 795f 7368 6f72 745f 6465 7363  et_my_short_desc
-0000bfd0: 7269 7074 696f 6e28 746f 6b65 6e2c 206c  ription(token, l
-0000bfe0: 616e 6775 6167 655f 636f 6465 3d4e 6f6e  anguage_code=Non
-0000bff0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-0000c000: 726c 203d 2072 2267 6574 4d79 5368 6f72  rl = r"getMyShor
-0000c010: 7444 6573 6372 6970 7469 6f6e 220a 2020  tDescription".  
-0000c020: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
-0000c030: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
-0000c040: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
-0000c050: 6c6f 6164 5b22 6c61 6e67 7561 6765 5f63  load["language_c
-0000c060: 6f64 6522 5d20 3d20 6c61 6e67 7561 6765  ode"] = language
-0000c070: 5f63 6f64 650a 2020 2020 7265 7475 726e  _code.    return
-0000c080: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000c090: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000c0a0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000c0b0: 290a 0a0a 6465 6620 6765 745f 6d79 5f63  )...def get_my_c
-0000c0c0: 6f6d 6d61 6e64 7328 746f 6b65 6e2c 2073  ommands(token, s
-0000c0d0: 636f 7065 3d4e 6f6e 652c 206c 616e 6775  cope=None, langu
-0000c0e0: 6167 655f 636f 6465 3d4e 6f6e 6529 3a0a  age_code=None):.
-0000c0f0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000c100: 2072 2267 6574 4d79 436f 6d6d 616e 6473   r"getMyCommands
-0000c110: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-0000c120: 7b7d 0a20 2020 2069 6620 7363 6f70 653a  {}.    if scope:
-0000c130: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c140: 5b22 7363 6f70 6522 5d20 3d20 7363 6f70  ["scope"] = scop
-0000c150: 652e 746f 5f6a 736f 6e28 290a 2020 2020  e.to_json().    
-0000c160: 6966 206c 616e 6775 6167 655f 636f 6465  if language_code
-0000c170: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000c180: 645b 226c 616e 6775 6167 655f 636f 6465  d["language_code
-0000c190: 225d 203d 206c 616e 6775 6167 655f 636f  "] = language_co
-0000c1a0: 6465 0a20 2020 2072 6574 7572 6e20 5f6d  de.    return _m
-0000c1b0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000c1c0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000c1d0: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-0000c1e0: 0a64 6566 2073 6574 5f6d 795f 6e61 6d65  .def set_my_name
-0000c1f0: 2874 6f6b 656e 2c20 6e61 6d65 3d4e 6f6e  (token, name=Non
-0000c200: 652c 206c 616e 6775 6167 655f 636f 6465  e, language_code
-0000c210: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000c220: 6f64 5f75 726c 203d 2072 2273 6574 4d79  od_url = r"setMy
-0000c230: 4e61 6d65 220a 2020 2020 7061 796c 6f61  Name".    payloa
-0000c240: 6420 3d20 7b7d 0a20 2020 2069 6620 6e61  d = {}.    if na
-0000c250: 6d65 2069 7320 6e6f 7420 4e6f 6e65 3a0a  me is not None:.
-0000c260: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000c270: 226e 616d 6522 5d20 3d20 6e61 6d65 0a20  "name"] = name. 
-0000c280: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
-0000c290: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
-0000c2a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c2b0: 5b22 6c61 6e67 7561 6765 5f63 6f64 6522  ["language_code"
-0000c2c0: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000c2d0: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-0000c2e0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000c2f0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000c300: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000c310: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-0000c320: 6566 2067 6574 5f6d 795f 6e61 6d65 2874  ef get_my_name(t
-0000c330: 6f6b 656e 2c20 6c61 6e67 7561 6765 5f63  oken, language_c
-0000c340: 6f64 653d 4e6f 6e65 293a 0a20 2020 206d  ode=None):.    m
-0000c350: 6574 686f 645f 7572 6c20 3d20 7222 6765  ethod_url = r"ge
-0000c360: 744d 794e 616d 6522 0a20 2020 2070 6179  tMyName".    pay
-0000c370: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-0000c380: 206c 616e 6775 6167 655f 636f 6465 2069   language_code i
-0000c390: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000c3a0: 2020 2020 7061 796c 6f61 645b 226c 616e      payload["lan
-0000c3b0: 6775 6167 655f 636f 6465 225d 203d 206c  guage_code"] = l
-0000c3c0: 616e 6775 6167 655f 636f 6465 0a20 2020  anguage_code.   
-0000c3d0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000c3e0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000c3f0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000c400: 7061 796c 6f61 6429 0a0a 0a64 6566 2073  payload)...def s
-0000c410: 6574 5f63 6861 745f 6d65 6e75 5f62 7574  et_chat_menu_but
-0000c420: 746f 6e28 746f 6b65 6e2c 2063 6861 745f  ton(token, chat_
-0000c430: 6964 3d4e 6f6e 652c 206d 656e 755f 6275  id=None, menu_bu
-0000c440: 7474 6f6e 3d4e 6f6e 6529 3a0a 2020 2020  tton=None):.    
-0000c450: 6d65 7468 6f64 5f75 726c 203d 2072 2273  method_url = r"s
-0000c460: 6574 4368 6174 4d65 6e75 4275 7474 6f6e  etChatMenuButton
-0000c470: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-0000c480: 7b7d 0a20 2020 2069 6620 6368 6174 5f69  {}.    if chat_i
-0000c490: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000c4a0: 6164 5b22 6368 6174 5f69 6422 5d20 3d20  ad["chat_id"] = 
-0000c4b0: 6368 6174 5f69 640a 2020 2020 6966 206d  chat_id.    if m
-0000c4c0: 656e 755f 6275 7474 6f6e 3a0a 2020 2020  enu_button:.    
-0000c4d0: 2020 2020 7061 796c 6f61 645b 226d 656e      payload["men
-0000c4e0: 755f 6275 7474 6f6e 225d 203d 206d 656e  u_button"] = men
-0000c4f0: 755f 6275 7474 6f6e 2e74 6f5f 6a73 6f6e  u_button.to_json
-0000c500: 2829 0a20 2020 2072 6574 7572 6e20 5f6d  ().    return _m
-0000c510: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000c520: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000c530: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000c540: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000c550: 6465 6620 6765 745f 6368 6174 5f6d 656e  def get_chat_men
-0000c560: 755f 6275 7474 6f6e 2874 6f6b 656e 2c20  u_button(token, 
-0000c570: 6368 6174 5f69 643d 4e6f 6e65 293a 0a20  chat_id=None):. 
-0000c580: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000c590: 7222 6765 7443 6861 744d 656e 7542 7574  r"getChatMenuBut
-0000c5a0: 746f 6e22 0a20 2020 2070 6179 6c6f 6164  ton".    payload
-0000c5b0: 203d 207b 7d0a 2020 2020 6966 2063 6861   = {}.    if cha
-0000c5c0: 745f 6964 3a0a 2020 2020 2020 2020 7061  t_id:.        pa
-0000c5d0: 796c 6f61 645b 2263 6861 745f 6964 225d  yload["chat_id"]
-0000c5e0: 203d 2063 6861 745f 6964 0a20 2020 2072   = chat_id.    r
-0000c5f0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000c600: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000c610: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000c620: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
-0000c630: 6f73 7422 290a 0a0a 6465 6620 7365 745f  ost")...def set_
-0000c640: 6d79 5f64 6566 6175 6c74 5f61 646d 696e  my_default_admin
-0000c650: 6973 7472 6174 6f72 5f72 6967 6874 7328  istrator_rights(
-0000c660: 746f 6b65 6e2c 2072 6967 6874 733d 4e6f  token, rights=No
-0000c670: 6e65 2c20 666f 725f 6368 616e 6e65 6c73  ne, for_channels
-0000c680: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000c690: 6f64 5f75 726c 203d 2072 2273 6574 4d79  od_url = r"setMy
-0000c6a0: 4465 6661 756c 7441 646d 696e 6973 7472  DefaultAdministr
-0000c6b0: 6174 6f72 5269 6768 7473 220a 2020 2020  atorRights".    
-0000c6c0: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
-0000c6d0: 2069 6620 7269 6768 7473 3a0a 2020 2020   if rights:.    
-0000c6e0: 2020 2020 7061 796c 6f61 645b 2272 6967      payload["rig
-0000c6f0: 6874 7322 5d20 3d20 7269 6768 7473 2e74  hts"] = rights.t
-0000c700: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
-0000c710: 666f 725f 6368 616e 6e65 6c73 2069 7320  for_channels is 
-0000c720: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000c730: 2020 7061 796c 6f61 645b 2266 6f72 5f63    payload["for_c
-0000c740: 6861 6e6e 656c 7322 5d20 3d20 666f 725f  hannels"] = for_
-0000c750: 6368 616e 6e65 6c73 0a20 2020 2072 6574  channels.    ret
-0000c760: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000c770: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000c780: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000c790: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
-0000c7a0: 7422 290a 0a0a 6465 6620 6765 745f 6d79  t")...def get_my
-0000c7b0: 5f64 6566 6175 6c74 5f61 646d 696e 6973  _default_adminis
-0000c7c0: 7472 6174 6f72 5f72 6967 6874 7328 746f  trator_rights(to
-0000c7d0: 6b65 6e2c 2066 6f72 5f63 6861 6e6e 656c  ken, for_channel
-0000c7e0: 733d 4e6f 6e65 293a 0a20 2020 206d 6574  s=None):.    met
-0000c7f0: 686f 645f 7572 6c20 3d20 7222 6765 744d  hod_url = r"getM
-0000c800: 7944 6566 6175 6c74 4164 6d69 6e69 7374  yDefaultAdminist
-0000c810: 7261 746f 7252 6967 6874 7322 0a20 2020  ratorRights".   
-0000c820: 2070 6179 6c6f 6164 203d 207b 7d0a 2020   payload = {}.  
-0000c830: 2020 6966 2066 6f72 5f63 6861 6e6e 656c    if for_channel
-0000c840: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
-0000c850: 6164 5b22 666f 725f 6368 616e 6e65 6c73  ad["for_channels
-0000c860: 225d 203d 2066 6f72 5f63 6861 6e6e 656c  "] = for_channel
-0000c870: 730a 2020 2020 7265 7475 726e 205f 6d61  s.    return _ma
-0000c880: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000c890: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000c8a0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000c8b0: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-0000c8c0: 6566 2073 6574 5f6d 795f 636f 6d6d 616e  ef set_my_comman
-0000c8d0: 6473 2874 6f6b 656e 2c20 636f 6d6d 616e  ds(token, comman
-0000c8e0: 6473 2c20 7363 6f70 653d 4e6f 6e65 2c20  ds, scope=None, 
-0000c8f0: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
-0000c900: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-0000c910: 7572 6c20 3d20 7222 7365 744d 7943 6f6d  url = r"setMyCom
-0000c920: 6d61 6e64 7322 0a20 2020 2070 6179 6c6f  mands".    paylo
-0000c930: 6164 203d 207b 2263 6f6d 6d61 6e64 7322  ad = {"commands"
-0000c940: 3a20 5f63 6f6e 7665 7274 5f6c 6973 745f  : _convert_list_
-0000c950: 6a73 6f6e 5f73 6572 6961 6c69 7a61 626c  json_serializabl
-0000c960: 6528 636f 6d6d 616e 6473 297d 0a20 2020  e(commands)}.   
-0000c970: 2069 6620 7363 6f70 653a 0a20 2020 2020   if scope:.     
-0000c980: 2020 2070 6179 6c6f 6164 5b22 7363 6f70     payload["scop
-0000c990: 6522 5d20 3d20 7363 6f70 652e 746f 5f6a  e"] = scope.to_j
-0000c9a0: 736f 6e28 290a 2020 2020 6966 206c 616e  son().    if lan
-0000c9b0: 6775 6167 655f 636f 6465 3a0a 2020 2020  guage_code:.    
-0000c9c0: 2020 2020 7061 796c 6f61 645b 226c 616e      payload["lan
-0000c9d0: 6775 6167 655f 636f 6465 225d 203d 206c  guage_code"] = l
-0000c9e0: 616e 6775 6167 655f 636f 6465 0a20 2020  anguage_code.   
-0000c9f0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000ca00: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000ca10: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000ca20: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000ca30: 2270 6f73 7422 290a 0a0a 6465 6620 6765  "post")...def ge
-0000ca40: 745f 6275 7369 6e65 7373 5f63 6f6e 6e65  t_business_conne
-0000ca50: 6374 696f 6e28 746f 6b65 6e2c 2062 7573  ction(token, bus
-0000ca60: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-0000ca70: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-0000ca80: 5f75 726c 203d 2022 6765 7442 7573 696e  _url = "getBusin
-0000ca90: 6573 7343 6f6e 6e65 6374 696f 6e22 0a20  essConnection". 
-0000caa0: 2020 2070 6179 6c6f 6164 203d 207b 2262     payload = {"b
-0000cab0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-0000cac0: 6f6e 5f69 6422 3a20 6275 7369 6e65 7373  on_id": business
-0000cad0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 7d0a  _connection_id}.
-0000cae0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000caf0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000cb00: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000cb10: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000cb20: 6f64 3d22 706f 7374 2229 0a0a 0a64 6566  od="post")...def
-0000cb30: 2064 656c 6574 655f 6d79 5f63 6f6d 6d61   delete_my_comma
-0000cb40: 6e64 7328 746f 6b65 6e2c 2073 636f 7065  nds(token, scope
-0000cb50: 3d4e 6f6e 652c 206c 616e 6775 6167 655f  =None, language_
-0000cb60: 636f 6465 3d4e 6f6e 6529 3a0a 2020 2020  code=None):.    
-0000cb70: 6d65 7468 6f64 5f75 726c 203d 2072 2264  method_url = r"d
-0000cb80: 656c 6574 654d 7943 6f6d 6d61 6e64 7322  eleteMyCommands"
-0000cb90: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000cba0: 7d0a 2020 2020 6966 2073 636f 7065 3a0a  }.    if scope:.
-0000cbb0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000cbc0: 2273 636f 7065 225d 203d 2073 636f 7065  "scope"] = scope
-0000cbd0: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
-0000cbe0: 6620 6c61 6e67 7561 6765 5f63 6f64 653a  f language_code:
-0000cbf0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000cc00: 5b22 6c61 6e67 7561 6765 5f63 6f64 6522  ["language_code"
-0000cc10: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000cc20: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-0000cc30: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000cc40: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000cc50: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000cc60: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-0000cc70: 6566 2073 6574 5f63 6861 745f 6465 7363  ef set_chat_desc
-0000cc80: 7269 7074 696f 6e28 746f 6b65 6e2c 2063  ription(token, c
-0000cc90: 6861 745f 6964 2c20 6465 7363 7269 7074  hat_id, descript
-0000cca0: 696f 6e29 3a0a 2020 2020 6d65 7468 6f64  ion):.    method
-0000ccb0: 5f75 726c 203d 2022 7365 7443 6861 7444  _url = "setChatD
-0000ccc0: 6573 6372 6970 7469 6f6e 220a 2020 2020  escription".    
-0000ccd0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-0000cce0: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
-0000ccf0: 2020 2069 6620 6465 7363 7269 7074 696f     if descriptio
-0000cd00: 6e20 6973 206e 6f74 204e 6f6e 653a 2020  n is not None:  
-0000cd10: 2320 416c 6c6f 7720 656d 7074 7920 7374  # Allow empty st
-0000cd20: 7269 6e67 730a 2020 2020 2020 2020 7061  rings.        pa
-0000cd30: 796c 6f61 645b 2264 6573 6372 6970 7469  yload["descripti
-0000cd40: 6f6e 225d 203d 2064 6573 6372 6970 7469  on"] = descripti
-0000cd50: 6f6e 0a20 2020 2072 6574 7572 6e20 5f6d  on.    return _m
-0000cd60: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000cd70: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000cd80: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000cd90: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000cda0: 6465 6620 7069 6e5f 6368 6174 5f6d 6573  def pin_chat_mes
-0000cdb0: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
-0000cdc0: 5f69 642c 206d 6573 7361 6765 5f69 642c  _id, message_id,
-0000cdd0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-0000cde0: 6174 696f 6e3d 4e6f 6e65 293a 0a20 2020  ation=None):.   
-0000cdf0: 206d 6574 686f 645f 7572 6c20 3d20 2270   method_url = "p
-0000ce00: 696e 4368 6174 4d65 7373 6167 6522 0a20  inChatMessage". 
-0000ce10: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
-0000ce20: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
-0000ce30: 2c20 226d 6573 7361 6765 5f69 6422 3a20  , "message_id": 
-0000ce40: 6d65 7373 6167 655f 6964 7d0a 2020 2020  message_id}.    
-0000ce50: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-0000ce60: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-0000ce70: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000ce80: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
-0000ce90: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
-0000cea0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000ceb0: 696f 6e0a 2020 2020 7265 7475 726e 205f  ion.    return _
-0000cec0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-0000ced0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000cee0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000cef0: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
-0000cf00: 0a64 6566 2075 6e70 696e 5f63 6861 745f  .def unpin_chat_
-0000cf10: 6d65 7373 6167 6528 746f 6b65 6e2c 2063  message(token, c
-0000cf20: 6861 745f 6964 2c20 6d65 7373 6167 655f  hat_id, message_
-0000cf30: 6964 293a 0a20 2020 206d 6574 686f 645f  id):.    method_
-0000cf40: 7572 6c20 3d20 2275 6e70 696e 4368 6174  url = "unpinChat
-0000cf50: 4d65 7373 6167 6522 0a20 2020 2070 6179  Message".    pay
-0000cf60: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-0000cf70: 223a 2063 6861 745f 6964 7d0a 2020 2020  ": chat_id}.    
-0000cf80: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
-0000cf90: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000cfa0: 6d65 7373 6167 655f 6964 225d 203d 206d  message_id"] = m
-0000cfb0: 6573 7361 6765 5f69 640a 2020 2020 7265  essage_id.    re
-0000cfc0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-0000cfd0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000cfe0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000cff0: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-0000d000: 7374 2229 0a0a 0a64 6566 2075 6e70 696e  st")...def unpin
-0000d010: 5f61 6c6c 5f63 6861 745f 6d65 7373 6167  _all_chat_messag
-0000d020: 6573 2874 6f6b 656e 2c20 6368 6174 5f69  es(token, chat_i
-0000d030: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000d040: 726c 203d 2022 756e 7069 6e41 6c6c 4368  rl = "unpinAllCh
-0000d050: 6174 4d65 7373 6167 6573 220a 2020 2020  atMessages".    
-0000d060: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-0000d070: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
-0000d080: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000d090: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000d0a0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000d0b0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000d0c0: 643d 2270 6f73 7422 290a 0a0a 2320 5570  d="post")...# Up
-0000d0d0: 6461 7469 6e67 206d 6573 7361 6765 730a  dating messages.
-0000d0e0: 0a0a 6465 6620 6564 6974 5f6d 6573 7361  ..def edit_messa
-0000d0f0: 6765 5f74 6578 7428 0a20 2020 2074 6f6b  ge_text(.    tok
-0000d100: 656e 2c0a 2020 2020 7465 7874 2c0a 2020  en,.    text,.  
-0000d110: 2020 6368 6174 5f69 643d 4e6f 6e65 2c0a    chat_id=None,.
-0000d120: 2020 2020 6d65 7373 6167 655f 6964 3d4e      message_id=N
-0000d130: 6f6e 652c 0a20 2020 2069 6e6c 696e 655f  one,.    inline_
-0000d140: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
-0000d150: 0a20 2020 2070 6172 7365 5f6d 6f64 653d  .    parse_mode=
-0000d160: 4e6f 6e65 2c0a 2020 2020 656e 7469 7469  None,.    entiti
-0000d170: 6573 3d4e 6f6e 652c 0a20 2020 2072 6570  es=None,.    rep
-0000d180: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-0000d190: 2020 2020 6c69 6e6b 5f70 7265 7669 6577      link_preview
-0000d1a0: 5f6f 7074 696f 6e73 3d4e 6f6e 652c 0a29  _options=None,.)
-0000d1b0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000d1c0: 203d 2072 2265 6469 744d 6573 7361 6765   = r"editMessage
-0000d1d0: 5465 7874 220a 2020 2020 7061 796c 6f61  Text".    payloa
-0000d1e0: 6420 3d20 7b22 7465 7874 223a 2074 6578  d = {"text": tex
-0000d1f0: 747d 0a20 2020 2069 6620 6368 6174 5f69  t}.    if chat_i
-0000d200: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000d210: 6164 5b22 6368 6174 5f69 6422 5d20 3d20  ad["chat_id"] = 
-0000d220: 6368 6174 5f69 640a 2020 2020 6966 206d  chat_id.    if m
-0000d230: 6573 7361 6765 5f69 643a 0a20 2020 2020  essage_id:.     
-0000d240: 2020 2070 6179 6c6f 6164 5b22 6d65 7373     payload["mess
-0000d250: 6167 655f 6964 225d 203d 206d 6573 7361  age_id"] = messa
-0000d260: 6765 5f69 640a 2020 2020 6966 2069 6e6c  ge_id.    if inl
-0000d270: 696e 655f 6d65 7373 6167 655f 6964 3a0a  ine_message_id:.
-0000d280: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000d290: 2269 6e6c 696e 655f 6d65 7373 6167 655f  "inline_message_
-0000d2a0: 6964 225d 203d 2069 6e6c 696e 655f 6d65  id"] = inline_me
-0000d2b0: 7373 6167 655f 6964 0a20 2020 2069 6620  ssage_id.    if 
-0000d2c0: 7061 7273 655f 6d6f 6465 3a0a 2020 2020  parse_mode:.    
-0000d2d0: 2020 2020 7061 796c 6f61 645b 2270 6172      payload["par
-0000d2e0: 7365 5f6d 6f64 6522 5d20 3d20 7061 7273  se_mode"] = pars
-0000d2f0: 655f 6d6f 6465 0a20 2020 2069 6620 656e  e_mode.    if en
-0000d300: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-0000d310: 7061 796c 6f61 645b 2265 6e74 6974 6965  payload["entitie
-0000d320: 7322 5d20 3d20 6a73 6f6e 2e64 756d 7073  s"] = json.dumps
-0000d330: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
-0000d340: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
-0000d350: 6469 6374 7328 656e 7469 7469 6573 2929  dicts(entities))
-0000d360: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-0000d370: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-0000d380: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
-0000d390: 6b75 7022 5d20 3d20 5f63 6f6e 7665 7274  kup"] = _convert
-0000d3a0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-0000d3b0: 726b 7570 290a 2020 2020 6966 206c 696e  rkup).    if lin
-0000d3c0: 6b5f 7072 6576 6965 775f 6f70 7469 6f6e  k_preview_option
-0000d3d0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-0000d3e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000d3f0: 6c69 6e6b 5f70 7265 7669 6577 5f6f 7074  link_preview_opt
-0000d400: 696f 6e73 225d 203d 206c 696e 6b5f 7072  ions"] = link_pr
-0000d410: 6576 6965 775f 6f70 7469 6f6e 732e 746f  eview_options.to
-0000d420: 5f6a 736f 6e28 290a 2020 2020 7265 7475  _json().    retu
-0000d430: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-0000d440: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000d450: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000d460: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
-0000d470: 2229 0a0a 0a64 6566 2065 6469 745f 6d65  ")...def edit_me
-0000d480: 7373 6167 655f 6361 7074 696f 6e28 0a20  ssage_caption(. 
-0000d490: 2020 2074 6f6b 656e 2c0a 2020 2020 6361     token,.    ca
-0000d4a0: 7074 696f 6e2c 0a20 2020 2063 6861 745f  ption,.    chat_
-0000d4b0: 6964 3d4e 6f6e 652c 0a20 2020 206d 6573  id=None,.    mes
-0000d4c0: 7361 6765 5f69 643d 4e6f 6e65 2c0a 2020  sage_id=None,.  
-0000d4d0: 2020 696e 6c69 6e65 5f6d 6573 7361 6765    inline_message
-0000d4e0: 5f69 643d 4e6f 6e65 2c0a 2020 2020 7061  _id=None,.    pa
-0000d4f0: 7273 655f 6d6f 6465 3d4e 6f6e 652c 0a20  rse_mode=None,. 
-0000d500: 2020 2063 6170 7469 6f6e 5f65 6e74 6974     caption_entit
-0000d510: 6965 733d 4e6f 6e65 2c0a 2020 2020 7265  ies=None,.    re
-0000d520: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-0000d530: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
-0000d540: 726c 203d 2072 2265 6469 744d 6573 7361  rl = r"editMessa
-0000d550: 6765 4361 7074 696f 6e22 0a20 2020 2070  geCaption".    p
-0000d560: 6179 6c6f 6164 203d 207b 2263 6170 7469  ayload = {"capti
-0000d570: 6f6e 223a 2063 6170 7469 6f6e 7d0a 2020  on": caption}.  
-0000d580: 2020 6966 2063 6861 745f 6964 3a0a 2020    if chat_id:.  
-0000d590: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
-0000d5a0: 6861 745f 6964 225d 203d 2063 6861 745f  hat_id"] = chat_
-0000d5b0: 6964 0a20 2020 2069 6620 6d65 7373 6167  id.    if messag
-0000d5c0: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
-0000d5d0: 796c 6f61 645b 226d 6573 7361 6765 5f69  yload["message_i
-0000d5e0: 6422 5d20 3d20 6d65 7373 6167 655f 6964  d"] = message_id
-0000d5f0: 0a20 2020 2069 6620 696e 6c69 6e65 5f6d  .    if inline_m
-0000d600: 6573 7361 6765 5f69 643a 0a20 2020 2020  essage_id:.     
-0000d610: 2020 2070 6179 6c6f 6164 5b22 696e 6c69     payload["inli
-0000d620: 6e65 5f6d 6573 7361 6765 5f69 6422 5d20  ne_message_id"] 
-0000d630: 3d20 696e 6c69 6e65 5f6d 6573 7361 6765  = inline_message
-0000d640: 5f69 640a 2020 2020 6966 2070 6172 7365  _id.    if parse
-0000d650: 5f6d 6f64 653a 0a20 2020 2020 2020 2070  _mode:.        p
-0000d660: 6179 6c6f 6164 5b22 7061 7273 655f 6d6f  ayload["parse_mo
-0000d670: 6465 225d 203d 2070 6172 7365 5f6d 6f64  de"] = parse_mod
-0000d680: 650a 2020 2020 6966 2063 6170 7469 6f6e  e.    if caption
-0000d690: 5f65 6e74 6974 6965 733a 0a20 2020 2020  _entities:.     
-0000d6a0: 2020 2070 6179 6c6f 6164 5b22 6361 7074     payload["capt
-0000d6b0: 696f 6e5f 656e 7469 7469 6573 225d 203d  ion_entities"] =
-0000d6c0: 206a 736f 6e2e 6475 6d70 7328 0a20 2020   json.dumps(.   
-0000d6d0: 2020 2020 2020 2020 2074 7970 6573 2e4d           types.M
-0000d6e0: 6573 7361 6765 456e 7469 7479 2e74 6f5f  essageEntity.to_
-0000d6f0: 6c69 7374 5f6f 665f 6469 6374 7328 6361  list_of_dicts(ca
-0000d700: 7074 696f 6e5f 656e 7469 7469 6573 290a  ption_entities).
-0000d710: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
-0000d720: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-0000d730: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000d740: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
-0000d750: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-0000d760: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-0000d770: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000d780: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000d790: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000d7a0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000d7b0: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
-0000d7c0: 6564 6974 5f6d 6573 7361 6765 5f6d 6564  edit_message_med
-0000d7d0: 6961 280a 2020 2020 746f 6b65 6e2c 0a20  ia(.    token,. 
-0000d7e0: 2020 206d 6564 6961 2c0a 2020 2020 6368     media,.    ch
-0000d7f0: 6174 5f69 643d 4e6f 6e65 2c0a 2020 2020  at_id=None,.    
-0000d800: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
-0000d810: 0a20 2020 2069 6e6c 696e 655f 6d65 7373  .    inline_mess
-0000d820: 6167 655f 6964 3d4e 6f6e 652c 0a20 2020  age_id=None,.   
-0000d830: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
-0000d840: 6e65 2c0a 293a 0a20 2020 206d 6574 686f  ne,.):.    metho
-0000d850: 645f 7572 6c20 3d20 7222 6564 6974 4d65  d_url = r"editMe
-0000d860: 7373 6167 654d 6564 6961 220a 2020 2020  ssageMedia".    
-0000d870: 6d65 6469 615f 6a73 6f6e 2c20 6669 6c65  media_json, file
-0000d880: 203d 2063 6f6e 7665 7274 5f69 6e70 7574   = convert_input
-0000d890: 5f6d 6564 6961 286d 6564 6961 290a 2020  _media(media).  
-0000d8a0: 2020 7061 796c 6f61 6420 3d20 7b22 6d65    payload = {"me
-0000d8b0: 6469 6122 3a20 6d65 6469 615f 6a73 6f6e  dia": media_json
-0000d8c0: 7d0a 2020 2020 6966 2063 6861 745f 6964  }.    if chat_id
-0000d8d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000d8e0: 645b 2263 6861 745f 6964 225d 203d 2063  d["chat_id"] = c
-0000d8f0: 6861 745f 6964 0a20 2020 2069 6620 6d65  hat_id.    if me
-0000d900: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000d910: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
-0000d920: 6765 5f69 6422 5d20 3d20 6d65 7373 6167  ge_id"] = messag
-0000d930: 655f 6964 0a20 2020 2069 6620 696e 6c69  e_id.    if inli
-0000d940: 6e65 5f6d 6573 7361 6765 5f69 643a 0a20  ne_message_id:. 
-0000d950: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000d960: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000d970: 6422 5d20 3d20 696e 6c69 6e65 5f6d 6573  d"] = inline_mes
-0000d980: 7361 6765 5f69 640a 2020 2020 6966 2072  sage_id.    if r
-0000d990: 6570 6c79 5f6d 6172 6b75 703a 0a20 2020  eply_markup:.   
-0000d9a0: 2020 2020 2070 6179 6c6f 6164 5b22 7265       payload["re
-0000d9b0: 706c 795f 6d61 726b 7570 225d 203d 205f  ply_markup"] = _
-0000d9c0: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
-0000d9d0: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
-0000d9e0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000d9f0: 7175 6573 7428 0a20 2020 2020 2020 2074  quest(.        t
-0000da00: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000da10: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000da20: 2c20 6669 6c65 733d 6669 6c65 2c20 6d65  , files=file, me
-0000da30: 7468 6f64 3d22 706f 7374 2220 6966 2066  thod="post" if f
-0000da40: 696c 6520 656c 7365 2022 6765 7422 0a20  ile else "get". 
-0000da50: 2020 2029 0a0a 0a64 6566 2065 6469 745f     )...def edit_
-0000da60: 6d65 7373 6167 655f 7265 706c 795f 6d61  message_reply_ma
-0000da70: 726b 7570 280a 2020 2020 746f 6b65 6e2c  rkup(.    token,
-0000da80: 2063 6861 745f 6964 3d4e 6f6e 652c 206d   chat_id=None, m
-0000da90: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
-0000daa0: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000dab0: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-0000dac0: 726b 7570 3d4e 6f6e 650a 293a 0a20 2020  rkup=None.):.   
-0000dad0: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
-0000dae0: 6564 6974 4d65 7373 6167 6552 6570 6c79  editMessageReply
-0000daf0: 4d61 726b 7570 220a 2020 2020 7061 796c  Markup".    payl
-0000db00: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
-0000db10: 6368 6174 5f69 643a 0a20 2020 2020 2020  chat_id:.       
-0000db20: 2070 6179 6c6f 6164 5b22 6368 6174 5f69   payload["chat_i
-0000db30: 6422 5d20 3d20 6368 6174 5f69 640a 2020  d"] = chat_id.  
-0000db40: 2020 6966 206d 6573 7361 6765 5f69 643a    if message_id:
-0000db50: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000db60: 5b22 6d65 7373 6167 655f 6964 225d 203d  ["message_id"] =
-0000db70: 206d 6573 7361 6765 5f69 640a 2020 2020   message_id.    
-0000db80: 6966 2069 6e6c 696e 655f 6d65 7373 6167  if inline_messag
-0000db90: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
-0000dba0: 796c 6f61 645b 2269 6e6c 696e 655f 6d65  yload["inline_me
-0000dbb0: 7373 6167 655f 6964 225d 203d 2069 6e6c  ssage_id"] = inl
-0000dbc0: 696e 655f 6d65 7373 6167 655f 6964 0a20  ine_message_id. 
-0000dbd0: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-0000dbe0: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
-0000dbf0: 6f61 645b 2272 6570 6c79 5f6d 6172 6b75  oad["reply_marku
-0000dc00: 7022 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p"] = _convert_m
-0000dc10: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
-0000dc20: 7570 290a 2020 2020 7265 7475 726e 205f  up).    return _
-0000dc30: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-0000dc40: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000dc50: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000dc60: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
-0000dc70: 0a64 6566 2064 656c 6574 655f 6d65 7373  .def delete_mess
-0000dc80: 6167 6528 746f 6b65 6e2c 2063 6861 745f  age(token, chat_
-0000dc90: 6964 2c20 6d65 7373 6167 655f 6964 2c20  id, message_id, 
-0000dca0: 7469 6d65 6f75 743d 4e6f 6e65 293a 0a20  timeout=None):. 
-0000dcb0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000dcc0: 7222 6465 6c65 7465 4d65 7373 6167 6522  r"deleteMessage"
-0000dcd0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000dce0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-0000dcf0: 6964 2c20 226d 6573 7361 6765 5f69 6422  id, "message_id"
-0000dd00: 3a20 6d65 7373 6167 655f 6964 7d0a 2020  : message_id}.  
-0000dd10: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-0000dd20: 2020 2020 2020 7061 796c 6f61 645b 2274        payload["t
-0000dd30: 696d 656f 7574 225d 203d 2074 696d 656f  imeout"] = timeo
-0000dd40: 7574 0a20 2020 2072 6574 7572 6e20 5f6d  ut.    return _m
-0000dd50: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000dd60: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000dd70: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000dd80: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000dd90: 2320 4761 6d65 0a0a 0a64 6566 2073 656e  # Game...def sen
-0000dda0: 645f 6761 6d65 280a 2020 2020 746f 6b65  d_game(.    toke
-0000ddb0: 6e2c 0a20 2020 2063 6861 745f 6964 2c0a  n,.    chat_id,.
-0000ddc0: 2020 2020 6761 6d65 5f73 686f 7274 5f6e      game_short_n
-0000ddd0: 616d 652c 0a20 2020 2064 6973 6162 6c65  ame,.    disable
-0000dde0: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
-0000ddf0: 6e65 2c0a 2020 2020 7265 706c 795f 6d61  ne,.    reply_ma
-0000de00: 726b 7570 3d4e 6f6e 652c 0a20 2020 2074  rkup=None,.    t
-0000de10: 696d 656f 7574 3d4e 6f6e 652c 0a20 2020  imeout=None,.   
-0000de20: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-0000de30: 3d4e 6f6e 652c 0a20 2020 206d 6573 7361  =None,.    messa
-0000de40: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
-0000de50: 652c 0a20 2020 2072 6570 6c79 5f70 6172  e,.    reply_par
-0000de60: 616d 6574 6572 733d 4e6f 6e65 2c0a 2020  ameters=None,.  
-0000de70: 2020 6275 7369 6e65 7373 5f63 6f6e 6e65    business_conne
-0000de80: 6374 696f 6e5f 6964 3d4e 6f6e 652c 0a29  ction_id=None,.)
-0000de90: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000dea0: 203d 2072 2273 656e 6447 616d 6522 0a20   = r"sendGame". 
-0000deb0: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
-0000dec0: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
-0000ded0: 2c20 2267 616d 655f 7368 6f72 745f 6e61  , "game_short_na
-0000dee0: 6d65 223a 2067 616d 655f 7368 6f72 745f  me": game_short_
-0000def0: 6e61 6d65 7d0a 2020 2020 6966 2064 6973  name}.    if dis
-0000df00: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-0000df10: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-0000df20: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000df30: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-0000df40: 7469 6f6e 225d 203d 2064 6973 6162 6c65  tion"] = disable
-0000df50: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-0000df60: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-0000df70: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-0000df80: 6164 5b22 7265 706c 795f 6d61 726b 7570  ad["reply_markup
-0000df90: 225d 203d 205f 636f 6e76 6572 745f 6d61  "] = _convert_ma
-0000dfa0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
-0000dfb0: 7029 0a20 2020 2069 6620 7469 6d65 6f75  p).    if timeou
-0000dfc0: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-0000dfd0: 6164 5b22 7469 6d65 6f75 7422 5d20 3d20  ad["timeout"] = 
-0000dfe0: 7469 6d65 6f75 740a 2020 2020 6966 2070  timeout.    if p
-0000dff0: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
-0000e000: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000e010: 2020 2020 7061 796c 6f61 645b 2270 726f      payload["pro
-0000e020: 7465 6374 5f63 6f6e 7465 6e74 225d 203d  tect_content"] =
-0000e030: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-0000e040: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
-0000e050: 7468 7265 6164 5f69 643a 0a20 2020 2020  thread_id:.     
-0000e060: 2020 2070 6179 6c6f 6164 5b22 6d65 7373     payload["mess
-0000e070: 6167 655f 7468 7265 6164 5f69 6422 5d20  age_thread_id"] 
-0000e080: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
-0000e090: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
-0000e0a0: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
-0000e0b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000e0c0: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
-0000e0d0: 7061 7261 6d65 7465 7273 225d 203d 2072  parameters"] = r
-0000e0e0: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
-0000e0f0: 746f 5f6a 736f 6e28 290a 2020 2020 6966  to_json().    if
-0000e100: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-0000e110: 7469 6f6e 5f69 643a 0a20 2020 2020 2020  tion_id:.       
-0000e120: 2070 6179 6c6f 6164 5b22 6275 7369 6e65   payload["busine
-0000e130: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-0000e140: 225d 203d 2062 7573 696e 6573 735f 636f  "] = business_co
-0000e150: 6e6e 6563 7469 6f6e 5f69 640a 2020 2020  nnection_id.    
-0000e160: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-0000e170: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000e180: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000e190: 6179 6c6f 6164 290a 0a0a 2320 6874 7470  ayload)...# http
-0000e1a0: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
-0000e1b0: 6d2e 6f72 672f 626f 7473 2f61 7069 2373  m.org/bots/api#s
-0000e1c0: 6574 6761 6d65 7363 6f72 650a 6465 6620  etgamescore.def 
-0000e1d0: 7365 745f 6761 6d65 5f73 636f 7265 280a  set_game_score(.
-0000e1e0: 2020 2020 746f 6b65 6e2c 0a20 2020 2075      token,.    u
-0000e1f0: 7365 725f 6964 2c0a 2020 2020 7363 6f72  ser_id,.    scor
-0000e200: 652c 0a20 2020 2066 6f72 6365 3d4e 6f6e  e,.    force=Non
-0000e210: 652c 0a20 2020 2064 6973 6162 6c65 5f65  e,.    disable_e
-0000e220: 6469 745f 6d65 7373 6167 653d 4e6f 6e65  dit_message=None
-0000e230: 2c0a 2020 2020 6368 6174 5f69 643d 4e6f  ,.    chat_id=No
-0000e240: 6e65 2c0a 2020 2020 6d65 7373 6167 655f  ne,.    message_
-0000e250: 6964 3d4e 6f6e 652c 0a20 2020 2069 6e6c  id=None,.    inl
-0000e260: 696e 655f 6d65 7373 6167 655f 6964 3d4e  ine_message_id=N
-0000e270: 6f6e 652c 0a29 3a0a 2020 2020 2222 220a  one,.):.    """.
-0000e280: 2020 2020 5573 6520 7468 6973 206d 6574      Use this met
-0000e290: 686f 6420 746f 2073 6574 2074 6865 2073  hod to set the s
-0000e2a0: 636f 7265 206f 6620 7468 6520 7370 6563  core of the spec
-0000e2b0: 6966 6965 6420 7573 6572 2069 6e20 6120  ified user in a 
-0000e2c0: 6761 6d65 2e20 4f6e 2073 7563 6365 7373  game. On success
-0000e2d0: 2c20 6966 2074 6865 206d 6573 7361 6765  , if the message
-0000e2e0: 2077 6173 2073 656e 7420 6279 2074 6865   was sent by the
-0000e2f0: 2062 6f74 2c20 7265 7475 726e 7320 7468   bot, returns th
-0000e300: 6520 6564 6974 6564 204d 6573 7361 6765  e edited Message
-0000e310: 2c20 6f74 6865 7277 6973 6520 7265 7475  , otherwise retu
-0000e320: 726e 7320 5472 7565 2e20 5265 7475 726e  rns True. Return
-0000e330: 7320 616e 2065 7272 6f72 2c20 6966 2074  s an error, if t
-0000e340: 6865 206e 6577 2073 636f 7265 2069 7320  he new score is 
-0000e350: 6e6f 7420 6772 6561 7465 7220 7468 616e  not greater than
-0000e360: 2074 6865 2075 7365 7227 7320 6375 7272   the user's curr
-0000e370: 656e 7420 7363 6f72 6520 696e 2074 6865  ent score in the
-0000e380: 2063 6861 742e 0a20 2020 203a 7061 7261   chat..    :para
-0000e390: 6d20 746f 6b65 6e3a 2042 6f74 2773 2074  m token: Bot's t
-0000e3a0: 6f6b 656e 2028 796f 7520 646f 6e27 7420  oken (you don't 
-0000e3b0: 6e65 6564 2074 6f20 6669 6c6c 2074 6869  need to fill thi
-0000e3c0: 7329 0a20 2020 203a 7061 7261 6d20 7573  s).    :param us
-0000e3d0: 6572 5f69 643a 2055 7365 7220 6964 656e  er_id: User iden
-0000e3e0: 7469 6669 6572 0a20 2020 203a 7061 7261  tifier.    :para
-0000e3f0: 6d20 7363 6f72 653a 204e 6577 2073 636f  m score: New sco
-0000e400: 7265 2c20 6d75 7374 2062 6520 6e6f 6e2d  re, must be non-
-0000e410: 6e65 6761 7469 7665 0a20 2020 203a 7061  negative.    :pa
-0000e420: 7261 6d20 666f 7263 653a 2028 4f70 7469  ram force: (Opti
-0000e430: 6f6e 616c 2920 5061 7373 2054 7275 652c  onal) Pass True,
-0000e440: 2069 6620 7468 6520 6869 6768 2073 636f   if the high sco
-0000e450: 7265 2069 7320 616c 6c6f 7765 6420 746f  re is allowed to
-0000e460: 2064 6563 7265 6173 652e 2054 6869 7320   decrease. This 
-0000e470: 6361 6e20 6265 2075 7365 6675 6c20 7768  can be useful wh
-0000e480: 656e 2066 6978 696e 6720 6d69 7374 616b  en fixing mistak
-0000e490: 6573 206f 7220 6261 6e6e 696e 6720 6368  es or banning ch
-0000e4a0: 6561 7465 7273 0a20 2020 203a 7061 7261  eaters.    :para
-0000e4b0: 6d20 6469 7361 626c 655f 6564 6974 5f6d  m disable_edit_m
-0000e4c0: 6573 7361 6765 3a20 284f 7074 696f 6e61  essage: (Optiona
-0000e4d0: 6c29 2050 6173 7320 5472 7565 2c20 6966  l) Pass True, if
-0000e4e0: 2074 6865 2067 616d 6520 6d65 7373 6167   the game messag
-0000e4f0: 6520 7368 6f75 6c64 206e 6f74 2062 6520  e should not be 
-0000e500: 6175 746f 6d61 7469 6361 6c6c 7920 6564  automatically ed
-0000e510: 6974 6564 2074 6f20 696e 636c 7564 6520  ited to include 
-0000e520: 7468 6520 6375 7272 656e 7420 7363 6f72  the current scor
-0000e530: 6562 6f61 7264 0a20 2020 203a 7061 7261  eboard.    :para
-0000e540: 6d20 6368 6174 5f69 643a 2028 4f70 7469  m chat_id: (Opti
-0000e550: 6f6e 616c 2c20 7265 7175 6972 6564 2069  onal, required i
-0000e560: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
-0000e570: 5f69 6420 6973 206e 6f74 2073 7065 6369  _id is not speci
-0000e580: 6669 6564 2920 556e 6971 7565 2069 6465  fied) Unique ide
-0000e590: 6e74 6966 6965 7220 666f 7220 7468 6520  ntifier for the 
-0000e5a0: 7461 7267 6574 2063 6861 7420 286f 7220  target chat (or 
-0000e5b0: 7573 6572 6e61 6d65 206f 6620 7468 6520  username of the 
-0000e5c0: 7461 7267 6574 2063 6861 6e6e 656c 2069  target channel i
-0000e5d0: 6e20 7468 6520 666f 726d 6174 2040 6368  n the format @ch
-0000e5e0: 616e 6e65 6c75 7365 726e 616d 6529 0a20  annelusername). 
-0000e5f0: 2020 203a 7061 7261 6d20 6d65 7373 6167     :param messag
-0000e600: 655f 6964 3a20 284f 7074 696f 6e61 6c2c  e_id: (Optional,
-0000e610: 2072 6571 7569 7265 6420 6966 2069 6e6c   required if inl
-0000e620: 696e 655f 6d65 7373 6167 655f 6964 2069  ine_message_id i
-0000e630: 7320 6e6f 7420 7370 6563 6966 6965 6429  s not specified)
-0000e640: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
-0000e650: 6572 206f 6620 7468 6520 7365 6e74 206d  er of the sent m
-0000e660: 6573 7361 6765 0a20 2020 203a 7061 7261  essage.    :para
-0000e670: 6d20 696e 6c69 6e65 5f6d 6573 7361 6765  m inline_message
-0000e680: 5f69 643a 2028 4f70 7469 6f6e 616c 2c20  _id: (Optional, 
-0000e690: 7265 7175 6972 6564 2069 6620 6368 6174  required if chat
-0000e6a0: 5f69 6420 616e 6420 6d65 7373 6167 655f  _id and message_
-0000e6b0: 6964 2061 7265 206e 6f74 2073 7065 6369  id are not speci
-0000e6c0: 6669 6564 2920 4964 656e 7469 6669 6572  fied) Identifier
-0000e6d0: 206f 6620 7468 6520 696e 6c69 6e65 206d   of the inline m
-0000e6e0: 6573 7361 6765 0a20 2020 203a 7265 7475  essage.    :retu
-0000e6f0: 726e 3a0a 2020 2020 2222 220a 2020 2020  rn:.    """.    
-0000e700: 6d65 7468 6f64 5f75 726c 203d 2072 2273  method_url = r"s
-0000e710: 6574 4761 6d65 5363 6f72 6522 0a20 2020  etGameScore".   
-0000e720: 2070 6179 6c6f 6164 203d 207b 2275 7365   payload = {"use
-0000e730: 725f 6964 223a 2075 7365 725f 6964 2c20  r_id": user_id, 
-0000e740: 2273 636f 7265 223a 2073 636f 7265 7d0a  "score": score}.
-0000e750: 2020 2020 6966 2066 6f72 6365 2069 7320      if force is 
-0000e760: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000e770: 2020 7061 796c 6f61 645b 2266 6f72 6365    payload["force
-0000e780: 225d 203d 2066 6f72 6365 0a20 2020 2069  "] = force.    i
-0000e790: 6620 6368 6174 5f69 643a 0a20 2020 2020  f chat_id:.     
-0000e7a0: 2020 2070 6179 6c6f 6164 5b22 6368 6174     payload["chat
-0000e7b0: 5f69 6422 5d20 3d20 6368 6174 5f69 640a  _id"] = chat_id.
-0000e7c0: 2020 2020 6966 206d 6573 7361 6765 5f69      if message_i
-0000e7d0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000e7e0: 6164 5b22 6d65 7373 6167 655f 6964 225d  ad["message_id"]
-0000e7f0: 203d 206d 6573 7361 6765 5f69 640a 2020   = message_id.  
-0000e800: 2020 6966 2069 6e6c 696e 655f 6d65 7373    if inline_mess
-0000e810: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000e820: 7061 796c 6f61 645b 2269 6e6c 696e 655f  payload["inline_
-0000e830: 6d65 7373 6167 655f 6964 225d 203d 2069  message_id"] = i
-0000e840: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-0000e850: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
-0000e860: 6564 6974 5f6d 6573 7361 6765 2069 7320  edit_message is 
-0000e870: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000e880: 2020 7061 796c 6f61 645b 2264 6973 6162    payload["disab
-0000e890: 6c65 5f65 6469 745f 6d65 7373 6167 6522  le_edit_message"
-0000e8a0: 5d20 3d20 6469 7361 626c 655f 6564 6974  ] = disable_edit
-0000e8b0: 5f6d 6573 7361 6765 0a20 2020 2072 6574  _message.    ret
-0000e8c0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000e8d0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000e8e0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000e8f0: 6f61 6429 0a0a 0a23 2068 7474 7073 3a2f  oad)...# https:/
-0000e900: 2f63 6f72 652e 7465 6c65 6772 616d 2e6f  /core.telegram.o
-0000e910: 7267 2f62 6f74 732f 6170 6923 6765 7467  rg/bots/api#getg
-0000e920: 616d 6568 6967 6873 636f 7265 730a 6465  amehighscores.de
-0000e930: 6620 6765 745f 6761 6d65 5f68 6967 685f  f get_game_high_
-0000e940: 7363 6f72 6573 280a 2020 2020 746f 6b65  scores(.    toke
-0000e950: 6e2c 2075 7365 725f 6964 2c20 6368 6174  n, user_id, chat
-0000e960: 5f69 643d 4e6f 6e65 2c20 6d65 7373 6167  _id=None, messag
-0000e970: 655f 6964 3d4e 6f6e 652c 2069 6e6c 696e  e_id=None, inlin
-0000e980: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
-0000e990: 650a 293a 0a20 2020 2022 2222 0a20 2020  e.):.    """.   
-0000e9a0: 2055 7365 2074 6869 7320 6d65 7468 6f64   Use this method
-0000e9b0: 2074 6f20 6765 7420 6461 7461 2066 6f72   to get data for
-0000e9c0: 2068 6967 6820 7363 6f72 6520 7461 626c   high score tabl
-0000e9d0: 6573 2e20 5769 6c6c 2072 6574 7572 6e20  es. Will return 
-0000e9e0: 7468 6520 7363 6f72 6520 6f66 2074 6865  the score of the
-0000e9f0: 2073 7065 6369 6669 6564 2075 7365 7220   specified user 
-0000ea00: 616e 6420 7365 7665 7261 6c20 6f66 2068  and several of h
-0000ea10: 6973 206e 6569 6768 626f 7273 2069 6e20  is neighbors in 
-0000ea20: 6120 6761 6d65 2e20 4f6e 2073 7563 6365  a game. On succe
-0000ea30: 7373 2c20 7265 7475 726e 7320 616e 2041  ss, returns an A
-0000ea40: 7272 6179 206f 6620 4761 6d65 4869 6768  rray of GameHigh
-0000ea50: 5363 6f72 6520 6f62 6a65 6374 732e 0a20  Score objects.. 
-0000ea60: 2020 2054 6869 7320 6d65 7468 6f64 2077     This method w
-0000ea70: 696c 6c20 6375 7272 656e 746c 7920 7265  ill currently re
-0000ea80: 7475 726e 2073 636f 7265 7320 666f 7220  turn scores for 
-0000ea90: 7468 6520 7461 7267 6574 2075 7365 722c  the target user,
-0000eaa0: 2070 6c75 7320 7477 6f20 6f66 2068 6973   plus two of his
-0000eab0: 2063 6c6f 7365 7374 206e 6569 6768 626f   closest neighbo
-0000eac0: 7273 206f 6e20 6561 6368 2073 6964 652e  rs on each side.
-0000ead0: 2057 696c 6c20 616c 736f 2072 6574 7572   Will also retur
-0000eae0: 6e20 7468 6520 746f 7020 7468 7265 6520  n the top three 
-0000eaf0: 7573 6572 7320 6966 2074 6865 2075 7365  users if the use
-0000eb00: 7220 616e 6420 6869 7320 6e65 6967 6862  r and his neighb
-0000eb10: 6f72 7320 6172 6520 6e6f 7420 616d 6f6e  ors are not amon
-0000eb20: 6720 7468 656d 2e20 506c 6561 7365 206e  g them. Please n
-0000eb30: 6f74 6520 7468 6174 2074 6869 7320 6265  ote that this be
-0000eb40: 6861 7669 6f72 2069 7320 7375 626a 6563  havior is subjec
-0000eb50: 7420 746f 2063 6861 6e67 652e 0a20 2020  t to change..   
-0000eb60: 203a 7061 7261 6d20 746f 6b65 6e3a 2042   :param token: B
-0000eb70: 6f74 2773 2074 6f6b 656e 2028 796f 7520  ot's token (you 
-0000eb80: 646f 6e27 7420 6e65 6564 2074 6f20 6669  don't need to fi
-0000eb90: 6c6c 2074 6869 7329 0a20 2020 203a 7061  ll this).    :pa
-0000eba0: 7261 6d20 7573 6572 5f69 643a 2054 6172  ram user_id: Tar
-0000ebb0: 6765 7420 7573 6572 2069 640a 2020 2020  get user id.    
-0000ebc0: 3a70 6172 616d 2063 6861 745f 6964 3a20  :param chat_id: 
-0000ebd0: 284f 7074 696f 6e61 6c2c 2072 6571 7569  (Optional, requi
-0000ebe0: 7265 6420 6966 2069 6e6c 696e 655f 6d65  red if inline_me
-0000ebf0: 7373 6167 655f 6964 2069 7320 6e6f 7420  ssage_id is not 
-0000ec00: 7370 6563 6966 6965 6429 2055 6e69 7175  specified) Uniqu
-0000ec10: 6520 6964 656e 7469 6669 6572 2066 6f72  e identifier for
-0000ec20: 2074 6865 2074 6172 6765 7420 6368 6174   the target chat
-0000ec30: 2028 6f72 2075 7365 726e 616d 6520 6f66   (or username of
-0000ec40: 2074 6865 2074 6172 6765 7420 6368 616e   the target chan
-0000ec50: 6e65 6c20 696e 2074 6865 2066 6f72 6d61  nel in the forma
-0000ec60: 7420 4063 6861 6e6e 656c 7573 6572 6e61  t @channeluserna
-0000ec70: 6d65 290a 2020 2020 3a70 6172 616d 206d  me).    :param m
-0000ec80: 6573 7361 6765 5f69 643a 2028 4f70 7469  essage_id: (Opti
-0000ec90: 6f6e 616c 2c20 7265 7175 6972 6564 2069  onal, required i
-0000eca0: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
-0000ecb0: 5f69 6420 6973 206e 6f74 2073 7065 6369  _id is not speci
-0000ecc0: 6669 6564 2920 556e 6971 7565 2069 6465  fied) Unique ide
-0000ecd0: 6e74 6966 6965 7220 6f66 2074 6865 2073  ntifier of the s
-0000ece0: 656e 7420 6d65 7373 6167 650a 2020 2020  ent message.    
-0000ecf0: 3a70 6172 616d 2069 6e6c 696e 655f 6d65  :param inline_me
-0000ed00: 7373 6167 655f 6964 3a20 284f 7074 696f  ssage_id: (Optio
-0000ed10: 6e61 6c2c 2072 6571 7569 7265 6420 6966  nal, required if
-0000ed20: 2063 6861 745f 6964 2061 6e64 206d 6573   chat_id and mes
-0000ed30: 7361 6765 5f69 6420 6172 6520 6e6f 7420  sage_id are not 
-0000ed40: 7370 6563 6966 6965 6429 2049 6465 6e74  specified) Ident
-0000ed50: 6966 6965 7220 6f66 2074 6865 2069 6e6c  ifier of the inl
-0000ed60: 696e 6520 6d65 7373 6167 650a 2020 2020  ine message.    
-0000ed70: 3a72 6574 7572 6e3a 0a20 2020 2022 2222  :return:.    """
-0000ed80: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000ed90: 3d20 7222 6765 7447 616d 6548 6967 6853  = r"getGameHighS
-0000eda0: 636f 7265 7322 0a20 2020 2070 6179 6c6f  cores".    paylo
-0000edb0: 6164 203d 207b 2275 7365 725f 6964 223a  ad = {"user_id":
-0000edc0: 2075 7365 725f 6964 7d0a 2020 2020 6966   user_id}.    if
-0000edd0: 2063 6861 745f 6964 3a0a 2020 2020 2020   chat_id:.      
-0000ede0: 2020 7061 796c 6f61 645b 2263 6861 745f    payload["chat_
-0000edf0: 6964 225d 203d 2063 6861 745f 6964 0a20  id"] = chat_id. 
-0000ee00: 2020 2069 6620 6d65 7373 6167 655f 6964     if message_id
-0000ee10: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000ee20: 645b 226d 6573 7361 6765 5f69 6422 5d20  d["message_id"] 
-0000ee30: 3d20 6d65 7373 6167 655f 6964 0a20 2020  = message_id.   
-0000ee40: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
-0000ee50: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-0000ee60: 6179 6c6f 6164 5b22 696e 6c69 6e65 5f6d  ayload["inline_m
-0000ee70: 6573 7361 6765 5f69 6422 5d20 3d20 696e  essage_id"] = in
-0000ee80: 6c69 6e65 5f6d 6573 7361 6765 5f69 640a  line_message_id.
-0000ee90: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000eea0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000eeb0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000eec0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 2320  ms=payload)...# 
-0000eed0: 5061 796d 656e 7473 2028 6874 7470 733a  Payments (https:
-0000eee0: 2f2f 636f 7265 2e74 656c 6567 7261 6d2e  //core.telegram.
-0000eef0: 6f72 672f 626f 7473 2f61 7069 2370 6179  org/bots/api#pay
-0000ef00: 6d65 6e74 7329 0a0a 0a64 6566 2073 656e  ments)...def sen
-0000ef10: 645f 696e 766f 6963 6528 0a20 2020 2074  d_invoice(.    t
-0000ef20: 6f6b 656e 2c0a 2020 2020 6368 6174 5f69  oken,.    chat_i
-0000ef30: 642c 0a20 2020 2074 6974 6c65 2c0a 2020  d,.    title,.  
-0000ef40: 2020 6465 7363 7269 7074 696f 6e2c 0a20    description,. 
-0000ef50: 2020 2069 6e76 6f69 6365 5f70 6179 6c6f     invoice_paylo
-0000ef60: 6164 2c0a 2020 2020 7072 6f76 6964 6572  ad,.    provider
-0000ef70: 5f74 6f6b 656e 2c0a 2020 2020 6375 7272  _token,.    curr
-0000ef80: 656e 6379 2c0a 2020 2020 7072 6963 6573  ency,.    prices
-0000ef90: 2c0a 2020 2020 7374 6172 745f 7061 7261  ,.    start_para
-0000efa0: 6d65 7465 723d 4e6f 6e65 2c0a 2020 2020  meter=None,.    
-0000efb0: 7068 6f74 6f5f 7572 6c3d 4e6f 6e65 2c0a  photo_url=None,.
-0000efc0: 2020 2020 7068 6f74 6f5f 7369 7a65 3d4e      photo_size=N
-0000efd0: 6f6e 652c 0a20 2020 2070 686f 746f 5f77  one,.    photo_w
-0000efe0: 6964 7468 3d4e 6f6e 652c 0a20 2020 2070  idth=None,.    p
-0000eff0: 686f 746f 5f68 6569 6768 743d 4e6f 6e65  hoto_height=None
-0000f000: 2c0a 2020 2020 6e65 6564 5f6e 616d 653d  ,.    need_name=
-0000f010: 4e6f 6e65 2c0a 2020 2020 6e65 6564 5f70  None,.    need_p
-0000f020: 686f 6e65 5f6e 756d 6265 723d 4e6f 6e65  hone_number=None
-0000f030: 2c0a 2020 2020 6e65 6564 5f65 6d61 696c  ,.    need_email
-0000f040: 3d4e 6f6e 652c 0a20 2020 206e 6565 645f  =None,.    need_
-0000f050: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
-0000f060: 3d4e 6f6e 652c 0a20 2020 2073 656e 645f  =None,.    send_
-0000f070: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
-0000f080: 7072 6f76 6964 6572 3d4e 6f6e 652c 0a20  provider=None,. 
-0000f090: 2020 2073 656e 645f 656d 6169 6c5f 746f     send_email_to
-0000f0a0: 5f70 726f 7669 6465 723d 4e6f 6e65 2c0a  _provider=None,.
-0000f0b0: 2020 2020 6973 5f66 6c65 7869 626c 653d      is_flexible=
-0000f0c0: 4e6f 6e65 2c0a 2020 2020 6469 7361 626c  None,.    disabl
-0000f0d0: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-0000f0e0: 6f6e 652c 0a20 2020 2072 6570 6c79 5f6d  one,.    reply_m
-0000f0f0: 6172 6b75 703d 4e6f 6e65 2c0a 2020 2020  arkup=None,.    
-0000f100: 7072 6f76 6964 6572 5f64 6174 613d 4e6f  provider_data=No
-0000f110: 6e65 2c0a 2020 2020 7469 6d65 6f75 743d  ne,.    timeout=
-0000f120: 4e6f 6e65 2c0a 2020 2020 6d61 785f 7469  None,.    max_ti
-0000f130: 705f 616d 6f75 6e74 3d4e 6f6e 652c 0a20  p_amount=None,. 
-0000f140: 2020 2073 7567 6765 7374 6564 5f74 6970     suggested_tip
-0000f150: 5f61 6d6f 756e 7473 3d4e 6f6e 652c 0a20  _amounts=None,. 
-0000f160: 2020 2070 726f 7465 6374 5f63 6f6e 7465     protect_conte
-0000f170: 6e74 3d4e 6f6e 652c 0a20 2020 206d 6573  nt=None,.    mes
-0000f180: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
-0000f190: 6f6e 652c 0a20 2020 2072 6570 6c79 5f70  one,.    reply_p
-0000f1a0: 6172 616d 6574 6572 733d 4e6f 6e65 2c0a  arameters=None,.
-0000f1b0: 293a 0a20 2020 2022 2222 0a20 2020 2055  ):.    """.    U
-0000f1c0: 7365 2074 6869 7320 6d65 7468 6f64 2074  se this method t
-0000f1d0: 6f20 7365 6e64 2069 6e76 6f69 6365 732e  o send invoices.
-0000f1e0: 204f 6e20 7375 6363 6573 732c 2074 6865   On success, the
-0000f1f0: 2073 656e 7420 4d65 7373 6167 6520 6973   sent Message is
-0000f200: 2072 6574 7572 6e65 642e 0a20 2020 203a   returned..    :
-0000f210: 7061 7261 6d20 746f 6b65 6e3a 2042 6f74  param token: Bot
-0000f220: 2773 2074 6f6b 656e 2028 796f 7520 646f  's token (you do
-0000f230: 6e27 7420 6e65 6564 2074 6f20 6669 6c6c  n't need to fill
-0000f240: 2074 6869 7329 0a20 2020 203a 7061 7261   this).    :para
-0000f250: 6d20 6368 6174 5f69 643a 2055 6e69 7175  m chat_id: Uniqu
-0000f260: 6520 6964 656e 7469 6669 6572 2066 6f72  e identifier for
-0000f270: 2074 6865 2074 6172 6765 7420 7072 6976   the target priv
-0000f280: 6174 6520 6368 6174 0a20 2020 203a 7061  ate chat.    :pa
-0000f290: 7261 6d20 7469 746c 653a 2050 726f 6475  ram title: Produ
-0000f2a0: 6374 206e 616d 650a 2020 2020 3a70 6172  ct name.    :par
-0000f2b0: 616d 2064 6573 6372 6970 7469 6f6e 3a20  am description: 
-0000f2c0: 5072 6f64 7563 7420 6465 7363 7269 7074  Product descript
-0000f2d0: 696f 6e0a 2020 2020 3a70 6172 616d 2069  ion.    :param i
-0000f2e0: 6e76 6f69 6365 5f70 6179 6c6f 6164 3a20  nvoice_payload: 
-0000f2f0: 426f 742d 6465 6669 6e65 6420 696e 766f  Bot-defined invo
-0000f300: 6963 6520 7061 796c 6f61 642c 2031 2d31  ice payload, 1-1
-0000f310: 3238 2062 7974 6573 2e20 5468 6973 2077  28 bytes. This w
-0000f320: 696c 6c20 6e6f 7420 6265 2064 6973 706c  ill not be displ
-0000f330: 6179 6564 2074 6f20 7468 6520 7573 6572  ayed to the user
-0000f340: 2c20 7573 6520 666f 7220 796f 7572 2069  , use for your i
-0000f350: 6e74 6572 6e61 6c20 7072 6f63 6573 7365  nternal processe
-0000f360: 732e 0a20 2020 203a 7061 7261 6d20 7072  s..    :param pr
-0000f370: 6f76 6964 6572 5f74 6f6b 656e 3a20 5061  ovider_token: Pa
-0000f380: 796d 656e 7473 2070 726f 7669 6465 7220  yments provider 
-0000f390: 746f 6b65 6e2c 206f 6274 6169 6e65 6420  token, obtained 
-0000f3a0: 7669 6120 4042 6f74 6661 7468 6572 0a20  via @Botfather. 
-0000f3b0: 2020 203a 7061 7261 6d20 6375 7272 656e     :param curren
-0000f3c0: 6379 3a20 5468 7265 652d 6c65 7474 6572  cy: Three-letter
-0000f3d0: 2049 534f 2034 3231 3720 6375 7272 656e   ISO 4217 curren
-0000f3e0: 6379 2063 6f64 652c 2073 6565 2068 7474  cy code, see htt
-0000f3f0: 7073 3a2f 2f63 6f72 652e 7465 6c65 6772  ps://core.telegr
-0000f400: 616d 2e6f 7267 2f62 6f74 732f 7061 796d  am.org/bots/paym
-0000f410: 656e 7473 2373 7570 706f 7274 6564 2d63  ents#supported-c
-0000f420: 7572 7265 6e63 6965 730a 2020 2020 3a70  urrencies.    :p
-0000f430: 6172 616d 2070 7269 6365 733a 2050 7269  aram prices: Pri
-0000f440: 6365 2062 7265 616b 646f 776e 2c20 6120  ce breakdown, a 
-0000f450: 6c69 7374 206f 6620 636f 6d70 6f6e 656e  list of componen
-0000f460: 7473 2028 652e 672e 2070 726f 6475 6374  ts (e.g. product
-0000f470: 2070 7269 6365 2c20 7461 782c 2064 6973   price, tax, dis
-0000f480: 636f 756e 742c 2064 656c 6976 6572 7920  count, delivery 
-0000f490: 636f 7374 2c20 6465 6c69 7665 7279 2074  cost, delivery t
-0000f4a0: 6178 2c20 626f 6e75 732c 2065 7463 2e29  ax, bonus, etc.)
-0000f4b0: 0a20 2020 203a 7061 7261 6d20 7374 6172  .    :param star
-0000f4c0: 745f 7061 7261 6d65 7465 723a 2055 6e69  t_parameter: Uni
-0000f4d0: 7175 6520 6465 6570 2d6c 696e 6b69 6e67  que deep-linking
-0000f4e0: 2070 6172 616d 6574 6572 2074 6861 7420   parameter that 
-0000f4f0: 6361 6e20 6265 2075 7365 6420 746f 2067  can be used to g
-0000f500: 656e 6572 6174 6520 7468 6973 2069 6e76  enerate this inv
-0000f510: 6f69 6365 2077 6865 6e20 7573 6564 2061  oice when used a
-0000f520: 7320 6120 7374 6172 7420 7061 7261 6d65  s a start parame
-0000f530: 7465 720a 2020 2020 3a70 6172 616d 2070  ter.    :param p
-0000f540: 686f 746f 5f75 726c 3a20 5552 4c20 6f66  hoto_url: URL of
-0000f550: 2074 6865 2070 726f 6475 6374 2070 686f   the product pho
-0000f560: 746f 2066 6f72 2074 6865 2069 6e76 6f69  to for the invoi
-0000f570: 6365 2e20 4361 6e20 6265 2061 2070 686f  ce. Can be a pho
-0000f580: 746f 206f 6620 7468 6520 676f 6f64 7320  to of the goods 
-0000f590: 6f72 2061 206d 6172 6b65 7469 6e67 2069  or a marketing i
-0000f5a0: 6d61 6765 2066 6f72 2061 2073 6572 7669  mage for a servi
-0000f5b0: 6365 2e20 5065 6f70 6c65 206c 696b 6520  ce. People like 
-0000f5c0: 6974 2062 6574 7465 7220 7768 656e 2074  it better when t
-0000f5d0: 6865 7920 7365 6520 7768 6174 2074 6865  hey see what the
-0000f5e0: 7920 6172 6520 7061 7969 6e67 2066 6f72  y are paying for
-0000f5f0: 2e0a 2020 2020 3a70 6172 616d 2070 686f  ..    :param pho
-0000f600: 746f 5f73 697a 653a 2050 686f 746f 2073  to_size: Photo s
-0000f610: 697a 650a 2020 2020 3a70 6172 616d 2070  ize.    :param p
-0000f620: 686f 746f 5f77 6964 7468 3a20 5068 6f74  hoto_width: Phot
-0000f630: 6f20 7769 6474 680a 2020 2020 3a70 6172  o width.    :par
-0000f640: 616d 2070 686f 746f 5f68 6569 6768 743a  am photo_height:
-0000f650: 2050 686f 746f 2068 6569 6768 740a 2020   Photo height.  
-0000f660: 2020 3a70 6172 616d 206e 6565 645f 6e61    :param need_na
-0000f670: 6d65 3a20 5061 7373 2054 7275 652c 2069  me: Pass True, i
-0000f680: 6620 796f 7520 7265 7175 6972 6520 7468  f you require th
-0000f690: 6520 7573 6572 2773 2066 756c 6c20 6e61  e user's full na
-0000f6a0: 6d65 2074 6f20 636f 6d70 6c65 7465 2074  me to complete t
-0000f6b0: 6865 206f 7264 6572 0a20 2020 203a 7061  he order.    :pa
-0000f6c0: 7261 6d20 6e65 6564 5f70 686f 6e65 5f6e  ram need_phone_n
-0000f6d0: 756d 6265 723a 2050 6173 7320 5472 7565  umber: Pass True
-0000f6e0: 2c20 6966 2079 6f75 2072 6571 7569 7265  , if you require
-0000f6f0: 2074 6865 2075 7365 7227 7320 7068 6f6e   the user's phon
-0000f700: 6520 6e75 6d62 6572 2074 6f20 636f 6d70  e number to comp
-0000f710: 6c65 7465 2074 6865 206f 7264 6572 0a20  lete the order. 
-0000f720: 2020 203a 7061 7261 6d20 6e65 6564 5f65     :param need_e
-0000f730: 6d61 696c 3a20 5061 7373 2054 7275 652c  mail: Pass True,
-0000f740: 2069 6620 796f 7520 7265 7175 6972 6520   if you require 
-0000f750: 7468 6520 7573 6572 2773 2065 6d61 696c  the user's email
-0000f760: 2074 6f20 636f 6d70 6c65 7465 2074 6865   to complete the
-0000f770: 206f 7264 6572 0a20 2020 203a 7061 7261   order.    :para
-0000f780: 6d20 6e65 6564 5f73 6869 7070 696e 675f  m need_shipping_
-0000f790: 6164 6472 6573 733a 2050 6173 7320 5472  address: Pass Tr
-0000f7a0: 7565 2c20 6966 2079 6f75 2072 6571 7569  ue, if you requi
-0000f7b0: 7265 2074 6865 2075 7365 7227 7320 7368  re the user's sh
-0000f7c0: 6970 7069 6e67 2061 6464 7265 7373 2074  ipping address t
-0000f7d0: 6f20 636f 6d70 6c65 7465 2074 6865 206f  o complete the o
-0000f7e0: 7264 6572 0a20 2020 203a 7061 7261 6d20  rder.    :param 
-0000f7f0: 6973 5f66 6c65 7869 626c 653a 2050 6173  is_flexible: Pas
-0000f800: 7320 5472 7565 2c20 6966 2074 6865 2066  s True, if the f
-0000f810: 696e 616c 2070 7269 6365 2064 6570 656e  inal price depen
-0000f820: 6473 206f 6e20 7468 6520 7368 6970 7069  ds on the shippi
-0000f830: 6e67 206d 6574 686f 640a 2020 2020 3a70  ng method.    :p
-0000f840: 6172 616d 2073 656e 645f 7068 6f6e 655f  aram send_phone_
-0000f850: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
-0000f860: 6572 3a20 5061 7373 2054 7275 652c 2069  er: Pass True, i
-0000f870: 6620 7573 6572 2773 2070 686f 6e65 206e  f user's phone n
-0000f880: 756d 6265 7220 7368 6f75 6c64 2062 6520  umber should be 
-0000f890: 7365 6e74 2074 6f20 7072 6f76 6964 6572  sent to provider
-0000f8a0: 0a20 2020 203a 7061 7261 6d20 7365 6e64  .    :param send
-0000f8b0: 5f65 6d61 696c 5f74 6f5f 7072 6f76 6964  _email_to_provid
-0000f8c0: 6572 3a20 5061 7373 2054 7275 652c 2069  er: Pass True, i
-0000f8d0: 6620 7573 6572 2773 2065 6d61 696c 2061  f user's email a
-0000f8e0: 6464 7265 7373 2073 686f 756c 6420 6265  ddress should be
-0000f8f0: 2073 656e 7420 746f 2070 726f 7669 6465   sent to provide
-0000f900: 720a 2020 2020 3a70 6172 616d 2064 6973  r.    :param dis
-0000f910: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-0000f920: 6e3a 2053 656e 6473 2074 6865 206d 6573  n: Sends the mes
-0000f930: 7361 6765 2073 696c 656e 746c 792e 2055  sage silently. U
-0000f940: 7365 7273 2077 696c 6c20 7265 6365 6976  sers will receiv
-0000f950: 6520 6120 6e6f 7469 6669 6361 7469 6f6e  e a notification
-0000f960: 2077 6974 6820 6e6f 2073 6f75 6e64 2e0a   with no sound..
-0000f970: 2020 2020 3a70 6172 616d 2072 6570 6c79      :param reply
-0000f980: 5f6d 6172 6b75 703a 2041 204a 534f 4e2d  _markup: A JSON-
-0000f990: 7365 7269 616c 697a 6564 206f 626a 6563  serialized objec
-0000f9a0: 7420 666f 7220 616e 2069 6e6c 696e 6520  t for an inline 
-0000f9b0: 6b65 7962 6f61 7264 2e20 4966 2065 6d70  keyboard. If emp
-0000f9c0: 7479 2c20 6f6e 6520 2750 6179 2074 6f74  ty, one 'Pay tot
-0000f9d0: 616c 2070 7269 6365 2720 6275 7474 6f6e  al price' button
-0000f9e0: 2077 696c 6c20 6265 2073 686f 776e 2e20   will be shown. 
-0000f9f0: 4966 206e 6f74 2065 6d70 7479 2c20 7468  If not empty, th
-0000fa00: 6520 6669 7273 7420 6275 7474 6f6e 206d  e first button m
-0000fa10: 7573 7420 6265 2061 2050 6179 2062 7574  ust be a Pay but
-0000fa20: 746f 6e0a 2020 2020 3a70 6172 616d 2070  ton.    :param p
-0000fa30: 726f 7669 6465 725f 6461 7461 3a20 4120  rovider_data: A 
-0000fa40: 4a53 4f4e 2d73 6572 6961 6c69 7a65 6420  JSON-serialized 
-0000fa50: 6461 7461 2061 626f 7574 2074 6865 2069  data about the i
-0000fa60: 6e76 6f69 6365 2c20 7768 6963 6820 7769  nvoice, which wi
-0000fa70: 6c6c 2062 6520 7368 6172 6564 2077 6974  ll be shared wit
-0000fa80: 6820 7468 6520 7061 796d 656e 7420 7072  h the payment pr
-0000fa90: 6f76 6964 6572 2e20 4120 6465 7461 696c  ovider. A detail
-0000faa0: 6564 2064 6573 6372 6970 7469 6f6e 206f  ed description o
-0000fab0: 6620 7265 7175 6972 6564 2066 6965 6c64  f required field
-0000fac0: 7320 7368 6f75 6c64 2062 6520 7072 6f76  s should be prov
-0000fad0: 6964 6564 2062 7920 7468 6520 7061 796d  ided by the paym
-0000fae0: 656e 7420 7072 6f76 6964 6572 2e0a 2020  ent provider..  
-0000faf0: 2020 3a70 6172 616d 2074 696d 656f 7574    :param timeout
-0000fb00: 3a0a 2020 2020 3a70 6172 616d 206d 6178  :.    :param max
-0000fb10: 5f74 6970 5f61 6d6f 756e 743a 2054 6865  _tip_amount: The
-0000fb20: 206d 6178 696d 756d 2061 6363 6570 7465   maximum accepte
-0000fb30: 6420 616d 6f75 6e74 2066 6f72 2074 6970  d amount for tip
-0000fb40: 7320 696e 2074 6865 2073 6d61 6c6c 6573  s in the smalles
-0000fb50: 7420 756e 6974 7320 6f66 2074 6865 2063  t units of the c
-0000fb60: 7572 7265 6e63 790a 2020 2020 3a70 6172  urrency.    :par
-0000fb70: 616d 2073 7567 6765 7374 6564 5f74 6970  am suggested_tip
-0000fb80: 5f61 6d6f 756e 7473 3a20 4120 4a53 4f4e  _amounts: A JSON
-0000fb90: 2d73 6572 6961 6c69 7a65 6420 6172 7261  -serialized arra
-0000fba0: 7920 6f66 2073 7567 6765 7374 6564 2061  y of suggested a
-0000fbb0: 6d6f 756e 7473 206f 6620 7469 7073 2069  mounts of tips i
-0000fbc0: 6e20 7468 6520 736d 616c 6c65 7374 2075  n the smallest u
-0000fbd0: 6e69 7473 206f 6620 7468 6520 6375 7272  nits of the curr
-0000fbe0: 656e 6379 2e0a 2020 2020 2020 2020 4174  ency..        At
-0000fbf0: 206d 6f73 7420 3420 7375 6767 6573 7465   most 4 suggeste
-0000fc00: 6420 7469 7020 616d 6f75 6e74 7320 6361  d tip amounts ca
-0000fc10: 6e20 6265 2073 7065 6369 6669 6564 2e20  n be specified. 
-0000fc20: 5468 6520 7375 6767 6573 7465 6420 7469  The suggested ti
-0000fc30: 7020 616d 6f75 6e74 7320 6d75 7374 2062  p amounts must b
-0000fc40: 6520 706f 7369 7469 7665 2c20 7061 7373  e positive, pass
-0000fc50: 6564 2069 6e20 6120 7374 7269 6374 6c79  ed in a strictly
-0000fc60: 2069 6e63 7265 6173 6564 206f 7264 6572   increased order
-0000fc70: 2061 6e64 206d 7573 7420 6e6f 7420 6578   and must not ex
-0000fc80: 6365 6564 206d 6178 5f74 6970 5f61 6d6f  ceed max_tip_amo
-0000fc90: 756e 742e 0a20 2020 203a 7061 7261 6d20  unt..    :param 
-0000fca0: 7072 6f74 6563 745f 636f 6e74 656e 743a  protect_content:
-0000fcb0: 2050 726f 7465 6374 7320 7468 6520 636f   Protects the co
-0000fcc0: 6e74 656e 7473 206f 6620 7468 6520 7365  ntents of the se
-0000fcd0: 6e74 206d 6573 7361 6765 2066 726f 6d20  nt message from 
-0000fce0: 666f 7277 6172 6469 6e67 2061 6e64 2073  forwarding and s
-0000fcf0: 6176 696e 670a 2020 2020 3a70 6172 616d  aving.    :param
-0000fd00: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-0000fd10: 6964 3a20 556e 6971 7565 2069 6465 6e74  id: Unique ident
-0000fd20: 6966 6965 7220 666f 7220 7468 6520 7461  ifier for the ta
-0000fd30: 7267 6574 206d 6573 7361 6765 2074 6872  rget message thr
-0000fd40: 6561 6420 2874 6f70 6963 2920 6f66 2074  ead (topic) of t
-0000fd50: 6865 2066 6f72 756d 3b20 666f 7220 666f  he forum; for fo
-0000fd60: 7275 6d20 7375 7065 7267 726f 7570 7320  rum supergroups 
-0000fd70: 6f6e 6c79 0a20 2020 203a 7265 7475 726e  only.    :return
-0000fd80: 3a0a 2020 2020 2222 220a 2020 2020 6d65  :.    """.    me
-0000fd90: 7468 6f64 5f75 726c 203d 2072 2273 656e  thod_url = r"sen
-0000fda0: 6449 6e76 6f69 6365 220a 2020 2020 7061  dInvoice".    pa
-0000fdb0: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
-0000fdc0: 2020 2263 6861 745f 6964 223a 2063 6861    "chat_id": cha
-0000fdd0: 745f 6964 2c0a 2020 2020 2020 2020 2274  t_id,.        "t
-0000fde0: 6974 6c65 223a 2074 6974 6c65 2c0a 2020  itle": title,.  
-0000fdf0: 2020 2020 2020 2264 6573 6372 6970 7469        "descripti
-0000fe00: 6f6e 223a 2064 6573 6372 6970 7469 6f6e  on": description
-0000fe10: 2c0a 2020 2020 2020 2020 2270 6179 6c6f  ,.        "paylo
-0000fe20: 6164 223a 2069 6e76 6f69 6365 5f70 6179  ad": invoice_pay
-0000fe30: 6c6f 6164 2c0a 2020 2020 2020 2020 2270  load,.        "p
-0000fe40: 726f 7669 6465 725f 746f 6b65 6e22 3a20  rovider_token": 
-0000fe50: 7072 6f76 6964 6572 5f74 6f6b 656e 2c0a  provider_token,.
-0000fe60: 2020 2020 2020 2020 2263 7572 7265 6e63          "currenc
-0000fe70: 7922 3a20 6375 7272 656e 6379 2c0a 2020  y": currency,.  
-0000fe80: 2020 2020 2020 2270 7269 6365 7322 3a20        "prices": 
-0000fe90: 5f63 6f6e 7665 7274 5f6c 6973 745f 6a73  _convert_list_js
-0000fea0: 6f6e 5f73 6572 6961 6c69 7a61 626c 6528  on_serializable(
-0000feb0: 7072 6963 6573 292c 0a20 2020 207d 0a20  prices),.    }. 
-0000fec0: 2020 2069 6620 7374 6172 745f 7061 7261     if start_para
-0000fed0: 6d65 7465 723a 0a20 2020 2020 2020 2070  meter:.        p
-0000fee0: 6179 6c6f 6164 5b22 7374 6172 745f 7061  ayload["start_pa
-0000fef0: 7261 6d65 7465 7222 5d20 3d20 7374 6172  rameter"] = star
-0000ff00: 745f 7061 7261 6d65 7465 720a 2020 2020  t_parameter.    
-0000ff10: 6966 2070 686f 746f 5f75 726c 3a0a 2020  if photo_url:.  
-0000ff20: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-0000ff30: 686f 746f 5f75 726c 225d 203d 2070 686f  hoto_url"] = pho
-0000ff40: 746f 5f75 726c 0a20 2020 2069 6620 7068  to_url.    if ph
-0000ff50: 6f74 6f5f 7369 7a65 3a0a 2020 2020 2020  oto_size:.      
-0000ff60: 2020 7061 796c 6f61 645b 2270 686f 746f    payload["photo
-0000ff70: 5f73 697a 6522 5d20 3d20 7068 6f74 6f5f  _size"] = photo_
-0000ff80: 7369 7a65 0a20 2020 2069 6620 7068 6f74  size.    if phot
-0000ff90: 6f5f 7769 6474 683a 0a20 2020 2020 2020  o_width:.       
-0000ffa0: 2070 6179 6c6f 6164 5b22 7068 6f74 6f5f   payload["photo_
-0000ffb0: 7769 6474 6822 5d20 3d20 7068 6f74 6f5f  width"] = photo_
-0000ffc0: 7769 6474 680a 2020 2020 6966 2070 686f  width.    if pho
-0000ffd0: 746f 5f68 6569 6768 743a 0a20 2020 2020  to_height:.     
-0000ffe0: 2020 2070 6179 6c6f 6164 5b22 7068 6f74     payload["phot
-0000fff0: 6f5f 6865 6967 6874 225d 203d 2070 686f  o_height"] = pho
-00010000: 746f 5f68 6569 6768 740a 2020 2020 6966  to_height.    if
-00010010: 206e 6565 645f 6e61 6d65 2069 7320 6e6f   need_name is no
-00010020: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00010030: 7061 796c 6f61 645b 226e 6565 645f 6e61  payload["need_na
-00010040: 6d65 225d 203d 206e 6565 645f 6e61 6d65  me"] = need_name
-00010050: 0a20 2020 2069 6620 6e65 6564 5f70 686f  .    if need_pho
-00010060: 6e65 5f6e 756d 6265 7220 6973 206e 6f74  ne_number is not
-00010070: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00010080: 6179 6c6f 6164 5b22 6e65 6564 5f70 686f  ayload["need_pho
-00010090: 6e65 5f6e 756d 6265 7222 5d20 3d20 6e65  ne_number"] = ne
-000100a0: 6564 5f70 686f 6e65 5f6e 756d 6265 720a  ed_phone_number.
-000100b0: 2020 2020 6966 206e 6565 645f 656d 6169      if need_emai
-000100c0: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
-000100d0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000100e0: 6e65 6564 5f65 6d61 696c 225d 203d 206e  need_email"] = n
-000100f0: 6565 645f 656d 6169 6c0a 2020 2020 6966  eed_email.    if
-00010100: 206e 6565 645f 7368 6970 7069 6e67 5f61   need_shipping_a
-00010110: 6464 7265 7373 2069 7320 6e6f 7420 4e6f  ddress is not No
-00010120: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00010130: 6f61 645b 226e 6565 645f 7368 6970 7069  oad["need_shippi
-00010140: 6e67 5f61 6464 7265 7373 225d 203d 206e  ng_address"] = n
-00010150: 6565 645f 7368 6970 7069 6e67 5f61 6464  eed_shipping_add
-00010160: 7265 7373 0a20 2020 2069 6620 7365 6e64  ress.    if send
-00010170: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-00010180: 5f70 726f 7669 6465 7220 6973 206e 6f74  _provider is not
-00010190: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000101a0: 6179 6c6f 6164 5b22 7365 6e64 5f70 686f  ayload["send_pho
-000101b0: 6e65 5f6e 756d 6265 725f 746f 5f70 726f  ne_number_to_pro
-000101c0: 7669 6465 7222 5d20 3d20 7365 6e64 5f70  vider"] = send_p
-000101d0: 686f 6e65 5f6e 756d 6265 725f 746f 5f70  hone_number_to_p
-000101e0: 726f 7669 6465 720a 2020 2020 6966 2073  rovider.    if s
-000101f0: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
-00010200: 7669 6465 7220 6973 206e 6f74 204e 6f6e  vider is not Non
-00010210: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00010220: 6164 5b22 7365 6e64 5f65 6d61 696c 5f74  ad["send_email_t
-00010230: 6f5f 7072 6f76 6964 6572 225d 203d 2073  o_provider"] = s
-00010240: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
-00010250: 7669 6465 720a 2020 2020 6966 2069 735f  vider.    if is_
-00010260: 666c 6578 6962 6c65 2069 7320 6e6f 7420  flexible is not 
-00010270: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00010280: 796c 6f61 645b 2269 735f 666c 6578 6962  yload["is_flexib
-00010290: 6c65 225d 203d 2069 735f 666c 6578 6962  le"] = is_flexib
-000102a0: 6c65 0a20 2020 2069 6620 6469 7361 626c  le.    if disabl
-000102b0: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-000102c0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000102d0: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
-000102e0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-000102f0: 6e22 5d20 3d20 6469 7361 626c 655f 6e6f  n"] = disable_no
-00010300: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-00010310: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-00010320: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00010330: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
-00010340: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
-00010350: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-00010360: 2020 2020 6966 2070 726f 7669 6465 725f      if provider_
-00010370: 6461 7461 3a0a 2020 2020 2020 2020 7061  data:.        pa
-00010380: 796c 6f61 645b 2270 726f 7669 6465 725f  yload["provider_
-00010390: 6461 7461 225d 203d 2070 726f 7669 6465  data"] = provide
-000103a0: 725f 6461 7461 0a20 2020 2069 6620 7469  r_data.    if ti
-000103b0: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-000103c0: 6179 6c6f 6164 5b22 7469 6d65 6f75 7422  ayload["timeout"
-000103d0: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-000103e0: 6966 206d 6178 5f74 6970 5f61 6d6f 756e  if max_tip_amoun
-000103f0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-00010400: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00010410: 6d61 785f 7469 705f 616d 6f75 6e74 225d  max_tip_amount"]
-00010420: 203d 206d 6178 5f74 6970 5f61 6d6f 756e   = max_tip_amoun
-00010430: 740a 2020 2020 6966 2073 7567 6765 7374  t.    if suggest
-00010440: 6564 5f74 6970 5f61 6d6f 756e 7473 2069  ed_tip_amounts i
-00010450: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00010460: 2020 2020 7061 796c 6f61 645b 2273 7567      payload["sug
-00010470: 6765 7374 6564 5f74 6970 5f61 6d6f 756e  gested_tip_amoun
-00010480: 7473 225d 203d 206a 736f 6e2e 6475 6d70  ts"] = json.dump
-00010490: 7328 7375 6767 6573 7465 645f 7469 705f  s(suggested_tip_
-000104a0: 616d 6f75 6e74 7329 0a20 2020 2069 6620  amounts).    if 
-000104b0: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-000104c0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000104d0: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
-000104e0: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
-000104f0: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-00010500: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-00010510: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
-00010520: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
-00010530: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
-00010540: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00010550: 645f 6964 0a20 2020 2069 6620 7265 706c  d_id.    if repl
-00010560: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
-00010570: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00010580: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
-00010590: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
-000105a0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-000105b0: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2072  .to_json().    r
-000105c0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-000105d0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-000105e0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-000105f0: 796c 6f61 6429 0a0a 0a64 6566 2061 6e73  yload)...def ans
-00010600: 7765 725f 7368 6970 7069 6e67 5f71 7565  wer_shipping_que
-00010610: 7279 280a 2020 2020 746f 6b65 6e2c 2073  ry(.    token, s
-00010620: 6869 7070 696e 675f 7175 6572 795f 6964  hipping_query_id
-00010630: 2c20 6f6b 2c20 7368 6970 7069 6e67 5f6f  , ok, shipping_o
-00010640: 7074 696f 6e73 3d4e 6f6e 652c 2065 7272  ptions=None, err
-00010650: 6f72 5f6d 6573 7361 6765 3d4e 6f6e 650a  or_message=None.
-00010660: 293a 0a20 2020 2022 2222 0a20 2020 2049  ):.    """.    I
-00010670: 6620 796f 7520 7365 6e74 2061 6e20 696e  f you sent an in
-00010680: 766f 6963 6520 7265 7175 6573 7469 6e67  voice requesting
-00010690: 2061 2073 6869 7070 696e 6720 6164 6472   a shipping addr
-000106a0: 6573 7320 616e 6420 7468 6520 7061 7261  ess and the para
-000106b0: 6d65 7465 7220 6973 5f66 6c65 7869 626c  meter is_flexibl
-000106c0: 6520 7761 7320 7370 6563 6966 6965 642c  e was specified,
-000106d0: 2074 6865 2042 6f74 2041 5049 2077 696c   the Bot API wil
-000106e0: 6c20 7365 6e64 2061 6e20 5570 6461 7465  l send an Update
-000106f0: 2077 6974 6820 6120 7368 6970 7069 6e67   with a shipping
-00010700: 5f71 7565 7279 2066 6965 6c64 2074 6f20  _query field to 
-00010710: 7468 6520 626f 742e 2055 7365 2074 6869  the bot. Use thi
-00010720: 7320 6d65 7468 6f64 2074 6f20 7265 706c  s method to repl
-00010730: 7920 746f 2073 6869 7070 696e 6720 7175  y to shipping qu
-00010740: 6572 6965 732e 204f 6e20 7375 6363 6573  eries. On succes
-00010750: 732c 2054 7275 6520 6973 2072 6574 7572  s, True is retur
-00010760: 6e65 642e 0a20 2020 203a 7061 7261 6d20  ned..    :param 
-00010770: 746f 6b65 6e3a 2042 6f74 2773 2074 6f6b  token: Bot's tok
-00010780: 656e 2028 796f 7520 646f 6e27 7420 6e65  en (you don't ne
-00010790: 6564 2074 6f20 6669 6c6c 2074 6869 7329  ed to fill this)
-000107a0: 0a20 2020 203a 7061 7261 6d20 7368 6970  .    :param ship
-000107b0: 7069 6e67 5f71 7565 7279 5f69 643a 2055  ping_query_id: U
-000107c0: 6e69 7175 6520 6964 656e 7469 6669 6572  nique identifier
-000107d0: 2066 6f72 2074 6865 2071 7565 7279 2074   for the query t
-000107e0: 6f20 6265 2061 6e73 7765 7265 640a 2020  o be answered.  
-000107f0: 2020 3a70 6172 616d 206f 6b3a 2053 7065    :param ok: Spe
-00010800: 6369 6679 2054 7275 6520 6966 2064 656c  cify True if del
-00010810: 6976 6572 7920 746f 2074 6865 2073 7065  ivery to the spe
-00010820: 6369 6669 6564 2061 6464 7265 7373 2069  cified address i
-00010830: 7320 706f 7373 6962 6c65 2061 6e64 2046  s possible and F
-00010840: 616c 7365 2069 6620 7468 6572 6520 6172  alse if there ar
-00010850: 6520 616e 7920 7072 6f62 6c65 6d73 2028  e any problems (
-00010860: 666f 7220 6578 616d 706c 652c 2069 6620  for example, if 
-00010870: 6465 6c69 7665 7279 2074 6f20 7468 6520  delivery to the 
-00010880: 7370 6563 6966 6965 6420 6164 6472 6573  specified addres
-00010890: 7320 6973 206e 6f74 2070 6f73 7369 626c  s is not possibl
-000108a0: 6529 0a20 2020 203a 7061 7261 6d20 7368  e).    :param sh
-000108b0: 6970 7069 6e67 5f6f 7074 696f 6e73 3a20  ipping_options: 
-000108c0: 5265 7175 6972 6564 2069 6620 6f6b 2069  Required if ok i
-000108d0: 7320 5472 7565 2e20 4120 4a53 4f4e 2d73  s True. A JSON-s
-000108e0: 6572 6961 6c69 7a65 6420 6172 7261 7920  erialized array 
-000108f0: 6f66 2061 7661 696c 6162 6c65 2073 6869  of available shi
-00010900: 7070 696e 6720 6f70 7469 6f6e 732e 0a20  pping options.. 
-00010910: 2020 203a 7061 7261 6d20 6572 726f 725f     :param error_
-00010920: 6d65 7373 6167 653a 2052 6571 7569 7265  message: Require
-00010930: 6420 6966 206f 6b20 6973 2046 616c 7365  d if ok is False
-00010940: 2e20 4572 726f 7220 6d65 7373 6167 6520  . Error message 
-00010950: 696e 2068 756d 616e 2072 6561 6461 626c  in human readabl
-00010960: 6520 666f 726d 2074 6861 7420 6578 706c  e form that expl
-00010970: 6169 6e73 2077 6879 2069 7420 6973 2069  ains why it is i
-00010980: 6d70 6f73 7369 626c 6520 746f 2063 6f6d  mpossible to com
-00010990: 706c 6574 6520 7468 6520 6f72 6465 7220  plete the order 
-000109a0: 2865 2e67 2e20 2253 6f72 7279 2c20 6465  (e.g. "Sorry, de
-000109b0: 6c69 7665 7279 2074 6f20 796f 7572 2064  livery to your d
-000109c0: 6573 6972 6564 2061 6464 7265 7373 2069  esired address i
-000109d0: 7320 756e 6176 6169 6c61 626c 6527 292e  s unavailable').
-000109e0: 2054 656c 6567 7261 6d20 7769 6c6c 2064   Telegram will d
-000109f0: 6973 706c 6179 2074 6869 7320 6d65 7373  isplay this mess
-00010a00: 6167 6520 746f 2074 6865 2075 7365 722e  age to the user.
-00010a10: 0a20 2020 203a 7265 7475 726e 3a0a 2020  .    :return:.  
-00010a20: 2020 2222 220a 2020 2020 6d65 7468 6f64    """.    method
-00010a30: 5f75 726c 203d 2022 616e 7377 6572 5368  _url = "answerSh
-00010a40: 6970 7069 6e67 5175 6572 7922 0a20 2020  ippingQuery".   
-00010a50: 2070 6179 6c6f 6164 203d 207b 2273 6869   payload = {"shi
-00010a60: 7070 696e 675f 7175 6572 795f 6964 223a  pping_query_id":
-00010a70: 2073 6869 7070 696e 675f 7175 6572 795f   shipping_query_
-00010a80: 6964 2c20 226f 6b22 3a20 6f6b 7d0a 2020  id, "ok": ok}.  
-00010a90: 2020 6966 2073 6869 7070 696e 675f 6f70    if shipping_op
-00010aa0: 7469 6f6e 733a 0a20 2020 2020 2020 2070  tions:.        p
-00010ab0: 6179 6c6f 6164 5b22 7368 6970 7069 6e67  ayload["shipping
-00010ac0: 5f6f 7074 696f 6e73 225d 203d 205f 636f  _options"] = _co
-00010ad0: 6e76 6572 745f 6c69 7374 5f6a 736f 6e5f  nvert_list_json_
-00010ae0: 7365 7269 616c 697a 6162 6c65 2873 6869  serializable(shi
-00010af0: 7070 696e 675f 6f70 7469 6f6e 7329 0a20  pping_options). 
-00010b00: 2020 2069 6620 6572 726f 725f 6d65 7373     if error_mess
-00010b10: 6167 653a 0a20 2020 2020 2020 2070 6179  age:.        pay
-00010b20: 6c6f 6164 5b22 6572 726f 725f 6d65 7373  load["error_mess
-00010b30: 6167 6522 5d20 3d20 6572 726f 725f 6d65  age"] = error_me
-00010b40: 7373 6167 650a 2020 2020 7265 7475 726e  ssage.    return
-00010b50: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00010b60: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00010b70: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00010b80: 290a 0a0a 6465 6620 616e 7377 6572 5f70  )...def answer_p
-00010b90: 7265 5f63 6865 636b 6f75 745f 7175 6572  re_checkout_quer
-00010ba0: 7928 746f 6b65 6e2c 2070 7265 5f63 6865  y(token, pre_che
-00010bb0: 636b 6f75 745f 7175 6572 795f 6964 2c20  ckout_query_id, 
-00010bc0: 6f6b 2c20 6572 726f 725f 6d65 7373 6167  ok, error_messag
-00010bd0: 653d 4e6f 6e65 293a 0a20 2020 2022 2222  e=None):.    """
-00010be0: 0a20 2020 204f 6e63 6520 7468 6520 7573  .    Once the us
-00010bf0: 6572 2068 6173 2063 6f6e 6669 726d 6564  er has confirmed
-00010c00: 2074 6865 6972 2070 6179 6d65 6e74 2061   their payment a
-00010c10: 6e64 2073 6869 7070 696e 6720 6465 7461  nd shipping deta
-00010c20: 696c 732c 2074 6865 2042 6f74 2041 5049  ils, the Bot API
-00010c30: 2073 656e 6473 2074 6865 2066 696e 616c   sends the final
-00010c40: 2063 6f6e 6669 726d 6174 696f 6e20 696e   confirmation in
-00010c50: 2074 6865 2066 6f72 6d20 6f66 2061 6e20   the form of an 
-00010c60: 5570 6461 7465 2077 6974 6820 7468 6520  Update with the 
-00010c70: 6669 656c 6420 7072 655f 6368 6563 6b6f  field pre_checko
-00010c80: 7574 5f71 7565 7279 2e20 5573 6520 7468  ut_query. Use th
-00010c90: 6973 206d 6574 686f 6420 746f 2072 6573  is method to res
-00010ca0: 706f 6e64 2074 6f20 7375 6368 2070 7265  pond to such pre
-00010cb0: 2d63 6865 636b 6f75 7420 7175 6572 6965  -checkout querie
-00010cc0: 732e 204f 6e20 7375 6363 6573 732c 2054  s. On success, T
-00010cd0: 7275 6520 6973 2072 6574 7572 6e65 642e  rue is returned.
-00010ce0: 204e 6f74 653a 2054 6865 2042 6f74 2041   Note: The Bot A
-00010cf0: 5049 206d 7573 7420 7265 6365 6976 6520  PI must receive 
-00010d00: 616e 2061 6e73 7765 7220 7769 7468 696e  an answer within
-00010d10: 2031 3020 7365 636f 6e64 7320 6166 7465   10 seconds afte
-00010d20: 7220 7468 6520 7072 652d 6368 6563 6b6f  r the pre-checko
-00010d30: 7574 2071 7565 7279 2077 6173 2073 656e  ut query was sen
-00010d40: 742e 0a20 2020 203a 7061 7261 6d20 746f  t..    :param to
-00010d50: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
-00010d60: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
-00010d70: 2074 6f20 6669 6c6c 2074 6869 7329 0a20   to fill this). 
-00010d80: 2020 203a 7061 7261 6d20 7072 655f 6368     :param pre_ch
-00010d90: 6563 6b6f 7574 5f71 7565 7279 5f69 643a  eckout_query_id:
-00010da0: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
-00010db0: 6572 2066 6f72 2074 6865 2071 7565 7279  er for the query
-00010dc0: 2074 6f20 6265 2061 6e73 7765 7265 640a   to be answered.
-00010dd0: 2020 2020 3a70 6172 616d 206f 6b3a 2053      :param ok: S
-00010de0: 7065 6369 6679 2054 7275 6520 6966 2065  pecify True if e
-00010df0: 7665 7279 7468 696e 6720 6973 2061 6c72  verything is alr
-00010e00: 6967 6874 2028 676f 6f64 7320 6172 6520  ight (goods are 
-00010e10: 6176 6169 6c61 626c 652c 2065 7463 2e29  available, etc.)
-00010e20: 2061 6e64 2074 6865 2062 6f74 2069 7320   and the bot is 
-00010e30: 7265 6164 7920 746f 2070 726f 6365 6564  ready to proceed
-00010e40: 2077 6974 6820 7468 6520 6f72 6465 722e   with the order.
-00010e50: 2055 7365 2046 616c 7365 2069 6620 7468   Use False if th
-00010e60: 6572 6520 6172 6520 616e 7920 7072 6f62  ere are any prob
-00010e70: 6c65 6d73 2e0a 2020 2020 3a70 6172 616d  lems..    :param
-00010e80: 2065 7272 6f72 5f6d 6573 7361 6765 3a20   error_message: 
-00010e90: 5265 7175 6972 6564 2069 6620 6f6b 2069  Required if ok i
-00010ea0: 7320 4661 6c73 652e 2045 7272 6f72 206d  s False. Error m
-00010eb0: 6573 7361 6765 2069 6e20 6875 6d61 6e20  essage in human 
-00010ec0: 7265 6164 6162 6c65 2066 6f72 6d20 7468  readable form th
-00010ed0: 6174 2065 7870 6c61 696e 7320 7468 6520  at explains the 
-00010ee0: 7265 6173 6f6e 2066 6f72 2066 6169 6c75  reason for failu
-00010ef0: 7265 2074 6f20 7072 6f63 6565 6420 7769  re to proceed wi
-00010f00: 7468 2074 6865 2063 6865 636b 6f75 7420  th the checkout 
-00010f10: 2865 2e67 2e20 2253 6f72 7279 2c20 736f  (e.g. "Sorry, so
-00010f20: 6d65 626f 6479 206a 7573 7420 626f 7567  mebody just boug
-00010f30: 6874 2074 6865 206c 6173 7420 6f66 206f  ht the last of o
-00010f40: 7572 2061 6d61 7a69 6e67 2062 6c61 636b  ur amazing black
-00010f50: 2054 2d73 6869 7274 7320 7768 696c 6520   T-shirts while 
-00010f60: 796f 7520 7765 7265 2062 7573 7920 6669  you were busy fi
-00010f70: 6c6c 696e 6720 6f75 7420 796f 7572 2070  lling out your p
-00010f80: 6179 6d65 6e74 2064 6574 6169 6c73 2e20  ayment details. 
-00010f90: 506c 6561 7365 2063 686f 6f73 6520 6120  Please choose a 
-00010fa0: 6469 6666 6572 656e 7420 636f 6c6f 7220  different color 
-00010fb0: 6f72 2067 6172 6d65 6e74 2122 292e 2054  or garment!"). T
-00010fc0: 656c 6567 7261 6d20 7769 6c6c 2064 6973  elegram will dis
-00010fd0: 706c 6179 2074 6869 7320 6d65 7373 6167  play this messag
-00010fe0: 6520 746f 2074 6865 2075 7365 722e 0a20  e to the user.. 
-00010ff0: 2020 203a 7265 7475 726e 3a0a 2020 2020     :return:.    
-00011000: 2222 220a 2020 2020 6d65 7468 6f64 5f75  """.    method_u
-00011010: 726c 203d 2022 616e 7377 6572 5072 6543  rl = "answerPreC
-00011020: 6865 636b 6f75 7451 7565 7279 220a 2020  heckoutQuery".  
-00011030: 2020 7061 796c 6f61 6420 3d20 7b22 7072    payload = {"pr
-00011040: 655f 6368 6563 6b6f 7574 5f71 7565 7279  e_checkout_query
-00011050: 5f69 6422 3a20 7072 655f 6368 6563 6b6f  _id": pre_checko
-00011060: 7574 5f71 7565 7279 5f69 642c 2022 6f6b  ut_query_id, "ok
-00011070: 223a 206f 6b7d 0a20 2020 2069 6620 6572  ": ok}.    if er
-00011080: 726f 725f 6d65 7373 6167 653a 0a20 2020  ror_message:.   
-00011090: 2020 2020 2070 6179 6c6f 6164 5b22 6572       payload["er
-000110a0: 726f 725f 6d65 7373 6167 6522 5d20 3d20  ror_message"] = 
-000110b0: 6572 726f 725f 6d65 7373 6167 650a 2020  error_message.  
-000110c0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-000110d0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-000110e0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-000110f0: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00011100: 756e 7069 6e5f 616c 6c5f 6765 6e65 7261  unpin_all_genera
-00011110: 6c5f 666f 7275 6d5f 746f 7069 635f 6d65  l_forum_topic_me
-00011120: 7373 6167 6573 2874 6f6b 656e 2c20 6368  ssages(token, ch
-00011130: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
-00011140: 6f64 5f75 726c 203d 2022 756e 7069 6e41  od_url = "unpinA
-00011150: 6c6c 4765 6e65 7261 6c46 6f72 756d 546f  llGeneralForumTo
-00011160: 7069 634d 6573 7361 6765 7322 0a20 2020  picMessages".   
-00011170: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-00011180: 745f 6964 223a 2063 6861 745f 6964 7d0a  t_id": chat_id}.
-00011190: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-000111a0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-000111b0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-000111c0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-000111d0: 6f64 3d22 706f 7374 2229 0a0a 0a23 2049  od="post")...# I
-000111e0: 6e6c 696e 6551 7565 7279 0a0a 0a64 6566  nlineQuery...def
-000111f0: 2061 6e73 7765 725f 6361 6c6c 6261 636b   answer_callback
-00011200: 5f71 7565 7279 280a 2020 2020 746f 6b65  _query(.    toke
-00011210: 6e2c 2063 616c 6c62 6163 6b5f 7175 6572  n, callback_quer
-00011220: 795f 6964 2c20 7465 7874 3d4e 6f6e 652c  y_id, text=None,
-00011230: 2073 686f 775f 616c 6572 743d 4e6f 6e65   show_alert=None
-00011240: 2c20 7572 6c3d 4e6f 6e65 2c20 6361 6368  , url=None, cach
-00011250: 655f 7469 6d65 3d4e 6f6e 650a 293a 0a20  e_time=None.):. 
-00011260: 2020 2022 2222 0a20 2020 2055 7365 2074     """.    Use t
-00011270: 6869 7320 6d65 7468 6f64 2074 6f20 7365  his method to se
-00011280: 6e64 2061 6e73 7765 7273 2074 6f20 6361  nd answers to ca
-00011290: 6c6c 6261 636b 2071 7565 7269 6573 2073  llback queries s
-000112a0: 656e 7420 6672 6f6d 2069 6e6c 696e 6520  ent from inline 
-000112b0: 6b65 7962 6f61 7264 732e 2054 6865 2061  keyboards. The a
-000112c0: 6e73 7765 7220 7769 6c6c 2062 6520 6469  nswer will be di
-000112d0: 7370 6c61 7965 6420 746f 2074 6865 2075  splayed to the u
-000112e0: 7365 7220 6173 2061 206e 6f74 6966 6963  ser as a notific
-000112f0: 6174 696f 6e20 6174 2074 6865 2074 6f70  ation at the top
-00011300: 206f 6620 7468 6520 6368 6174 2073 6372   of the chat scr
-00011310: 6565 6e20 6f72 2061 7320 616e 2061 6c65  een or as an ale
-00011320: 7274 2e20 4f6e 2073 7563 6365 7373 2c20  rt. On success, 
-00011330: 5472 7565 2069 7320 7265 7475 726e 6564  True is returned
-00011340: 2e0a 2020 2020 416c 7465 726e 6174 6976  ..    Alternativ
-00011350: 656c 792c 2074 6865 2075 7365 7220 6361  ely, the user ca
-00011360: 6e20 6265 2072 6564 6972 6563 7465 6420  n be redirected 
-00011370: 746f 2074 6865 2073 7065 6369 6669 6564  to the specified
-00011380: 2047 616d 6520 5552 4c2e 2046 6f72 2074   Game URL. For t
-00011390: 6869 7320 6f70 7469 6f6e 2074 6f20 776f  his option to wo
-000113a0: 726b 2c20 796f 7520 6d75 7374 2066 6972  rk, you must fir
-000113b0: 7374 2063 7265 6174 6520 6120 6761 6d65  st create a game
-000113c0: 2066 6f72 2079 6f75 7220 626f 7420 7669   for your bot vi
-000113d0: 6120 426f 7446 6174 6865 7220 616e 6420  a BotFather and 
-000113e0: 6163 6365 7074 2074 6865 2074 6572 6d73  accept the terms
-000113f0: 2e20 4f74 6865 7277 6973 652c 2079 6f75  . Otherwise, you
-00011400: 206d 6179 2075 7365 206c 696e 6b73 206c   may use links l
-00011410: 696b 6520 7465 6c65 6772 616d 2e6d 652f  ike telegram.me/
-00011420: 796f 7572 5f62 6f74 3f73 7461 7274 3d58  your_bot?start=X
-00011430: 5858 5820 7468 6174 206f 7065 6e20 796f  XXX that open yo
-00011440: 7572 2062 6f74 2077 6974 6820 6120 7061  ur bot with a pa
-00011450: 7261 6d65 7465 722e 0a20 2020 203a 7061  rameter..    :pa
-00011460: 7261 6d20 746f 6b65 6e3a 2042 6f74 2773  ram token: Bot's
-00011470: 2074 6f6b 656e 2028 796f 7520 646f 6e27   token (you don'
-00011480: 7420 6e65 6564 2074 6f20 6669 6c6c 2074  t need to fill t
-00011490: 6869 7329 0a20 2020 203a 7061 7261 6d20  his).    :param 
-000114a0: 6361 6c6c 6261 636b 5f71 7565 7279 5f69  callback_query_i
-000114b0: 643a 2055 6e69 7175 6520 6964 656e 7469  d: Unique identi
-000114c0: 6669 6572 2066 6f72 2074 6865 2071 7565  fier for the que
-000114d0: 7279 2074 6f20 6265 2061 6e73 7765 7265  ry to be answere
-000114e0: 640a 2020 2020 3a70 6172 616d 2074 6578  d.    :param tex
-000114f0: 743a 2028 4f70 7469 6f6e 616c 2920 5465  t: (Optional) Te
-00011500: 7874 206f 6620 7468 6520 6e6f 7469 6669  xt of the notifi
-00011510: 6361 7469 6f6e 2e20 4966 206e 6f74 2073  cation. If not s
-00011520: 7065 6369 6669 6564 2c20 6e6f 7468 696e  pecified, nothin
-00011530: 6720 7769 6c6c 2062 6520 7368 6f77 6e20  g will be shown 
-00011540: 746f 2074 6865 2075 7365 722c 2030 2d32  to the user, 0-2
-00011550: 3030 2063 6861 7261 6374 6572 730a 2020  00 characters.  
-00011560: 2020 3a70 6172 616d 2073 686f 775f 616c    :param show_al
-00011570: 6572 743a 2028 4f70 7469 6f6e 616c 2920  ert: (Optional) 
-00011580: 4966 2074 7275 652c 2061 6e20 616c 6572  If true, an aler
-00011590: 7420 7769 6c6c 2062 6520 7368 6f77 6e20  t will be shown 
-000115a0: 6279 2074 6865 2063 6c69 656e 7420 696e  by the client in
-000115b0: 7374 6561 6420 6f66 2061 206e 6f74 6966  stead of a notif
-000115c0: 6963 6174 696f 6e20 6174 2074 6865 2074  ication at the t
-000115d0: 6f70 206f 6620 7468 6520 6368 6174 2073  op of the chat s
-000115e0: 6372 6565 6e2e 2044 6566 6175 6c74 7320  creen. Defaults 
-000115f0: 746f 2066 616c 7365 2e0a 2020 2020 3a70  to false..    :p
-00011600: 6172 616d 2075 726c 3a20 284f 7074 696f  aram url: (Optio
-00011610: 6e61 6c29 2055 524c 2074 6861 7420 7769  nal) URL that wi
-00011620: 6c6c 2062 6520 6f70 656e 6564 2062 7920  ll be opened by 
-00011630: 7468 6520 7573 6572 2773 2063 6c69 656e  the user's clien
-00011640: 742e 2049 6620 796f 7520 6861 7665 2063  t. If you have c
-00011650: 7265 6174 6564 2061 2047 616d 6520 616e  reated a Game an
-00011660: 6420 6163 6365 7074 6564 2074 6865 2063  d accepted the c
-00011670: 6f6e 6469 7469 6f6e 7320 7669 6120 4042  onditions via @B
-00011680: 6f74 6661 7468 6572 2c20 7370 6563 6966  otfather, specif
-00011690: 7920 7468 6520 5552 4c20 7468 6174 206f  y the URL that o
-000116a0: 7065 6e73 2079 6f75 7220 6761 6d65 20e2  pens your game .
-000116b0: 8093 206e 6f74 6520 7468 6174 2074 6869  .. note that thi
-000116c0: 7320 7769 6c6c 206f 6e6c 7920 776f 726b  s will only work
-000116d0: 2069 6620 7468 6520 7175 6572 7920 636f   if the query co
-000116e0: 6d65 7320 6672 6f6d 2061 2063 616c 6c62  mes from a callb
-000116f0: 6163 6b5f 6761 6d65 2062 7574 746f 6e2e  ack_game button.
-00011700: 0a20 2020 204f 7468 6572 7769 7365 2c20  .    Otherwise, 
-00011710: 796f 7520 6d61 7920 7573 6520 6c69 6e6b  you may use link
-00011720: 7320 6c69 6b65 2074 656c 6567 7261 6d2e  s like telegram.
-00011730: 6d65 2f79 6f75 725f 626f 743f 7374 6172  me/your_bot?star
-00011740: 743d 5858 5858 2074 6861 7420 6f70 656e  t=XXXX that open
-00011750: 2079 6f75 7220 626f 7420 7769 7468 2061   your bot with a
-00011760: 2070 6172 616d 6574 6572 2e0a 2020 2020   parameter..    
-00011770: 3a70 6172 616d 2063 6163 6865 5f74 696d  :param cache_tim
-00011780: 653a 2028 4f70 7469 6f6e 616c 2920 5468  e: (Optional) Th
-00011790: 6520 6d61 7869 6d75 6d20 616d 6f75 6e74  e maximum amount
-000117a0: 206f 6620 7469 6d65 2069 6e20 7365 636f   of time in seco
-000117b0: 6e64 7320 7468 6174 2074 6865 2072 6573  nds that the res
-000117c0: 756c 7420 6f66 2074 6865 2063 616c 6c62  ult of the callb
-000117d0: 6163 6b20 7175 6572 7920 6d61 7920 6265  ack query may be
-000117e0: 2063 6163 6865 6420 636c 6965 6e74 2d73   cached client-s
-000117f0: 6964 652e 2054 656c 6567 7261 6d20 6170  ide. Telegram ap
-00011800: 7073 2077 696c 6c20 7375 7070 6f72 7420  ps will support 
-00011810: 6361 6368 696e 6720 7374 6172 7469 6e67  caching starting
-00011820: 2069 6e20 7665 7273 696f 6e20 332e 3134   in version 3.14
-00011830: 2e20 4465 6661 756c 7473 2074 6f20 302e  . Defaults to 0.
-00011840: 0a20 2020 203a 7265 7475 726e 3a0a 2020  .    :return:.  
-00011850: 2020 2222 220a 2020 2020 6d65 7468 6f64    """.    method
-00011860: 5f75 726c 203d 2022 616e 7377 6572 4361  _url = "answerCa
-00011870: 6c6c 6261 636b 5175 6572 7922 0a20 2020  llbackQuery".   
-00011880: 2070 6179 6c6f 6164 203d 207b 2263 616c   payload = {"cal
-00011890: 6c62 6163 6b5f 7175 6572 795f 6964 223a  lback_query_id":
-000118a0: 2063 616c 6c62 6163 6b5f 7175 6572 795f   callback_query_
-000118b0: 6964 7d0a 2020 2020 6966 2074 6578 743a  id}.    if text:
-000118c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000118d0: 5b22 7465 7874 225d 203d 2074 6578 740a  ["text"] = text.
-000118e0: 2020 2020 6966 2073 686f 775f 616c 6572      if show_aler
-000118f0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-00011900: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00011910: 7368 6f77 5f61 6c65 7274 225d 203d 2073  show_alert"] = s
-00011920: 686f 775f 616c 6572 740a 2020 2020 6966  how_alert.    if
-00011930: 2075 726c 3a0a 2020 2020 2020 2020 7061   url:.        pa
-00011940: 796c 6f61 645b 2275 726c 225d 203d 2075  yload["url"] = u
-00011950: 726c 0a20 2020 2069 6620 6361 6368 655f  rl.    if cache_
-00011960: 7469 6d65 2069 7320 6e6f 7420 4e6f 6e65  time is not None
-00011970: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00011980: 645b 2263 6163 6865 5f74 696d 6522 5d20  d["cache_time"] 
-00011990: 3d20 6361 6368 655f 7469 6d65 0a20 2020  = cache_time.   
-000119a0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-000119b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-000119c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-000119d0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-000119e0: 2270 6f73 7422 290a 0a0a 6465 6620 6765  "post")...def ge
-000119f0: 745f 7573 6572 5f63 6861 745f 626f 6f73  t_user_chat_boos
-00011a00: 7473 2874 6f6b 656e 2c20 6368 6174 5f69  ts(token, chat_i
-00011a10: 642c 2075 7365 725f 6964 293a 0a20 2020  d, user_id):.   
-00011a20: 206d 6574 686f 645f 7572 6c20 3d20 2267   method_url = "g
-00011a30: 6574 5573 6572 4368 6174 426f 6f73 7473  etUserChatBoosts
-00011a40: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00011a50: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-00011a60: 5f69 642c 2022 7573 6572 5f69 6422 3a20  _id, "user_id": 
-00011a70: 7573 6572 5f69 647d 0a20 2020 2072 6574  user_id}.    ret
-00011a80: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00011a90: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00011aa0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00011ab0: 6f61 6429 0a0a 0a64 6566 2061 6e73 7765  oad)...def answe
-00011ac0: 725f 696e 6c69 6e65 5f71 7565 7279 280a  r_inline_query(.
-00011ad0: 2020 2020 746f 6b65 6e2c 0a20 2020 2069      token,.    i
-00011ae0: 6e6c 696e 655f 7175 6572 795f 6964 2c0a  nline_query_id,.
-00011af0: 2020 2020 7265 7375 6c74 732c 0a20 2020      results,.   
-00011b00: 2063 6163 6865 5f74 696d 653d 4e6f 6e65   cache_time=None
-00011b10: 2c0a 2020 2020 6973 5f70 6572 736f 6e61  ,.    is_persona
-00011b20: 6c3d 4e6f 6e65 2c0a 2020 2020 6e65 7874  l=None,.    next
-00011b30: 5f6f 6666 7365 743d 4e6f 6e65 2c0a 2020  _offset=None,.  
-00011b40: 2020 6275 7474 6f6e 3d4e 6f6e 652c 0a29    button=None,.)
-00011b50: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00011b60: 203d 2022 616e 7377 6572 496e 6c69 6e65   = "answerInline
-00011b70: 5175 6572 7922 0a20 2020 2070 6179 6c6f  Query".    paylo
-00011b80: 6164 203d 207b 0a20 2020 2020 2020 2022  ad = {.        "
-00011b90: 696e 6c69 6e65 5f71 7565 7279 5f69 6422  inline_query_id"
-00011ba0: 3a20 696e 6c69 6e65 5f71 7565 7279 5f69  : inline_query_i
-00011bb0: 642c 0a20 2020 2020 2020 2022 7265 7375  d,.        "resu
-00011bc0: 6c74 7322 3a20 5f63 6f6e 7665 7274 5f6c  lts": _convert_l
-00011bd0: 6973 745f 6a73 6f6e 5f73 6572 6961 6c69  ist_json_seriali
-00011be0: 7a61 626c 6528 7265 7375 6c74 7329 2c0a  zable(results),.
-00011bf0: 2020 2020 7d0a 2020 2020 6966 2063 6163      }.    if cac
-00011c00: 6865 5f74 696d 6520 6973 206e 6f74 204e  he_time is not N
-00011c10: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00011c20: 6c6f 6164 5b22 6361 6368 655f 7469 6d65  load["cache_time
-00011c30: 225d 203d 2063 6163 6865 5f74 696d 650a  "] = cache_time.
-00011c40: 2020 2020 6966 2069 735f 7065 7273 6f6e      if is_person
-00011c50: 616c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  al is not None:.
-00011c60: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00011c70: 2269 735f 7065 7273 6f6e 616c 225d 203d  "is_personal"] =
-00011c80: 2069 735f 7065 7273 6f6e 616c 0a20 2020   is_personal.   
-00011c90: 2069 6620 6e65 7874 5f6f 6666 7365 7420   if next_offset 
-00011ca0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00011cb0: 2020 2020 2070 6179 6c6f 6164 5b22 6e65       payload["ne
-00011cc0: 7874 5f6f 6666 7365 7422 5d20 3d20 6e65  xt_offset"] = ne
-00011cd0: 7874 5f6f 6666 7365 740a 2020 2020 6966  xt_offset.    if
-00011ce0: 2062 7574 746f 6e20 6973 206e 6f74 204e   button is not N
-00011cf0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00011d00: 6c6f 6164 5b22 6275 7474 6f6e 225d 203d  load["button"] =
-00011d10: 2062 7574 746f 6e2e 746f 5f6a 736f 6e28   button.to_json(
-00011d20: 290a 2020 2020 7265 7475 726e 205f 6d61  ).    return _ma
-00011d30: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00011d40: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00011d50: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-00011d60: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-00011d70: 6566 2067 6574 5f73 7469 636b 6572 5f73  ef get_sticker_s
-00011d80: 6574 2874 6f6b 656e 2c20 6e61 6d65 293a  et(token, name):
-00011d90: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00011da0: 3d20 2267 6574 5374 6963 6b65 7253 6574  = "getStickerSet
-00011db0: 220a 2020 2020 7265 7475 726e 205f 6d61  ".    return _ma
-00011dc0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00011dd0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00011de0: 7261 6d73 3d7b 226e 616d 6522 3a20 6e61  rams={"name": na
-00011df0: 6d65 7d29 0a0a 0a64 6566 2067 6574 5f63  me})...def get_c
-00011e00: 7573 746f 6d5f 656d 6f6a 695f 7374 6963  ustom_emoji_stic
-00011e10: 6b65 7273 2874 6f6b 656e 2c20 6375 7374  kers(token, cust
-00011e20: 6f6d 5f65 6d6f 6a69 5f69 6473 293a 0a20  om_emoji_ids):. 
-00011e30: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00011e40: 7222 6765 7443 7573 746f 6d45 6d6f 6a69  r"getCustomEmoji
-00011e50: 5374 6963 6b65 7273 220a 2020 2020 7265  Stickers".    re
-00011e60: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00011e70: 7374 280a 2020 2020 2020 2020 746f 6b65  st(.        toke
-00011e80: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00011e90: 6172 616d 733d 7b22 6375 7374 6f6d 5f65  arams={"custom_e
-00011ea0: 6d6f 6a69 5f69 6473 223a 206a 736f 6e2e  moji_ids": json.
-00011eb0: 6475 6d70 7328 6375 7374 6f6d 5f65 6d6f  dumps(custom_emo
-00011ec0: 6a69 5f69 6473 297d 0a20 2020 2029 0a0a  ji_ids)}.    )..
-00011ed0: 0a64 6566 2073 6574 5f73 7469 636b 6572  .def set_sticker
-00011ee0: 5f6b 6579 776f 7264 7328 746f 6b65 6e2c  _keywords(token,
-00011ef0: 2073 7469 636b 6572 2c20 6b65 7977 6f72   sticker, keywor
-00011f00: 6473 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ds=None):.    me
-00011f10: 7468 6f64 5f75 726c 203d 2022 7365 7453  thod_url = "setS
-00011f20: 7469 636b 6572 4b65 7977 6f72 6473 220a  tickerKeywords".
-00011f30: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
-00011f40: 7374 6963 6b65 7222 3a20 7374 6963 6b65  sticker": sticke
-00011f50: 727d 0a20 2020 2069 6620 6b65 7977 6f72  r}.    if keywor
-00011f60: 6473 3a0a 2020 2020 2020 2020 7061 796c  ds:.        payl
-00011f70: 6f61 645b 226b 6579 776f 7264 7322 5d20  oad["keywords"] 
-00011f80: 3d20 6a73 6f6e 2e64 756d 7073 286b 6579  = json.dumps(key
-00011f90: 776f 7264 7329 0a20 2020 2072 6574 7572  words).    retur
-00011fa0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00011fb0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00011fc0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00011fd0: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
-00011fe0: 290a 0a0a 6465 6620 7365 745f 7374 6963  )...def set_stic
-00011ff0: 6b65 725f 6d61 736b 5f70 6f73 6974 696f  ker_mask_positio
-00012000: 6e28 746f 6b65 6e2c 2073 7469 636b 6572  n(token, sticker
-00012010: 2c20 6d61 736b 5f70 6f73 6974 696f 6e3d  , mask_position=
-00012020: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-00012030: 645f 7572 6c20 3d20 2273 6574 5374 6963  d_url = "setStic
-00012040: 6b65 724d 6173 6b50 6f73 6974 696f 6e22  kerMaskPosition"
-00012050: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00012060: 2273 7469 636b 6572 223a 2073 7469 636b  "sticker": stick
-00012070: 6572 7d0a 2020 2020 6966 206d 6173 6b5f  er}.    if mask_
-00012080: 706f 7369 7469 6f6e 3a0a 2020 2020 2020  position:.      
-00012090: 2020 7061 796c 6f61 645b 226d 6173 6b5f    payload["mask_
-000120a0: 706f 7369 7469 6f6e 225d 203d 206d 6173  position"] = mas
-000120b0: 6b5f 706f 7369 7469 6f6e 2e74 6f5f 6a73  k_position.to_js
-000120c0: 6f6e 2829 0a20 2020 2072 6574 7572 6e20  on().    return 
-000120d0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-000120e0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-000120f0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-00012100: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-00012110: 0a0a 6465 6620 7570 6c6f 6164 5f73 7469  ..def upload_sti
-00012120: 636b 6572 5f66 696c 6528 746f 6b65 6e2c  cker_file(token,
-00012130: 2075 7365 725f 6964 2c20 7374 6963 6b65   user_id, sticke
-00012140: 722c 2073 7469 636b 6572 5f66 6f72 6d61  r, sticker_forma
-00012150: 7429 3a0a 2020 2020 6d65 7468 6f64 5f75  t):.    method_u
-00012160: 726c 203d 2022 7570 6c6f 6164 5374 6963  rl = "uploadStic
-00012170: 6b65 7246 696c 6522 0a20 2020 2070 6179  kerFile".    pay
-00012180: 6c6f 6164 203d 207b 2275 7365 725f 6964  load = {"user_id
-00012190: 223a 2075 7365 725f 6964 2c20 2273 7469  ": user_id, "sti
-000121a0: 636b 6572 5f66 6f72 6d61 7422 3a20 7374  cker_format": st
-000121b0: 6963 6b65 725f 666f 726d 6174 7d0a 2020  icker_format}.  
-000121c0: 2020 6669 6c65 7320 3d20 7b22 7374 6963    files = {"stic
-000121d0: 6b65 7222 3a20 7374 6963 6b65 727d 0a20  ker": sticker}. 
-000121e0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-000121f0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00012200: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00012210: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
-00012220: 3d66 696c 6573 2c20 6d65 7468 6f64 3d22  =files, method="
-00012230: 706f 7374 2229 0a0a 0a64 6566 2073 6574  post")...def set
-00012240: 5f63 7573 746f 6d5f 656d 6f6a 695f 7374  _custom_emoji_st
-00012250: 6963 6b65 725f 7365 745f 7468 756d 626e  icker_set_thumbn
-00012260: 6169 6c28 746f 6b65 6e2c 206e 616d 652c  ail(token, name,
-00012270: 2063 7573 746f 6d5f 656d 6f6a 695f 6964   custom_emoji_id
-00012280: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-00012290: 6f64 5f75 726c 203d 2022 7365 7443 7573  od_url = "setCus
-000122a0: 746f 6d45 6d6f 6a69 5374 6963 6b65 7253  tomEmojiStickerS
-000122b0: 6574 5468 756d 626e 6169 6c22 0a20 2020  etThumbnail".   
-000122c0: 2070 6179 6c6f 6164 203d 207b 226e 616d   payload = {"nam
-000122d0: 6522 3a20 6e61 6d65 7d0a 2020 2020 6966  e": name}.    if
-000122e0: 2063 7573 746f 6d5f 656d 6f6a 695f 6964   custom_emoji_id
-000122f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00012300: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
-00012310: 7573 746f 6d5f 656d 6f6a 695f 6964 225d  ustom_emoji_id"]
-00012320: 203d 2063 7573 746f 6d5f 656d 6f6a 695f   = custom_emoji_
-00012330: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
-00012340: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00012350: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012360: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-00012370: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-00012380: 6465 6620 7365 745f 7374 6963 6b65 725f  def set_sticker_
-00012390: 7365 745f 7469 746c 6528 746f 6b65 6e2c  set_title(token,
-000123a0: 206e 616d 652c 2074 6974 6c65 293a 0a20   name, title):. 
-000123b0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000123c0: 2273 6574 5374 6963 6b65 7253 6574 5469  "setStickerSetTi
-000123d0: 746c 6522 0a20 2020 2070 6179 6c6f 6164  tle".    payload
-000123e0: 203d 207b 226e 616d 6522 3a20 6e61 6d65   = {"name": name
-000123f0: 2c20 2274 6974 6c65 223a 2074 6974 6c65  , "title": title
-00012400: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-00012410: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00012420: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00012430: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-00012440: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
-00012450: 6566 2064 656c 6574 655f 7374 6963 6b65  ef delete_sticke
-00012460: 725f 7365 7428 746f 6b65 6e2c 206e 616d  r_set(token, nam
-00012470: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00012480: 726c 203d 2022 6465 6c65 7465 5374 6963  rl = "deleteStic
-00012490: 6b65 7253 6574 220a 2020 2020 7061 796c  kerSet".    payl
-000124a0: 6f61 6420 3d20 7b22 6e61 6d65 223a 206e  oad = {"name": n
-000124b0: 616d 657d 0a20 2020 2072 6574 7572 6e20  ame}.    return 
-000124c0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-000124d0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-000124e0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-000124f0: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-00012500: 0a0a 6465 6620 7365 745f 7374 6963 6b65  ..def set_sticke
-00012510: 725f 656d 6f6a 695f 6c69 7374 2874 6f6b  r_emoji_list(tok
-00012520: 656e 2c20 7374 6963 6b65 722c 2065 6d6f  en, sticker, emo
-00012530: 6a69 5f6c 6973 7429 3a0a 2020 2020 6d65  ji_list):.    me
-00012540: 7468 6f64 5f75 726c 203d 2022 7365 7453  thod_url = "setS
-00012550: 7469 636b 6572 456d 6f6a 694c 6973 7422  tickerEmojiList"
-00012560: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00012570: 2273 7469 636b 6572 223a 2073 7469 636b  "sticker": stick
-00012580: 6572 2c20 2265 6d6f 6a69 5f6c 6973 7422  er, "emoji_list"
-00012590: 3a20 6a73 6f6e 2e64 756d 7073 2865 6d6f  : json.dumps(emo
-000125a0: 6a69 5f6c 6973 7429 7d0a 2020 2020 7265  ji_list)}.    re
-000125b0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-000125c0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-000125d0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-000125e0: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-000125f0: 7374 2229 0a0a 0a64 6566 2063 7265 6174  st")...def creat
-00012600: 655f 6e65 775f 7374 6963 6b65 725f 7365  e_new_sticker_se
-00012610: 7428 0a20 2020 2074 6f6b 656e 2c20 7573  t(.    token, us
-00012620: 6572 5f69 642c 206e 616d 652c 2074 6974  er_id, name, tit
-00012630: 6c65 2c20 7374 6963 6b65 7273 2c20 7374  le, stickers, st
-00012640: 6963 6b65 725f 7479 7065 3d4e 6f6e 652c  icker_type=None,
-00012650: 206e 6565 6473 5f72 6570 6169 6e74 696e   needs_repaintin
-00012660: 673d 4e6f 6e65 0a29 3a0a 2020 2020 6d65  g=None.):.    me
-00012670: 7468 6f64 5f75 726c 203d 2022 6372 6561  thod_url = "crea
-00012680: 7465 4e65 7753 7469 636b 6572 5365 7422  teNewStickerSet"
-00012690: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-000126a0: 2275 7365 725f 6964 223a 2075 7365 725f  "user_id": user_
-000126b0: 6964 2c20 226e 616d 6522 3a20 6e61 6d65  id, "name": name
-000126c0: 2c20 2274 6974 6c65 223a 2074 6974 6c65  , "title": title
-000126d0: 7d0a 2020 2020 6966 2073 7469 636b 6572  }.    if sticker
-000126e0: 5f74 7970 653a 0a20 2020 2020 2020 2070  _type:.        p
-000126f0: 6179 6c6f 6164 5b22 7374 6963 6b65 725f  ayload["sticker_
-00012700: 7479 7065 225d 203d 2073 7469 636b 6572  type"] = sticker
-00012710: 5f74 7970 650a 2020 2020 6966 206e 6565  _type.    if nee
-00012720: 6473 5f72 6570 6169 6e74 696e 6720 6973  ds_repainting is
-00012730: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00012740: 2020 2070 6179 6c6f 6164 5b22 6e65 6564     payload["need
-00012750: 735f 7265 7061 696e 7469 6e67 225d 203d  s_repainting"] =
-00012760: 206e 6565 6473 5f72 6570 6169 6e74 696e   needs_repaintin
-00012770: 670a 0a20 2020 2066 696c 6573 203d 207b  g..    files = {
-00012780: 7d0a 2020 2020 6c73 7420 3d20 5b5d 0a0a  }.    lst = []..
-00012790: 2020 2020 666f 7220 7374 6963 6b65 7220      for sticker 
-000127a0: 696e 2073 7469 636b 6572 733a 0a20 2020  in stickers:.   
-000127b0: 2020 2020 206a 736f 6e5f 6469 6374 2c20       json_dict, 
-000127c0: 6669 6c65 203d 2073 7469 636b 6572 2e63  file = sticker.c
-000127d0: 6f6e 7665 7274 5f69 6e70 7574 5f73 7469  onvert_input_sti
-000127e0: 636b 6572 2829 0a20 2020 2020 2020 206a  cker().        j
-000127f0: 736f 6e5f 6469 6374 203d 2073 7469 636b  son_dict = stick
-00012800: 6572 2e74 6f5f 6469 6374 2829 0a0a 2020  er.to_dict()..  
-00012810: 2020 2020 2020 6966 2066 696c 653a 0a20        if file:. 
-00012820: 2020 2020 2020 2020 2020 206c 6973 745f             list_
-00012830: 6b65 7973 203d 206c 6973 7428 6669 6c65  keys = list(file
-00012840: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
-00012850: 2020 2020 2066 696c 6573 5b6c 6973 745f       files[list_
-00012860: 6b65 7973 5b30 5d5d 203d 2066 696c 655b  keys[0]] = file[
-00012870: 6c69 7374 5f6b 6579 735b 305d 5d0a 2020  list_keys[0]].  
-00012880: 2020 2020 2020 6c73 742e 6170 7065 6e64        lst.append
-00012890: 286a 736f 6e5f 6469 6374 290a 0a20 2020  (json_dict)..   
-000128a0: 2070 6179 6c6f 6164 5b22 7374 6963 6b65   payload["sticke
-000128b0: 7273 225d 203d 206a 736f 6e2e 6475 6d70  rs"] = json.dump
-000128c0: 7328 6c73 7429 0a0a 2020 2020 7265 7475  s(lst)..    retu
-000128d0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-000128e0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000128f0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00012900: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00012910: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-00012920: 0a0a 6465 6620 6164 645f 7374 6963 6b65  ..def add_sticke
-00012930: 725f 746f 5f73 6574 2874 6f6b 656e 2c20  r_to_set(token, 
-00012940: 7573 6572 5f69 642c 206e 616d 652c 2073  user_id, name, s
-00012950: 7469 636b 6572 293a 0a20 2020 206d 6574  ticker):.    met
-00012960: 686f 645f 7572 6c20 3d20 2261 6464 5374  hod_url = "addSt
-00012970: 6963 6b65 7254 6f53 6574 220a 2020 2020  ickerToSet".    
-00012980: 6a73 6f6e 5f64 6963 742c 2066 696c 6573  json_dict, files
-00012990: 203d 2073 7469 636b 6572 2e63 6f6e 7665   = sticker.conve
-000129a0: 7274 5f69 6e70 7574 5f73 7469 636b 6572  rt_input_sticker
-000129b0: 2829 0a20 2020 2070 6179 6c6f 6164 203d  ().    payload =
-000129c0: 207b 2275 7365 725f 6964 223a 2075 7365   {"user_id": use
-000129d0: 725f 6964 2c20 226e 616d 6522 3a20 6e61  r_id, "name": na
-000129e0: 6d65 2c20 2273 7469 636b 6572 223a 206a  me, "sticker": j
-000129f0: 736f 6e5f 6469 6374 7d0a 2020 2020 7265  son_dict}.    re
-00012a00: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00012a10: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00012a20: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00012a30: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00012a40: 732c 206d 6574 686f 643d 2270 6f73 7422  s, method="post"
-00012a50: 290a 0a0a 6465 6620 7365 745f 7374 6963  )...def set_stic
-00012a60: 6b65 725f 706f 7369 7469 6f6e 5f69 6e5f  ker_position_in_
-00012a70: 7365 7428 746f 6b65 6e2c 2073 7469 636b  set(token, stick
-00012a80: 6572 2c20 706f 7369 7469 6f6e 293a 0a20  er, position):. 
-00012a90: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00012aa0: 2273 6574 5374 6963 6b65 7250 6f73 6974  "setStickerPosit
-00012ab0: 696f 6e49 6e53 6574 220a 2020 2020 7061  ionInSet".    pa
-00012ac0: 796c 6f61 6420 3d20 7b22 7374 6963 6b65  yload = {"sticke
-00012ad0: 7222 3a20 7374 6963 6b65 722c 2022 706f  r": sticker, "po
-00012ae0: 7369 7469 6f6e 223a 2070 6f73 6974 696f  sition": positio
-00012af0: 6e7d 0a20 2020 2072 6574 7572 6e20 5f6d  n}.    return _m
-00012b00: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00012b10: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012b20: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-00012b30: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-00012b40: 6465 6620 6465 6c65 7465 5f73 7469 636b  def delete_stick
-00012b50: 6572 5f66 726f 6d5f 7365 7428 746f 6b65  er_from_set(toke
-00012b60: 6e2c 2073 7469 636b 6572 293a 0a20 2020  n, sticker):.   
-00012b70: 206d 6574 686f 645f 7572 6c20 3d20 2264   method_url = "d
-00012b80: 656c 6574 6553 7469 636b 6572 4672 6f6d  eleteStickerFrom
-00012b90: 5365 7422 0a20 2020 2070 6179 6c6f 6164  Set".    payload
-00012ba0: 203d 207b 2273 7469 636b 6572 223a 2073   = {"sticker": s
-00012bb0: 7469 636b 6572 7d0a 2020 2020 7265 7475  ticker}.    retu
-00012bc0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00012bd0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00012be0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00012bf0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
-00012c00: 2229 0a0a 0a64 6566 2061 6e73 7765 725f  ")...def answer_
-00012c10: 7765 625f 6170 705f 7175 6572 7928 746f  web_app_query(to
-00012c20: 6b65 6e2c 2077 6562 5f61 7070 5f71 7565  ken, web_app_que
-00012c30: 7279 5f69 642c 2072 6573 756c 743a 2074  ry_id, result: t
-00012c40: 7970 6573 2e49 6e6c 696e 6551 7565 7279  ypes.InlineQuery
-00012c50: 5265 7375 6c74 4261 7365 293a 0a20 2020  ResultBase):.   
-00012c60: 206d 6574 686f 645f 7572 6c20 3d20 2261   method_url = "a
-00012c70: 6e73 7765 7257 6562 4170 7051 7565 7279  nswerWebAppQuery
-00012c80: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00012c90: 7b22 7765 625f 6170 705f 7175 6572 795f  {"web_app_query_
-00012ca0: 6964 223a 2077 6562 5f61 7070 5f71 7565  id": web_app_que
-00012cb0: 7279 5f69 642c 2022 7265 7375 6c74 223a  ry_id, "result":
-00012cc0: 2072 6573 756c 742e 746f 5f6a 736f 6e28   result.to_json(
-00012cd0: 297d 0a20 2020 2072 6574 7572 6e20 5f6d  )}.    return _m
-00012ce0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00012cf0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012d00: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-00012d10: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-00012d20: 6465 6620 6372 6561 7465 5f69 6e76 6f69  def create_invoi
-00012d30: 6365 5f6c 696e 6b28 0a20 2020 2074 6f6b  ce_link(.    tok
-00012d40: 656e 2c0a 2020 2020 7469 746c 652c 0a20  en,.    title,. 
-00012d50: 2020 2064 6573 6372 6970 7469 6f6e 2c0a     description,.
-00012d60: 2020 2020 7061 796c 6f61 642c 0a20 2020      payload,.   
-00012d70: 2070 726f 7669 6465 725f 746f 6b65 6e2c   provider_token,
-00012d80: 0a20 2020 2063 7572 7265 6e63 792c 0a20  .    currency,. 
-00012d90: 2020 2070 7269 6365 732c 0a20 2020 206d     prices,.    m
-00012da0: 6178 5f74 6970 5f61 6d6f 756e 743d 4e6f  ax_tip_amount=No
-00012db0: 6e65 2c0a 2020 2020 7375 6767 6573 7465  ne,.    suggeste
-00012dc0: 645f 7469 705f 616d 6f75 6e74 733d 4e6f  d_tip_amounts=No
-00012dd0: 6e65 2c0a 2020 2020 7072 6f76 6964 6572  ne,.    provider
-00012de0: 5f64 6174 613d 4e6f 6e65 2c0a 2020 2020  _data=None,.    
-00012df0: 7068 6f74 6f5f 7572 6c3d 4e6f 6e65 2c0a  photo_url=None,.
-00012e00: 2020 2020 7068 6f74 6f5f 7369 7a65 3d4e      photo_size=N
-00012e10: 6f6e 652c 0a20 2020 2070 686f 746f 5f77  one,.    photo_w
-00012e20: 6964 7468 3d4e 6f6e 652c 0a20 2020 2070  idth=None,.    p
-00012e30: 686f 746f 5f68 6569 6768 743d 4e6f 6e65  hoto_height=None
-00012e40: 2c0a 2020 2020 6e65 6564 5f6e 616d 653d  ,.    need_name=
-00012e50: 4e6f 6e65 2c0a 2020 2020 6e65 6564 5f70  None,.    need_p
-00012e60: 686f 6e65 5f6e 756d 6265 723d 4e6f 6e65  hone_number=None
-00012e70: 2c0a 2020 2020 6e65 6564 5f65 6d61 696c  ,.    need_email
-00012e80: 3d4e 6f6e 652c 0a20 2020 206e 6565 645f  =None,.    need_
-00012e90: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
-00012ea0: 3d4e 6f6e 652c 0a20 2020 2073 656e 645f  =None,.    send_
-00012eb0: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
-00012ec0: 7072 6f76 6964 6572 3d4e 6f6e 652c 0a20  provider=None,. 
-00012ed0: 2020 2073 656e 645f 656d 6169 6c5f 746f     send_email_to
-00012ee0: 5f70 726f 7669 6465 723d 4e6f 6e65 2c0a  _provider=None,.
-00012ef0: 2020 2020 6973 5f66 6c65 7869 626c 653d      is_flexible=
-00012f00: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
-00012f10: 686f 645f 7572 6c20 3d20 7222 6372 6561  hod_url = r"crea
-00012f20: 7465 496e 766f 6963 654c 696e 6b22 0a20  teInvoiceLink". 
-00012f30: 2020 2070 6179 6c6f 6164 203d 207b 0a20     payload = {. 
-00012f40: 2020 2020 2020 2022 7469 746c 6522 3a20         "title": 
-00012f50: 7469 746c 652c 0a20 2020 2020 2020 2022  title,.        "
-00012f60: 6465 7363 7269 7074 696f 6e22 3a20 6465  description": de
-00012f70: 7363 7269 7074 696f 6e2c 0a20 2020 2020  scription,.     
-00012f80: 2020 2022 7061 796c 6f61 6422 3a20 7061     "payload": pa
-00012f90: 796c 6f61 642c 0a20 2020 2020 2020 2022  yload,.        "
-00012fa0: 7072 6f76 6964 6572 5f74 6f6b 656e 223a  provider_token":
-00012fb0: 2070 726f 7669 6465 725f 746f 6b65 6e2c   provider_token,
-00012fc0: 0a20 2020 2020 2020 2022 6375 7272 656e  .        "curren
-00012fd0: 6379 223a 2063 7572 7265 6e63 792c 0a20  cy": currency,. 
-00012fe0: 2020 2020 2020 2022 7072 6963 6573 223a         "prices":
-00012ff0: 205f 636f 6e76 6572 745f 6c69 7374 5f6a   _convert_list_j
-00013000: 736f 6e5f 7365 7269 616c 697a 6162 6c65  son_serializable
-00013010: 2870 7269 6365 7329 2c0a 2020 2020 7d0a  (prices),.    }.
-00013020: 2020 2020 6966 206d 6178 5f74 6970 5f61      if max_tip_a
-00013030: 6d6f 756e 743a 0a20 2020 2020 2020 2070  mount:.        p
-00013040: 6179 6c6f 6164 5b22 6d61 785f 7469 705f  ayload["max_tip_
-00013050: 616d 6f75 6e74 225d 203d 206d 6178 5f74  amount"] = max_t
-00013060: 6970 5f61 6d6f 756e 740a 2020 2020 6966  ip_amount.    if
-00013070: 2073 7567 6765 7374 6564 5f74 6970 5f61   suggested_tip_a
-00013080: 6d6f 756e 7473 3a0a 2020 2020 2020 2020  mounts:.        
-00013090: 7061 796c 6f61 645b 2273 7567 6765 7374  payload["suggest
-000130a0: 6564 5f74 6970 5f61 6d6f 756e 7473 225d  ed_tip_amounts"]
-000130b0: 203d 206a 736f 6e2e 6475 6d70 7328 7375   = json.dumps(su
-000130c0: 6767 6573 7465 645f 7469 705f 616d 6f75  ggested_tip_amou
-000130d0: 6e74 7329 0a20 2020 2069 6620 7072 6f76  nts).    if prov
-000130e0: 6964 6572 5f64 6174 613a 0a20 2020 2020  ider_data:.     
-000130f0: 2020 2070 6179 6c6f 6164 5b22 7072 6f76     payload["prov
-00013100: 6964 6572 5f64 6174 6122 5d20 3d20 7072  ider_data"] = pr
-00013110: 6f76 6964 6572 5f64 6174 610a 2020 2020  ovider_data.    
-00013120: 6966 2070 686f 746f 5f75 726c 3a0a 2020  if photo_url:.  
-00013130: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-00013140: 686f 746f 5f75 726c 225d 203d 2070 686f  hoto_url"] = pho
-00013150: 746f 5f75 726c 0a20 2020 2069 6620 7068  to_url.    if ph
-00013160: 6f74 6f5f 7369 7a65 3a0a 2020 2020 2020  oto_size:.      
-00013170: 2020 7061 796c 6f61 645b 2270 686f 746f    payload["photo
-00013180: 5f73 697a 6522 5d20 3d20 7068 6f74 6f5f  _size"] = photo_
-00013190: 7369 7a65 0a20 2020 2069 6620 7068 6f74  size.    if phot
-000131a0: 6f5f 7769 6474 683a 0a20 2020 2020 2020  o_width:.       
-000131b0: 2070 6179 6c6f 6164 5b22 7068 6f74 6f5f   payload["photo_
-000131c0: 7769 6474 6822 5d20 3d20 7068 6f74 6f5f  width"] = photo_
-000131d0: 7769 6474 680a 2020 2020 6966 2070 686f  width.    if pho
-000131e0: 746f 5f68 6569 6768 743a 0a20 2020 2020  to_height:.     
-000131f0: 2020 2070 6179 6c6f 6164 5b22 7068 6f74     payload["phot
-00013200: 6f5f 6865 6967 6874 225d 203d 2070 686f  o_height"] = pho
-00013210: 746f 5f68 6569 6768 740a 2020 2020 6966  to_height.    if
-00013220: 206e 6565 645f 6e61 6d65 2069 7320 6e6f   need_name is no
-00013230: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00013240: 7061 796c 6f61 645b 226e 6565 645f 6e61  payload["need_na
-00013250: 6d65 225d 203d 206e 6565 645f 6e61 6d65  me"] = need_name
-00013260: 0a20 2020 2069 6620 6e65 6564 5f70 686f  .    if need_pho
-00013270: 6e65 5f6e 756d 6265 7220 6973 206e 6f74  ne_number is not
-00013280: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00013290: 6179 6c6f 6164 5b22 6e65 6564 5f70 686f  ayload["need_pho
-000132a0: 6e65 5f6e 756d 6265 7222 5d20 3d20 6e65  ne_number"] = ne
-000132b0: 6564 5f70 686f 6e65 5f6e 756d 6265 720a  ed_phone_number.
-000132c0: 2020 2020 6966 206e 6565 645f 656d 6169      if need_emai
-000132d0: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
-000132e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000132f0: 6e65 6564 5f65 6d61 696c 225d 203d 206e  need_email"] = n
-00013300: 6565 645f 656d 6169 6c0a 2020 2020 6966  eed_email.    if
-00013310: 206e 6565 645f 7368 6970 7069 6e67 5f61   need_shipping_a
-00013320: 6464 7265 7373 2069 7320 6e6f 7420 4e6f  ddress is not No
-00013330: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00013340: 6f61 645b 226e 6565 645f 7368 6970 7069  oad["need_shippi
-00013350: 6e67 5f61 6464 7265 7373 225d 203d 206e  ng_address"] = n
-00013360: 6565 645f 7368 6970 7069 6e67 5f61 6464  eed_shipping_add
-00013370: 7265 7373 0a20 2020 2069 6620 7365 6e64  ress.    if send
-00013380: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-00013390: 5f70 726f 7669 6465 7220 6973 206e 6f74  _provider is not
-000133a0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000133b0: 6179 6c6f 6164 5b22 7365 6e64 5f70 686f  ayload["send_pho
-000133c0: 6e65 5f6e 756d 6265 725f 746f 5f70 726f  ne_number_to_pro
-000133d0: 7669 6465 7222 5d20 3d20 7365 6e64 5f70  vider"] = send_p
-000133e0: 686f 6e65 5f6e 756d 6265 725f 746f 5f70  hone_number_to_p
-000133f0: 726f 7669 6465 720a 2020 2020 6966 2073  rovider.    if s
-00013400: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
-00013410: 7669 6465 7220 6973 206e 6f74 204e 6f6e  vider is not Non
-00013420: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00013430: 6164 5b22 7365 6e64 5f65 6d61 696c 5f74  ad["send_email_t
-00013440: 6f5f 7072 6f76 6964 6572 225d 203d 2073  o_provider"] = s
-00013450: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
-00013460: 7669 6465 720a 2020 2020 6966 2069 735f  vider.    if is_
-00013470: 666c 6578 6962 6c65 2069 7320 6e6f 7420  flexible is not 
-00013480: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00013490: 796c 6f61 645b 2269 735f 666c 6578 6962  yload["is_flexib
-000134a0: 6c65 225d 203d 2069 735f 666c 6578 6962  le"] = is_flexib
-000134b0: 6c65 0a20 2020 2072 6574 7572 6e20 5f6d  le.    return _m
-000134c0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-000134d0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-000134e0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-000134f0: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-00013500: 2320 6e6f 696e 7370 6563 7469 6f6e 2050  # noinspection P
-00013510: 7953 6861 646f 7769 6e67 4275 696c 7469  yShadowingBuilti
-00013520: 6e73 0a64 6566 2073 656e 645f 706f 6c6c  ns.def send_poll
-00013530: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-00013540: 2063 6861 745f 6964 2c0a 2020 2020 7175   chat_id,.    qu
-00013550: 6573 7469 6f6e 2c0a 2020 2020 6f70 7469  estion,.    opti
-00013560: 6f6e 732c 0a20 2020 2069 735f 616e 6f6e  ons,.    is_anon
-00013570: 796d 6f75 733d 4e6f 6e65 2c0a 2020 2020  ymous=None,.    
-00013580: 7479 7065 3d4e 6f6e 652c 0a20 2020 2061  type=None,.    a
-00013590: 6c6c 6f77 735f 6d75 6c74 6970 6c65 5f61  llows_multiple_a
-000135a0: 6e73 7765 7273 3d4e 6f6e 652c 0a20 2020  nswers=None,.   
-000135b0: 2063 6f72 7265 6374 5f6f 7074 696f 6e5f   correct_option_
-000135c0: 6964 3d4e 6f6e 652c 0a20 2020 2065 7870  id=None,.    exp
-000135d0: 6c61 6e61 7469 6f6e 3d4e 6f6e 652c 0a20  lanation=None,. 
-000135e0: 2020 2065 7870 6c61 6e61 7469 6f6e 5f70     explanation_p
-000135f0: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c0a  arse_mode=None,.
-00013600: 2020 2020 6f70 656e 5f70 6572 696f 643d      open_period=
-00013610: 4e6f 6e65 2c0a 2020 2020 636c 6f73 655f  None,.    close_
-00013620: 6461 7465 3d4e 6f6e 652c 0a20 2020 2069  date=None,.    i
-00013630: 735f 636c 6f73 6564 3d4e 6f6e 652c 0a20  s_closed=None,. 
-00013640: 2020 2064 6973 6162 6c65 5f6e 6f74 6966     disable_notif
-00013650: 6963 6174 696f 6e3d 4661 6c73 652c 0a20  ication=False,. 
-00013660: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
-00013670: 4e6f 6e65 2c0a 2020 2020 7469 6d65 6f75  None,.    timeou
-00013680: 743d 4e6f 6e65 2c0a 2020 2020 6578 706c  t=None,.    expl
-00013690: 616e 6174 696f 6e5f 656e 7469 7469 6573  anation_entities
-000136a0: 3d4e 6f6e 652c 0a20 2020 2070 726f 7465  =None,.    prote
-000136b0: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-000136c0: 0a20 2020 206d 6573 7361 6765 5f74 6872  .    message_thr
-000136d0: 6561 645f 6964 3d4e 6f6e 652c 0a20 2020  ead_id=None,.   
-000136e0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-000136f0: 733d 4e6f 6e65 2c0a 2020 2020 6275 7369  s=None,.    busi
-00013700: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00013710: 6964 3d4e 6f6e 652c 0a29 3a0a 2020 2020  id=None,.):.    
-00013720: 6d65 7468 6f64 5f75 726c 203d 2072 2273  method_url = r"s
-00013730: 656e 6450 6f6c 6c22 0a20 2020 2070 6179  endPoll".    pay
-00013740: 6c6f 6164 203d 207b 0a20 2020 2020 2020  load = {.       
-00013750: 2022 6368 6174 5f69 6422 3a20 7374 7228   "chat_id": str(
-00013760: 6368 6174 5f69 6429 2c0a 2020 2020 2020  chat_id),.      
-00013770: 2020 2271 7565 7374 696f 6e22 3a20 7175    "question": qu
-00013780: 6573 7469 6f6e 2c0a 2020 2020 2020 2020  estion,.        
-00013790: 226f 7074 696f 6e73 223a 206a 736f 6e2e  "options": json.
-000137a0: 6475 6d70 7328 5f63 6f6e 7665 7274 5f70  dumps(_convert_p
-000137b0: 6f6c 6c5f 6f70 7469 6f6e 7328 6f70 7469  oll_options(opti
-000137c0: 6f6e 7329 292c 0a20 2020 207d 0a0a 2020  ons)),.    }..  
-000137d0: 2020 6966 2069 735f 616e 6f6e 796d 6f75    if is_anonymou
-000137e0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-000137f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00013800: 6973 5f61 6e6f 6e79 6d6f 7573 225d 203d  is_anonymous"] =
-00013810: 2069 735f 616e 6f6e 796d 6f75 730a 2020   is_anonymous.  
-00013820: 2020 6966 2074 7970 6520 6973 206e 6f74    if type is not
-00013830: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00013840: 6179 6c6f 6164 5b22 7479 7065 225d 203d  ayload["type"] =
-00013850: 2074 7970 650a 2020 2020 6966 2061 6c6c   type.    if all
-00013860: 6f77 735f 6d75 6c74 6970 6c65 5f61 6e73  ows_multiple_ans
-00013870: 7765 7273 2069 7320 6e6f 7420 4e6f 6e65  wers is not None
-00013880: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00013890: 645b 2261 6c6c 6f77 735f 6d75 6c74 6970  d["allows_multip
-000138a0: 6c65 5f61 6e73 7765 7273 225d 203d 2061  le_answers"] = a
-000138b0: 6c6c 6f77 735f 6d75 6c74 6970 6c65 5f61  llows_multiple_a
-000138c0: 6e73 7765 7273 0a20 2020 2069 6620 636f  nswers.    if co
-000138d0: 7272 6563 745f 6f70 7469 6f6e 5f69 6420  rrect_option_id 
-000138e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000138f0: 2020 2020 2070 6179 6c6f 6164 5b22 636f       payload["co
-00013900: 7272 6563 745f 6f70 7469 6f6e 5f69 6422  rrect_option_id"
-00013910: 5d20 3d20 636f 7272 6563 745f 6f70 7469  ] = correct_opti
-00013920: 6f6e 5f69 640a 2020 2020 6966 2065 7870  on_id.    if exp
-00013930: 6c61 6e61 7469 6f6e 2069 7320 6e6f 7420  lanation is not 
-00013940: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00013950: 796c 6f61 645b 2265 7870 6c61 6e61 7469  yload["explanati
-00013960: 6f6e 225d 203d 2065 7870 6c61 6e61 7469  on"] = explanati
-00013970: 6f6e 0a20 2020 2069 6620 6578 706c 616e  on.    if explan
-00013980: 6174 696f 6e5f 7061 7273 655f 6d6f 6465  ation_parse_mode
-00013990: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000139a0: 2020 2020 2020 7061 796c 6f61 645b 2265        payload["e
-000139b0: 7870 6c61 6e61 7469 6f6e 5f70 6172 7365  xplanation_parse
-000139c0: 5f6d 6f64 6522 5d20 3d20 6578 706c 616e  _mode"] = explan
-000139d0: 6174 696f 6e5f 7061 7273 655f 6d6f 6465  ation_parse_mode
-000139e0: 0a20 2020 2069 6620 6f70 656e 5f70 6572  .    if open_per
-000139f0: 696f 6420 6973 206e 6f74 204e 6f6e 653a  iod is not None:
-00013a00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00013a10: 5b22 6f70 656e 5f70 6572 696f 6422 5d20  ["open_period"] 
-00013a20: 3d20 6f70 656e 5f70 6572 696f 640a 2020  = open_period.  
-00013a30: 2020 6966 2063 6c6f 7365 5f64 6174 6520    if close_date 
-00013a40: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00013a50: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00013a60: 6365 2863 6c6f 7365 5f64 6174 652c 2064  ce(close_date, d
-00013a70: 6174 6574 696d 6529 3a0a 2020 2020 2020  atetime):.      
-00013a80: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
-00013a90: 6c6f 7365 5f64 6174 6522 5d20 3d20 636c  lose_date"] = cl
-00013aa0: 6f73 655f 6461 7465 2e74 696d 6573 7461  ose_date.timesta
-00013ab0: 6d70 2829 0a20 2020 2020 2020 2065 6c73  mp().        els
-00013ac0: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-00013ad0: 6179 6c6f 6164 5b22 636c 6f73 655f 6461  ayload["close_da
-00013ae0: 7465 225d 203d 2063 6c6f 7365 5f64 6174  te"] = close_dat
-00013af0: 650a 2020 2020 6966 2069 735f 636c 6f73  e.    if is_clos
-00013b00: 6564 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ed is not None:.
-00013b10: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00013b20: 2269 735f 636c 6f73 6564 225d 203d 2069  "is_closed"] = i
-00013b30: 735f 636c 6f73 6564 0a20 2020 2069 6620  s_closed.    if 
-00013b40: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00013b50: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
-00013b60: 796c 6f61 645b 2264 6973 6162 6c65 5f6e  yload["disable_n
-00013b70: 6f74 6966 6963 6174 696f 6e22 5d20 3d20  otification"] = 
-00013b80: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00013b90: 7469 6f6e 0a20 2020 2069 6620 7265 706c  tion.    if repl
-00013ba0: 795f 6d61 726b 7570 2069 7320 6e6f 7420  y_markup is not 
-00013bb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00013bc0: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
-00013bd0: 6b75 7022 5d20 3d20 5f63 6f6e 7665 7274  kup"] = _convert
-00013be0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-00013bf0: 726b 7570 290a 2020 2020 6966 2074 696d  rkup).    if tim
-00013c00: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
-00013c10: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
-00013c20: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
-00013c30: 6620 6578 706c 616e 6174 696f 6e5f 656e  f explanation_en
-00013c40: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-00013c50: 7061 796c 6f61 645b 2265 7870 6c61 6e61  payload["explana
-00013c60: 7469 6f6e 5f65 6e74 6974 6965 7322 5d20  tion_entities"] 
-00013c70: 3d20 6a73 6f6e 2e64 756d 7073 280a 2020  = json.dumps(.  
-00013c80: 2020 2020 2020 2020 2020 7479 7065 732e            types.
-00013c90: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
-00013ca0: 5f6c 6973 745f 6f66 5f64 6963 7473 2865  _list_of_dicts(e
-00013cb0: 7870 6c61 6e61 7469 6f6e 5f65 6e74 6974  xplanation_entit
-00013cc0: 6965 7329 0a20 2020 2020 2020 2029 0a20  ies).        ). 
-00013cd0: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
-00013ce0: 6e74 656e 743a 0a20 2020 2020 2020 2070  ntent:.        p
-00013cf0: 6179 6c6f 6164 5b22 7072 6f74 6563 745f  ayload["protect_
-00013d00: 636f 6e74 656e 7422 5d20 3d20 7072 6f74  content"] = prot
-00013d10: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
-00013d20: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
-00013d30: 645f 6964 3a0a 2020 2020 2020 2020 7061  d_id:.        pa
-00013d40: 796c 6f61 645b 226d 6573 7361 6765 5f74  yload["message_t
-00013d50: 6872 6561 645f 6964 225d 203d 206d 6573  hread_id"] = mes
-00013d60: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
-00013d70: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
-00013d80: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
-00013d90: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00013da0: 6f61 645b 2272 6570 6c79 5f70 6172 616d  oad["reply_param
-00013db0: 6574 6572 7322 5d20 3d20 7265 706c 795f  eters"] = reply_
-00013dc0: 7061 7261 6d65 7465 7273 2e74 6f5f 6a73  parameters.to_js
-00013dd0: 6f6e 2829 0a20 2020 2069 6620 6275 7369  on().    if busi
-00013de0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00013df0: 6964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  id is not None:.
-00013e00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00013e10: 2262 7573 696e 6573 735f 636f 6e6e 6563  "business_connec
-00013e20: 7469 6f6e 5f69 6422 5d20 3d20 6275 7369  tion_id"] = busi
-00013e30: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00013e40: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
-00013e50: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00013e60: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00013e70: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-00013e80: 0a64 6566 2063 7265 6174 655f 666f 7275  .def create_foru
-00013e90: 6d5f 746f 7069 6328 0a20 2020 2074 6f6b  m_topic(.    tok
-00013ea0: 656e 2c20 6368 6174 5f69 642c 206e 616d  en, chat_id, nam
-00013eb0: 652c 2069 636f 6e5f 636f 6c6f 723d 4e6f  e, icon_color=No
-00013ec0: 6e65 2c20 6963 6f6e 5f63 7573 746f 6d5f  ne, icon_custom_
-00013ed0: 656d 6f6a 695f 6964 3d4e 6f6e 650a 293a  emoji_id=None.):
-00013ee0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00013ef0: 3d20 7222 6372 6561 7465 466f 7275 6d54  = r"createForumT
-00013f00: 6f70 6963 220a 2020 2020 7061 796c 6f61  opic".    payloa
-00013f10: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-00013f20: 6368 6174 5f69 642c 2022 6e61 6d65 223a  chat_id, "name":
-00013f30: 206e 616d 657d 0a20 2020 2069 6620 6963   name}.    if ic
-00013f40: 6f6e 5f63 6f6c 6f72 3a0a 2020 2020 2020  on_color:.      
-00013f50: 2020 7061 796c 6f61 645b 2269 636f 6e5f    payload["icon_
-00013f60: 636f 6c6f 7222 5d20 3d20 6963 6f6e 5f63  color"] = icon_c
-00013f70: 6f6c 6f72 0a20 2020 2069 6620 6963 6f6e  olor.    if icon
-00013f80: 5f63 7573 746f 6d5f 656d 6f6a 695f 6964  _custom_emoji_id
-00013f90: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00013fa0: 645b 2269 636f 6e5f 6375 7374 6f6d 5f65  d["icon_custom_e
-00013fb0: 6d6f 6a69 5f69 6422 5d20 3d20 6963 6f6e  moji_id"] = icon
-00013fc0: 5f63 7573 746f 6d5f 656d 6f6a 695f 6964  _custom_emoji_id
-00013fd0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-00013fe0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
-00013ff0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-00014000: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
-00014010: 6566 2065 6469 745f 666f 7275 6d5f 746f  ef edit_forum_to
-00014020: 7069 6328 0a20 2020 2074 6f6b 656e 2c20  pic(.    token, 
-00014030: 6368 6174 5f69 642c 206d 6573 7361 6765  chat_id, message
-00014040: 5f74 6872 6561 645f 6964 2c20 6e61 6d65  _thread_id, name
-00014050: 3d4e 6f6e 652c 2069 636f 6e5f 6375 7374  =None, icon_cust
-00014060: 6f6d 5f65 6d6f 6a69 5f69 643d 4e6f 6e65  om_emoji_id=None
-00014070: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
-00014080: 726c 203d 2072 2265 6469 7446 6f72 756d  rl = r"editForum
-00014090: 546f 7069 6322 0a20 2020 2070 6179 6c6f  Topic".    paylo
-000140a0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
-000140b0: 2063 6861 745f 6964 2c20 226d 6573 7361   chat_id, "messa
-000140c0: 6765 5f74 6872 6561 645f 6964 223a 206d  ge_thread_id": m
-000140d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000140e0: 7d0a 2020 2020 6966 206e 616d 6520 6973  }.    if name is
-000140f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00014100: 2020 2070 6179 6c6f 6164 5b22 6e61 6d65     payload["name
-00014110: 225d 203d 206e 616d 650a 2020 2020 6966  "] = name.    if
-00014120: 2069 636f 6e5f 6375 7374 6f6d 5f65 6d6f   icon_custom_emo
-00014130: 6a69 5f69 6420 6973 206e 6f74 204e 6f6e  ji_id is not Non
-00014140: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00014150: 6164 5b22 6963 6f6e 5f63 7573 746f 6d5f  ad["icon_custom_
-00014160: 656d 6f6a 695f 6964 225d 203d 2069 636f  emoji_id"] = ico
-00014170: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
-00014180: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
-00014190: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-000141a0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-000141b0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-000141c0: 6465 6620 636c 6f73 655f 666f 7275 6d5f  def close_forum_
-000141d0: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
-000141e0: 745f 6964 2c20 6d65 7373 6167 655f 7468  t_id, message_th
-000141f0: 7265 6164 5f69 6429 3a0a 2020 2020 6d65  read_id):.    me
-00014200: 7468 6f64 5f75 726c 203d 2072 2263 6c6f  thod_url = r"clo
-00014210: 7365 466f 7275 6d54 6f70 6963 220a 2020  seForumTopic".  
-00014220: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
-00014230: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
-00014240: 2022 6d65 7373 6167 655f 7468 7265 6164   "message_thread
-00014250: 5f69 6422 3a20 6d65 7373 6167 655f 7468  _id": message_th
-00014260: 7265 6164 5f69 647d 0a20 2020 2072 6574  read_id}.    ret
-00014270: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00014280: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00014290: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-000142a0: 6f61 6429 0a0a 0a64 6566 2072 656f 7065  oad)...def reope
-000142b0: 6e5f 666f 7275 6d5f 746f 7069 6328 746f  n_forum_topic(to
-000142c0: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
-000142d0: 7373 6167 655f 7468 7265 6164 5f69 6429  ssage_thread_id)
-000142e0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000142f0: 203d 2072 2272 656f 7065 6e46 6f72 756d   = r"reopenForum
-00014300: 546f 7069 6322 0a20 2020 2070 6179 6c6f  Topic".    paylo
-00014310: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
-00014320: 2063 6861 745f 6964 2c20 226d 6573 7361   chat_id, "messa
-00014330: 6765 5f74 6872 6561 645f 6964 223a 206d  ge_thread_id": m
-00014340: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00014350: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-00014360: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00014370: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00014380: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00014390: 6465 6620 6465 6c65 7465 5f66 6f72 756d  def delete_forum
-000143a0: 5f74 6f70 6963 2874 6f6b 656e 2c20 6368  _topic(token, ch
-000143b0: 6174 5f69 642c 206d 6573 7361 6765 5f74  at_id, message_t
-000143c0: 6872 6561 645f 6964 293a 0a20 2020 206d  hread_id):.    m
-000143d0: 6574 686f 645f 7572 6c20 3d20 7222 6465  ethod_url = r"de
-000143e0: 6c65 7465 466f 7275 6d54 6f70 6963 220a  leteForumTopic".
-000143f0: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
-00014400: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
-00014410: 642c 2022 6d65 7373 6167 655f 7468 7265  d, "message_thre
-00014420: 6164 5f69 6422 3a20 6d65 7373 6167 655f  ad_id": message_
-00014430: 7468 7265 6164 5f69 647d 0a20 2020 2072  thread_id}.    r
-00014440: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00014450: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00014460: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00014470: 796c 6f61 6429 0a0a 0a64 6566 2075 6e70  yload)...def unp
-00014480: 696e 5f61 6c6c 5f66 6f72 756d 5f74 6f70  in_all_forum_top
-00014490: 6963 5f6d 6573 7361 6765 7328 746f 6b65  ic_messages(toke
-000144a0: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
-000144b0: 6167 655f 7468 7265 6164 5f69 6429 3a0a  age_thread_id):.
-000144c0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000144d0: 2072 2275 6e70 696e 416c 6c46 6f72 756d   r"unpinAllForum
-000144e0: 546f 7069 634d 6573 7361 6765 7322 0a20  TopicMessages". 
-000144f0: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
-00014500: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
-00014510: 2c20 226d 6573 7361 6765 5f74 6872 6561  , "message_threa
-00014520: 645f 6964 223a 206d 6573 7361 6765 5f74  d_id": message_t
-00014530: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
-00014540: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00014550: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00014560: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00014570: 6c6f 6164 290a 0a0a 6465 6620 6765 745f  load)...def get_
-00014580: 666f 7275 6d5f 746f 7069 635f 6963 6f6e  forum_topic_icon
-00014590: 5f73 7469 636b 6572 7328 746f 6b65 6e29  _stickers(token)
-000145a0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000145b0: 203d 2072 2267 6574 466f 7275 6d54 6f70   = r"getForumTop
-000145c0: 6963 4963 6f6e 5374 6963 6b65 7273 220a  icIconStickers".
-000145d0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-000145e0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-000145f0: 6d65 7468 6f64 5f75 726c 290a 0a0a 6465  method_url)...de
-00014600: 6620 7374 6f70 5f70 6f6c 6c28 746f 6b65  f stop_poll(toke
-00014610: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
-00014620: 6167 655f 6964 2c20 7265 706c 795f 6d61  age_id, reply_ma
-00014630: 726b 7570 3d4e 6f6e 6529 3a0a 2020 2020  rkup=None):.    
-00014640: 6d65 7468 6f64 5f75 726c 203d 2072 2273  method_url = r"s
-00014650: 746f 7050 6f6c 6c22 0a20 2020 2070 6179  topPoll".    pay
-00014660: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-00014670: 223a 2073 7472 2863 6861 745f 6964 292c  ": str(chat_id),
-00014680: 2022 6d65 7373 6167 655f 6964 223a 206d   "message_id": m
-00014690: 6573 7361 6765 5f69 647d 0a20 2020 2069  essage_id}.    i
-000146a0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-000146b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000146c0: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
-000146d0: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
-000146e0: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-000146f0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00014700: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00014710: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00014720: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
-00014730: 6620 6564 6974 5f67 656e 6572 616c 5f66  f edit_general_f
-00014740: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
-00014750: 2c20 6368 6174 5f69 642c 206e 616d 6529  , chat_id, name)
-00014760: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00014770: 203d 2072 2265 6469 7447 656e 6572 616c   = r"editGeneral
-00014780: 466f 7275 6d54 6f70 6963 220a 2020 2020  ForumTopic".    
-00014790: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-000147a0: 5f69 6422 3a20 6368 6174 5f69 642c 2022  _id": chat_id, "
-000147b0: 6e61 6d65 223a 206e 616d 657d 0a20 2020  name": name}.   
-000147c0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-000147d0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-000147e0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-000147f0: 7061 796c 6f61 6429 0a0a 0a64 6566 2063  payload)...def c
-00014800: 6c6f 7365 5f67 656e 6572 616c 5f66 6f72  lose_general_for
-00014810: 756d 5f74 6f70 6963 2874 6f6b 656e 2c20  um_topic(token, 
-00014820: 6368 6174 5f69 6429 3a0a 2020 2020 6d65  chat_id):.    me
-00014830: 7468 6f64 5f75 726c 203d 2072 2263 6c6f  thod_url = r"clo
-00014840: 7365 4765 6e65 7261 6c46 6f72 756d 546f  seGeneralForumTo
-00014850: 7069 6322 0a20 2020 2070 6179 6c6f 6164  pic".    payload
-00014860: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-00014870: 6861 745f 6964 7d0a 2020 2020 7265 7475  hat_id}.    retu
-00014880: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00014890: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000148a0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-000148b0: 6164 290a 0a0a 6465 6620 7265 6f70 656e  ad)...def reopen
-000148c0: 5f67 656e 6572 616c 5f66 6f72 756d 5f74  _general_forum_t
-000148d0: 6f70 6963 2874 6f6b 656e 2c20 6368 6174  opic(token, chat
-000148e0: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-000148f0: 5f75 726c 203d 2072 2272 656f 7065 6e47  _url = r"reopenG
-00014900: 656e 6572 616c 466f 7275 6d54 6f70 6963  eneralForumTopic
-00014910: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00014920: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-00014930: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
-00014940: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00014950: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00014960: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00014970: 0a0a 0a64 6566 2068 6964 655f 6765 6e65  ...def hide_gene
-00014980: 7261 6c5f 666f 7275 6d5f 746f 7069 6328  ral_forum_topic(
-00014990: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
-000149a0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-000149b0: 3d20 7222 6869 6465 4765 6e65 7261 6c46  = r"hideGeneralF
-000149c0: 6f72 756d 546f 7069 6322 0a20 2020 2070  orumTopic".    p
-000149d0: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-000149e0: 6964 223a 2063 6861 745f 6964 7d0a 2020  id": chat_id}.  
-000149f0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00014a00: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00014a10: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00014a20: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00014a30: 756e 6869 6465 5f67 656e 6572 616c 5f66  unhide_general_f
-00014a40: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
-00014a50: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
-00014a60: 6d65 7468 6f64 5f75 726c 203d 2072 2275  method_url = r"u
-00014a70: 6e68 6964 6547 656e 6572 616c 466f 7275  nhideGeneralForu
-00014a80: 6d54 6f70 6963 220a 2020 2020 7061 796c  mTopic".    payl
-00014a90: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
-00014aa0: 3a20 6368 6174 5f69 647d 0a20 2020 2072  : chat_id}.    r
-00014ab0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00014ac0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00014ad0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00014ae0: 796c 6f61 6429 0a0a 0a64 6566 2064 656c  yload)...def del
-00014af0: 6574 655f 6d65 7373 6167 6573 2874 6f6b  ete_messages(tok
-00014b00: 656e 2c20 6368 6174 5f69 642c 206d 6573  en, chat_id, mes
-00014b10: 7361 6765 5f69 6473 293a 0a20 2020 206d  sage_ids):.    m
-00014b20: 6574 686f 645f 7572 6c20 3d20 2264 656c  ethod_url = "del
-00014b30: 6574 654d 6573 7361 6765 7322 0a20 2020  eteMessages".   
-00014b40: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-00014b50: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
-00014b60: 226d 6573 7361 6765 5f69 6473 223a 206a  "message_ids": j
-00014b70: 736f 6e2e 6475 6d70 7328 6d65 7373 6167  son.dumps(messag
-00014b80: 655f 6964 7329 7d0a 2020 2020 7265 7475  e_ids)}.    retu
-00014b90: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00014ba0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00014bb0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00014bc0: 6164 290a 0a0a 6465 6620 666f 7277 6172  ad)...def forwar
-00014bd0: 645f 6d65 7373 6167 6573 280a 2020 2020  d_messages(.    
-00014be0: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
-00014bf0: 6964 2c0a 2020 2020 6672 6f6d 5f63 6861  id,.    from_cha
-00014c00: 745f 6964 2c0a 2020 2020 6d65 7373 6167  t_id,.    messag
-00014c10: 655f 6964 732c 0a20 2020 2064 6973 6162  e_ids,.    disab
-00014c20: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00014c30: 4e6f 6e65 2c0a 2020 2020 6d65 7373 6167  None,.    messag
-00014c40: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
-00014c50: 2c0a 2020 2020 7072 6f74 6563 745f 636f  ,.    protect_co
-00014c60: 6e74 656e 743d 4e6f 6e65 2c0a 293a 0a20  ntent=None,.):. 
-00014c70: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00014c80: 2266 6f72 7761 7264 4d65 7373 6167 6573  "forwardMessages
-00014c90: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00014ca0: 7b0a 2020 2020 2020 2020 2263 6861 745f  {.        "chat_
-00014cb0: 6964 223a 2063 6861 745f 6964 2c0a 2020  id": chat_id,.  
-00014cc0: 2020 2020 2020 2266 726f 6d5f 6368 6174        "from_chat
-00014cd0: 5f69 6422 3a20 6672 6f6d 5f63 6861 745f  _id": from_chat_
-00014ce0: 6964 2c0a 2020 2020 2020 2020 226d 6573  id,.        "mes
-00014cf0: 7361 6765 5f69 6473 223a 206a 736f 6e2e  sage_ids": json.
-00014d00: 6475 6d70 7328 6d65 7373 6167 655f 6964  dumps(message_id
-00014d10: 7329 2c0a 2020 2020 7d0a 2020 2020 6966  s),.    }.    if
-00014d20: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00014d30: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00014d40: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00014d50: 6164 5b22 6469 7361 626c 655f 6e6f 7469  ad["disable_noti
-00014d60: 6669 6361 7469 6f6e 225d 203d 2064 6973  fication"] = dis
-00014d70: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00014d80: 6e0a 2020 2020 6966 206d 6573 7361 6765  n.    if message
-00014d90: 5f74 6872 6561 645f 6964 2069 7320 6e6f  _thread_id is no
-00014da0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00014db0: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-00014dc0: 5f74 6872 6561 645f 6964 225d 203d 206d  _thread_id"] = m
-00014dd0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00014de0: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
-00014df0: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
-00014e00: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00014e10: 6c6f 6164 5b22 7072 6f74 6563 745f 636f  load["protect_co
-00014e20: 6e74 656e 7422 5d20 3d20 7072 6f74 6563  ntent"] = protec
-00014e30: 745f 636f 6e74 656e 740a 2020 2020 7265  t_content.    re
-00014e40: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00014e50: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00014e60: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00014e70: 6c6f 6164 290a 0a0a 6465 6620 636f 7079  load)...def copy
-00014e80: 5f6d 6573 7361 6765 7328 0a20 2020 2074  _messages(.    t
-00014e90: 6f6b 656e 2c0a 2020 2020 6368 6174 5f69  oken,.    chat_i
-00014ea0: 642c 0a20 2020 2066 726f 6d5f 6368 6174  d,.    from_chat
-00014eb0: 5f69 642c 0a20 2020 206d 6573 7361 6765  _id,.    message
-00014ec0: 5f69 6473 2c0a 2020 2020 6469 7361 626c  _ids,.    disabl
-00014ed0: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-00014ee0: 6f6e 652c 0a20 2020 206d 6573 7361 6765  one,.    message
-00014ef0: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
-00014f00: 0a20 2020 2070 726f 7465 6374 5f63 6f6e  .    protect_con
-00014f10: 7465 6e74 3d4e 6f6e 652c 0a20 2020 2072  tent=None,.    r
-00014f20: 656d 6f76 655f 6361 7074 696f 6e3d 4e6f  emove_caption=No
-00014f30: 6e65 2c0a 293a 0a20 2020 206d 6574 686f  ne,.):.    metho
-00014f40: 645f 7572 6c20 3d20 2263 6f70 794d 6573  d_url = "copyMes
-00014f50: 7361 6765 7322 0a20 2020 2070 6179 6c6f  sages".    paylo
-00014f60: 6164 203d 207b 0a20 2020 2020 2020 2022  ad = {.        "
-00014f70: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
-00014f80: 642c 0a20 2020 2020 2020 2022 6672 6f6d  d,.        "from
-00014f90: 5f63 6861 745f 6964 223a 2066 726f 6d5f  _chat_id": from_
-00014fa0: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
-00014fb0: 2022 6d65 7373 6167 655f 6964 7322 3a20   "message_ids": 
-00014fc0: 6a73 6f6e 2e64 756d 7073 286d 6573 7361  json.dumps(messa
-00014fd0: 6765 5f69 6473 292c 0a20 2020 207d 0a20  ge_ids),.    }. 
-00014fe0: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
-00014ff0: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
-00015000: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00015010: 7061 796c 6f61 645b 2264 6973 6162 6c65  payload["disable
-00015020: 5f6e 6f74 6966 6963 6174 696f 6e22 5d20  _notification"] 
-00015030: 3d20 6469 7361 626c 655f 6e6f 7469 6669  = disable_notifi
-00015040: 6361 7469 6f6e 0a20 2020 2069 6620 6d65  cation.    if me
-00015050: 7373 6167 655f 7468 7265 6164 5f69 6420  ssage_thread_id 
-00015060: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00015070: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
-00015080: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
-00015090: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-000150a0: 6164 5f69 640a 2020 2020 6966 2070 726f  ad_id.    if pro
-000150b0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-000150c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000150d0: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
-000150e0: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
-000150f0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-00015100: 2020 2069 6620 7265 6d6f 7665 5f63 6170     if remove_cap
-00015110: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-00015120: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00015130: 645b 2272 656d 6f76 655f 6361 7074 696f  d["remove_captio
-00015140: 6e22 5d20 3d20 7265 6d6f 7665 5f63 6170  n"] = remove_cap
-00015150: 7469 6f6e 0a20 2020 2072 6574 7572 6e20  tion.    return 
-00015160: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00015170: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00015180: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00015190: 0a0a 0a64 6566 205f 636f 6e76 6572 745f  ...def _convert_
-000151a0: 6c69 7374 5f6a 736f 6e5f 7365 7269 616c  list_json_serial
-000151b0: 697a 6162 6c65 2872 6573 756c 7473 293a  izable(results):
-000151c0: 0a20 2020 2072 6574 203d 2022 220a 2020  .    ret = "".  
-000151d0: 2020 666f 7220 7220 696e 2072 6573 756c    for r in resul
-000151e0: 7473 3a0a 2020 2020 2020 2020 6966 2069  ts:.        if i
-000151f0: 7369 6e73 7461 6e63 6528 722c 2074 7970  sinstance(r, typ
-00015200: 6573 2e4a 736f 6e53 6572 6961 6c69 7a61  es.JsonSerializa
-00015210: 626c 6529 3a0a 2020 2020 2020 2020 2020  ble):.          
-00015220: 2020 7265 7420 3d20 7265 7420 2b20 722e    ret = ret + r.
-00015230: 746f 5f6a 736f 6e28 2920 2b20 222c 220a  to_json() + ",".
-00015240: 2020 2020 6966 206c 656e 2872 6574 2920      if len(ret) 
-00015250: 3e20 303a 0a20 2020 2020 2020 2072 6574  > 0:.        ret
-00015260: 203d 2072 6574 5b3a 2d31 5d0a 2020 2020   = ret[:-1].    
-00015270: 7265 7475 726e 2022 5b22 202b 2072 6574  return "[" + ret
-00015280: 202b 2022 5d22 0a0a 0a64 6566 205f 636f   + "]"...def _co
-00015290: 6e76 6572 745f 6d61 726b 7570 286d 6172  nvert_markup(mar
-000152a0: 6b75 7029 3a0a 2020 2020 6966 2069 7369  kup):.    if isi
-000152b0: 6e73 7461 6e63 6528 6d61 726b 7570 2c20  nstance(markup, 
-000152c0: 7479 7065 732e 4a73 6f6e 5365 7269 616c  types.JsonSerial
-000152d0: 697a 6162 6c65 293a 0a20 2020 2020 2020  izable):.       
-000152e0: 2072 6574 7572 6e20 6d61 726b 7570 2e74   return markup.t
-000152f0: 6f5f 6a73 6f6e 2829 0a20 2020 2072 6574  o_json().    ret
-00015300: 7572 6e20 6d61 726b 7570 0a0a 0a64 6566  urn markup...def
-00015310: 205f 636f 6e76 6572 745f 706f 6c6c 5f6f   _convert_poll_o
-00015320: 7074 696f 6e73 2870 6f6c 6c5f 6f70 7469  ptions(poll_opti
-00015330: 6f6e 7329 3a0a 2020 2020 6966 2070 6f6c  ons):.    if pol
-00015340: 6c5f 6f70 7469 6f6e 7320 6973 204e 6f6e  l_options is Non
-00015350: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
-00015360: 6e20 4e6f 6e65 0a20 2020 2065 6c69 6620  n None.    elif 
-00015370: 6c65 6e28 706f 6c6c 5f6f 7074 696f 6e73  len(poll_options
-00015380: 2920 3d3d 2030 3a0a 2020 2020 2020 2020  ) == 0:.        
-00015390: 7265 7475 726e 205b 5d0a 2020 2020 656c  return [].    el
-000153a0: 6966 2069 7369 6e73 7461 6e63 6528 706f  if isinstance(po
-000153b0: 6c6c 5f6f 7074 696f 6e73 5b30 5d2c 2073  ll_options[0], s
-000153c0: 7472 293a 0a20 2020 2020 2020 2023 2043  tr):.        # C
-000153d0: 6f6d 7061 7469 6269 6c69 7479 206d 6f64  ompatibility mod
-000153e0: 6520 7769 7468 2070 7265 7669 6f75 7320  e with previous 
-000153f0: 6275 6720 7768 656e 206f 6e6c 7920 6c69  bug when only li
-00015400: 7374 206f 6620 7374 7269 6e67 2077 6173  st of string was
-00015410: 2061 6363 6570 7465 6420 6173 2070 6f6c   accepted as pol
-00015420: 6c5f 6f70 7469 6f6e 730a 2020 2020 2020  l_options.      
-00015430: 2020 7265 7475 726e 2070 6f6c 6c5f 6f70    return poll_op
-00015440: 7469 6f6e 730a 2020 2020 656c 6966 2069  tions.    elif i
-00015450: 7369 6e73 7461 6e63 6528 706f 6c6c 5f6f  sinstance(poll_o
-00015460: 7074 696f 6e73 5b30 5d2c 2074 7970 6573  ptions[0], types
-00015470: 2e50 6f6c 6c4f 7074 696f 6e29 3a0a 2020  .PollOption):.  
-00015480: 2020 2020 2020 7265 7475 726e 205b 6f70        return [op
-00015490: 7469 6f6e 2e74 6578 7420 666f 7220 6f70  tion.text for op
-000154a0: 7469 6f6e 2069 6e20 706f 6c6c 5f6f 7074  tion in poll_opt
-000154b0: 696f 6e73 5d0a 2020 2020 656c 7365 3a0a  ions].    else:.
-000154c0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-000154d0: 6f6c 6c5f 6f70 7469 6f6e 730a 0a0a 6465  oll_options...de
-000154e0: 6620 636f 6e76 6572 745f 696e 7075 745f  f convert_input_
-000154f0: 6d65 6469 6128 6d65 6469 6129 3a0a 2020  media(media):.  
-00015500: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00015510: 6d65 6469 612c 2074 7970 6573 2e49 6e70  media, types.Inp
-00015520: 7574 4d65 6469 6129 3a0a 2020 2020 2020  utMedia):.      
-00015530: 2020 7265 7475 726e 206d 6564 6961 2e63    return media.c
-00015540: 6f6e 7665 7274 5f69 6e70 7574 5f6d 6564  onvert_input_med
-00015550: 6961 2829 0a20 2020 2072 6574 7572 6e20  ia().    return 
-00015560: 4e6f 6e65 2c20 4e6f 6e65 0a0a 0a64 6566  None, None...def
-00015570: 2063 6f6e 7665 7274 5f69 6e70 7574 5f6d   convert_input_m
-00015580: 6564 6961 5f61 7272 6179 2861 7272 6179  edia_array(array
-00015590: 293a 0a20 2020 206d 6564 6961 203d 205b  ):.    media = [
-000155a0: 5d0a 2020 2020 6669 6c65 7320 3d20 7b7d  ].    files = {}
-000155b0: 0a20 2020 2066 6f72 2069 6e70 7574 5f6d  .    for input_m
-000155c0: 6564 6961 2069 6e20 6172 7261 793a 0a20  edia in array:. 
-000155d0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000155e0: 616e 6365 2869 6e70 7574 5f6d 6564 6961  ance(input_media
-000155f0: 2c20 7479 7065 732e 496e 7075 744d 6564  , types.InputMed
-00015600: 6961 293a 0a20 2020 2020 2020 2020 2020  ia):.           
-00015610: 206d 6564 6961 5f64 6963 7420 3d20 696e   media_dict = in
-00015620: 7075 745f 6d65 6469 612e 746f 5f64 6963  put_media.to_dic
-00015630: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
-00015640: 6966 206d 6564 6961 5f64 6963 745b 226d  if media_dict["m
-00015650: 6564 6961 225d 2e73 7461 7274 7377 6974  edia"].startswit
-00015660: 6828 2261 7474 6163 683a 2f2f 2229 3a0a  h("attach://"):.
-00015670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015680: 6b65 7920 3d20 6d65 6469 615f 6469 6374  key = media_dict
-00015690: 5b22 6d65 6469 6122 5d2e 7265 706c 6163  ["media"].replac
-000156a0: 6528 2261 7474 6163 683a 2f2f 222c 2022  e("attach://", "
-000156b0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-000156c0: 2020 2066 696c 6573 5b6b 6579 5d20 3d20     files[key] = 
-000156d0: 696e 7075 745f 6d65 6469 612e 6d65 6469  input_media.medi
-000156e0: 610a 2020 2020 2020 2020 2020 2020 6d65  a.            me
-000156f0: 6469 612e 6170 7065 6e64 286d 6564 6961  dia.append(media
-00015700: 5f64 6963 7429 0a20 2020 2072 6574 7572  _dict).    retur
-00015710: 6e20 6a73 6f6e 2e64 756d 7073 286d 6564  n json.dumps(med
-00015720: 6961 292c 2066 696c 6573 0a0a 0a64 6566  ia), files...def
-00015730: 205f 6e6f 5f65 6e63 6f64 6528 6675 6e63   _no_encode(func
-00015740: 293a 0a20 2020 2064 6566 2077 7261 7070  ):.    def wrapp
-00015750: 6572 286b 6579 2c20 7661 6c29 3a0a 2020  er(key, val):.  
-00015760: 2020 2020 2020 6966 206b 6579 203d 3d20        if key == 
-00015770: 2266 696c 656e 616d 6522 3a0a 2020 2020  "filename":.    
-00015780: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-00015790: 7b30 7d3d 7b31 7d22 2e66 6f72 6d61 7428  {0}={1}".format(
-000157a0: 6b65 792c 2076 616c 290a 2020 2020 2020  key, val).      
-000157b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000157c0: 2020 2020 7265 7475 726e 2066 756e 6328      return func(
-000157d0: 6b65 792c 2076 616c 290a 0a20 2020 2072  key, val)..    r
-000157e0: 6574 7572 6e20 7772 6170 7065 720a 0a0a  eturn wrapper...
-000157f0: 636c 6173 7320 4170 6945 7863 6570 7469  class ApiExcepti
-00015800: 6f6e 2845 7863 6570 7469 6f6e 293a 0a20  on(Exception):. 
-00015810: 2020 2022 2222 0a20 2020 2054 6869 7320     """.    This 
-00015820: 636c 6173 7320 7265 7072 6573 656e 7473  class represents
-00015830: 2061 2062 6173 6520 4578 6365 7074 696f   a base Exceptio
-00015840: 6e20 7468 726f 776e 2077 6865 6e20 6120  n thrown when a 
-00015850: 6361 6c6c 2074 6f20 7468 6520 5465 6c65  call to the Tele
-00015860: 6772 616d 2041 5049 2066 6169 6c73 2e0a  gram API fails..
-00015870: 2020 2020 496e 2061 6464 6974 696f 6e20      In addition 
-00015880: 746f 2061 6e20 696e 666f 726d 6174 6976  to an informativ
-00015890: 6520 6d65 7373 6167 652c 2069 7420 6861  e message, it ha
-000158a0: 7320 6120 6066 756e 6374 696f 6e5f 6e61  s a `function_na
-000158b0: 6d65 6020 616e 6420 6120 6072 6573 756c  me` and a `resul
-000158c0: 7460 2061 7474 7269 6275 7465 2c20 7768  t` attribute, wh
-000158d0: 6963 6820 7265 7370 6563 7469 7665 6c79  ich respectively
-000158e0: 0a20 2020 2063 6f6e 7461 696e 2074 6865  .    contain the
-000158f0: 206e 616d 6520 6f66 2074 6865 2066 6169   name of the fai
-00015900: 6c65 6420 6675 6e63 7469 6f6e 2061 6e64  led function and
-00015910: 2074 6865 2072 6574 7572 6e65 6420 7265   the returned re
-00015920: 7375 6c74 2074 6861 7420 6d61 6465 2074  sult that made t
-00015930: 6865 2066 756e 6374 696f 6e20 746f 2062  he function to b
-00015940: 6520 636f 6e73 6964 6572 6564 2020 6173  e considered  as
-00015950: 0a20 2020 2066 6169 6c65 642e 0a20 2020  .    failed..   
-00015960: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
-00015970: 696e 6974 5f5f 2873 656c 662c 206d 7367  init__(self, msg
-00015980: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
-00015990: 2072 6573 756c 7429 3a0a 2020 2020 2020   result):.      
-000159a0: 2020 7375 7065 7228 4170 6945 7863 6570    super(ApiExcep
-000159b0: 7469 6f6e 2c20 7365 6c66 292e 5f5f 696e  tion, self).__in
-000159c0: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
-000159d0: 2020 2241 2072 6571 7565 7374 2074 6f20    "A request to 
-000159e0: 7468 6520 5465 6c65 6772 616d 2041 5049  the Telegram API
-000159f0: 2077 6173 2075 6e73 7563 6365 7373 6675   was unsuccessfu
-00015a00: 6c2e 207b 307d 222e 666f 726d 6174 286d  l. {0}".format(m
-00015a10: 7367 290a 2020 2020 2020 2020 290a 2020  sg).        ).  
-00015a20: 2020 2020 2020 7365 6c66 2e66 756e 6374        self.funct
-00015a30: 696f 6e5f 6e61 6d65 203d 2066 756e 6374  ion_name = funct
-00015a40: 696f 6e5f 6e61 6d65 0a20 2020 2020 2020  ion_name.       
-00015a50: 2073 656c 662e 7265 7375 6c74 203d 2072   self.result = r
-00015a60: 6573 756c 740a 0a0a 636c 6173 7320 4170  esult...class Ap
-00015a70: 6948 5454 5045 7863 6570 7469 6f6e 2841  iHTTPException(A
-00015a80: 7069 4578 6365 7074 696f 6e29 3a0a 2020  piException):.  
-00015a90: 2020 2222 220a 2020 2020 5468 6973 2063    """.    This c
-00015aa0: 6c61 7373 2072 6570 7265 7365 6e74 7320  lass represents 
-00015ab0: 616e 2045 7863 6570 7469 6f6e 2074 6872  an Exception thr
-00015ac0: 6f77 6e20 7768 656e 2061 2063 616c 6c20  own when a call 
-00015ad0: 746f 2074 6865 0a20 2020 2054 656c 6567  to the.    Teleg
-00015ae0: 7261 6d20 4150 4920 7365 7276 6572 2072  ram API server r
-00015af0: 6574 7572 6e73 2048 5454 5020 636f 6465  eturns HTTP code
-00015b00: 2074 6861 7420 6973 206e 6f74 2032 3030   that is not 200
-00015b10: 2e0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
-00015b20: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00015b30: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
-00015b40: 2072 6573 756c 7429 3a0a 2020 2020 2020   result):.      
-00015b50: 2020 7375 7065 7228 4170 6948 5454 5045    super(ApiHTTPE
-00015b60: 7863 6570 7469 6f6e 2c20 7365 6c66 292e  xception, self).
-00015b70: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00015b80: 2020 2020 2020 2254 6865 2073 6572 7665        "The serve
-00015b90: 7220 7265 7475 726e 6564 2048 5454 5020  r returned HTTP 
-00015ba0: 7b30 7d20 7b31 7d2e 2052 6573 706f 6e73  {0} {1}. Respons
-00015bb0: 6520 626f 6479 3a5c 6e5b 7b32 7d5d 222e  e body:\n[{2}]".
-00015bc0: 666f 726d 6174 280a 2020 2020 2020 2020  format(.        
-00015bd0: 2020 2020 2020 2020 7265 7375 6c74 2e73          result.s
-00015be0: 7461 7475 735f 636f 6465 2c20 7265 7375  tatus_code, resu
-00015bf0: 6c74 2e72 6561 736f 6e2c 2072 6573 756c  lt.reason, resul
-00015c00: 742e 7465 7874 2e65 6e63 6f64 6528 2275  t.text.encode("u
-00015c10: 7466 3822 290a 2020 2020 2020 2020 2020  tf8").          
-00015c20: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-00015c30: 2066 756e 6374 696f 6e5f 6e61 6d65 2c0a   function_name,.
-00015c40: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00015c50: 6c74 2c0a 2020 2020 2020 2020 290a 0a0a  lt,.        )...
-00015c60: 636c 6173 7320 4170 6949 6e76 616c 6964  class ApiInvalid
-00015c70: 4a53 4f4e 4578 6365 7074 696f 6e28 4170  JSONException(Ap
-00015c80: 6945 7863 6570 7469 6f6e 293a 0a20 2020  iException):.   
-00015c90: 2022 2222 0a20 2020 2054 6869 7320 636c   """.    This cl
-00015ca0: 6173 7320 7265 7072 6573 656e 7473 2061  ass represents a
-00015cb0: 6e20 4578 6365 7074 696f 6e20 7468 726f  n Exception thro
-00015cc0: 776e 2077 6865 6e20 6120 6361 6c6c 2074  wn when a call t
-00015cd0: 6f20 7468 650a 2020 2020 5465 6c65 6772  o the.    Telegr
-00015ce0: 616d 2041 5049 2073 6572 7665 7220 7265  am API server re
-00015cf0: 7475 726e 7320 696e 7661 6c69 6420 6a73  turns invalid js
-00015d00: 6f6e 2e0a 2020 2020 2222 220a 0a20 2020  on..    """..   
-00015d10: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-00015d20: 6c66 2c20 6675 6e63 7469 6f6e 5f6e 616d  lf, function_nam
-00015d30: 652c 2072 6573 756c 7429 3a0a 2020 2020  e, result):.    
-00015d40: 2020 2020 7375 7065 7228 4170 6949 6e76      super(ApiInv
-00015d50: 616c 6964 4a53 4f4e 4578 6365 7074 696f  alidJSONExceptio
-00015d60: 6e2c 2073 656c 6629 2e5f 5f69 6e69 745f  n, self).__init_
-00015d70: 5f28 0a20 2020 2020 2020 2020 2020 2022  _(.            "
-00015d80: 5468 6520 7365 7276 6572 2072 6574 7572  The server retur
-00015d90: 6e65 6420 616e 2069 6e76 616c 6964 204a  ned an invalid J
-00015da0: 534f 4e20 7265 7370 6f6e 7365 2e20 5265  SON response. Re
-00015db0: 7370 6f6e 7365 2062 6f64 793a 5c6e 5b7b  sponse body:\n[{
-00015dc0: 307d 5d22 2e66 6f72 6d61 7428 0a20 2020  0}]".format(.   
-00015dd0: 2020 2020 2020 2020 2020 2020 2072 6573               res
-00015de0: 756c 742e 7465 7874 2e65 6e63 6f64 6528  ult.text.encode(
-00015df0: 2275 7466 3822 290a 2020 2020 2020 2020  "utf8").        
-00015e00: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
-00015e10: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-00015e20: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
-00015e30: 7375 6c74 2c0a 2020 2020 2020 2020 290a  sult,.        ).
-00015e40: 0a0a 636c 6173 7320 4170 6954 656c 6567  ..class ApiTeleg
-00015e50: 7261 6d45 7863 6570 7469 6f6e 2841 7069  ramException(Api
-00015e60: 4578 6365 7074 696f 6e29 3a0a 2020 2020  Exception):.    
-00015e70: 2222 220a 2020 2020 5468 6973 2063 6c61  """.    This cla
-00015e80: 7373 2072 6570 7265 7365 6e74 7320 616e  ss represents an
-00015e90: 2045 7863 6570 7469 6f6e 2074 6872 6f77   Exception throw
-00015ea0: 6e20 7768 656e 2061 2054 656c 6567 7261  n when a Telegra
-00015eb0: 6d20 4150 4920 7265 7475 726e 7320 6572  m API returns er
-00015ec0: 726f 7220 636f 6465 2e0a 2020 2020 2222  ror code..    ""
-00015ed0: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-00015ee0: 745f 5f28 7365 6c66 2c20 6675 6e63 7469  t__(self, functi
-00015ef0: 6f6e 5f6e 616d 652c 2072 6573 756c 742c  on_name, result,
-00015f00: 2072 6573 756c 745f 6a73 6f6e 293a 0a20   result_json):. 
-00015f10: 2020 2020 2020 2073 7570 6572 2841 7069         super(Api
-00015f20: 5465 6c65 6772 616d 4578 6365 7074 696f  TelegramExceptio
-00015f30: 6e2c 2073 656c 6629 2e5f 5f69 6e69 745f  n, self).__init_
-00015f40: 5f28 0a20 2020 2020 2020 2020 2020 2022  _(.            "
-00015f50: 4572 726f 7220 636f 6465 3a20 7b30 7d2e  Error code: {0}.
-00015f60: 2044 6573 6372 6970 7469 6f6e 3a20 7b31   Description: {1
-00015f70: 7d22 2e66 6f72 6d61 7428 0a20 2020 2020  }".format(.     
-00015f80: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00015f90: 745f 6a73 6f6e 5b22 6572 726f 725f 636f  t_json["error_co
-00015fa0: 6465 225d 2c20 7265 7375 6c74 5f6a 736f  de"], result_jso
-00015fb0: 6e5b 2264 6573 6372 6970 7469 6f6e 225d  n["description"]
-00015fc0: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
-00015fd0: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-00015fe0: 7469 6f6e 5f6e 616d 652c 0a20 2020 2020  tion_name,.     
-00015ff0: 2020 2020 2020 2072 6573 756c 742c 0a20         result,. 
-00016000: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00016010: 2073 656c 662e 7265 7375 6c74 5f6a 736f   self.result_jso
-00016020: 6e20 3d20 7265 7375 6c74 5f6a 736f 6e0a  n = result_json.
-00016030: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
-00016040: 6f72 5f63 6f64 6520 3d20 7265 7375 6c74  or_code = result
-00016050: 5f6a 736f 6e5b 2265 7272 6f72 5f63 6f64  _json["error_cod
-00016060: 6522 5d0a 2020 2020 2020 2020 7365 6c66  e"].        self
-00016070: 2e64 6573 6372 6970 7469 6f6e 203d 2072  .description = r
-00016080: 6573 756c 745f 6a73 6f6e 5b22 6465 7363  esult_json["desc
-00016090: 7269 7074 696f 6e22 5d0a                 ription"].
+000049e0: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
+000049f0: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
+00004a00: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00004a10: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00004a20: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
+00004a30: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
+00004a40: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
+00004a50: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00004a60: 640a 2020 2020 6966 2072 6570 6c79 5f70  d.    if reply_p
+00004a70: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
+00004a80: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00004a90: 6179 6c6f 6164 5b22 7265 706c 795f 7061  ayload["reply_pa
+00004aa0: 7261 6d65 7465 7273 225d 203d 2072 6570  rameters"] = rep
+00004ab0: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00004ac0: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
+00004ad0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00004ae0: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00004af0: 6179 6c6f 6164 5b22 6275 7369 6e65 7373  ayload["business
+00004b00: 5f63 6f6e 6e65 6374 696f 6e5f 6964 225d  _connection_id"]
+00004b10: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00004b20: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+00004b30: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00004b40: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00004b50: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00004b60: 6c6f 6164 290a 0a0a 6465 6620 7365 6e64  load)...def send
+00004b70: 5f70 686f 746f 280a 2020 2020 746f 6b65  _photo(.    toke
+00004b80: 6e2c 0a20 2020 2063 6861 745f 6964 2c0a  n,.    chat_id,.
+00004b90: 2020 2020 7068 6f74 6f2c 0a20 2020 2063      photo,.    c
+00004ba0: 6170 7469 6f6e 3d4e 6f6e 652c 0a20 2020  aption=None,.   
+00004bb0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00004bc0: 6e65 2c0a 2020 2020 7061 7273 655f 6d6f  ne,.    parse_mo
+00004bd0: 6465 3d4e 6f6e 652c 0a20 2020 2064 6973  de=None,.    dis
+00004be0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00004bf0: 6e3d 4e6f 6e65 2c0a 2020 2020 7469 6d65  n=None,.    time
+00004c00: 6f75 743d 4e6f 6e65 2c0a 2020 2020 6361  out=None,.    ca
+00004c10: 7074 696f 6e5f 656e 7469 7469 6573 3d4e  ption_entities=N
+00004c20: 6f6e 652c 0a20 2020 2070 726f 7465 6374  one,.    protect
+00004c30: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 0a20  _content=None,. 
+00004c40: 2020 206d 6573 7361 6765 5f74 6872 6561     message_threa
+00004c50: 645f 6964 3d4e 6f6e 652c 0a20 2020 2068  d_id=None,.    h
+00004c60: 6173 5f73 706f 696c 6572 3d4e 6f6e 652c  as_spoiler=None,
+00004c70: 0a20 2020 2072 6570 6c79 5f70 6172 616d  .    reply_param
+00004c80: 6574 6572 733d 4e6f 6e65 2c0a 2020 2020  eters=None,.    
+00004c90: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+00004ca0: 696f 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a  ion_id=None,.):.
+00004cb0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00004cc0: 2072 2273 656e 6450 686f 746f 220a 2020   r"sendPhoto".  
+00004cd0: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+00004ce0: 6174 5f69 6422 3a20 6368 6174 5f69 647d  at_id": chat_id}
+00004cf0: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
+00004d00: 650a 2020 2020 6966 2075 7469 6c2e 6973  e.    if util.is
+00004d10: 5f73 7472 696e 6728 7068 6f74 6f29 3a0a  _string(photo):.
+00004d20: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00004d30: 2270 686f 746f 225d 203d 2070 686f 746f  "photo"] = photo
+00004d40: 0a20 2020 2065 6c69 6620 7574 696c 2e69  .    elif util.i
+00004d50: 735f 7069 6c5f 696d 6167 6528 7068 6f74  s_pil_image(phot
+00004d60: 6f29 3a0a 2020 2020 2020 2020 6669 6c65  o):.        file
+00004d70: 7320 3d20 7b22 7068 6f74 6f22 3a20 7574  s = {"photo": ut
+00004d80: 696c 2e70 696c 5f69 6d61 6765 5f74 6f5f  il.pil_image_to_
+00004d90: 6669 6c65 2870 686f 746f 297d 0a20 2020  file(photo)}.   
+00004da0: 2065 6c73 653a 0a20 2020 2020 2020 2066   else:.        f
+00004db0: 696c 6573 203d 207b 2270 686f 746f 223a  iles = {"photo":
+00004dc0: 2070 686f 746f 7d0a 2020 2020 6966 2063   photo}.    if c
+00004dd0: 6170 7469 6f6e 3a0a 2020 2020 2020 2020  aption:.        
+00004de0: 7061 796c 6f61 645b 2263 6170 7469 6f6e  payload["caption
+00004df0: 225d 203d 2063 6170 7469 6f6e 0a20 2020  "] = caption.   
+00004e00: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
+00004e10: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00004e20: 645b 2272 6570 6c79 5f6d 6172 6b75 7022  d["reply_markup"
+00004e30: 5d20 3d20 5f63 6f6e 7665 7274 5f6d 6172  ] = _convert_mar
+00004e40: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
+00004e50: 290a 2020 2020 6966 2070 6172 7365 5f6d  ).    if parse_m
+00004e60: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
+00004e70: 6c6f 6164 5b22 7061 7273 655f 6d6f 6465  load["parse_mode
+00004e80: 225d 203d 2070 6172 7365 5f6d 6f64 650a  "] = parse_mode.
+00004e90: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+00004ea0: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+00004eb0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00004ec0: 2070 6179 6c6f 6164 5b22 6469 7361 626c   payload["disabl
+00004ed0: 655f 6e6f 7469 6669 6361 7469 6f6e 225d  e_notification"]
+00004ee0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00004ef0: 6963 6174 696f 6e0a 2020 2020 6966 2074  ication.    if t
+00004f00: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00004f10: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
+00004f20: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
+00004f30: 2069 6620 6361 7074 696f 6e5f 656e 7469   if caption_enti
+00004f40: 7469 6573 3a0a 2020 2020 2020 2020 7061  ties:.        pa
+00004f50: 796c 6f61 645b 2263 6170 7469 6f6e 5f65  yload["caption_e
+00004f60: 6e74 6974 6965 7322 5d20 3d20 6a73 6f6e  ntities"] = json
+00004f70: 2e64 756d 7073 280a 2020 2020 2020 2020  .dumps(.        
+00004f80: 2020 2020 7479 7065 732e 4d65 7373 6167      types.Messag
+00004f90: 6545 6e74 6974 792e 746f 5f6c 6973 745f  eEntity.to_list_
+00004fa0: 6f66 5f64 6963 7473 2863 6170 7469 6f6e  of_dicts(caption
+00004fb0: 5f65 6e74 6974 6965 7329 0a20 2020 2020  _entities).     
+00004fc0: 2020 2029 0a20 2020 2069 6620 7072 6f74     ).    if prot
+00004fd0: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
+00004fe0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00004ff0: 2070 6179 6c6f 6164 5b22 7072 6f74 6563   payload["protec
+00005000: 745f 636f 6e74 656e 7422 5d20 3d20 7072  t_content"] = pr
+00005010: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
+00005020: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
+00005030: 6561 645f 6964 2069 7320 6e6f 7420 4e6f  ead_id is not No
+00005040: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00005050: 6f61 645b 226d 6573 7361 6765 5f74 6872  oad["message_thr
+00005060: 6561 645f 6964 225d 203d 206d 6573 7361  ead_id"] = messa
+00005070: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
+00005080: 2069 6620 6861 735f 7370 6f69 6c65 7220   if has_spoiler 
+00005090: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000050a0: 2020 2020 2070 6179 6c6f 6164 5b22 6861       payload["ha
+000050b0: 735f 7370 6f69 6c65 7222 5d20 3d20 6861  s_spoiler"] = ha
+000050c0: 735f 7370 6f69 6c65 720a 2020 2020 6966  s_spoiler.    if
+000050d0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+000050e0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+000050f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00005100: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00005110: 225d 203d 2072 6570 6c79 5f70 6172 616d  "] = reply_param
+00005120: 6574 6572 732e 746f 5f6a 736f 6e28 290a  eters.to_json().
+00005130: 2020 2020 6966 2062 7573 696e 6573 735f      if business_
+00005140: 636f 6e6e 6563 7469 6f6e 5f69 643a 0a20  connection_id:. 
+00005150: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00005160: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+00005170: 696f 6e5f 6964 225d 203d 2062 7573 696e  ion_id"] = busin
+00005180: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00005190: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
+000051a0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+000051b0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000051c0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
+000051d0: 6c65 733d 6669 6c65 732c 206d 6574 686f  les=files, metho
+000051e0: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
+000051f0: 7365 6e64 5f6d 6564 6961 5f67 726f 7570  send_media_group
+00005200: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
+00005210: 2063 6861 745f 6964 2c0a 2020 2020 6d65   chat_id,.    me
+00005220: 6469 612c 0a20 2020 2064 6973 6162 6c65  dia,.    disable
+00005230: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
+00005240: 6e65 2c0a 2020 2020 7469 6d65 6f75 743d  ne,.    timeout=
+00005250: 4e6f 6e65 2c0a 2020 2020 7072 6f74 6563  None,.    protec
+00005260: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0a  t_content=None,.
+00005270: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
+00005280: 6164 5f69 643d 4e6f 6e65 2c0a 2020 2020  ad_id=None,.    
+00005290: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+000052a0: 3d4e 6f6e 652c 0a20 2020 2062 7573 696e  =None,.    busin
+000052b0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+000052c0: 643d 4e6f 6e65 2c0a 293a 0a20 2020 206d  d=None,.):.    m
+000052d0: 6574 686f 645f 7572 6c20 3d20 7222 7365  ethod_url = r"se
+000052e0: 6e64 4d65 6469 6147 726f 7570 220a 2020  ndMediaGroup".  
+000052f0: 2020 6d65 6469 615f 6a73 6f6e 2c20 6669    media_json, fi
+00005300: 6c65 7320 3d20 636f 6e76 6572 745f 696e  les = convert_in
+00005310: 7075 745f 6d65 6469 615f 6172 7261 7928  put_media_array(
+00005320: 6d65 6469 6129 0a20 2020 2070 6179 6c6f  media).    paylo
+00005330: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+00005340: 2063 6861 745f 6964 2c20 226d 6564 6961   chat_id, "media
+00005350: 223a 206d 6564 6961 5f6a 736f 6e7d 0a20  ": media_json}. 
+00005360: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
+00005370: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
+00005380: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00005390: 7061 796c 6f61 645b 2264 6973 6162 6c65  payload["disable
+000053a0: 5f6e 6f74 6966 6963 6174 696f 6e22 5d20  _notification"] 
+000053b0: 3d20 6469 7361 626c 655f 6e6f 7469 6669  = disable_notifi
+000053c0: 6361 7469 6f6e 0a20 2020 2069 6620 7469  cation.    if ti
+000053d0: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
+000053e0: 6179 6c6f 6164 5b22 7469 6d65 6f75 7422  ayload["timeout"
+000053f0: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
+00005400: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
+00005410: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
+00005420: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005430: 2270 726f 7465 6374 5f63 6f6e 7465 6e74  "protect_content
+00005440: 225d 203d 2070 726f 7465 6374 5f63 6f6e  "] = protect_con
+00005450: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
+00005460: 6167 655f 7468 7265 6164 5f69 6420 6973  age_thread_id is
+00005470: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00005480: 2020 2070 6179 6c6f 6164 5b22 6d65 7373     payload["mess
+00005490: 6167 655f 7468 7265 6164 5f69 6422 5d20  age_thread_id"] 
+000054a0: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
+000054b0: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
+000054c0: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
+000054d0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000054e0: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
+000054f0: 7061 7261 6d65 7465 7273 225d 203d 2072  parameters"] = r
+00005500: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
+00005510: 746f 5f6a 736f 6e28 290a 2020 2020 6966  to_json().    if
+00005520: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00005530: 7469 6f6e 5f69 643a 0a20 2020 2020 2020  tion_id:.       
+00005540: 2070 6179 6c6f 6164 5b22 6275 7369 6e65   payload["busine
+00005550: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+00005560: 225d 203d 2062 7573 696e 6573 735f 636f  "] = business_co
+00005570: 6e6e 6563 7469 6f6e 5f69 640a 2020 2020  nnection_id.    
+00005580: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00005590: 7565 7374 280a 2020 2020 2020 2020 746f  uest(.        to
+000055a0: 6b65 6e2c 0a20 2020 2020 2020 206d 6574  ken,.        met
+000055b0: 686f 645f 7572 6c2c 0a20 2020 2020 2020  hod_url,.       
+000055c0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+000055d0: 0a20 2020 2020 2020 206d 6574 686f 643d  .        method=
+000055e0: 2270 6f73 7422 2069 6620 6669 6c65 7320  "post" if files 
+000055f0: 656c 7365 2022 6765 7422 2c0a 2020 2020  else "get",.    
+00005600: 2020 2020 6669 6c65 733d 6669 6c65 7320      files=files 
+00005610: 6966 2066 696c 6573 2065 6c73 6520 4e6f  if files else No
+00005620: 6e65 2c0a 2020 2020 290a 0a0a 6465 6620  ne,.    )...def 
+00005630: 7365 6e64 5f6c 6f63 6174 696f 6e28 0a20  send_location(. 
+00005640: 2020 2074 6f6b 656e 2c0a 2020 2020 6368     token,.    ch
+00005650: 6174 5f69 642c 0a20 2020 206c 6174 6974  at_id,.    latit
+00005660: 7564 652c 0a20 2020 206c 6f6e 6769 7475  ude,.    longitu
+00005670: 6465 2c0a 2020 2020 6c69 7665 5f70 6572  de,.    live_per
+00005680: 696f 643d 4e6f 6e65 2c0a 2020 2020 7265  iod=None,.    re
+00005690: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+000056a0: 0a20 2020 2064 6973 6162 6c65 5f6e 6f74  .    disable_not
+000056b0: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c0a  ification=None,.
+000056c0: 2020 2020 7469 6d65 6f75 743d 4e6f 6e65      timeout=None
+000056d0: 2c0a 2020 2020 686f 7269 7a6f 6e74 616c  ,.    horizontal
+000056e0: 5f61 6363 7572 6163 793d 4e6f 6e65 2c0a  _accuracy=None,.
+000056f0: 2020 2020 6865 6164 696e 673d 4e6f 6e65      heading=None
+00005700: 2c0a 2020 2020 7072 6f78 696d 6974 795f  ,.    proximity_
+00005710: 616c 6572 745f 7261 6469 7573 3d4e 6f6e  alert_radius=Non
+00005720: 652c 0a20 2020 2070 726f 7465 6374 5f63  e,.    protect_c
+00005730: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
+00005740: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00005750: 6964 3d4e 6f6e 652c 0a20 2020 2072 6570  id=None,.    rep
+00005760: 6c79 5f70 6172 616d 6574 6572 733d 4e6f  ly_parameters=No
+00005770: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
+00005780: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
+00005790: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
+000057a0: 6f64 5f75 726c 203d 2072 2273 656e 644c  od_url = r"sendL
+000057b0: 6f63 6174 696f 6e22 0a20 2020 2070 6179  ocation".    pay
+000057c0: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
+000057d0: 223a 2063 6861 745f 6964 2c20 226c 6174  ": chat_id, "lat
+000057e0: 6974 7564 6522 3a20 6c61 7469 7475 6465  itude": latitude
+000057f0: 2c20 226c 6f6e 6769 7475 6465 223a 206c  , "longitude": l
+00005800: 6f6e 6769 7475 6465 7d0a 2020 2020 6966  ongitude}.    if
+00005810: 206c 6976 655f 7065 7269 6f64 3a0a 2020   live_period:.  
+00005820: 2020 2020 2020 7061 796c 6f61 645b 226c        payload["l
+00005830: 6976 655f 7065 7269 6f64 225d 203d 206c  ive_period"] = l
+00005840: 6976 655f 7065 7269 6f64 0a20 2020 2069  ive_period.    i
+00005850: 6620 686f 7269 7a6f 6e74 616c 5f61 6363  f horizontal_acc
+00005860: 7572 6163 793a 0a20 2020 2020 2020 2070  uracy:.        p
+00005870: 6179 6c6f 6164 5b22 686f 7269 7a6f 6e74  ayload["horizont
+00005880: 616c 5f61 6363 7572 6163 7922 5d20 3d20  al_accuracy"] = 
+00005890: 686f 7269 7a6f 6e74 616c 5f61 6363 7572  horizontal_accur
+000058a0: 6163 790a 2020 2020 6966 2068 6561 6469  acy.    if headi
+000058b0: 6e67 3a0a 2020 2020 2020 2020 7061 796c  ng:.        payl
+000058c0: 6f61 645b 2268 6561 6469 6e67 225d 203d  oad["heading"] =
+000058d0: 2068 6561 6469 6e67 0a20 2020 2069 6620   heading.    if 
+000058e0: 7072 6f78 696d 6974 795f 616c 6572 745f  proximity_alert_
+000058f0: 7261 6469 7573 3a0a 2020 2020 2020 2020  radius:.        
+00005900: 7061 796c 6f61 645b 2270 726f 7869 6d69  payload["proximi
+00005910: 7479 5f61 6c65 7274 5f72 6164 6975 7322  ty_alert_radius"
+00005920: 5d20 3d20 7072 6f78 696d 6974 795f 616c  ] = proximity_al
+00005930: 6572 745f 7261 6469 7573 0a20 2020 2069  ert_radius.    i
+00005940: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+00005950: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005960: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
+00005970: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+00005980: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
+00005990: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+000059a0: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+000059b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000059c0: 2070 6179 6c6f 6164 5b22 6469 7361 626c   payload["disabl
+000059d0: 655f 6e6f 7469 6669 6361 7469 6f6e 225d  e_notification"]
+000059e0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+000059f0: 6963 6174 696f 6e0a 2020 2020 6966 2074  ication.    if t
+00005a00: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00005a10: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
+00005a20: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
+00005a30: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
+00005a40: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
+00005a50: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00005a60: 5b22 7072 6f74 6563 745f 636f 6e74 656e  ["protect_conten
+00005a70: 7422 5d20 3d20 7072 6f74 6563 745f 636f  t"] = protect_co
+00005a80: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
+00005a90: 7361 6765 5f74 6872 6561 645f 6964 2069  sage_thread_id i
+00005aa0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00005ab0: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
+00005ac0: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
+00005ad0: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
+00005ae0: 645f 6964 0a20 2020 2069 6620 7265 706c  d_id.    if repl
+00005af0: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
+00005b00: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00005b10: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
+00005b20: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
+00005b30: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00005b40: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
+00005b50: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
+00005b60: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
+00005b70: 2020 7061 796c 6f61 645b 2262 7573 696e    payload["busin
+00005b80: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00005b90: 6422 5d20 3d20 6275 7369 6e65 7373 5f63  d"] = business_c
+00005ba0: 6f6e 6e65 6374 696f 6e5f 6964 0a20 2020  onnection_id.   
+00005bb0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00005bc0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00005bd0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00005be0: 7061 796c 6f61 6429 0a0a 0a64 6566 2065  payload)...def e
+00005bf0: 6469 745f 6d65 7373 6167 655f 6c69 7665  dit_message_live
+00005c00: 5f6c 6f63 6174 696f 6e28 0a20 2020 2020  _location(.     
+00005c10: 2020 2074 6f6b 656e 2c20 6c61 7469 7475     token, latitu
+00005c20: 6465 2c20 6c6f 6e67 6974 7564 652c 2063  de, longitude, c
+00005c30: 6861 745f 6964 3d4e 6f6e 652c 206d 6573  hat_id=None, mes
+00005c40: 7361 6765 5f69 643d 4e6f 6e65 2c20 696e  sage_id=None, in
+00005c50: 6c69 6e65 5f6d 6573 7361 6765 5f69 643d  line_message_id=
+00005c60: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
+00005c70: 7570 3d4e 6f6e 652c 0a20 2020 2020 2020  up=None,.       
+00005c80: 2074 696d 656f 7574 3d4e 6f6e 652c 2068   timeout=None, h
+00005c90: 6f72 697a 6f6e 7461 6c5f 6163 6375 7261  orizontal_accura
+00005ca0: 6379 3d4e 6f6e 652c 2068 6561 6469 6e67  cy=None, heading
+00005cb0: 3d4e 6f6e 652c 2070 726f 7869 6d69 7479  =None, proximity
+00005cc0: 5f61 6c65 7274 5f72 6164 6975 733d 4e6f  _alert_radius=No
+00005cd0: 6e65 2c20 6c69 7665 5f70 6572 696f 643d  ne, live_period=
+00005ce0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
+00005cf0: 645f 7572 6c20 3d20 7227 6564 6974 4d65  d_url = r'editMe
+00005d00: 7373 6167 654c 6976 654c 6f63 6174 696f  ssageLiveLocatio
+00005d10: 6e27 0a20 2020 2070 6179 6c6f 6164 203d  n'.    payload =
+00005d20: 207b 276c 6174 6974 7564 6527 3a20 6c61   {'latitude': la
+00005d30: 7469 7475 6465 2c20 276c 6f6e 6769 7475  titude, 'longitu
+00005d40: 6465 273a 206c 6f6e 6769 7475 6465 7d0a  de': longitude}.
+00005d50: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
+00005d60: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005d70: 2263 6861 745f 6964 225d 203d 2063 6861  "chat_id"] = cha
+00005d80: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
+00005d90: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
+00005da0: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
+00005db0: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
+00005dc0: 6964 0a20 2020 2069 6620 686f 7269 7a6f  id.    if horizo
+00005dd0: 6e74 616c 5f61 6363 7572 6163 793a 0a20  ntal_accuracy:. 
+00005de0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00005df0: 686f 7269 7a6f 6e74 616c 5f61 6363 7572  horizontal_accur
+00005e00: 6163 7922 5d20 3d20 686f 7269 7a6f 6e74  acy"] = horizont
+00005e10: 616c 5f61 6363 7572 6163 790a 2020 2020  al_accuracy.    
+00005e20: 6966 2068 6561 6469 6e67 3a0a 2020 2020  if heading:.    
+00005e30: 2020 2020 7061 796c 6f61 645b 2268 6561      payload["hea
+00005e40: 6469 6e67 225d 203d 2068 6561 6469 6e67  ding"] = heading
+00005e50: 0a20 2020 2069 6620 7072 6f78 696d 6974  .    if proximit
+00005e60: 795f 616c 6572 745f 7261 6469 7573 3a0a  y_alert_radius:.
+00005e70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005e80: 2770 726f 7869 6d69 7479 5f61 6c65 7274  'proximity_alert
+00005e90: 5f72 6164 6975 7327 5d20 3d20 7072 6f78  _radius'] = prox
+00005ea0: 696d 6974 795f 616c 6572 745f 7261 6469  imity_alert_radi
+00005eb0: 7573 0a20 2020 2069 6620 6c69 7665 5f70  us.    if live_p
+00005ec0: 6572 696f 643a 0a20 2020 2020 2020 2070  eriod:.        p
+00005ed0: 6179 6c6f 6164 5b27 6c69 7665 5f70 6572  ayload['live_per
+00005ee0: 696f 6427 5d20 3d20 6c69 7665 5f70 6572  iod'] = live_per
+00005ef0: 696f 640a 2020 2020 6966 2069 6e6c 696e  iod.    if inlin
+00005f00: 655f 6d65 7373 6167 655f 6964 3a0a 2020  e_message_id:.  
+00005f10: 2020 2020 2020 7061 796c 6f61 645b 2269        payload["i
+00005f20: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+00005f30: 225d 203d 2069 6e6c 696e 655f 6d65 7373  "] = inline_mess
+00005f40: 6167 655f 6964 0a20 2020 2069 6620 7265  age_id.    if re
+00005f50: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
+00005f60: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
+00005f70: 6c79 5f6d 6172 6b75 7022 5d20 3d20 5f63  ly_markup"] = _c
+00005f80: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
+00005f90: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
+00005fa0: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
+00005fb0: 2020 2020 7061 796c 6f61 645b 2274 696d      payload["tim
+00005fc0: 656f 7574 225d 203d 2074 696d 656f 7574  eout"] = timeout
+00005fd0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00005fe0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00005ff0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00006000: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
+00006010: 6566 2073 746f 705f 6d65 7373 6167 655f  ef stop_message_
+00006020: 6c69 7665 5f6c 6f63 6174 696f 6e28 0a20  live_location(. 
+00006030: 2020 2074 6f6b 656e 2c0a 2020 2020 6368     token,.    ch
+00006040: 6174 5f69 643d 4e6f 6e65 2c0a 2020 2020  at_id=None,.    
+00006050: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+00006060: 0a20 2020 2069 6e6c 696e 655f 6d65 7373  .    inline_mess
+00006070: 6167 655f 6964 3d4e 6f6e 652c 0a20 2020  age_id=None,.   
+00006080: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00006090: 6e65 2c0a 2020 2020 7469 6d65 6f75 743d  ne,.    timeout=
+000060a0: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
+000060b0: 686f 645f 7572 6c20 3d20 7222 7374 6f70  hod_url = r"stop
+000060c0: 4d65 7373 6167 654c 6976 654c 6f63 6174  MessageLiveLocat
+000060d0: 696f 6e22 0a20 2020 2070 6179 6c6f 6164  ion".    payload
+000060e0: 203d 207b 7d0a 2020 2020 6966 2063 6861   = {}.    if cha
+000060f0: 745f 6964 3a0a 2020 2020 2020 2020 7061  t_id:.        pa
+00006100: 796c 6f61 645b 2263 6861 745f 6964 225d  yload["chat_id"]
+00006110: 203d 2063 6861 745f 6964 0a20 2020 2069   = chat_id.    i
+00006120: 6620 6d65 7373 6167 655f 6964 3a0a 2020  f message_id:.  
+00006130: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+00006140: 6573 7361 6765 5f69 6422 5d20 3d20 6d65  essage_id"] = me
+00006150: 7373 6167 655f 6964 0a20 2020 2069 6620  ssage_id.    if 
+00006160: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+00006170: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00006180: 6164 5b22 696e 6c69 6e65 5f6d 6573 7361  ad["inline_messa
+00006190: 6765 5f69 6422 5d20 3d20 696e 6c69 6e65  ge_id"] = inline
+000061a0: 5f6d 6573 7361 6765 5f69 640a 2020 2020  _message_id.    
+000061b0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+000061c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000061d0: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
+000061e0: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+000061f0: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+00006200: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00006210: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006220: 5b22 7469 6d65 6f75 7422 5d20 3d20 7469  ["timeout"] = ti
+00006230: 6d65 6f75 740a 2020 2020 7265 7475 726e  meout.    return
+00006240: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00006250: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00006260: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00006270: 290a 0a0a 6465 6620 7365 6e64 5f76 656e  )...def send_ven
+00006280: 7565 280a 2020 2020 746f 6b65 6e2c 0a20  ue(.    token,. 
+00006290: 2020 2063 6861 745f 6964 2c0a 2020 2020     chat_id,.    
+000062a0: 6c61 7469 7475 6465 2c0a 2020 2020 6c6f  latitude,.    lo
+000062b0: 6e67 6974 7564 652c 0a20 2020 2074 6974  ngitude,.    tit
+000062c0: 6c65 2c0a 2020 2020 6164 6472 6573 732c  le,.    address,
+000062d0: 0a20 2020 2066 6f75 7273 7175 6172 655f  .    foursquare_
+000062e0: 6964 3d4e 6f6e 652c 0a20 2020 2066 6f75  id=None,.    fou
+000062f0: 7273 7175 6172 655f 7479 7065 3d4e 6f6e  rsquare_type=Non
+00006300: 652c 0a20 2020 2064 6973 6162 6c65 5f6e  e,.    disable_n
+00006310: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+00006320: 2c0a 2020 2020 7265 706c 795f 6d61 726b  ,.    reply_mark
+00006330: 7570 3d4e 6f6e 652c 0a20 2020 2074 696d  up=None,.    tim
+00006340: 656f 7574 3d4e 6f6e 652c 0a20 2020 2067  eout=None,.    g
+00006350: 6f6f 676c 655f 706c 6163 655f 6964 3d4e  oogle_place_id=N
+00006360: 6f6e 652c 0a20 2020 2067 6f6f 676c 655f  one,.    google_
+00006370: 706c 6163 655f 7479 7065 3d4e 6f6e 652c  place_type=None,
+00006380: 0a20 2020 2070 726f 7465 6374 5f63 6f6e  .    protect_con
+00006390: 7465 6e74 3d4e 6f6e 652c 0a20 2020 206d  tent=None,.    m
+000063a0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000063b0: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
+000063c0: 5f70 6172 616d 6574 6572 733d 4e6f 6e65  _parameters=None
+000063d0: 2c0a 2020 2020 6275 7369 6e65 7373 5f63  ,.    business_c
+000063e0: 6f6e 6e65 6374 696f 6e5f 6964 3d4e 6f6e  onnection_id=Non
+000063f0: 652c 0a29 3a0a 2020 2020 6d65 7468 6f64  e,.):.    method
+00006400: 5f75 726c 203d 2072 2273 656e 6456 656e  _url = r"sendVen
+00006410: 7565 220a 2020 2020 7061 796c 6f61 6420  ue".    payload 
+00006420: 3d20 7b0a 2020 2020 2020 2020 2263 6861  = {.        "cha
+00006430: 745f 6964 223a 2063 6861 745f 6964 2c0a  t_id": chat_id,.
+00006440: 2020 2020 2020 2020 226c 6174 6974 7564          "latitud
+00006450: 6522 3a20 6c61 7469 7475 6465 2c0a 2020  e": latitude,.  
+00006460: 2020 2020 2020 226c 6f6e 6769 7475 6465        "longitude
+00006470: 223a 206c 6f6e 6769 7475 6465 2c0a 2020  ": longitude,.  
+00006480: 2020 2020 2020 2274 6974 6c65 223a 2074        "title": t
+00006490: 6974 6c65 2c0a 2020 2020 2020 2020 2261  itle,.        "a
+000064a0: 6464 7265 7373 223a 2061 6464 7265 7373  ddress": address
+000064b0: 2c0a 2020 2020 7d0a 2020 2020 6966 2066  ,.    }.    if f
+000064c0: 6f75 7273 7175 6172 655f 6964 3a0a 2020  oursquare_id:.  
+000064d0: 2020 2020 2020 7061 796c 6f61 645b 2266        payload["f
+000064e0: 6f75 7273 7175 6172 655f 6964 225d 203d  oursquare_id"] =
+000064f0: 2066 6f75 7273 7175 6172 655f 6964 0a20   foursquare_id. 
+00006500: 2020 2069 6620 666f 7572 7371 7561 7265     if foursquare
+00006510: 5f74 7970 653a 0a20 2020 2020 2020 2070  _type:.        p
+00006520: 6179 6c6f 6164 5b22 666f 7572 7371 7561  ayload["foursqua
+00006530: 7265 5f74 7970 6522 5d20 3d20 666f 7572  re_type"] = four
+00006540: 7371 7561 7265 5f74 7970 650a 2020 2020  square_type.    
+00006550: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00006560: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+00006570: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00006580: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
+00006590: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
+000065a0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+000065b0: 696f 6e0a 2020 2020 6966 2072 6570 6c79  ion.    if reply
+000065c0: 5f6d 6172 6b75 703a 0a20 2020 2020 2020  _markup:.       
+000065d0: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
+000065e0: 6d61 726b 7570 225d 203d 205f 636f 6e76  markup"] = _conv
+000065f0: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
+00006600: 5f6d 6172 6b75 7029 0a20 2020 2069 6620  _markup).    if 
+00006610: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
+00006620: 2070 6179 6c6f 6164 5b22 7469 6d65 6f75   payload["timeou
+00006630: 7422 5d20 3d20 7469 6d65 6f75 740a 2020  t"] = timeout.  
+00006640: 2020 6966 2067 6f6f 676c 655f 706c 6163    if google_plac
+00006650: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
+00006660: 796c 6f61 645b 2267 6f6f 676c 655f 706c  yload["google_pl
+00006670: 6163 655f 6964 225d 203d 2067 6f6f 676c  ace_id"] = googl
+00006680: 655f 706c 6163 655f 6964 0a20 2020 2069  e_place_id.    i
+00006690: 6620 676f 6f67 6c65 5f70 6c61 6365 5f74  f google_place_t
+000066a0: 7970 653a 0a20 2020 2020 2020 2070 6179  ype:.        pay
+000066b0: 6c6f 6164 5b22 676f 6f67 6c65 5f70 6c61  load["google_pla
+000066c0: 6365 5f74 7970 6522 5d20 3d20 676f 6f67  ce_type"] = goog
+000066d0: 6c65 5f70 6c61 6365 5f74 7970 650a 2020  le_place_type.  
+000066e0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+000066f0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+00006700: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00006710: 645b 2270 726f 7465 6374 5f63 6f6e 7465  d["protect_conte
+00006720: 6e74 225d 203d 2070 726f 7465 6374 5f63  nt"] = protect_c
+00006730: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
+00006740: 7373 6167 655f 7468 7265 6164 5f69 6420  ssage_thread_id 
+00006750: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00006760: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+00006770: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
+00006780: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00006790: 6164 5f69 640a 2020 2020 6966 2072 6570  ad_id.    if rep
+000067a0: 6c79 5f70 6172 616d 6574 6572 7320 6973  ly_parameters is
+000067b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000067c0: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
+000067d0: 795f 7061 7261 6d65 7465 7273 225d 203d  y_parameters"] =
+000067e0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+000067f0: 732e 746f 5f6a 736f 6e28 290a 2020 2020  s.to_json().    
+00006800: 6966 2062 7573 696e 6573 735f 636f 6e6e  if business_conn
+00006810: 6563 7469 6f6e 5f69 643a 0a20 2020 2020  ection_id:.     
+00006820: 2020 2070 6179 6c6f 6164 5b22 6275 7369     payload["busi
+00006830: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00006840: 6964 225d 203d 2062 7573 696e 6573 735f  id"] = business_
+00006850: 636f 6e6e 6563 7469 6f6e 5f69 640a 2020  connection_id.  
+00006860: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00006870: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00006880: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00006890: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
+000068a0: 7365 6e64 5f63 6f6e 7461 6374 280a 2020  send_contact(.  
+000068b0: 2020 746f 6b65 6e2c 0a20 2020 2063 6861    token,.    cha
+000068c0: 745f 6964 2c0a 2020 2020 7068 6f6e 655f  t_id,.    phone_
+000068d0: 6e75 6d62 6572 2c0a 2020 2020 6669 7273  number,.    firs
+000068e0: 745f 6e61 6d65 2c0a 2020 2020 6c61 7374  t_name,.    last
+000068f0: 5f6e 616d 653d 4e6f 6e65 2c0a 2020 2020  _name=None,.    
+00006900: 7663 6172 643d 4e6f 6e65 2c0a 2020 2020  vcard=None,.    
+00006910: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00006920: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2072  tion=None,.    r
+00006930: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+00006940: 2c0a 2020 2020 7469 6d65 6f75 743d 4e6f  ,.    timeout=No
+00006950: 6e65 2c0a 2020 2020 7072 6f74 6563 745f  ne,.    protect_
+00006960: 636f 6e74 656e 743d 4e6f 6e65 2c0a 2020  content=None,.  
+00006970: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
+00006980: 5f69 643d 4e6f 6e65 2c0a 2020 2020 7265  _id=None,.    re
+00006990: 706c 795f 7061 7261 6d65 7465 7273 3d4e  ply_parameters=N
+000069a0: 6f6e 652c 0a20 2020 2062 7573 696e 6573  one,.    busines
+000069b0: 735f 636f 6e6e 6563 7469 6f6e 5f69 643d  s_connection_id=
+000069c0: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
+000069d0: 686f 645f 7572 6c20 3d20 7222 7365 6e64  hod_url = r"send
+000069e0: 436f 6e74 6163 7422 0a20 2020 2070 6179  Contact".    pay
+000069f0: 6c6f 6164 203d 207b 0a20 2020 2020 2020  load = {.       
+00006a00: 2022 6368 6174 5f69 6422 3a20 6368 6174   "chat_id": chat
+00006a10: 5f69 642c 0a20 2020 2020 2020 2022 7068  _id,.        "ph
+00006a20: 6f6e 655f 6e75 6d62 6572 223a 2070 686f  one_number": pho
+00006a30: 6e65 5f6e 756d 6265 722c 0a20 2020 2020  ne_number,.     
+00006a40: 2020 2022 6669 7273 745f 6e61 6d65 223a     "first_name":
+00006a50: 2066 6972 7374 5f6e 616d 652c 0a20 2020   first_name,.   
+00006a60: 207d 0a20 2020 2069 6620 6c61 7374 5f6e   }.    if last_n
+00006a70: 616d 653a 0a20 2020 2020 2020 2070 6179  ame:.        pay
+00006a80: 6c6f 6164 5b22 6c61 7374 5f6e 616d 6522  load["last_name"
+00006a90: 5d20 3d20 6c61 7374 5f6e 616d 650a 2020  ] = last_name.  
+00006aa0: 2020 6966 2076 6361 7264 3a0a 2020 2020    if vcard:.    
+00006ab0: 2020 2020 7061 796c 6f61 645b 2276 6361      payload["vca
+00006ac0: 7264 225d 203d 2076 6361 7264 0a20 2020  rd"] = vcard.   
+00006ad0: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00006ae0: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+00006af0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00006b00: 796c 6f61 645b 2264 6973 6162 6c65 5f6e  yload["disable_n
+00006b10: 6f74 6966 6963 6174 696f 6e22 5d20 3d20  otification"] = 
+00006b20: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00006b30: 7469 6f6e 0a20 2020 2069 6620 7265 706c  tion.    if repl
+00006b40: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
+00006b50: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
+00006b60: 5f6d 6172 6b75 7022 5d20 3d20 5f63 6f6e  _markup"] = _con
+00006b70: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+00006b80: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
+00006b90: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00006ba0: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
+00006bb0: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
+00006bc0: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
+00006bd0: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
+00006be0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00006bf0: 6164 5b22 7072 6f74 6563 745f 636f 6e74  ad["protect_cont
+00006c00: 656e 7422 5d20 3d20 7072 6f74 6563 745f  ent"] = protect_
+00006c10: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
+00006c20: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00006c30: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00006c40: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+00006c50: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00006c60: 225d 203d 206d 6573 7361 6765 5f74 6872  "] = message_thr
+00006c70: 6561 645f 6964 0a20 2020 2069 6620 7265  ead_id.    if re
+00006c80: 706c 795f 7061 7261 6d65 7465 7273 2069  ply_parameters i
+00006c90: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00006ca0: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
+00006cb0: 6c79 5f70 6172 616d 6574 6572 7322 5d20  ly_parameters"] 
+00006cc0: 3d20 7265 706c 795f 7061 7261 6d65 7465  = reply_paramete
+00006cd0: 7273 2e74 6f5f 6a73 6f6e 2829 0a20 2020  rs.to_json().   
+00006ce0: 2069 6620 6275 7369 6e65 7373 5f63 6f6e   if business_con
+00006cf0: 6e65 6374 696f 6e5f 6964 3a0a 2020 2020  nection_id:.    
+00006d00: 2020 2020 7061 796c 6f61 645b 2262 7573      payload["bus
+00006d10: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+00006d20: 5f69 6422 5d20 3d20 6275 7369 6e65 7373  _id"] = business
+00006d30: 5f63 6f6e 6e65 6374 696f 6e5f 6964 0a0a  _connection_id..
+00006d40: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00006d50: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00006d60: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00006d70: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
+00006d80: 6620 7365 6e64 5f63 6861 745f 6163 7469  f send_chat_acti
+00006d90: 6f6e 280a 2020 2020 746f 6b65 6e2c 0a20  on(.    token,. 
+00006da0: 2020 2063 6861 745f 6964 2c0a 2020 2020     chat_id,.    
+00006db0: 6163 7469 6f6e 2c0a 2020 2020 7469 6d65  action,.    time
+00006dc0: 6f75 743d 4e6f 6e65 2c0a 2020 2020 6d65  out=None,.    me
+00006dd0: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
+00006de0: 4e6f 6e65 2c0a 2020 2020 6275 7369 6e65  None,.    busine
+00006df0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+00006e00: 3d4e 6f6e 652c 0a29 3a0a 2020 2020 6d65  =None,.):.    me
+00006e10: 7468 6f64 5f75 726c 203d 2072 2273 656e  thod_url = r"sen
+00006e20: 6443 6861 7441 6374 696f 6e22 0a20 2020  dChatAction".   
+00006e30: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+00006e40: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
+00006e50: 2261 6374 696f 6e22 3a20 6163 7469 6f6e  "action": action
+00006e60: 7d0a 2020 2020 6966 2074 696d 656f 7574  }.    if timeout
+00006e70: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00006e80: 645b 2274 696d 656f 7574 225d 203d 2074  d["timeout"] = t
+00006e90: 696d 656f 7574 0a20 2020 2069 6620 6d65  imeout.    if me
+00006ea0: 7373 6167 655f 7468 7265 6164 5f69 6420  ssage_thread_id 
+00006eb0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00006ec0: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+00006ed0: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
+00006ee0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00006ef0: 6164 5f69 640a 2020 2020 6966 2062 7573  ad_id.    if bus
+00006f00: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+00006f10: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+00006f20: 6c6f 6164 5b22 6275 7369 6e65 7373 5f63  load["business_c
+00006f30: 6f6e 6e65 6374 696f 6e5f 6964 225d 203d  onnection_id"] =
+00006f40: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00006f50: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
+00006f60: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00006f70: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00006f80: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00006f90: 6164 290a 0a0a 6465 6620 7365 6e64 5f76  ad)...def send_v
+00006fa0: 6964 656f 280a 2020 2020 746f 6b65 6e2c  ideo(.    token,
+00006fb0: 0a20 2020 2063 6861 745f 6964 2c0a 2020  .    chat_id,.  
+00006fc0: 2020 6461 7461 2c0a 2020 2020 6475 7261    data,.    dura
+00006fd0: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2063  tion=None,.    c
+00006fe0: 6170 7469 6f6e 3d4e 6f6e 652c 0a20 2020  aption=None,.   
+00006ff0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00007000: 6e65 2c0a 2020 2020 7061 7273 655f 6d6f  ne,.    parse_mo
+00007010: 6465 3d4e 6f6e 652c 0a20 2020 2073 7570  de=None,.    sup
+00007020: 706f 7274 735f 7374 7265 616d 696e 673d  ports_streaming=
+00007030: 4e6f 6e65 2c0a 2020 2020 6469 7361 626c  None,.    disabl
+00007040: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
+00007050: 6f6e 652c 0a20 2020 2074 696d 656f 7574  one,.    timeout
+00007060: 3d4e 6f6e 652c 0a20 2020 2074 6875 6d62  =None,.    thumb
+00007070: 6e61 696c 3d4e 6f6e 652c 0a20 2020 2077  nail=None,.    w
+00007080: 6964 7468 3d4e 6f6e 652c 0a20 2020 2068  idth=None,.    h
+00007090: 6569 6768 743d 4e6f 6e65 2c0a 2020 2020  eight=None,.    
+000070a0: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
+000070b0: 3d4e 6f6e 652c 0a20 2020 2070 726f 7465  =None,.    prote
+000070c0: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
+000070d0: 0a20 2020 206d 6573 7361 6765 5f74 6872  .    message_thr
+000070e0: 6561 645f 6964 3d4e 6f6e 652c 0a20 2020  ead_id=None,.   
+000070f0: 2068 6173 5f73 706f 696c 6572 3d4e 6f6e   has_spoiler=Non
+00007100: 652c 0a20 2020 2072 6570 6c79 5f70 6172  e,.    reply_par
+00007110: 616d 6574 6572 733d 4e6f 6e65 2c0a 2020  ameters=None,.  
+00007120: 2020 6275 7369 6e65 7373 5f63 6f6e 6e65    business_conne
+00007130: 6374 696f 6e5f 6964 3d4e 6f6e 652c 0a29  ction_id=None,.)
+00007140: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00007150: 203d 2072 2273 656e 6456 6964 656f 220a   = r"sendVideo".
+00007160: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00007170: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+00007180: 647d 0a20 2020 2066 696c 6573 203d 204e  d}.    files = N
+00007190: 6f6e 650a 2020 2020 6966 206e 6f74 2075  one.    if not u
+000071a0: 7469 6c2e 6973 5f73 7472 696e 6728 6461  til.is_string(da
+000071b0: 7461 293a 0a20 2020 2020 2020 2066 696c  ta):.        fil
+000071c0: 6573 203d 207b 2276 6964 656f 223a 2064  es = {"video": d
+000071d0: 6174 617d 0a20 2020 2065 6c73 653a 0a20  ata}.    else:. 
+000071e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000071f0: 7669 6465 6f22 5d20 3d20 6461 7461 0a20  video"] = data. 
+00007200: 2020 2069 6620 6475 7261 7469 6f6e 3a0a     if duration:.
+00007210: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007220: 2264 7572 6174 696f 6e22 5d20 3d20 6475  "duration"] = du
+00007230: 7261 7469 6f6e 0a20 2020 2069 6620 6361  ration.    if ca
+00007240: 7074 696f 6e3a 0a20 2020 2020 2020 2070  ption:.        p
+00007250: 6179 6c6f 6164 5b22 6361 7074 696f 6e22  ayload["caption"
+00007260: 5d20 3d20 6361 7074 696f 6e0a 2020 2020  ] = caption.    
+00007270: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+00007280: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007290: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
+000072a0: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+000072b0: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+000072c0: 0a20 2020 2069 6620 7061 7273 655f 6d6f  .    if parse_mo
+000072d0: 6465 3a0a 2020 2020 2020 2020 7061 796c  de:.        payl
+000072e0: 6f61 645b 2270 6172 7365 5f6d 6f64 6522  oad["parse_mode"
+000072f0: 5d20 3d20 7061 7273 655f 6d6f 6465 0a20  ] = parse_mode. 
+00007300: 2020 2069 6620 7375 7070 6f72 7473 5f73     if supports_s
+00007310: 7472 6561 6d69 6e67 2069 7320 6e6f 7420  treaming is not 
+00007320: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00007330: 796c 6f61 645b 2273 7570 706f 7274 735f  yload["supports_
+00007340: 7374 7265 616d 696e 6722 5d20 3d20 7375  streaming"] = su
+00007350: 7070 6f72 7473 5f73 7472 6561 6d69 6e67  pports_streaming
+00007360: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+00007370: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+00007380: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00007390: 2020 7061 796c 6f61 645b 2264 6973 6162    payload["disab
+000073a0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e22  le_notification"
+000073b0: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+000073c0: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
+000073d0: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
+000073e0: 2070 6179 6c6f 6164 5b22 7469 6d65 6f75   payload["timeou
+000073f0: 7422 5d20 3d20 7469 6d65 6f75 740a 2020  t"] = timeout.  
+00007400: 2020 6966 2074 6875 6d62 6e61 696c 3a0a    if thumbnail:.
+00007410: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
+00007420: 7469 6c2e 6973 5f73 7472 696e 6728 7468  til.is_string(th
+00007430: 756d 626e 6169 6c29 3a0a 2020 2020 2020  umbnail):.      
+00007440: 2020 2020 2020 6966 2066 696c 6573 3a0a        if files:.
+00007450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007460: 6669 6c65 735b 2274 6875 6d62 6e61 696c  files["thumbnail
+00007470: 225d 203d 2074 6875 6d62 6e61 696c 0a20  "] = thumbnail. 
+00007480: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00007490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000074a0: 2066 696c 6573 203d 207b 2274 6875 6d62   files = {"thumb
+000074b0: 6e61 696c 223a 2074 6875 6d62 6e61 696c  nail": thumbnail
+000074c0: 7d0a 2020 2020 2020 2020 656c 7365 3a0a  }.        else:.
+000074d0: 2020 2020 2020 2020 2020 2020 7061 796c              payl
+000074e0: 6f61 645b 2274 6875 6d62 6e61 696c 225d  oad["thumbnail"]
+000074f0: 203d 2074 6875 6d62 6e61 696c 0a20 2020   = thumbnail.   
+00007500: 2069 6620 7769 6474 683a 0a20 2020 2020   if width:.     
+00007510: 2020 2070 6179 6c6f 6164 5b22 7769 6474     payload["widt
+00007520: 6822 5d20 3d20 7769 6474 680a 2020 2020  h"] = width.    
+00007530: 6966 2068 6569 6768 743a 0a20 2020 2020  if height:.     
+00007540: 2020 2070 6179 6c6f 6164 5b22 6865 6967     payload["heig
+00007550: 6874 225d 203d 2068 6569 6768 740a 2020  ht"] = height.  
+00007560: 2020 6966 2063 6170 7469 6f6e 5f65 6e74    if caption_ent
+00007570: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
+00007580: 6179 6c6f 6164 5b22 6361 7074 696f 6e5f  ayload["caption_
+00007590: 656e 7469 7469 6573 225d 203d 206a 736f  entities"] = jso
+000075a0: 6e2e 6475 6d70 7328 0a20 2020 2020 2020  n.dumps(.       
+000075b0: 2020 2020 2074 7970 6573 2e4d 6573 7361       types.Messa
+000075c0: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
+000075d0: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
+000075e0: 6e5f 656e 7469 7469 6573 290a 2020 2020  n_entities).    
+000075f0: 2020 2020 290a 2020 2020 6966 2070 726f      ).    if pro
+00007600: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+00007610: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00007620: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
+00007630: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
+00007640: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00007650: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00007660: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
+00007670: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
+00007680: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
+00007690: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+000076a0: 640a 2020 2020 6966 2068 6173 5f73 706f  d.    if has_spo
+000076b0: 696c 6572 2069 7320 6e6f 7420 4e6f 6e65  iler is not None
+000076c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000076d0: 645b 2268 6173 5f73 706f 696c 6572 225d  d["has_spoiler"]
+000076e0: 203d 2068 6173 5f73 706f 696c 6572 0a20   = has_spoiler. 
+000076f0: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
+00007700: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
+00007710: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00007720: 6f61 645b 2272 6570 6c79 5f70 6172 616d  oad["reply_param
+00007730: 6574 6572 7322 5d20 3d20 7265 706c 795f  eters"] = reply_
+00007740: 7061 7261 6d65 7465 7273 2e74 6f5f 6a73  parameters.to_js
+00007750: 6f6e 2829 0a20 2020 2069 6620 6275 7369  on().    if busi
+00007760: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00007770: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+00007780: 6f61 645b 2262 7573 696e 6573 735f 636f  oad["business_co
+00007790: 6e6e 6563 7469 6f6e 5f69 6422 5d20 3d20  nnection_id"] = 
+000077a0: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+000077b0: 696f 6e5f 6964 0a0a 2020 2020 7265 7475  ion_id..    retu
+000077c0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+000077d0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+000077e0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+000077f0: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
+00007800: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+00007810: 0a0a 6465 6620 7365 6e64 5f61 6e69 6d61  ..def send_anima
+00007820: 7469 6f6e 280a 2020 2020 746f 6b65 6e2c  tion(.    token,
+00007830: 0a20 2020 2063 6861 745f 6964 2c0a 2020  .    chat_id,.  
+00007840: 2020 6461 7461 2c0a 2020 2020 6475 7261    data,.    dura
+00007850: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2063  tion=None,.    c
+00007860: 6170 7469 6f6e 3d4e 6f6e 652c 0a20 2020  aption=None,.   
+00007870: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00007880: 6e65 2c0a 2020 2020 7061 7273 655f 6d6f  ne,.    parse_mo
+00007890: 6465 3d4e 6f6e 652c 0a20 2020 2064 6973  de=None,.    dis
+000078a0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000078b0: 6e3d 4e6f 6e65 2c0a 2020 2020 7469 6d65  n=None,.    time
+000078c0: 6f75 743d 4e6f 6e65 2c0a 2020 2020 7468  out=None,.    th
+000078d0: 756d 626e 6169 6c3d 4e6f 6e65 2c0a 2020  umbnail=None,.  
+000078e0: 2020 6361 7074 696f 6e5f 656e 7469 7469    caption_entiti
+000078f0: 6573 3d4e 6f6e 652c 0a20 2020 2070 726f  es=None,.    pro
+00007900: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
+00007910: 652c 0a20 2020 2077 6964 7468 3d4e 6f6e  e,.    width=Non
+00007920: 652c 0a20 2020 2068 6569 6768 743d 4e6f  e,.    height=No
+00007930: 6e65 2c0a 2020 2020 6d65 7373 6167 655f  ne,.    message_
+00007940: 7468 7265 6164 5f69 643d 4e6f 6e65 2c0a  thread_id=None,.
+00007950: 2020 2020 7265 706c 795f 7061 7261 6d65      reply_parame
+00007960: 7465 7273 3d4e 6f6e 652c 0a20 2020 2068  ters=None,.    h
+00007970: 6173 5f73 706f 696c 6572 3d4e 6f6e 652c  as_spoiler=None,
+00007980: 0a20 2020 2062 7573 696e 6573 735f 636f  .    business_co
+00007990: 6e6e 6563 7469 6f6e 5f69 643d 4e6f 6e65  nnection_id=None
+000079a0: 2c0a 293a 0a20 2020 206d 6574 686f 645f  ,.):.    method_
+000079b0: 7572 6c20 3d20 7222 7365 6e64 416e 696d  url = r"sendAnim
+000079c0: 6174 696f 6e22 0a20 2020 2070 6179 6c6f  ation".    paylo
+000079d0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+000079e0: 2063 6861 745f 6964 7d0a 2020 2020 6669   chat_id}.    fi
+000079f0: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
+00007a00: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
+00007a10: 7269 6e67 2864 6174 6129 3a0a 2020 2020  ring(data):.    
+00007a20: 2020 2020 6669 6c65 7320 3d20 7b22 616e      files = {"an
+00007a30: 696d 6174 696f 6e22 3a20 6461 7461 7d0a  imation": data}.
+00007a40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00007a50: 2020 7061 796c 6f61 645b 2261 6e69 6d61    payload["anima
+00007a60: 7469 6f6e 225d 203d 2064 6174 610a 2020  tion"] = data.  
+00007a70: 2020 6966 2064 7572 6174 696f 6e3a 0a20    if duration:. 
+00007a80: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00007a90: 6475 7261 7469 6f6e 225d 203d 2064 7572  duration"] = dur
+00007aa0: 6174 696f 6e0a 2020 2020 6966 2063 6170  ation.    if cap
+00007ab0: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
+00007ac0: 796c 6f61 645b 2263 6170 7469 6f6e 225d  yload["caption"]
+00007ad0: 203d 2063 6170 7469 6f6e 0a20 2020 2069   = caption.    i
+00007ae0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+00007af0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007b00: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
+00007b10: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+00007b20: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
+00007b30: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
+00007b40: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00007b50: 6164 5b22 7061 7273 655f 6d6f 6465 225d  ad["parse_mode"]
+00007b60: 203d 2070 6172 7365 5f6d 6f64 650a 2020   = parse_mode.  
+00007b70: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+00007b80: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+00007b90: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00007ba0: 6179 6c6f 6164 5b22 6469 7361 626c 655f  ayload["disable_
+00007bb0: 6e6f 7469 6669 6361 7469 6f6e 225d 203d  notification"] =
+00007bc0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00007bd0: 6174 696f 6e0a 2020 2020 6966 2074 696d  ation.    if tim
+00007be0: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+00007bf0: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
+00007c00: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+00007c10: 6620 7468 756d 626e 6169 6c3a 0a20 2020  f thumbnail:.   
+00007c20: 2020 2020 2069 6620 6e6f 7420 7574 696c       if not util
+00007c30: 2e69 735f 7374 7269 6e67 2874 6875 6d62  .is_string(thumb
+00007c40: 6e61 696c 293a 0a20 2020 2020 2020 2020  nail):.         
+00007c50: 2020 2069 6620 6669 6c65 733a 0a20 2020     if files:.   
+00007c60: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00007c70: 6573 5b22 7468 756d 626e 6169 6c22 5d20  es["thumbnail"] 
+00007c80: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
+00007c90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00007ca0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00007cb0: 6c65 7320 3d20 7b22 7468 756d 626e 6169  les = {"thumbnai
+00007cc0: 6c22 3a20 7468 756d 626e 6169 6c7d 0a20  l": thumbnail}. 
+00007cd0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00007ce0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
+00007cf0: 5b22 7468 756d 626e 6169 6c22 5d20 3d20  ["thumbnail"] = 
+00007d00: 7468 756d 626e 6169 6c0a 2020 2020 6966  thumbnail.    if
+00007d10: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00007d20: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
+00007d30: 6164 5b22 6361 7074 696f 6e5f 656e 7469  ad["caption_enti
+00007d40: 7469 6573 225d 203d 206a 736f 6e2e 6475  ties"] = json.du
+00007d50: 6d70 7328 0a20 2020 2020 2020 2020 2020  mps(.           
+00007d60: 2074 7970 6573 2e4d 6573 7361 6765 456e   types.MessageEn
+00007d70: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
+00007d80: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
+00007d90: 7469 7469 6573 290a 2020 2020 2020 2020  tities).        
+00007da0: 290a 2020 2020 6966 2070 726f 7465 6374  ).    if protect
+00007db0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
+00007dc0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00007dd0: 796c 6f61 645b 2270 726f 7465 6374 5f63  yload["protect_c
+00007de0: 6f6e 7465 6e74 225d 203d 2070 726f 7465  ontent"] = prote
+00007df0: 6374 5f63 6f6e 7465 6e74 0a20 2020 2069  ct_content.    i
+00007e00: 6620 7769 6474 683a 0a20 2020 2020 2020  f width:.       
+00007e10: 2070 6179 6c6f 6164 5b22 7769 6474 6822   payload["width"
+00007e20: 5d20 3d20 7769 6474 680a 2020 2020 6966  ] = width.    if
+00007e30: 2068 6569 6768 743a 0a20 2020 2020 2020   height:.       
+00007e40: 2070 6179 6c6f 6164 5b22 6865 6967 6874   payload["height
+00007e50: 225d 203d 2068 6569 6768 740a 2020 2020  "] = height.    
+00007e60: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
+00007e70: 645f 6964 3a0a 2020 2020 2020 2020 7061  d_id:.        pa
+00007e80: 796c 6f61 645b 226d 6573 7361 6765 5f74  yload["message_t
+00007e90: 6872 6561 645f 6964 225d 203d 206d 6573  hread_id"] = mes
+00007ea0: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
+00007eb0: 2020 2069 6620 6861 735f 7370 6f69 6c65     if has_spoile
+00007ec0: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
+00007ed0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00007ee0: 6861 735f 7370 6f69 6c65 7222 5d20 3d20  has_spoiler"] = 
+00007ef0: 6861 735f 7370 6f69 6c65 720a 2020 2020  has_spoiler.    
+00007f00: 6966 2072 6570 6c79 5f70 6172 616d 6574  if reply_paramet
+00007f10: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
+00007f20: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007f30: 5b22 7265 706c 795f 7061 7261 6d65 7465  ["reply_paramete
+00007f40: 7273 225d 203d 2072 6570 6c79 5f70 6172  rs"] = reply_par
+00007f50: 616d 6574 6572 732e 746f 5f6a 736f 6e28  ameters.to_json(
+00007f60: 290a 2020 2020 6966 2062 7573 696e 6573  ).    if busines
+00007f70: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
+00007f80: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007f90: 5b22 6275 7369 6e65 7373 5f63 6f6e 6e65  ["business_conne
+00007fa0: 6374 696f 6e5f 6964 225d 203d 2062 7573  ction_id"] = bus
+00007fb0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+00007fc0: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
+00007fd0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+00007fe0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00007ff0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+00008000: 6669 6c65 733d 6669 6c65 732c 206d 6574  files=files, met
+00008010: 686f 643d 2270 6f73 7422 290a 0a0a 6465  hod="post")...de
+00008020: 6620 7365 6e64 5f76 6f69 6365 280a 2020  f send_voice(.  
+00008030: 2020 746f 6b65 6e2c 0a20 2020 2063 6861    token,.    cha
+00008040: 745f 6964 2c0a 2020 2020 766f 6963 652c  t_id,.    voice,
+00008050: 0a20 2020 2063 6170 7469 6f6e 3d4e 6f6e  .    caption=Non
+00008060: 652c 0a20 2020 2064 7572 6174 696f 6e3d  e,.    duration=
+00008070: 4e6f 6e65 2c0a 2020 2020 7265 706c 795f  None,.    reply_
+00008080: 6d61 726b 7570 3d4e 6f6e 652c 0a20 2020  markup=None,.   
+00008090: 2070 6172 7365 5f6d 6f64 653d 4e6f 6e65   parse_mode=None
+000080a0: 2c0a 2020 2020 6469 7361 626c 655f 6e6f  ,.    disable_no
+000080b0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+000080c0: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
+000080d0: 652c 0a20 2020 2063 6170 7469 6f6e 5f65  e,.    caption_e
+000080e0: 6e74 6974 6965 733d 4e6f 6e65 2c0a 2020  ntities=None,.  
+000080f0: 2020 7072 6f74 6563 745f 636f 6e74 656e    protect_conten
+00008100: 743d 4e6f 6e65 2c0a 2020 2020 6d65 7373  t=None,.    mess
+00008110: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
+00008120: 6e65 2c0a 2020 2020 7265 706c 795f 7061  ne,.    reply_pa
+00008130: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
+00008140: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
+00008150: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
+00008160: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+00008170: 6c20 3d20 7222 7365 6e64 566f 6963 6522  l = r"sendVoice"
+00008180: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00008190: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
+000081a0: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
+000081b0: 4e6f 6e65 0a20 2020 2069 6620 6e6f 7420  None.    if not 
+000081c0: 7574 696c 2e69 735f 7374 7269 6e67 2876  util.is_string(v
+000081d0: 6f69 6365 293a 0a20 2020 2020 2020 2066  oice):.        f
+000081e0: 696c 6573 203d 207b 2276 6f69 6365 223a  iles = {"voice":
+000081f0: 2076 6f69 6365 7d0a 2020 2020 656c 7365   voice}.    else
+00008200: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00008210: 645b 2276 6f69 6365 225d 203d 2076 6f69  d["voice"] = voi
+00008220: 6365 0a20 2020 2069 6620 6361 7074 696f  ce.    if captio
+00008230: 6e3a 0a20 2020 2020 2020 2070 6179 6c6f  n:.        paylo
+00008240: 6164 5b22 6361 7074 696f 6e22 5d20 3d20  ad["caption"] = 
+00008250: 6361 7074 696f 6e0a 2020 2020 6966 2064  caption.    if d
+00008260: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
+00008270: 2070 6179 6c6f 6164 5b22 6475 7261 7469   payload["durati
+00008280: 6f6e 225d 203d 2064 7572 6174 696f 6e0a  on"] = duration.
+00008290: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+000082a0: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
+000082b0: 6c6f 6164 5b22 7265 706c 795f 6d61 726b  load["reply_mark
+000082c0: 7570 225d 203d 205f 636f 6e76 6572 745f  up"] = _convert_
+000082d0: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+000082e0: 6b75 7029 0a20 2020 2069 6620 7061 7273  kup).    if pars
+000082f0: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
+00008300: 7061 796c 6f61 645b 2270 6172 7365 5f6d  payload["parse_m
+00008310: 6f64 6522 5d20 3d20 7061 7273 655f 6d6f  ode"] = parse_mo
+00008320: 6465 0a20 2020 2069 6620 6469 7361 626c  de.    if disabl
+00008330: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
+00008340: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00008350: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
+00008360: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00008370: 6e22 5d20 3d20 6469 7361 626c 655f 6e6f  n"] = disable_no
+00008380: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
+00008390: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
+000083a0: 2020 2070 6179 6c6f 6164 5b22 7469 6d65     payload["time
+000083b0: 6f75 7422 5d20 3d20 7469 6d65 6f75 740a  out"] = timeout.
+000083c0: 2020 2020 6966 2063 6170 7469 6f6e 5f65      if caption_e
+000083d0: 6e74 6974 6965 733a 0a20 2020 2020 2020  ntities:.       
+000083e0: 2070 6179 6c6f 6164 5b22 6361 7074 696f   payload["captio
+000083f0: 6e5f 656e 7469 7469 6573 225d 203d 206a  n_entities"] = j
+00008400: 736f 6e2e 6475 6d70 7328 0a20 2020 2020  son.dumps(.     
+00008410: 2020 2020 2020 2074 7970 6573 2e4d 6573         types.Mes
+00008420: 7361 6765 456e 7469 7479 2e74 6f5f 6c69  sageEntity.to_li
+00008430: 7374 5f6f 665f 6469 6374 7328 6361 7074  st_of_dicts(capt
+00008440: 696f 6e5f 656e 7469 7469 6573 290a 2020  ion_entities).  
+00008450: 2020 2020 2020 290a 2020 2020 6966 2070        ).    if p
+00008460: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
+00008470: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00008480: 2020 2020 7061 796c 6f61 645b 2270 726f      payload["pro
+00008490: 7465 6374 5f63 6f6e 7465 6e74 225d 203d  tect_content"] =
+000084a0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+000084b0: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
+000084c0: 7468 7265 6164 5f69 643a 0a20 2020 2020  thread_id:.     
+000084d0: 2020 2070 6179 6c6f 6164 5b22 6d65 7373     payload["mess
+000084e0: 6167 655f 7468 7265 6164 5f69 6422 5d20  age_thread_id"] 
+000084f0: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
+00008500: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
+00008510: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
+00008520: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00008530: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
+00008540: 7061 7261 6d65 7465 7273 225d 203d 2072  parameters"] = r
+00008550: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
+00008560: 746f 5f6a 736f 6e28 290a 2020 2020 6966  to_json().    if
+00008570: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00008580: 7469 6f6e 5f69 643a 0a20 2020 2020 2020  tion_id:.       
+00008590: 2070 6179 6c6f 6164 5b22 6275 7369 6e65   payload["busine
+000085a0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+000085b0: 225d 203d 2062 7573 696e 6573 735f 636f  "] = business_co
+000085c0: 6e6e 6563 7469 6f6e 5f69 640a 2020 2020  nnection_id.    
+000085d0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+000085e0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+000085f0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00008600: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
+00008610: 6c65 732c 206d 6574 686f 643d 2270 6f73  les, method="pos
+00008620: 7422 290a 0a0a 6465 6620 7365 6e64 5f76  t")...def send_v
+00008630: 6964 656f 5f6e 6f74 6528 0a20 2020 2074  ideo_note(.    t
+00008640: 6f6b 656e 2c0a 2020 2020 6368 6174 5f69  oken,.    chat_i
+00008650: 642c 0a20 2020 2064 6174 612c 0a20 2020  d,.    data,.   
+00008660: 2064 7572 6174 696f 6e3d 4e6f 6e65 2c0a   duration=None,.
+00008670: 2020 2020 6c65 6e67 7468 3d4e 6f6e 652c      length=None,
+00008680: 0a20 2020 2072 6570 6c79 5f6d 6172 6b75  .    reply_marku
+00008690: 703d 4e6f 6e65 2c0a 2020 2020 6469 7361  p=None,.    disa
+000086a0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000086b0: 3d4e 6f6e 652c 0a20 2020 2074 696d 656f  =None,.    timeo
+000086c0: 7574 3d4e 6f6e 652c 0a20 2020 2074 6875  ut=None,.    thu
+000086d0: 6d62 6e61 696c 3d4e 6f6e 652c 0a20 2020  mbnail=None,.   
+000086e0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+000086f0: 3d4e 6f6e 652c 0a20 2020 206d 6573 7361  =None,.    messa
+00008700: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
+00008710: 652c 0a20 2020 2072 6570 6c79 5f70 6172  e,.    reply_par
+00008720: 616d 6574 6572 733d 4e6f 6e65 2c0a 2020  ameters=None,.  
+00008730: 2020 6275 7369 6e65 7373 5f63 6f6e 6e65    business_conne
+00008740: 6374 696f 6e5f 6964 3d4e 6f6e 652c 0a29  ction_id=None,.)
+00008750: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00008760: 203d 2072 2273 656e 6456 6964 656f 4e6f   = r"sendVideoNo
+00008770: 7465 220a 2020 2020 7061 796c 6f61 6420  te".    payload 
+00008780: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
+00008790: 6174 5f69 647d 0a20 2020 2066 696c 6573  at_id}.    files
+000087a0: 203d 204e 6f6e 650a 2020 2020 6966 206e   = None.    if n
+000087b0: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
+000087c0: 6728 6461 7461 293a 0a20 2020 2020 2020  g(data):.       
+000087d0: 2066 696c 6573 203d 207b 2276 6964 656f   files = {"video
+000087e0: 5f6e 6f74 6522 3a20 6461 7461 7d0a 2020  _note": data}.  
+000087f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00008800: 7061 796c 6f61 645b 2276 6964 656f 5f6e  payload["video_n
+00008810: 6f74 6522 5d20 3d20 6461 7461 0a20 2020  ote"] = data.   
+00008820: 2069 6620 6475 7261 7469 6f6e 3a0a 2020   if duration:.  
+00008830: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
+00008840: 7572 6174 696f 6e22 5d20 3d20 6475 7261  uration"] = dura
+00008850: 7469 6f6e 0a20 2020 2069 6620 6c65 6e67  tion.    if leng
+00008860: 7468 2061 6e64 2028 7374 7228 6c65 6e67  th and (str(leng
+00008870: 7468 292e 6973 6469 6769 7428 2920 616e  th).isdigit() an
+00008880: 6420 696e 7428 6c65 6e67 7468 2920 3c3d  d int(length) <=
+00008890: 2036 3339 293a 0a20 2020 2020 2020 2070   639):.        p
+000088a0: 6179 6c6f 6164 5b22 6c65 6e67 7468 225d  ayload["length"]
+000088b0: 203d 206c 656e 6774 680a 2020 2020 656c   = length.    el
+000088c0: 7365 3a0a 2020 2020 2020 2020 7061 796c  se:.        payl
+000088d0: 6f61 645b 226c 656e 6774 6822 5d20 3d20  oad["length"] = 
+000088e0: 3633 3920 2023 2073 6565 6d73 206c 696b  639  # seems lik
+000088f0: 6520 6974 2069 7320 4d41 5820 6c65 6e67  e it is MAX leng
+00008900: 7468 2073 697a 650a 2020 2020 6966 2072  th size.    if r
+00008910: 6570 6c79 5f6d 6172 6b75 703a 0a20 2020  eply_markup:.   
+00008920: 2020 2020 2070 6179 6c6f 6164 5b22 7265       payload["re
+00008930: 706c 795f 6d61 726b 7570 225d 203d 205f  ply_markup"] = _
+00008940: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
+00008950: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
+00008960: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00008970: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+00008980: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00008990: 796c 6f61 645b 2264 6973 6162 6c65 5f6e  yload["disable_n
+000089a0: 6f74 6966 6963 6174 696f 6e22 5d20 3d20  otification"] = 
+000089b0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000089c0: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
+000089d0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+000089e0: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
+000089f0: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
+00008a00: 2074 6875 6d62 6e61 696c 3a0a 2020 2020   thumbnail:.    
+00008a10: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
+00008a20: 6973 5f73 7472 696e 6728 7468 756d 626e  is_string(thumbn
+00008a30: 6169 6c29 3a0a 2020 2020 2020 2020 2020  ail):.          
+00008a40: 2020 6966 2066 696c 6573 3a0a 2020 2020    if files:.    
+00008a50: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00008a60: 735b 2274 6875 6d62 6e61 696c 225d 203d  s["thumbnail"] =
+00008a70: 2074 6875 6d62 6e61 696c 0a20 2020 2020   thumbnail.     
+00008a80: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00008a90: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00008aa0: 6573 203d 207b 2274 6875 6d62 6e61 696c  es = {"thumbnail
+00008ab0: 223a 2074 6875 6d62 6e61 696c 7d0a 2020  ": thumbnail}.  
+00008ac0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00008ad0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00008ae0: 2274 6875 6d62 6e61 696c 225d 203d 2074  "thumbnail"] = t
+00008af0: 6875 6d62 6e61 696c 0a20 2020 2069 6620  humbnail.    if 
+00008b00: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+00008b10: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00008b20: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
+00008b30: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
+00008b40: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
+00008b50: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
+00008b60: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
+00008b70: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
+00008b80: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
+00008b90: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
+00008ba0: 645f 6964 0a20 2020 2069 6620 7265 706c  d_id.    if repl
+00008bb0: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
+00008bc0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00008bd0: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
+00008be0: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
+00008bf0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00008c00: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
+00008c10: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
+00008c20: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
+00008c30: 2020 7061 796c 6f61 645b 2262 7573 696e    payload["busin
+00008c40: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00008c50: 6422 5d20 3d20 6275 7369 6e65 7373 5f63  d"] = business_c
+00008c60: 6f6e 6e65 6374 696f 6e5f 6964 0a20 2020  onnection_id.   
+00008c70: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00008c80: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00008c90: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00008ca0: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00008cb0: 696c 6573 2c20 6d65 7468 6f64 3d22 706f  iles, method="po
+00008cc0: 7374 2229 0a0a 0a64 6566 2073 656e 645f  st")...def send_
+00008cd0: 6175 6469 6f28 0a20 2020 2074 6f6b 656e  audio(.    token
+00008ce0: 2c0a 2020 2020 6368 6174 5f69 642c 0a20  ,.    chat_id,. 
+00008cf0: 2020 2061 7564 696f 2c0a 2020 2020 6361     audio,.    ca
+00008d00: 7074 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ption=None,.    
+00008d10: 6475 7261 7469 6f6e 3d4e 6f6e 652c 0a20  duration=None,. 
+00008d20: 2020 2070 6572 666f 726d 6572 3d4e 6f6e     performer=Non
+00008d30: 652c 0a20 2020 2074 6974 6c65 3d4e 6f6e  e,.    title=Non
+00008d40: 652c 0a20 2020 2072 6570 6c79 5f6d 6172  e,.    reply_mar
+00008d50: 6b75 703d 4e6f 6e65 2c0a 2020 2020 7061  kup=None,.    pa
+00008d60: 7273 655f 6d6f 6465 3d4e 6f6e 652c 0a20  rse_mode=None,. 
+00008d70: 2020 2064 6973 6162 6c65 5f6e 6f74 6966     disable_notif
+00008d80: 6963 6174 696f 6e3d 4e6f 6e65 2c0a 2020  ication=None,.  
+00008d90: 2020 7469 6d65 6f75 743d 4e6f 6e65 2c0a    timeout=None,.
+00008da0: 2020 2020 7468 756d 626e 6169 6c3d 4e6f      thumbnail=No
+00008db0: 6e65 2c0a 2020 2020 6361 7074 696f 6e5f  ne,.    caption_
+00008dc0: 656e 7469 7469 6573 3d4e 6f6e 652c 0a20  entities=None,. 
+00008dd0: 2020 2070 726f 7465 6374 5f63 6f6e 7465     protect_conte
+00008de0: 6e74 3d4e 6f6e 652c 0a20 2020 206d 6573  nt=None,.    mes
+00008df0: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+00008e00: 6f6e 652c 0a20 2020 2072 6570 6c79 5f70  one,.    reply_p
+00008e10: 6172 616d 6574 6572 733d 4e6f 6e65 2c0a  arameters=None,.
+00008e20: 2020 2020 6275 7369 6e65 7373 5f63 6f6e      business_con
+00008e30: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 652c  nection_id=None,
+00008e40: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+00008e50: 726c 203d 2072 2273 656e 6441 7564 696f  rl = r"sendAudio
+00008e60: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+00008e70: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
+00008e80: 5f69 647d 0a20 2020 2066 696c 6573 203d  _id}.    files =
+00008e90: 204e 6f6e 650a 2020 2020 6966 206e 6f74   None.    if not
+00008ea0: 2075 7469 6c2e 6973 5f73 7472 696e 6728   util.is_string(
+00008eb0: 6175 6469 6f29 3a0a 2020 2020 2020 2020  audio):.        
+00008ec0: 6669 6c65 7320 3d20 7b22 6175 6469 6f22  files = {"audio"
+00008ed0: 3a20 6175 6469 6f7d 0a20 2020 2065 6c73  : audio}.    els
+00008ee0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00008ef0: 6164 5b22 6175 6469 6f22 5d20 3d20 6175  ad["audio"] = au
+00008f00: 6469 6f0a 2020 2020 6966 2063 6170 7469  dio.    if capti
+00008f10: 6f6e 3a0a 2020 2020 2020 2020 7061 796c  on:.        payl
+00008f20: 6f61 645b 2263 6170 7469 6f6e 225d 203d  oad["caption"] =
+00008f30: 2063 6170 7469 6f6e 0a20 2020 2069 6620   caption.    if 
+00008f40: 6475 7261 7469 6f6e 3a0a 2020 2020 2020  duration:.      
+00008f50: 2020 7061 796c 6f61 645b 2264 7572 6174    payload["durat
+00008f60: 696f 6e22 5d20 3d20 6475 7261 7469 6f6e  ion"] = duration
+00008f70: 0a20 2020 2069 6620 7065 7266 6f72 6d65  .    if performe
+00008f80: 723a 0a20 2020 2020 2020 2070 6179 6c6f  r:.        paylo
+00008f90: 6164 5b22 7065 7266 6f72 6d65 7222 5d20  ad["performer"] 
+00008fa0: 3d20 7065 7266 6f72 6d65 720a 2020 2020  = performer.    
+00008fb0: 6966 2074 6974 6c65 3a0a 2020 2020 2020  if title:.      
+00008fc0: 2020 7061 796c 6f61 645b 2274 6974 6c65    payload["title
+00008fd0: 225d 203d 2074 6974 6c65 0a20 2020 2069  "] = title.    i
+00008fe0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+00008ff0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009000: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
+00009010: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+00009020: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
+00009030: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
+00009040: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00009050: 6164 5b22 7061 7273 655f 6d6f 6465 225d  ad["parse_mode"]
+00009060: 203d 2070 6172 7365 5f6d 6f64 650a 2020   = parse_mode.  
+00009070: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+00009080: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+00009090: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+000090a0: 6179 6c6f 6164 5b22 6469 7361 626c 655f  ayload["disable_
+000090b0: 6e6f 7469 6669 6361 7469 6f6e 225d 203d  notification"] =
+000090c0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+000090d0: 6174 696f 6e0a 2020 2020 6966 2074 696d  ation.    if tim
+000090e0: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+000090f0: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
+00009100: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+00009110: 6620 7468 756d 626e 6169 6c3a 0a20 2020  f thumbnail:.   
+00009120: 2020 2020 2069 6620 6e6f 7420 7574 696c       if not util
+00009130: 2e69 735f 7374 7269 6e67 2874 6875 6d62  .is_string(thumb
+00009140: 6e61 696c 293a 0a20 2020 2020 2020 2020  nail):.         
+00009150: 2020 2069 6620 6669 6c65 733a 0a20 2020     if files:.   
+00009160: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00009170: 6573 5b22 7468 756d 626e 6169 6c22 5d20  es["thumbnail"] 
+00009180: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
+00009190: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000091a0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+000091b0: 6c65 7320 3d20 7b22 7468 756d 626e 6169  les = {"thumbnai
+000091c0: 6c22 3a20 7468 756d 626e 6169 6c7d 0a20  l": thumbnail}. 
+000091d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000091e0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
+000091f0: 5b22 7468 756d 626e 6169 6c22 5d20 3d20  ["thumbnail"] = 
+00009200: 7468 756d 626e 6169 6c0a 2020 2020 6966  thumbnail.    if
+00009210: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00009220: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
+00009230: 6164 5b22 6361 7074 696f 6e5f 656e 7469  ad["caption_enti
+00009240: 7469 6573 225d 203d 206a 736f 6e2e 6475  ties"] = json.du
+00009250: 6d70 7328 0a20 2020 2020 2020 2020 2020  mps(.           
+00009260: 2074 7970 6573 2e4d 6573 7361 6765 456e   types.MessageEn
+00009270: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
+00009280: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
+00009290: 7469 7469 6573 290a 2020 2020 2020 2020  tities).        
+000092a0: 290a 2020 2020 6966 2070 726f 7465 6374  ).    if protect
+000092b0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
+000092c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+000092d0: 796c 6f61 645b 2270 726f 7465 6374 5f63  yload["protect_c
+000092e0: 6f6e 7465 6e74 225d 203d 2070 726f 7465  ontent"] = prote
+000092f0: 6374 5f63 6f6e 7465 6e74 0a20 2020 2069  ct_content.    i
+00009300: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
+00009310: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+00009320: 6c6f 6164 5b22 6d65 7373 6167 655f 7468  load["message_th
+00009330: 7265 6164 5f69 6422 5d20 3d20 6d65 7373  read_id"] = mess
+00009340: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
+00009350: 2020 6966 2072 6570 6c79 5f70 6172 616d    if reply_param
+00009360: 6574 6572 7320 6973 206e 6f74 204e 6f6e  eters is not Non
+00009370: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00009380: 6164 5b22 7265 706c 795f 7061 7261 6d65  ad["reply_parame
+00009390: 7465 7273 225d 203d 2072 6570 6c79 5f70  ters"] = reply_p
+000093a0: 6172 616d 6574 6572 732e 746f 5f6a 736f  arameters.to_jso
+000093b0: 6e28 290a 2020 2020 6966 2062 7573 696e  n().    if busin
+000093c0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+000093d0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+000093e0: 6164 5b22 6275 7369 6e65 7373 5f63 6f6e  ad["business_con
+000093f0: 6e65 6374 696f 6e5f 6964 225d 203d 2062  nection_id"] = b
+00009400: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00009410: 6f6e 5f69 640a 2020 2020 7265 7475 726e  on_id.    return
+00009420: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00009430: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00009440: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00009450: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
+00009460: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
+00009470: 6465 6620 7365 6e64 5f64 6174 6128 0a20  def send_data(. 
+00009480: 2020 2074 6f6b 656e 2c0a 2020 2020 6368     token,.    ch
+00009490: 6174 5f69 642c 0a20 2020 2064 6174 612c  at_id,.    data,
+000094a0: 0a20 2020 2064 6174 615f 7479 7065 2c0a  .    data_type,.
+000094b0: 2020 2020 7265 706c 795f 6d61 726b 7570      reply_markup
+000094c0: 3d4e 6f6e 652c 0a20 2020 2070 6172 7365  =None,.    parse
+000094d0: 5f6d 6f64 653d 4e6f 6e65 2c0a 2020 2020  _mode=None,.    
+000094e0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000094f0: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2074  tion=None,.    t
+00009500: 696d 656f 7574 3d4e 6f6e 652c 0a20 2020  imeout=None,.   
+00009510: 2063 6170 7469 6f6e 3d4e 6f6e 652c 0a20   caption=None,. 
+00009520: 2020 2074 6875 6d62 6e61 696c 3d4e 6f6e     thumbnail=Non
+00009530: 652c 0a20 2020 2063 6170 7469 6f6e 5f65  e,.    caption_e
+00009540: 6e74 6974 6965 733d 4e6f 6e65 2c0a 2020  ntities=None,.  
+00009550: 2020 6469 7361 626c 655f 636f 6e74 656e    disable_conten
+00009560: 745f 7479 7065 5f64 6574 6563 7469 6f6e  t_type_detection
+00009570: 3d4e 6f6e 652c 0a20 2020 2076 6973 6962  =None,.    visib
+00009580: 6c65 5f66 696c 655f 6e61 6d65 3d4e 6f6e  le_file_name=Non
+00009590: 652c 0a20 2020 2070 726f 7465 6374 5f63  e,.    protect_c
+000095a0: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
+000095b0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+000095c0: 6964 3d4e 6f6e 652c 0a20 2020 2065 6d6f  id=None,.    emo
+000095d0: 6a69 3d4e 6f6e 652c 0a20 2020 2072 6570  ji=None,.    rep
+000095e0: 6c79 5f70 6172 616d 6574 6572 733d 4e6f  ly_parameters=No
+000095f0: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
+00009600: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
+00009610: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
+00009620: 6f64 5f75 726c 203d 2067 6574 5f6d 6574  od_url = get_met
+00009630: 686f 645f 6279 5f74 7970 6528 6461 7461  hod_by_type(data
+00009640: 5f74 7970 6529 0a20 2020 2070 6179 6c6f  _type).    paylo
+00009650: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+00009660: 2063 6861 745f 6964 7d0a 2020 2020 6669   chat_id}.    fi
+00009670: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
+00009680: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
+00009690: 7269 6e67 2864 6174 6129 3a0a 2020 2020  ring(data):.    
+000096a0: 2020 2020 6669 6c65 5f64 6174 6120 3d20      file_data = 
+000096b0: 6461 7461 0a20 2020 2020 2020 2069 6620  data.        if 
+000096c0: 7669 7369 626c 655f 6669 6c65 5f6e 616d  visible_file_nam
+000096d0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+000096e0: 696c 655f 6461 7461 203d 2028 7669 7369  ile_data = (visi
+000096f0: 626c 655f 6669 6c65 5f6e 616d 652c 2064  ble_file_name, d
+00009700: 6174 6129 0a20 2020 2020 2020 2066 696c  ata).        fil
+00009710: 6573 203d 207b 6461 7461 5f74 7970 653a  es = {data_type:
+00009720: 2066 696c 655f 6461 7461 7d0a 2020 2020   file_data}.    
+00009730: 656c 7365 3a0a 2020 2020 2020 2020 7061  else:.        pa
+00009740: 796c 6f61 645b 6461 7461 5f74 7970 655d  yload[data_type]
+00009750: 203d 2064 6174 610a 2020 2020 6966 2072   = data.    if r
+00009760: 6570 6c79 5f6d 6172 6b75 703a 0a20 2020  eply_markup:.   
+00009770: 2020 2020 2070 6179 6c6f 6164 5b22 7265       payload["re
+00009780: 706c 795f 6d61 726b 7570 225d 203d 205f  ply_markup"] = _
+00009790: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
+000097a0: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
+000097b0: 2069 6620 7061 7273 655f 6d6f 6465 2061   if parse_mode a
+000097c0: 6e64 2064 6174 615f 7479 7065 203d 3d20  nd data_type == 
+000097d0: 2264 6f63 756d 656e 7422 3a0a 2020 2020  "document":.    
+000097e0: 2020 2020 7061 796c 6f61 645b 2270 6172      payload["par
+000097f0: 7365 5f6d 6f64 6522 5d20 3d20 7061 7273  se_mode"] = pars
+00009800: 655f 6d6f 6465 0a20 2020 2069 6620 6469  e_mode.    if di
+00009810: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00009820: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
+00009830: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009840: 2264 6973 6162 6c65 5f6e 6f74 6966 6963  "disable_notific
+00009850: 6174 696f 6e22 5d20 3d20 6469 7361 626c  ation"] = disabl
+00009860: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
+00009870: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
+00009880: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00009890: 7469 6d65 6f75 7422 5d20 3d20 7469 6d65  timeout"] = time
+000098a0: 6f75 740a 2020 2020 6966 2063 6170 7469  out.    if capti
+000098b0: 6f6e 3a0a 2020 2020 2020 2020 7061 796c  on:.        payl
+000098c0: 6f61 645b 2263 6170 7469 6f6e 225d 203d  oad["caption"] =
+000098d0: 2063 6170 7469 6f6e 0a20 2020 2069 6620   caption.    if 
+000098e0: 7468 756d 626e 6169 6c3a 0a20 2020 2020  thumbnail:.     
+000098f0: 2020 2069 6620 6e6f 7420 7574 696c 2e69     if not util.i
+00009900: 735f 7374 7269 6e67 2874 6875 6d62 6e61  s_string(thumbna
+00009910: 696c 293a 0a20 2020 2020 2020 2020 2020  il):.           
+00009920: 2069 6620 6669 6c65 733a 0a20 2020 2020   if files:.     
+00009930: 2020 2020 2020 2020 2020 2066 696c 6573             files
+00009940: 5b22 7468 756d 626e 6169 6c22 5d20 3d20  ["thumbnail"] = 
+00009950: 7468 756d 626e 6169 6c0a 2020 2020 2020  thumbnail.      
+00009960: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00009970: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00009980: 7320 3d20 7b22 7468 756d 626e 6169 6c22  s = {"thumbnail"
+00009990: 3a20 7468 756d 626e 6169 6c7d 0a20 2020  : thumbnail}.   
+000099a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000099b0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000099c0: 7468 756d 626e 6169 6c22 5d20 3d20 7468  thumbnail"] = th
+000099d0: 756d 626e 6169 6c0a 2020 2020 6966 2063  umbnail.    if c
+000099e0: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
+000099f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00009a00: 5b22 6361 7074 696f 6e5f 656e 7469 7469  ["caption_entiti
+00009a10: 6573 225d 203d 206a 736f 6e2e 6475 6d70  es"] = json.dump
+00009a20: 7328 0a20 2020 2020 2020 2020 2020 2074  s(.            t
+00009a30: 7970 6573 2e4d 6573 7361 6765 456e 7469  ypes.MessageEnti
+00009a40: 7479 2e74 6f5f 6c69 7374 5f6f 665f 6469  ty.to_list_of_di
+00009a50: 6374 7328 6361 7074 696f 6e5f 656e 7469  cts(caption_enti
+00009a60: 7469 6573 290a 2020 2020 2020 2020 290a  ties).        ).
+00009a70: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+00009a80: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+00009a90: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00009aa0: 6f61 645b 2270 726f 7465 6374 5f63 6f6e  oad["protect_con
+00009ab0: 7465 6e74 225d 203d 2070 726f 7465 6374  tent"] = protect
+00009ac0: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
+00009ad0: 6d65 7468 6f64 5f75 726c 203d 3d20 2273  method_url == "s
+00009ae0: 656e 6444 6f63 756d 656e 7422 2061 6e64  endDocument" and
+00009af0: 2064 6973 6162 6c65 5f63 6f6e 7465 6e74   disable_content
+00009b00: 5f74 7970 655f 6465 7465 6374 696f 6e20  _type_detection 
+00009b10: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00009b20: 2020 2020 2070 6179 6c6f 6164 5b22 6469       payload["di
+00009b30: 7361 626c 655f 636f 6e74 656e 745f 7479  sable_content_ty
+00009b40: 7065 5f64 6574 6563 7469 6f6e 225d 203d  pe_detection"] =
+00009b50: 2064 6973 6162 6c65 5f63 6f6e 7465 6e74   disable_content
+00009b60: 5f74 7970 655f 6465 7465 6374 696f 6e0a  _type_detection.
+00009b70: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
+00009b80: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
+00009b90: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
+00009ba0: 6765 5f74 6872 6561 645f 6964 225d 203d  ge_thread_id"] =
+00009bb0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00009bc0: 6964 0a20 2020 2069 6620 656d 6f6a 693a  id.    if emoji:
+00009bd0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00009be0: 5b22 656d 6f6a 6922 5d20 3d20 656d 6f6a  ["emoji"] = emoj
+00009bf0: 690a 2020 2020 6966 2072 6570 6c79 5f70  i.    if reply_p
+00009c00: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
+00009c10: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00009c20: 6179 6c6f 6164 5b22 7265 706c 795f 7061  ayload["reply_pa
+00009c30: 7261 6d65 7465 7273 225d 203d 2072 6570  rameters"] = rep
+00009c40: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00009c50: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
+00009c60: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00009c70: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00009c80: 6179 6c6f 6164 5b22 6275 7369 6e65 7373  ayload["business
+00009c90: 5f63 6f6e 6e65 6374 696f 6e5f 6964 225d  _connection_id"]
+00009ca0: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00009cb0: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+00009cc0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00009cd0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00009ce0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00009cf0: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+00009d00: 732c 206d 6574 686f 643d 2270 6f73 7422  s, method="post"
+00009d10: 290a 0a0a 6465 6620 6765 745f 6d65 7468  )...def get_meth
+00009d20: 6f64 5f62 795f 7479 7065 2864 6174 615f  od_by_type(data_
+00009d30: 7479 7065 293a 0a20 2020 2069 6620 6461  type):.    if da
+00009d40: 7461 5f74 7970 6520 3d3d 2022 646f 6375  ta_type == "docu
+00009d50: 6d65 6e74 223a 0a20 2020 2020 2020 2072  ment":.        r
+00009d60: 6574 7572 6e20 7222 7365 6e64 446f 6375  eturn r"sendDocu
+00009d70: 6d65 6e74 220a 2020 2020 6966 2064 6174  ment".    if dat
+00009d80: 615f 7479 7065 203d 3d20 2273 7469 636b  a_type == "stick
+00009d90: 6572 223a 0a20 2020 2020 2020 2072 6574  er":.        ret
+00009da0: 7572 6e20 7222 7365 6e64 5374 6963 6b65  urn r"sendSticke
+00009db0: 7222 0a0a 0a64 6566 2062 616e 5f63 6861  r"...def ban_cha
+00009dc0: 745f 6d65 6d62 6572 2874 6f6b 656e 2c20  t_member(token, 
+00009dd0: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
+00009de0: 2c20 756e 7469 6c5f 6461 7465 3d4e 6f6e  , until_date=Non
+00009df0: 652c 2072 6576 6f6b 655f 6d65 7373 6167  e, revoke_messag
+00009e00: 6573 3d4e 6f6e 6529 3a0a 2020 2020 6d65  es=None):.    me
+00009e10: 7468 6f64 5f75 726c 203d 2022 6261 6e43  thod_url = "banC
+00009e20: 6861 744d 656d 6265 7222 0a20 2020 2070  hatMember".    p
+00009e30: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+00009e40: 6964 223a 2063 6861 745f 6964 2c20 2275  id": chat_id, "u
+00009e50: 7365 725f 6964 223a 2075 7365 725f 6964  ser_id": user_id
+00009e60: 7d0a 2020 2020 6966 2069 7369 6e73 7461  }.    if isinsta
+00009e70: 6e63 6528 756e 7469 6c5f 6461 7465 2c20  nce(until_date, 
+00009e80: 6461 7465 7469 6d65 293a 0a20 2020 2020  datetime):.     
+00009e90: 2020 2070 6179 6c6f 6164 5b22 756e 7469     payload["unti
+00009ea0: 6c5f 6461 7465 225d 203d 2075 6e74 696c  l_date"] = until
+00009eb0: 5f64 6174 652e 7469 6d65 7374 616d 7028  _date.timestamp(
+00009ec0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+00009ed0: 2020 2020 7061 796c 6f61 645b 2275 6e74      payload["unt
+00009ee0: 696c 5f64 6174 6522 5d20 3d20 756e 7469  il_date"] = unti
+00009ef0: 6c5f 6461 7465 0a20 2020 2069 6620 7265  l_date.    if re
+00009f00: 766f 6b65 5f6d 6573 7361 6765 7320 6973  voke_messages is
+00009f10: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00009f20: 2020 2070 6179 6c6f 6164 5b22 7265 766f     payload["revo
+00009f30: 6b65 5f6d 6573 7361 6765 7322 5d20 3d20  ke_messages"] = 
+00009f40: 7265 766f 6b65 5f6d 6573 7361 6765 730a  revoke_messages.
+00009f50: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00009f60: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00009f70: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00009f80: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+00009f90: 6f64 3d22 706f 7374 2229 0a0a 0a64 6566  od="post")...def
+00009fa0: 2075 6e62 616e 5f63 6861 745f 6d65 6d62   unban_chat_memb
+00009fb0: 6572 2874 6f6b 656e 2c20 6368 6174 5f69  er(token, chat_i
+00009fc0: 642c 2075 7365 725f 6964 2c20 6f6e 6c79  d, user_id, only
+00009fd0: 5f69 665f 6261 6e6e 6564 293a 0a20 2020  _if_banned):.   
+00009fe0: 206d 6574 686f 645f 7572 6c20 3d20 2275   method_url = "u
+00009ff0: 6e62 616e 4368 6174 4d65 6d62 6572 220a  nbanChatMember".
+0000a000: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+0000a010: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+0000a020: 642c 2022 7573 6572 5f69 6422 3a20 7573  d, "user_id": us
+0000a030: 6572 5f69 647d 0a20 2020 2069 6620 6f6e  er_id}.    if on
+0000a040: 6c79 5f69 665f 6261 6e6e 6564 2069 7320  ly_if_banned is 
+0000a050: 6e6f 7420 4e6f 6e65 3a20 2023 204e 6f6e  not None:  # Non
+0000a060: 6520 2f20 5472 7565 202f 2046 616c 7365  e / True / False
+0000a070: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000a080: 5b22 6f6e 6c79 5f69 665f 6261 6e6e 6564  ["only_if_banned
+0000a090: 225d 203d 206f 6e6c 795f 6966 5f62 616e  "] = only_if_ban
+0000a0a0: 6e65 640a 2020 2020 7265 7475 726e 205f  ned.    return _
+0000a0b0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000a0c0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000a0d0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000a0e0: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000a0f0: 0a64 6566 2072 6573 7472 6963 745f 6368  .def restrict_ch
+0000a100: 6174 5f6d 656d 6265 7228 0a20 2020 2074  at_member(.    t
+0000a110: 6f6b 656e 2c0a 2020 2020 6368 6174 5f69  oken,.    chat_i
+0000a120: 642c 0a20 2020 2075 7365 725f 6964 2c0a  d,.    user_id,.
+0000a130: 2020 2020 7065 726d 6973 7369 6f6e 732c      permissions,
+0000a140: 0a20 2020 2075 6e74 696c 5f64 6174 653d  .    until_date=
+0000a150: 4e6f 6e65 2c0a 2020 2020 7573 655f 696e  None,.    use_in
+0000a160: 6465 7065 6e64 656e 745f 6368 6174 5f70  dependent_chat_p
+0000a170: 6572 6d69 7373 696f 6e73 3d4e 6f6e 652c  ermissions=None,
+0000a180: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+0000a190: 726c 203d 2022 7265 7374 7269 6374 4368  rl = "restrictCh
+0000a1a0: 6174 4d65 6d62 6572 220a 2020 2020 7061  atMember".    pa
+0000a1b0: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
+0000a1c0: 2020 2263 6861 745f 6964 223a 2063 6861    "chat_id": cha
+0000a1d0: 745f 6964 2c0a 2020 2020 2020 2020 2275  t_id,.        "u
+0000a1e0: 7365 725f 6964 223a 2075 7365 725f 6964  ser_id": user_id
+0000a1f0: 2c0a 2020 2020 2020 2020 2270 6572 6d69  ,.        "permi
+0000a200: 7373 696f 6e73 223a 2070 6572 6d69 7373  ssions": permiss
+0000a210: 696f 6e73 2e74 6f5f 6a73 6f6e 2829 2c0a  ions.to_json(),.
+0000a220: 2020 2020 7d0a 0a20 2020 2069 6620 7573      }..    if us
+0000a230: 655f 696e 6465 7065 6e64 656e 745f 6368  e_independent_ch
+0000a240: 6174 5f70 6572 6d69 7373 696f 6e73 2069  at_permissions i
+0000a250: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a260: 2020 2020 7061 796c 6f61 645b 2275 7365      payload["use
+0000a270: 5f69 6e64 6570 656e 6465 6e74 5f63 6861  _independent_cha
+0000a280: 745f 7065 726d 6973 7369 6f6e 7322 5d20  t_permissions"] 
+0000a290: 3d20 7573 655f 696e 6465 7065 6e64 656e  = use_independen
+0000a2a0: 745f 6368 6174 5f70 6572 6d69 7373 696f  t_chat_permissio
+0000a2b0: 6e73 0a20 2020 2069 6620 756e 7469 6c5f  ns.    if until_
+0000a2c0: 6461 7465 2069 7320 6e6f 7420 4e6f 6e65  date is not None
+0000a2d0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+0000a2e0: 6e73 7461 6e63 6528 756e 7469 6c5f 6461  nstance(until_da
+0000a2f0: 7465 2c20 6461 7465 7469 6d65 293a 0a20  te, datetime):. 
+0000a300: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+0000a310: 6164 5b22 756e 7469 6c5f 6461 7465 225d  ad["until_date"]
+0000a320: 203d 2075 6e74 696c 5f64 6174 652e 7469   = until_date.ti
+0000a330: 6d65 7374 616d 7028 290a 2020 2020 2020  mestamp().      
+0000a340: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000a350: 2020 2020 7061 796c 6f61 645b 2275 6e74      payload["unt
+0000a360: 696c 5f64 6174 6522 5d20 3d20 756e 7469  il_date"] = unti
+0000a370: 6c5f 6461 7465 0a0a 2020 2020 7265 7475  l_date..    retu
+0000a380: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+0000a390: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000a3a0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000a3b0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+0000a3c0: 2229 0a0a 0a64 6566 2070 726f 6d6f 7465  ")...def promote
+0000a3d0: 5f63 6861 745f 6d65 6d62 6572 280a 2020  _chat_member(.  
+0000a3e0: 2020 746f 6b65 6e2c 0a20 2020 2063 6861    token,.    cha
+0000a3f0: 745f 6964 2c0a 2020 2020 7573 6572 5f69  t_id,.    user_i
+0000a400: 642c 0a20 2020 2063 616e 5f63 6861 6e67  d,.    can_chang
+0000a410: 655f 696e 666f 3d4e 6f6e 652c 0a20 2020  e_info=None,.   
+0000a420: 2063 616e 5f70 6f73 745f 6d65 7373 6167   can_post_messag
+0000a430: 6573 3d4e 6f6e 652c 0a20 2020 2063 616e  es=None,.    can
+0000a440: 5f65 6469 745f 6d65 7373 6167 6573 3d4e  _edit_messages=N
+0000a450: 6f6e 652c 0a20 2020 2063 616e 5f64 656c  one,.    can_del
+0000a460: 6574 655f 6d65 7373 6167 6573 3d4e 6f6e  ete_messages=Non
+0000a470: 652c 0a20 2020 2063 616e 5f69 6e76 6974  e,.    can_invit
+0000a480: 655f 7573 6572 733d 4e6f 6e65 2c0a 2020  e_users=None,.  
+0000a490: 2020 6361 6e5f 7265 7374 7269 6374 5f6d    can_restrict_m
+0000a4a0: 656d 6265 7273 3d4e 6f6e 652c 0a20 2020  embers=None,.   
+0000a4b0: 2063 616e 5f70 696e 5f6d 6573 7361 6765   can_pin_message
+0000a4c0: 733d 4e6f 6e65 2c0a 2020 2020 6361 6e5f  s=None,.    can_
+0000a4d0: 7072 6f6d 6f74 655f 6d65 6d62 6572 733d  promote_members=
+0000a4e0: 4e6f 6e65 2c0a 2020 2020 6973 5f61 6e6f  None,.    is_ano
+0000a4f0: 6e79 6d6f 7573 3d4e 6f6e 652c 0a20 2020  nymous=None,.   
+0000a500: 2063 616e 5f6d 616e 6167 655f 6368 6174   can_manage_chat
+0000a510: 3d4e 6f6e 652c 0a20 2020 2063 616e 5f6d  =None,.    can_m
+0000a520: 616e 6167 655f 7669 6465 6f5f 6368 6174  anage_video_chat
+0000a530: 733d 4e6f 6e65 2c0a 2020 2020 6361 6e5f  s=None,.    can_
+0000a540: 6d61 6e61 6765 5f74 6f70 6963 733d 4e6f  manage_topics=No
+0000a550: 6e65 2c0a 2020 2020 6361 6e5f 706f 7374  ne,.    can_post
+0000a560: 5f73 746f 7269 6573 3d4e 6f6e 652c 0a20  _stories=None,. 
+0000a570: 2020 2063 616e 5f65 6469 745f 7374 6f72     can_edit_stor
+0000a580: 6965 733d 4e6f 6e65 2c0a 2020 2020 6361  ies=None,.    ca
+0000a590: 6e5f 6465 6c65 7465 5f73 746f 7269 6573  n_delete_stories
+0000a5a0: 3d4e 6f6e 652c 0a29 3a0a 2020 2020 6d65  =None,.):.    me
+0000a5b0: 7468 6f64 5f75 726c 203d 2022 7072 6f6d  thod_url = "prom
+0000a5c0: 6f74 6543 6861 744d 656d 6265 7222 0a20  oteChatMember". 
+0000a5d0: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
+0000a5e0: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
+0000a5f0: 2c20 2275 7365 725f 6964 223a 2075 7365  , "user_id": use
+0000a600: 725f 6964 7d0a 2020 2020 6966 2063 616e  r_id}.    if can
+0000a610: 5f63 6861 6e67 655f 696e 666f 2069 7320  _change_info is 
+0000a620: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000a630: 2020 7061 796c 6f61 645b 2263 616e 5f63    payload["can_c
+0000a640: 6861 6e67 655f 696e 666f 225d 203d 2063  hange_info"] = c
+0000a650: 616e 5f63 6861 6e67 655f 696e 666f 0a20  an_change_info. 
+0000a660: 2020 2069 6620 6361 6e5f 706f 7374 5f6d     if can_post_m
+0000a670: 6573 7361 6765 7320 6973 206e 6f74 204e  essages is not N
+0000a680: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+0000a690: 6c6f 6164 5b22 6361 6e5f 706f 7374 5f6d  load["can_post_m
+0000a6a0: 6573 7361 6765 7322 5d20 3d20 6361 6e5f  essages"] = can_
+0000a6b0: 706f 7374 5f6d 6573 7361 6765 730a 2020  post_messages.  
+0000a6c0: 2020 6966 2063 616e 5f65 6469 745f 6d65    if can_edit_me
+0000a6d0: 7373 6167 6573 2069 7320 6e6f 7420 4e6f  ssages is not No
+0000a6e0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000a6f0: 6f61 645b 2263 616e 5f65 6469 745f 6d65  oad["can_edit_me
+0000a700: 7373 6167 6573 225d 203d 2063 616e 5f65  ssages"] = can_e
+0000a710: 6469 745f 6d65 7373 6167 6573 0a20 2020  dit_messages.   
+0000a720: 2069 6620 6361 6e5f 6465 6c65 7465 5f6d   if can_delete_m
+0000a730: 6573 7361 6765 7320 6973 206e 6f74 204e  essages is not N
+0000a740: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+0000a750: 6c6f 6164 5b22 6361 6e5f 6465 6c65 7465  load["can_delete
+0000a760: 5f6d 6573 7361 6765 7322 5d20 3d20 6361  _messages"] = ca
+0000a770: 6e5f 6465 6c65 7465 5f6d 6573 7361 6765  n_delete_message
+0000a780: 730a 2020 2020 6966 2063 616e 5f69 6e76  s.    if can_inv
+0000a790: 6974 655f 7573 6572 7320 6973 206e 6f74  ite_users is not
+0000a7a0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000a7b0: 6179 6c6f 6164 5b22 6361 6e5f 696e 7669  ayload["can_invi
+0000a7c0: 7465 5f75 7365 7273 225d 203d 2063 616e  te_users"] = can
+0000a7d0: 5f69 6e76 6974 655f 7573 6572 730a 2020  _invite_users.  
+0000a7e0: 2020 6966 2063 616e 5f72 6573 7472 6963    if can_restric
+0000a7f0: 745f 6d65 6d62 6572 7320 6973 206e 6f74  t_members is not
+0000a800: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000a810: 6179 6c6f 6164 5b22 6361 6e5f 7265 7374  ayload["can_rest
+0000a820: 7269 6374 5f6d 656d 6265 7273 225d 203d  rict_members"] =
+0000a830: 2063 616e 5f72 6573 7472 6963 745f 6d65   can_restrict_me
+0000a840: 6d62 6572 730a 2020 2020 6966 2063 616e  mbers.    if can
+0000a850: 5f70 696e 5f6d 6573 7361 6765 7320 6973  _pin_messages is
+0000a860: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000a870: 2020 2070 6179 6c6f 6164 5b22 6361 6e5f     payload["can_
+0000a880: 7069 6e5f 6d65 7373 6167 6573 225d 203d  pin_messages"] =
+0000a890: 2063 616e 5f70 696e 5f6d 6573 7361 6765   can_pin_message
+0000a8a0: 730a 2020 2020 6966 2063 616e 5f70 726f  s.    if can_pro
+0000a8b0: 6d6f 7465 5f6d 656d 6265 7273 2069 7320  mote_members is 
+0000a8c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000a8d0: 2020 7061 796c 6f61 645b 2263 616e 5f70    payload["can_p
+0000a8e0: 726f 6d6f 7465 5f6d 656d 6265 7273 225d  romote_members"]
+0000a8f0: 203d 2063 616e 5f70 726f 6d6f 7465 5f6d   = can_promote_m
+0000a900: 656d 6265 7273 0a20 2020 2069 6620 6973  embers.    if is
+0000a910: 5f61 6e6f 6e79 6d6f 7573 2069 7320 6e6f  _anonymous is no
+0000a920: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000a930: 7061 796c 6f61 645b 2269 735f 616e 6f6e  payload["is_anon
+0000a940: 796d 6f75 7322 5d20 3d20 6973 5f61 6e6f  ymous"] = is_ano
+0000a950: 6e79 6d6f 7573 0a20 2020 2069 6620 6361  nymous.    if ca
+0000a960: 6e5f 6d61 6e61 6765 5f63 6861 7420 6973  n_manage_chat is
+0000a970: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000a980: 2020 2070 6179 6c6f 6164 5b22 6361 6e5f     payload["can_
+0000a990: 6d61 6e61 6765 5f63 6861 7422 5d20 3d20  manage_chat"] = 
+0000a9a0: 6361 6e5f 6d61 6e61 6765 5f63 6861 740a  can_manage_chat.
+0000a9b0: 2020 2020 6966 2063 616e 5f6d 616e 6167      if can_manag
+0000a9c0: 655f 7669 6465 6f5f 6368 6174 7320 6973  e_video_chats is
+0000a9d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000a9e0: 2020 2070 6179 6c6f 6164 5b22 6361 6e5f     payload["can_
+0000a9f0: 6d61 6e61 6765 5f76 6964 656f 5f63 6861  manage_video_cha
+0000aa00: 7473 225d 203d 2063 616e 5f6d 616e 6167  ts"] = can_manag
+0000aa10: 655f 7669 6465 6f5f 6368 6174 730a 2020  e_video_chats.  
+0000aa20: 2020 6966 2063 616e 5f6d 616e 6167 655f    if can_manage_
+0000aa30: 746f 7069 6373 2069 7320 6e6f 7420 4e6f  topics is not No
+0000aa40: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000aa50: 6f61 645b 2263 616e 5f6d 616e 6167 655f  oad["can_manage_
+0000aa60: 746f 7069 6373 225d 203d 2063 616e 5f6d  topics"] = can_m
+0000aa70: 616e 6167 655f 746f 7069 6373 0a20 2020  anage_topics.   
+0000aa80: 2069 6620 6361 6e5f 706f 7374 5f73 746f   if can_post_sto
+0000aa90: 7269 6573 2069 7320 6e6f 7420 4e6f 6e65  ries is not None
+0000aaa0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000aab0: 645b 2263 616e 5f70 6f73 745f 7374 6f72  d["can_post_stor
+0000aac0: 6965 7322 5d20 3d20 6361 6e5f 706f 7374  ies"] = can_post
+0000aad0: 5f73 746f 7269 6573 0a20 2020 2069 6620  _stories.    if 
+0000aae0: 6361 6e5f 6564 6974 5f73 746f 7269 6573  can_edit_stories
+0000aaf0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000ab00: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
+0000ab10: 616e 5f65 6469 745f 7374 6f72 6965 7322  an_edit_stories"
+0000ab20: 5d20 3d20 6361 6e5f 6564 6974 5f73 746f  ] = can_edit_sto
+0000ab30: 7269 6573 0a20 2020 2069 6620 6361 6e5f  ries.    if can_
+0000ab40: 6465 6c65 7465 5f73 746f 7269 6573 2069  delete_stories i
+0000ab50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000ab60: 2020 2020 7061 796c 6f61 645b 2263 616e      payload["can
+0000ab70: 5f64 656c 6574 655f 7374 6f72 6965 7322  _delete_stories"
+0000ab80: 5d20 3d20 6361 6e5f 6465 6c65 7465 5f73  ] = can_delete_s
+0000ab90: 746f 7269 6573 0a20 2020 2072 6574 7572  tories.    retur
+0000aba0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000abb0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000abc0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000abd0: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+0000abe0: 290a 0a0a 6465 6620 7365 745f 6368 6174  )...def set_chat
+0000abf0: 5f61 646d 696e 6973 7472 6174 6f72 5f63  _administrator_c
+0000ac00: 7573 746f 6d5f 7469 746c 6528 746f 6b65  ustom_title(toke
+0000ac10: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
+0000ac20: 5f69 642c 2063 7573 746f 6d5f 7469 746c  _id, custom_titl
+0000ac30: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+0000ac40: 726c 203d 2022 7365 7443 6861 7441 646d  rl = "setChatAdm
+0000ac50: 696e 6973 7472 6174 6f72 4375 7374 6f6d  inistratorCustom
+0000ac60: 5469 746c 6522 0a20 2020 2070 6179 6c6f  Title".    paylo
+0000ac70: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+0000ac80: 2063 6861 745f 6964 2c20 2275 7365 725f   chat_id, "user_
+0000ac90: 6964 223a 2075 7365 725f 6964 2c20 2263  id": user_id, "c
+0000aca0: 7573 746f 6d5f 7469 746c 6522 3a20 6375  ustom_title": cu
+0000acb0: 7374 6f6d 5f74 6974 6c65 7d0a 2020 2020  stom_title}.    
+0000acc0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+0000acd0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000ace0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000acf0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
+0000ad00: 706f 7374 2229 0a0a 0a64 6566 2062 616e  post")...def ban
+0000ad10: 5f63 6861 745f 7365 6e64 6572 5f63 6861  _chat_sender_cha
+0000ad20: 7428 746f 6b65 6e2c 2063 6861 745f 6964  t(token, chat_id
+0000ad30: 2c20 7365 6e64 6572 5f63 6861 745f 6964  , sender_chat_id
+0000ad40: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000ad50: 6c20 3d20 2262 616e 4368 6174 5365 6e64  l = "banChatSend
+0000ad60: 6572 4368 6174 220a 2020 2020 7061 796c  erChat".    payl
+0000ad70: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
+0000ad80: 3a20 6368 6174 5f69 642c 2022 7365 6e64  : chat_id, "send
+0000ad90: 6572 5f63 6861 745f 6964 223a 2073 656e  er_chat_id": sen
+0000ada0: 6465 725f 6368 6174 5f69 647d 0a20 2020  der_chat_id}.   
+0000adb0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+0000adc0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000add0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000ade0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+0000adf0: 2270 6f73 7422 290a 0a0a 6465 6620 756e  "post")...def un
+0000ae00: 6261 6e5f 6368 6174 5f73 656e 6465 725f  ban_chat_sender_
+0000ae10: 6368 6174 2874 6f6b 656e 2c20 6368 6174  chat(token, chat
+0000ae20: 5f69 642c 2073 656e 6465 725f 6368 6174  _id, sender_chat
+0000ae30: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
+0000ae40: 5f75 726c 203d 2022 756e 6261 6e43 6861  _url = "unbanCha
+0000ae50: 7453 656e 6465 7243 6861 7422 0a20 2020  tSenderChat".   
+0000ae60: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+0000ae70: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
+0000ae80: 2273 656e 6465 725f 6368 6174 5f69 6422  "sender_chat_id"
+0000ae90: 3a20 7365 6e64 6572 5f63 6861 745f 6964  : sender_chat_id
+0000aea0: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+0000aeb0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000aec0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000aed0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000aee0: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
+0000aef0: 6566 2073 6574 5f63 6861 745f 7065 726d  ef set_chat_perm
+0000af00: 6973 7369 6f6e 7328 0a20 2020 2074 6f6b  issions(.    tok
+0000af10: 656e 2c20 6368 6174 5f69 642c 2070 6572  en, chat_id, per
+0000af20: 6d69 7373 696f 6e73 2c20 7573 655f 696e  missions, use_in
+0000af30: 6465 7065 6e64 656e 745f 6368 6174 5f70  dependent_chat_p
+0000af40: 6572 6d69 7373 696f 6e73 3d4e 6f6e 650a  ermissions=None.
+0000af50: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000af60: 6c20 3d20 2273 6574 4368 6174 5065 726d  l = "setChatPerm
+0000af70: 6973 7369 6f6e 7322 0a20 2020 2070 6179  issions".    pay
+0000af80: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
+0000af90: 223a 2063 6861 745f 6964 2c20 2270 6572  ": chat_id, "per
+0000afa0: 6d69 7373 696f 6e73 223a 2070 6572 6d69  missions": permi
+0000afb0: 7373 696f 6e73 2e74 6f5f 6a73 6f6e 2829  ssions.to_json()
+0000afc0: 7d0a 2020 2020 6966 2075 7365 5f69 6e64  }.    if use_ind
+0000afd0: 6570 656e 6465 6e74 5f63 6861 745f 7065  ependent_chat_pe
+0000afe0: 726d 6973 7369 6f6e 7320 6973 206e 6f74  rmissions is not
+0000aff0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000b000: 6179 6c6f 6164 5b22 7573 655f 696e 6465  ayload["use_inde
+0000b010: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
+0000b020: 6d69 7373 696f 6e73 225d 203d 2075 7365  missions"] = use
+0000b030: 5f69 6e64 6570 656e 6465 6e74 5f63 6861  _independent_cha
+0000b040: 745f 7065 726d 6973 7369 6f6e 730a 2020  t_permissions.  
+0000b050: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+0000b060: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+0000b070: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+0000b080: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
+0000b090: 3d22 706f 7374 2229 0a0a 0a64 6566 2063  ="post")...def c
+0000b0a0: 7265 6174 655f 6368 6174 5f69 6e76 6974  reate_chat_invit
+0000b0b0: 655f 6c69 6e6b 280a 2020 2020 746f 6b65  e_link(.    toke
+0000b0c0: 6e2c 2063 6861 745f 6964 2c20 6e61 6d65  n, chat_id, name
+0000b0d0: 2c20 6578 7069 7265 5f64 6174 652c 206d  , expire_date, m
+0000b0e0: 656d 6265 725f 6c69 6d69 742c 2063 7265  ember_limit, cre
+0000b0f0: 6174 6573 5f6a 6f69 6e5f 7265 7175 6573  ates_join_reques
+0000b100: 740a 293a 0a20 2020 206d 6574 686f 645f  t.):.    method_
+0000b110: 7572 6c20 3d20 2263 7265 6174 6543 6861  url = "createCha
+0000b120: 7449 6e76 6974 654c 696e 6b22 0a20 2020  tInviteLink".   
+0000b130: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+0000b140: 745f 6964 223a 2063 6861 745f 6964 7d0a  t_id": chat_id}.
+0000b150: 0a20 2020 2069 6620 6578 7069 7265 5f64  .    if expire_d
+0000b160: 6174 6520 6973 206e 6f74 204e 6f6e 653a  ate is not None:
+0000b170: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0000b180: 7374 616e 6365 2865 7870 6972 655f 6461  stance(expire_da
+0000b190: 7465 2c20 6461 7465 7469 6d65 293a 0a20  te, datetime):. 
+0000b1a0: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+0000b1b0: 6164 5b22 6578 7069 7265 5f64 6174 6522  ad["expire_date"
+0000b1c0: 5d20 3d20 6578 7069 7265 5f64 6174 652e  ] = expire_date.
+0000b1d0: 7469 6d65 7374 616d 7028 290a 2020 2020  timestamp().    
+0000b1e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000b1f0: 2020 2020 2020 7061 796c 6f61 645b 2265        payload["e
+0000b200: 7870 6972 655f 6461 7465 225d 203d 2065  xpire_date"] = e
+0000b210: 7870 6972 655f 6461 7465 0a20 2020 2069  xpire_date.    i
+0000b220: 6620 6d65 6d62 6572 5f6c 696d 6974 3a0a  f member_limit:.
+0000b230: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000b240: 226d 656d 6265 725f 6c69 6d69 7422 5d20  "member_limit"] 
+0000b250: 3d20 6d65 6d62 6572 5f6c 696d 6974 0a20  = member_limit. 
+0000b260: 2020 2069 6620 6372 6561 7465 735f 6a6f     if creates_jo
+0000b270: 696e 5f72 6571 7565 7374 2069 7320 6e6f  in_request is no
+0000b280: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000b290: 7061 796c 6f61 645b 2263 7265 6174 6573  payload["creates
+0000b2a0: 5f6a 6f69 6e5f 7265 7175 6573 7422 5d20  _join_request"] 
+0000b2b0: 3d20 6372 6561 7465 735f 6a6f 696e 5f72  = creates_join_r
+0000b2c0: 6571 7565 7374 0a20 2020 2069 6620 6e61  equest.    if na
+0000b2d0: 6d65 3a0a 2020 2020 2020 2020 7061 796c  me:.        payl
+0000b2e0: 6f61 645b 226e 616d 6522 5d20 3d20 6e61  oad["name"] = na
+0000b2f0: 6d65 0a0a 2020 2020 7265 7475 726e 205f  me..    return _
+0000b300: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000b310: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000b320: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000b330: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000b340: 0a64 6566 2065 6469 745f 6368 6174 5f69  .def edit_chat_i
+0000b350: 6e76 6974 655f 6c69 6e6b 280a 2020 2020  nvite_link(.    
+0000b360: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000b370: 696e 7669 7465 5f6c 696e 6b2c 206e 616d  invite_link, nam
+0000b380: 652c 2065 7870 6972 655f 6461 7465 2c20  e, expire_date, 
+0000b390: 6d65 6d62 6572 5f6c 696d 6974 2c20 6372  member_limit, cr
+0000b3a0: 6561 7465 735f 6a6f 696e 5f72 6571 7565  eates_join_reque
+0000b3b0: 7374 0a29 3a0a 2020 2020 6d65 7468 6f64  st.):.    method
+0000b3c0: 5f75 726c 203d 2022 6564 6974 4368 6174  _url = "editChat
+0000b3d0: 496e 7669 7465 4c69 6e6b 220a 2020 2020  InviteLink".    
+0000b3e0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+0000b3f0: 5f69 6422 3a20 6368 6174 5f69 642c 2022  _id": chat_id, "
+0000b400: 696e 7669 7465 5f6c 696e 6b22 3a20 696e  invite_link": in
+0000b410: 7669 7465 5f6c 696e 6b7d 0a0a 2020 2020  vite_link}..    
+0000b420: 6966 2065 7870 6972 655f 6461 7465 2069  if expire_date i
+0000b430: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000b440: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0000b450: 6528 6578 7069 7265 5f64 6174 652c 2064  e(expire_date, d
+0000b460: 6174 6574 696d 6529 3a0a 2020 2020 2020  atetime):.      
+0000b470: 2020 2020 2020 7061 796c 6f61 645b 2265        payload["e
+0000b480: 7870 6972 655f 6461 7465 225d 203d 2065  xpire_date"] = e
+0000b490: 7870 6972 655f 6461 7465 2e74 696d 6573  xpire_date.times
+0000b4a0: 7461 6d70 2829 0a20 2020 2020 2020 2065  tamp().        e
+0000b4b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000b4c0: 2070 6179 6c6f 6164 5b22 6578 7069 7265   payload["expire
+0000b4d0: 5f64 6174 6522 5d20 3d20 6578 7069 7265  _date"] = expire
+0000b4e0: 5f64 6174 650a 0a20 2020 2069 6620 6d65  _date..    if me
+0000b4f0: 6d62 6572 5f6c 696d 6974 2069 7320 6e6f  mber_limit is no
+0000b500: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000b510: 7061 796c 6f61 645b 226d 656d 6265 725f  payload["member_
+0000b520: 6c69 6d69 7422 5d20 3d20 6d65 6d62 6572  limit"] = member
+0000b530: 5f6c 696d 6974 0a20 2020 2069 6620 6e61  _limit.    if na
+0000b540: 6d65 3a0a 2020 2020 2020 2020 7061 796c  me:.        payl
+0000b550: 6f61 645b 226e 616d 6522 5d20 3d20 6e61  oad["name"] = na
+0000b560: 6d65 0a20 2020 2069 6620 6372 6561 7465  me.    if create
+0000b570: 735f 6a6f 696e 5f72 6571 7565 7374 2069  s_join_request i
+0000b580: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000b590: 2020 2020 7061 796c 6f61 645b 2263 7265      payload["cre
+0000b5a0: 6174 6573 5f6a 6f69 6e5f 7265 7175 6573  ates_join_reques
+0000b5b0: 7422 5d20 3d20 6372 6561 7465 735f 6a6f  t"] = creates_jo
+0000b5c0: 696e 5f72 6571 7565 7374 0a0a 2020 2020  in_request..    
+0000b5d0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+0000b5e0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000b5f0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000b600: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
+0000b610: 706f 7374 2229 0a0a 0a64 6566 2072 6576  post")...def rev
+0000b620: 6f6b 655f 6368 6174 5f69 6e76 6974 655f  oke_chat_invite_
+0000b630: 6c69 6e6b 2874 6f6b 656e 2c20 6368 6174  link(token, chat
+0000b640: 5f69 642c 2069 6e76 6974 655f 6c69 6e6b  _id, invite_link
+0000b650: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000b660: 6c20 3d20 2272 6576 6f6b 6543 6861 7449  l = "revokeChatI
+0000b670: 6e76 6974 654c 696e 6b22 0a20 2020 2070  nviteLink".    p
+0000b680: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+0000b690: 6964 223a 2063 6861 745f 6964 2c20 2269  id": chat_id, "i
+0000b6a0: 6e76 6974 655f 6c69 6e6b 223a 2069 6e76  nvite_link": inv
+0000b6b0: 6974 655f 6c69 6e6b 7d0a 2020 2020 7265  ite_link}.    re
+0000b6c0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000b6d0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000b6e0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000b6f0: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
+0000b700: 7374 2229 0a0a 0a64 6566 2065 7870 6f72  st")...def expor
+0000b710: 745f 6368 6174 5f69 6e76 6974 655f 6c69  t_chat_invite_li
+0000b720: 6e6b 2874 6f6b 656e 2c20 6368 6174 5f69  nk(token, chat_i
+0000b730: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
+0000b740: 726c 203d 2022 6578 706f 7274 4368 6174  rl = "exportChat
+0000b750: 496e 7669 7465 4c69 6e6b 220a 2020 2020  InviteLink".    
+0000b760: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+0000b770: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
+0000b780: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000b790: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000b7a0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000b7b0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000b7c0: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
+0000b7d0: 6170 7072 6f76 655f 6368 6174 5f6a 6f69  approve_chat_joi
+0000b7e0: 6e5f 7265 7175 6573 7428 746f 6b65 6e2c  n_request(token,
+0000b7f0: 2063 6861 745f 6964 2c20 7573 6572 5f69   chat_id, user_i
+0000b800: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
+0000b810: 726c 203d 2022 6170 7072 6f76 6543 6861  rl = "approveCha
+0000b820: 744a 6f69 6e52 6571 7565 7374 220a 2020  tJoinRequest".  
+0000b830: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+0000b840: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
+0000b850: 2022 7573 6572 5f69 6422 3a20 7573 6572   "user_id": user
+0000b860: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
+0000b870: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+0000b880: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000b890: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+0000b8a0: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+0000b8b0: 0a0a 6465 6620 6465 636c 696e 655f 6368  ..def decline_ch
+0000b8c0: 6174 5f6a 6f69 6e5f 7265 7175 6573 7428  at_join_request(
+0000b8d0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000b8e0: 7573 6572 5f69 6429 3a0a 2020 2020 6d65  user_id):.    me
+0000b8f0: 7468 6f64 5f75 726c 203d 2022 6465 636c  thod_url = "decl
+0000b900: 696e 6543 6861 744a 6f69 6e52 6571 7565  ineChatJoinReque
+0000b910: 7374 220a 2020 2020 7061 796c 6f61 6420  st".    payload 
+0000b920: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
+0000b930: 6174 5f69 642c 2022 7573 6572 5f69 6422  at_id, "user_id"
+0000b940: 3a20 7573 6572 5f69 647d 0a20 2020 2072  : user_id}.    r
+0000b950: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000b960: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000b970: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000b980: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
+0000b990: 6f73 7422 290a 0a0a 6465 6620 7365 745f  ost")...def set_
+0000b9a0: 6368 6174 5f70 686f 746f 2874 6f6b 656e  chat_photo(token
+0000b9b0: 2c20 6368 6174 5f69 642c 2070 686f 746f  , chat_id, photo
+0000b9c0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000b9d0: 6c20 3d20 2273 6574 4368 6174 5068 6f74  l = "setChatPhot
+0000b9e0: 6f22 0a20 2020 2070 6179 6c6f 6164 203d  o".    payload =
+0000b9f0: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
+0000ba00: 745f 6964 7d0a 2020 2020 6669 6c65 7320  t_id}.    files 
+0000ba10: 3d20 4e6f 6e65 0a20 2020 2069 6620 7574  = None.    if ut
+0000ba20: 696c 2e69 735f 7374 7269 6e67 2870 686f  il.is_string(pho
+0000ba30: 746f 293a 0a20 2020 2020 2020 2070 6179  to):.        pay
+0000ba40: 6c6f 6164 5b22 7068 6f74 6f22 5d20 3d20  load["photo"] = 
+0000ba50: 7068 6f74 6f0a 2020 2020 656c 6966 2075  photo.    elif u
+0000ba60: 7469 6c2e 6973 5f70 696c 5f69 6d61 6765  til.is_pil_image
+0000ba70: 2870 686f 746f 293a 0a20 2020 2020 2020  (photo):.       
+0000ba80: 2066 696c 6573 203d 207b 2270 686f 746f   files = {"photo
+0000ba90: 223a 2075 7469 6c2e 7069 6c5f 696d 6167  ": util.pil_imag
+0000baa0: 655f 746f 5f66 696c 6528 7068 6f74 6f29  e_to_file(photo)
+0000bab0: 7d0a 2020 2020 656c 7365 3a0a 2020 2020  }.    else:.    
+0000bac0: 2020 2020 6669 6c65 7320 3d20 7b22 7068      files = {"ph
+0000bad0: 6f74 6f22 3a20 7068 6f74 6f7d 0a20 2020  oto": photo}.   
+0000bae0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+0000baf0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000bb00: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000bb10: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+0000bb20: 696c 6573 2c20 6d65 7468 6f64 3d22 706f  iles, method="po
+0000bb30: 7374 2229 0a0a 0a64 6566 2064 656c 6574  st")...def delet
+0000bb40: 655f 6368 6174 5f70 686f 746f 2874 6f6b  e_chat_photo(tok
+0000bb50: 656e 2c20 6368 6174 5f69 6429 3a0a 2020  en, chat_id):.  
+0000bb60: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
+0000bb70: 6465 6c65 7465 4368 6174 5068 6f74 6f22  deleteChatPhoto"
+0000bb80: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000bb90: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
+0000bba0: 6964 7d0a 2020 2020 7265 7475 726e 205f  id}.    return _
+0000bbb0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000bbc0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000bbd0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000bbe0: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000bbf0: 0a64 6566 2073 6574 5f63 6861 745f 7469  .def set_chat_ti
+0000bc00: 746c 6528 746f 6b65 6e2c 2063 6861 745f  tle(token, chat_
+0000bc10: 6964 2c20 7469 746c 6529 3a0a 2020 2020  id, title):.    
+0000bc20: 6d65 7468 6f64 5f75 726c 203d 2022 7365  method_url = "se
+0000bc30: 7443 6861 7454 6974 6c65 220a 2020 2020  tChatTitle".    
+0000bc40: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+0000bc50: 5f69 6422 3a20 6368 6174 5f69 642c 2022  _id": chat_id, "
+0000bc60: 7469 746c 6522 3a20 7469 746c 657d 0a20  title": title}. 
+0000bc70: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000bc80: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000bc90: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000bca0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000bcb0: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
+0000bcc0: 7365 745f 6d79 5f64 6573 6372 6970 7469  set_my_descripti
+0000bcd0: 6f6e 2874 6f6b 656e 2c20 6465 7363 7269  on(token, descri
+0000bce0: 7074 696f 6e3d 4e6f 6e65 2c20 6c61 6e67  ption=None, lang
+0000bcf0: 7561 6765 5f63 6f64 653d 4e6f 6e65 293a  uage_code=None):
+0000bd00: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000bd10: 3d20 7222 7365 744d 7944 6573 6372 6970  = r"setMyDescrip
+0000bd20: 7469 6f6e 220a 2020 2020 7061 796c 6f61  tion".    payloa
+0000bd30: 6420 3d20 7b7d 0a20 2020 2069 6620 6465  d = {}.    if de
+0000bd40: 7363 7269 7074 696f 6e20 6973 206e 6f74  scription is not
+0000bd50: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000bd60: 6179 6c6f 6164 5b22 6465 7363 7269 7074  ayload["descript
+0000bd70: 696f 6e22 5d20 3d20 6465 7363 7269 7074  ion"] = descript
+0000bd80: 696f 6e0a 2020 2020 6966 206c 616e 6775  ion.    if langu
+0000bd90: 6167 655f 636f 6465 2069 7320 6e6f 7420  age_code is not 
+0000bda0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000bdb0: 796c 6f61 645b 226c 616e 6775 6167 655f  yload["language_
+0000bdc0: 636f 6465 225d 203d 206c 616e 6775 6167  code"] = languag
+0000bdd0: 655f 636f 6465 0a20 2020 2072 6574 7572  e_code.    retur
+0000bde0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000bdf0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000be00: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000be10: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+0000be20: 290a 0a0a 6465 6620 6765 745f 6d79 5f64  )...def get_my_d
+0000be30: 6573 6372 6970 7469 6f6e 2874 6f6b 656e  escription(token
+0000be40: 2c20 6c61 6e67 7561 6765 5f63 6f64 653d  , language_code=
+0000be50: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
+0000be60: 645f 7572 6c20 3d20 7222 6765 744d 7944  d_url = r"getMyD
+0000be70: 6573 6372 6970 7469 6f6e 220a 2020 2020  escription".    
+0000be80: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
+0000be90: 2069 6620 6c61 6e67 7561 6765 5f63 6f64   if language_cod
+0000bea0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000beb0: 6164 5b22 6c61 6e67 7561 6765 5f63 6f64  ad["language_cod
+0000bec0: 6522 5d20 3d20 6c61 6e67 7561 6765 5f63  e"] = language_c
+0000bed0: 6f64 650a 2020 2020 7265 7475 726e 205f  ode.    return _
+0000bee0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000bef0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000bf00: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
+0000bf10: 0a0a 6465 6620 7365 745f 6d79 5f73 686f  ..def set_my_sho
+0000bf20: 7274 5f64 6573 6372 6970 7469 6f6e 2874  rt_description(t
+0000bf30: 6f6b 656e 2c20 7368 6f72 745f 6465 7363  oken, short_desc
+0000bf40: 7269 7074 696f 6e3d 4e6f 6e65 2c20 6c61  ription=None, la
+0000bf50: 6e67 7561 6765 5f63 6f64 653d 4e6f 6e65  nguage_code=None
+0000bf60: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000bf70: 6c20 3d20 7222 7365 744d 7953 686f 7274  l = r"setMyShort
+0000bf80: 4465 7363 7269 7074 696f 6e22 0a20 2020  Description".   
+0000bf90: 2070 6179 6c6f 6164 203d 207b 7d0a 2020   payload = {}.  
+0000bfa0: 2020 6966 2073 686f 7274 5f64 6573 6372    if short_descr
+0000bfb0: 6970 7469 6f6e 2069 7320 6e6f 7420 4e6f  iption is not No
+0000bfc0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000bfd0: 6f61 645b 2273 686f 7274 5f64 6573 6372  oad["short_descr
+0000bfe0: 6970 7469 6f6e 225d 203d 2073 686f 7274  iption"] = short
+0000bff0: 5f64 6573 6372 6970 7469 6f6e 0a20 2020  _description.   
+0000c000: 2069 6620 6c61 6e67 7561 6765 5f63 6f64   if language_cod
+0000c010: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+0000c020: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000c030: 6c61 6e67 7561 6765 5f63 6f64 6522 5d20  language_code"] 
+0000c040: 3d20 6c61 6e67 7561 6765 5f63 6f64 650a  = language_code.
+0000c050: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000c060: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000c070: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000c080: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000c090: 6f64 3d22 706f 7374 2229 0a0a 0a64 6566  od="post")...def
+0000c0a0: 2067 6574 5f6d 795f 7368 6f72 745f 6465   get_my_short_de
+0000c0b0: 7363 7269 7074 696f 6e28 746f 6b65 6e2c  scription(token,
+0000c0c0: 206c 616e 6775 6167 655f 636f 6465 3d4e   language_code=N
+0000c0d0: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
+0000c0e0: 5f75 726c 203d 2072 2267 6574 4d79 5368  _url = r"getMySh
+0000c0f0: 6f72 7444 6573 6372 6970 7469 6f6e 220a  ortDescription".
+0000c100: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
+0000c110: 0a20 2020 2069 6620 6c61 6e67 7561 6765  .    if language
+0000c120: 5f63 6f64 653a 0a20 2020 2020 2020 2070  _code:.        p
+0000c130: 6179 6c6f 6164 5b22 6c61 6e67 7561 6765  ayload["language
+0000c140: 5f63 6f64 6522 5d20 3d20 6c61 6e67 7561  _code"] = langua
+0000c150: 6765 5f63 6f64 650a 2020 2020 7265 7475  ge_code.    retu
+0000c160: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+0000c170: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000c180: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000c190: 6164 290a 0a0a 6465 6620 6765 745f 6d79  ad)...def get_my
+0000c1a0: 5f63 6f6d 6d61 6e64 7328 746f 6b65 6e2c  _commands(token,
+0000c1b0: 2073 636f 7065 3d4e 6f6e 652c 206c 616e   scope=None, lan
+0000c1c0: 6775 6167 655f 636f 6465 3d4e 6f6e 6529  guage_code=None)
+0000c1d0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+0000c1e0: 203d 2072 2267 6574 4d79 436f 6d6d 616e   = r"getMyComman
+0000c1f0: 6473 220a 2020 2020 7061 796c 6f61 6420  ds".    payload 
+0000c200: 3d20 7b7d 0a20 2020 2069 6620 7363 6f70  = {}.    if scop
+0000c210: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000c220: 6164 5b22 7363 6f70 6522 5d20 3d20 7363  ad["scope"] = sc
+0000c230: 6f70 652e 746f 5f6a 736f 6e28 290a 2020  ope.to_json().  
+0000c240: 2020 6966 206c 616e 6775 6167 655f 636f    if language_co
+0000c250: 6465 3a0a 2020 2020 2020 2020 7061 796c  de:.        payl
+0000c260: 6f61 645b 226c 616e 6775 6167 655f 636f  oad["language_co
+0000c270: 6465 225d 203d 206c 616e 6775 6167 655f  de"] = language_
+0000c280: 636f 6465 0a20 2020 2072 6574 7572 6e20  code.    return 
+0000c290: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+0000c2a0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000c2b0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+0000c2c0: 0a0a 0a64 6566 2073 6574 5f6d 795f 6e61  ...def set_my_na
+0000c2d0: 6d65 2874 6f6b 656e 2c20 6e61 6d65 3d4e  me(token, name=N
+0000c2e0: 6f6e 652c 206c 616e 6775 6167 655f 636f  one, language_co
+0000c2f0: 6465 3d4e 6f6e 6529 3a0a 2020 2020 6d65  de=None):.    me
+0000c300: 7468 6f64 5f75 726c 203d 2072 2273 6574  thod_url = r"set
+0000c310: 4d79 4e61 6d65 220a 2020 2020 7061 796c  MyName".    payl
+0000c320: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
+0000c330: 6e61 6d65 2069 7320 6e6f 7420 4e6f 6e65  name is not None
+0000c340: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000c350: 645b 226e 616d 6522 5d20 3d20 6e61 6d65  d["name"] = name
+0000c360: 0a20 2020 2069 6620 6c61 6e67 7561 6765  .    if language
+0000c370: 5f63 6f64 6520 6973 206e 6f74 204e 6f6e  _code is not Non
+0000c380: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000c390: 6164 5b22 6c61 6e67 7561 6765 5f63 6f64  ad["language_cod
+0000c3a0: 6522 5d20 3d20 6c61 6e67 7561 6765 5f63  e"] = language_c
+0000c3b0: 6f64 650a 2020 2020 7265 7475 726e 205f  ode.    return _
+0000c3c0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000c3d0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000c3e0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000c3f0: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000c400: 0a64 6566 2067 6574 5f6d 795f 6e61 6d65  .def get_my_name
+0000c410: 2874 6f6b 656e 2c20 6c61 6e67 7561 6765  (token, language
+0000c420: 5f63 6f64 653d 4e6f 6e65 293a 0a20 2020  _code=None):.   
+0000c430: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
+0000c440: 6765 744d 794e 616d 6522 0a20 2020 2070  getMyName".    p
+0000c450: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
+0000c460: 6966 206c 616e 6775 6167 655f 636f 6465  if language_code
+0000c470: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000c480: 2020 2020 2020 7061 796c 6f61 645b 226c        payload["l
+0000c490: 616e 6775 6167 655f 636f 6465 225d 203d  anguage_code"] =
+0000c4a0: 206c 616e 6775 6167 655f 636f 6465 0a20   language_code. 
+0000c4b0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000c4c0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000c4d0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000c4e0: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
+0000c4f0: 2073 6574 5f63 6861 745f 6d65 6e75 5f62   set_chat_menu_b
+0000c500: 7574 746f 6e28 746f 6b65 6e2c 2063 6861  utton(token, cha
+0000c510: 745f 6964 3d4e 6f6e 652c 206d 656e 755f  t_id=None, menu_
+0000c520: 6275 7474 6f6e 3d4e 6f6e 6529 3a0a 2020  button=None):.  
+0000c530: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+0000c540: 2273 6574 4368 6174 4d65 6e75 4275 7474  "setChatMenuButt
+0000c550: 6f6e 220a 2020 2020 7061 796c 6f61 6420  on".    payload 
+0000c560: 3d20 7b7d 0a20 2020 2069 6620 6368 6174  = {}.    if chat
+0000c570: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000c580: 6c6f 6164 5b22 6368 6174 5f69 6422 5d20  load["chat_id"] 
+0000c590: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
+0000c5a0: 206d 656e 755f 6275 7474 6f6e 3a0a 2020   menu_button:.  
+0000c5b0: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+0000c5c0: 656e 755f 6275 7474 6f6e 225d 203d 206d  enu_button"] = m
+0000c5d0: 656e 755f 6275 7474 6f6e 2e74 6f5f 6a73  enu_button.to_js
+0000c5e0: 6f6e 2829 0a20 2020 2072 6574 7572 6e20  on().    return 
+0000c5f0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+0000c600: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000c610: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+0000c620: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+0000c630: 0a0a 6465 6620 6765 745f 6368 6174 5f6d  ..def get_chat_m
+0000c640: 656e 755f 6275 7474 6f6e 2874 6f6b 656e  enu_button(token
+0000c650: 2c20 6368 6174 5f69 643d 4e6f 6e65 293a  , chat_id=None):
+0000c660: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000c670: 3d20 7222 6765 7443 6861 744d 656e 7542  = r"getChatMenuB
+0000c680: 7574 746f 6e22 0a20 2020 2070 6179 6c6f  utton".    paylo
+0000c690: 6164 203d 207b 7d0a 2020 2020 6966 2063  ad = {}.    if c
+0000c6a0: 6861 745f 6964 3a0a 2020 2020 2020 2020  hat_id:.        
+0000c6b0: 7061 796c 6f61 645b 2263 6861 745f 6964  payload["chat_id
+0000c6c0: 225d 203d 2063 6861 745f 6964 0a20 2020  "] = chat_id.   
+0000c6d0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+0000c6e0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000c6f0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000c700: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+0000c710: 2270 6f73 7422 290a 0a0a 6465 6620 7365  "post")...def se
+0000c720: 745f 6d79 5f64 6566 6175 6c74 5f61 646d  t_my_default_adm
+0000c730: 696e 6973 7472 6174 6f72 5f72 6967 6874  inistrator_right
+0000c740: 7328 746f 6b65 6e2c 2072 6967 6874 733d  s(token, rights=
+0000c750: 4e6f 6e65 2c20 666f 725f 6368 616e 6e65  None, for_channe
+0000c760: 6c73 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ls=None):.    me
+0000c770: 7468 6f64 5f75 726c 203d 2072 2273 6574  thod_url = r"set
+0000c780: 4d79 4465 6661 756c 7441 646d 696e 6973  MyDefaultAdminis
+0000c790: 7472 6174 6f72 5269 6768 7473 220a 2020  tratorRights".  
+0000c7a0: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
+0000c7b0: 2020 2069 6620 7269 6768 7473 3a0a 2020     if rights:.  
+0000c7c0: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
+0000c7d0: 6967 6874 7322 5d20 3d20 7269 6768 7473  ights"] = rights
+0000c7e0: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
+0000c7f0: 6620 666f 725f 6368 616e 6e65 6c73 2069  f for_channels i
+0000c800: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000c810: 2020 2020 7061 796c 6f61 645b 2266 6f72      payload["for
+0000c820: 5f63 6861 6e6e 656c 7322 5d20 3d20 666f  _channels"] = fo
+0000c830: 725f 6368 616e 6e65 6c73 0a20 2020 2072  r_channels.    r
+0000c840: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000c850: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000c860: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000c870: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
+0000c880: 6f73 7422 290a 0a0a 6465 6620 6765 745f  ost")...def get_
+0000c890: 6d79 5f64 6566 6175 6c74 5f61 646d 696e  my_default_admin
+0000c8a0: 6973 7472 6174 6f72 5f72 6967 6874 7328  istrator_rights(
+0000c8b0: 746f 6b65 6e2c 2066 6f72 5f63 6861 6e6e  token, for_chann
+0000c8c0: 656c 733d 4e6f 6e65 293a 0a20 2020 206d  els=None):.    m
+0000c8d0: 6574 686f 645f 7572 6c20 3d20 7222 6765  ethod_url = r"ge
+0000c8e0: 744d 7944 6566 6175 6c74 4164 6d69 6e69  tMyDefaultAdmini
+0000c8f0: 7374 7261 746f 7252 6967 6874 7322 0a20  stratorRights". 
+0000c900: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
+0000c910: 2020 2020 6966 2066 6f72 5f63 6861 6e6e      if for_chann
+0000c920: 656c 733a 0a20 2020 2020 2020 2070 6179  els:.        pay
+0000c930: 6c6f 6164 5b22 666f 725f 6368 616e 6e65  load["for_channe
+0000c940: 6c73 225d 203d 2066 6f72 5f63 6861 6e6e  ls"] = for_chann
+0000c950: 656c 730a 2020 2020 7265 7475 726e 205f  els.    return _
+0000c960: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000c970: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000c980: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000c990: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000c9a0: 0a64 6566 2073 6574 5f6d 795f 636f 6d6d  .def set_my_comm
+0000c9b0: 616e 6473 2874 6f6b 656e 2c20 636f 6d6d  ands(token, comm
+0000c9c0: 616e 6473 2c20 7363 6f70 653d 4e6f 6e65  ands, scope=None
+0000c9d0: 2c20 6c61 6e67 7561 6765 5f63 6f64 653d  , language_code=
+0000c9e0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
+0000c9f0: 645f 7572 6c20 3d20 7222 7365 744d 7943  d_url = r"setMyC
+0000ca00: 6f6d 6d61 6e64 7322 0a20 2020 2070 6179  ommands".    pay
+0000ca10: 6c6f 6164 203d 207b 2263 6f6d 6d61 6e64  load = {"command
+0000ca20: 7322 3a20 5f63 6f6e 7665 7274 5f6c 6973  s": _convert_lis
+0000ca30: 745f 6a73 6f6e 5f73 6572 6961 6c69 7a61  t_json_serializa
+0000ca40: 626c 6528 636f 6d6d 616e 6473 297d 0a20  ble(commands)}. 
+0000ca50: 2020 2069 6620 7363 6f70 653a 0a20 2020     if scope:.   
+0000ca60: 2020 2020 2070 6179 6c6f 6164 5b22 7363       payload["sc
+0000ca70: 6f70 6522 5d20 3d20 7363 6f70 652e 746f  ope"] = scope.to
+0000ca80: 5f6a 736f 6e28 290a 2020 2020 6966 206c  _json().    if l
+0000ca90: 616e 6775 6167 655f 636f 6465 3a0a 2020  anguage_code:.  
+0000caa0: 2020 2020 2020 7061 796c 6f61 645b 226c        payload["l
+0000cab0: 616e 6775 6167 655f 636f 6465 225d 203d  anguage_code"] =
+0000cac0: 206c 616e 6775 6167 655f 636f 6465 0a20   language_code. 
+0000cad0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000cae0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000caf0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000cb00: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000cb10: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
+0000cb20: 6765 745f 6275 7369 6e65 7373 5f63 6f6e  get_business_con
+0000cb30: 6e65 6374 696f 6e28 746f 6b65 6e2c 2062  nection(token, b
+0000cb40: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+0000cb50: 6f6e 5f69 6429 3a0a 2020 2020 6d65 7468  on_id):.    meth
+0000cb60: 6f64 5f75 726c 203d 2022 6765 7442 7573  od_url = "getBus
+0000cb70: 696e 6573 7343 6f6e 6e65 6374 696f 6e22  inessConnection"
+0000cb80: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000cb90: 2262 7573 696e 6573 735f 636f 6e6e 6563  "business_connec
+0000cba0: 7469 6f6e 5f69 6422 3a20 6275 7369 6e65  tion_id": busine
+0000cbb0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+0000cbc0: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+0000cbd0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000cbe0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000cbf0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000cc00: 7468 6f64 3d22 706f 7374 2229 0a0a 0a64  thod="post")...d
+0000cc10: 6566 2064 656c 6574 655f 6d79 5f63 6f6d  ef delete_my_com
+0000cc20: 6d61 6e64 7328 746f 6b65 6e2c 2073 636f  mands(token, sco
+0000cc30: 7065 3d4e 6f6e 652c 206c 616e 6775 6167  pe=None, languag
+0000cc40: 655f 636f 6465 3d4e 6f6e 6529 3a0a 2020  e_code=None):.  
+0000cc50: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+0000cc60: 2264 656c 6574 654d 7943 6f6d 6d61 6e64  "deleteMyCommand
+0000cc70: 7322 0a20 2020 2070 6179 6c6f 6164 203d  s".    payload =
+0000cc80: 207b 7d0a 2020 2020 6966 2073 636f 7065   {}.    if scope
+0000cc90: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000cca0: 645b 2273 636f 7065 225d 203d 2073 636f  d["scope"] = sco
+0000ccb0: 7065 2e74 6f5f 6a73 6f6e 2829 0a20 2020  pe.to_json().   
+0000ccc0: 2069 6620 6c61 6e67 7561 6765 5f63 6f64   if language_cod
+0000ccd0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000cce0: 6164 5b22 6c61 6e67 7561 6765 5f63 6f64  ad["language_cod
+0000ccf0: 6522 5d20 3d20 6c61 6e67 7561 6765 5f63  e"] = language_c
+0000cd00: 6f64 650a 2020 2020 7265 7475 726e 205f  ode.    return _
+0000cd10: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000cd20: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000cd30: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000cd40: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000cd50: 0a64 6566 2073 6574 5f63 6861 745f 6465  .def set_chat_de
+0000cd60: 7363 7269 7074 696f 6e28 746f 6b65 6e2c  scription(token,
+0000cd70: 2063 6861 745f 6964 2c20 6465 7363 7269   chat_id, descri
+0000cd80: 7074 696f 6e29 3a0a 2020 2020 6d65 7468  ption):.    meth
+0000cd90: 6f64 5f75 726c 203d 2022 7365 7443 6861  od_url = "setCha
+0000cda0: 7444 6573 6372 6970 7469 6f6e 220a 2020  tDescription".  
+0000cdb0: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+0000cdc0: 6174 5f69 6422 3a20 6368 6174 5f69 647d  at_id": chat_id}
+0000cdd0: 0a20 2020 2069 6620 6465 7363 7269 7074  .    if descript
+0000cde0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
+0000cdf0: 2020 2320 416c 6c6f 7720 656d 7074 7920    # Allow empty 
+0000ce00: 7374 7269 6e67 730a 2020 2020 2020 2020  strings.        
+0000ce10: 7061 796c 6f61 645b 2264 6573 6372 6970  payload["descrip
+0000ce20: 7469 6f6e 225d 203d 2064 6573 6372 6970  tion"] = descrip
+0000ce30: 7469 6f6e 0a20 2020 2072 6574 7572 6e20  tion.    return 
+0000ce40: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+0000ce50: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000ce60: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+0000ce70: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+0000ce80: 0a0a 6465 6620 7069 6e5f 6368 6174 5f6d  ..def pin_chat_m
+0000ce90: 6573 7361 6765 2874 6f6b 656e 2c20 6368  essage(token, ch
+0000cea0: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
+0000ceb0: 642c 2064 6973 6162 6c65 5f6e 6f74 6966  d, disable_notif
+0000cec0: 6963 6174 696f 6e3d 4e6f 6e65 293a 0a20  ication=None):. 
+0000ced0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000cee0: 2270 696e 4368 6174 4d65 7373 6167 6522  "pinChatMessage"
+0000cef0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000cf00: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
+0000cf10: 6964 2c20 226d 6573 7361 6765 5f69 6422  id, "message_id"
+0000cf20: 3a20 6d65 7373 6167 655f 6964 7d0a 2020  : message_id}.  
+0000cf30: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+0000cf40: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+0000cf50: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000cf60: 6179 6c6f 6164 5b22 6469 7361 626c 655f  ayload["disable_
+0000cf70: 6e6f 7469 6669 6361 7469 6f6e 225d 203d  notification"] =
+0000cf80: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+0000cf90: 6174 696f 6e0a 2020 2020 7265 7475 726e  ation.    return
+0000cfa0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+0000cfb0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000cfc0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000cfd0: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+0000cfe0: 0a0a 0a64 6566 2075 6e70 696e 5f63 6861  ...def unpin_cha
+0000cff0: 745f 6d65 7373 6167 6528 746f 6b65 6e2c  t_message(token,
+0000d000: 2063 6861 745f 6964 2c20 6d65 7373 6167   chat_id, messag
+0000d010: 655f 6964 293a 0a20 2020 206d 6574 686f  e_id):.    metho
+0000d020: 645f 7572 6c20 3d20 2275 6e70 696e 4368  d_url = "unpinCh
+0000d030: 6174 4d65 7373 6167 6522 0a20 2020 2070  atMessage".    p
+0000d040: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+0000d050: 6964 223a 2063 6861 745f 6964 7d0a 2020  id": chat_id}.  
+0000d060: 2020 6966 206d 6573 7361 6765 5f69 643a    if message_id:
+0000d070: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000d080: 5b22 6d65 7373 6167 655f 6964 225d 203d  ["message_id"] =
+0000d090: 206d 6573 7361 6765 5f69 640a 2020 2020   message_id.    
+0000d0a0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+0000d0b0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000d0c0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000d0d0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
+0000d0e0: 706f 7374 2229 0a0a 0a64 6566 2075 6e70  post")...def unp
+0000d0f0: 696e 5f61 6c6c 5f63 6861 745f 6d65 7373  in_all_chat_mess
+0000d100: 6167 6573 2874 6f6b 656e 2c20 6368 6174  ages(token, chat
+0000d110: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
+0000d120: 5f75 726c 203d 2022 756e 7069 6e41 6c6c  _url = "unpinAll
+0000d130: 4368 6174 4d65 7373 6167 6573 220a 2020  ChatMessages".  
+0000d140: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+0000d150: 6174 5f69 6422 3a20 6368 6174 5f69 647d  at_id": chat_id}
+0000d160: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000d170: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000d180: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000d190: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000d1a0: 686f 643d 2270 6f73 7422 290a 0a0a 2320  hod="post")...# 
+0000d1b0: 5570 6461 7469 6e67 206d 6573 7361 6765  Updating message
+0000d1c0: 730a 0a0a 6465 6620 6564 6974 5f6d 6573  s...def edit_mes
+0000d1d0: 7361 6765 5f74 6578 7428 0a20 2020 2074  sage_text(.    t
+0000d1e0: 6f6b 656e 2c0a 2020 2020 7465 7874 2c0a  oken,.    text,.
+0000d1f0: 2020 2020 6368 6174 5f69 643d 4e6f 6e65      chat_id=None
+0000d200: 2c0a 2020 2020 6d65 7373 6167 655f 6964  ,.    message_id
+0000d210: 3d4e 6f6e 652c 0a20 2020 2069 6e6c 696e  =None,.    inlin
+0000d220: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+0000d230: 652c 0a20 2020 2070 6172 7365 5f6d 6f64  e,.    parse_mod
+0000d240: 653d 4e6f 6e65 2c0a 2020 2020 656e 7469  e=None,.    enti
+0000d250: 7469 6573 3d4e 6f6e 652c 0a20 2020 2072  ties=None,.    r
+0000d260: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+0000d270: 2c0a 2020 2020 6c69 6e6b 5f70 7265 7669  ,.    link_previ
+0000d280: 6577 5f6f 7074 696f 6e73 3d4e 6f6e 652c  ew_options=None,
+0000d290: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+0000d2a0: 726c 203d 2072 2265 6469 744d 6573 7361  rl = r"editMessa
+0000d2b0: 6765 5465 7874 220a 2020 2020 7061 796c  geText".    payl
+0000d2c0: 6f61 6420 3d20 7b22 7465 7874 223a 2074  oad = {"text": t
+0000d2d0: 6578 747d 0a20 2020 2069 6620 6368 6174  ext}.    if chat
+0000d2e0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000d2f0: 6c6f 6164 5b22 6368 6174 5f69 6422 5d20  load["chat_id"] 
+0000d300: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
+0000d310: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
+0000d320: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+0000d330: 7373 6167 655f 6964 225d 203d 206d 6573  ssage_id"] = mes
+0000d340: 7361 6765 5f69 640a 2020 2020 6966 2069  sage_id.    if i
+0000d350: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000d360: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000d370: 645b 2269 6e6c 696e 655f 6d65 7373 6167  d["inline_messag
+0000d380: 655f 6964 225d 203d 2069 6e6c 696e 655f  e_id"] = inline_
+0000d390: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
+0000d3a0: 6620 7061 7273 655f 6d6f 6465 3a0a 2020  f parse_mode:.  
+0000d3b0: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+0000d3c0: 6172 7365 5f6d 6f64 6522 5d20 3d20 7061  arse_mode"] = pa
+0000d3d0: 7273 655f 6d6f 6465 0a20 2020 2069 6620  rse_mode.    if 
+0000d3e0: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
+0000d3f0: 2020 7061 796c 6f61 645b 2265 6e74 6974    payload["entit
+0000d400: 6965 7322 5d20 3d20 6a73 6f6e 2e64 756d  ies"] = json.dum
+0000d410: 7073 2874 7970 6573 2e4d 6573 7361 6765  ps(types.Message
+0000d420: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
+0000d430: 665f 6469 6374 7328 656e 7469 7469 6573  f_dicts(entities
+0000d440: 2929 0a20 2020 2069 6620 7265 706c 795f  )).    if reply_
+0000d450: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
+0000d460: 7061 796c 6f61 645b 2272 6570 6c79 5f6d  payload["reply_m
+0000d470: 6172 6b75 7022 5d20 3d20 5f63 6f6e 7665  arkup"] = _conve
+0000d480: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
+0000d490: 6d61 726b 7570 290a 2020 2020 6966 206c  markup).    if l
+0000d4a0: 696e 6b5f 7072 6576 6965 775f 6f70 7469  ink_preview_opti
+0000d4b0: 6f6e 7320 6973 206e 6f74 204e 6f6e 653a  ons is not None:
+0000d4c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000d4d0: 5b22 6c69 6e6b 5f70 7265 7669 6577 5f6f  ["link_preview_o
+0000d4e0: 7074 696f 6e73 225d 203d 206c 696e 6b5f  ptions"] = link_
+0000d4f0: 7072 6576 6965 775f 6f70 7469 6f6e 732e  preview_options.
+0000d500: 746f 5f6a 736f 6e28 290a 2020 2020 7265  to_json().    re
+0000d510: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000d520: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000d530: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000d540: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
+0000d550: 7374 2229 0a0a 0a64 6566 2065 6469 745f  st")...def edit_
+0000d560: 6d65 7373 6167 655f 6361 7074 696f 6e28  message_caption(
+0000d570: 0a20 2020 2074 6f6b 656e 2c0a 2020 2020  .    token,.    
+0000d580: 6361 7074 696f 6e2c 0a20 2020 2063 6861  caption,.    cha
+0000d590: 745f 6964 3d4e 6f6e 652c 0a20 2020 206d  t_id=None,.    m
+0000d5a0: 6573 7361 6765 5f69 643d 4e6f 6e65 2c0a  essage_id=None,.
+0000d5b0: 2020 2020 696e 6c69 6e65 5f6d 6573 7361      inline_messa
+0000d5c0: 6765 5f69 643d 4e6f 6e65 2c0a 2020 2020  ge_id=None,.    
+0000d5d0: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
+0000d5e0: 0a20 2020 2063 6170 7469 6f6e 5f65 6e74  .    caption_ent
+0000d5f0: 6974 6965 733d 4e6f 6e65 2c0a 2020 2020  ities=None,.    
+0000d600: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+0000d610: 652c 0a29 3a0a 2020 2020 6d65 7468 6f64  e,.):.    method
+0000d620: 5f75 726c 203d 2072 2265 6469 744d 6573  _url = r"editMes
+0000d630: 7361 6765 4361 7074 696f 6e22 0a20 2020  sageCaption".   
+0000d640: 2070 6179 6c6f 6164 203d 207b 2263 6170   payload = {"cap
+0000d650: 7469 6f6e 223a 2063 6170 7469 6f6e 7d0a  tion": caption}.
+0000d660: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
+0000d670: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000d680: 2263 6861 745f 6964 225d 203d 2063 6861  "chat_id"] = cha
+0000d690: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
+0000d6a0: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
+0000d6b0: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
+0000d6c0: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
+0000d6d0: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
+0000d6e0: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
+0000d6f0: 2020 2020 2070 6179 6c6f 6164 5b22 696e       payload["in
+0000d700: 6c69 6e65 5f6d 6573 7361 6765 5f69 6422  line_message_id"
+0000d710: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
+0000d720: 6765 5f69 640a 2020 2020 6966 2070 6172  ge_id.    if par
+0000d730: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
+0000d740: 2070 6179 6c6f 6164 5b22 7061 7273 655f   payload["parse_
+0000d750: 6d6f 6465 225d 203d 2070 6172 7365 5f6d  mode"] = parse_m
+0000d760: 6f64 650a 2020 2020 6966 2063 6170 7469  ode.    if capti
+0000d770: 6f6e 5f65 6e74 6974 6965 733a 0a20 2020  on_entities:.   
+0000d780: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
+0000d790: 7074 696f 6e5f 656e 7469 7469 6573 225d  ption_entities"]
+0000d7a0: 203d 206a 736f 6e2e 6475 6d70 7328 0a20   = json.dumps(. 
+0000d7b0: 2020 2020 2020 2020 2020 2074 7970 6573             types
+0000d7c0: 2e4d 6573 7361 6765 456e 7469 7479 2e74  .MessageEntity.t
+0000d7d0: 6f5f 6c69 7374 5f6f 665f 6469 6374 7328  o_list_of_dicts(
+0000d7e0: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
+0000d7f0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+0000d800: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+0000d810: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000d820: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
+0000d830: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+0000d840: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+0000d850: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000d860: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000d870: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000d880: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000d890: 686f 643d 2270 6f73 7422 290a 0a0a 6465  hod="post")...de
+0000d8a0: 6620 6564 6974 5f6d 6573 7361 6765 5f6d  f edit_message_m
+0000d8b0: 6564 6961 280a 2020 2020 746f 6b65 6e2c  edia(.    token,
+0000d8c0: 0a20 2020 206d 6564 6961 2c0a 2020 2020  .    media,.    
+0000d8d0: 6368 6174 5f69 643d 4e6f 6e65 2c0a 2020  chat_id=None,.  
+0000d8e0: 2020 6d65 7373 6167 655f 6964 3d4e 6f6e    message_id=Non
+0000d8f0: 652c 0a20 2020 2069 6e6c 696e 655f 6d65  e,.    inline_me
+0000d900: 7373 6167 655f 6964 3d4e 6f6e 652c 0a20  ssage_id=None,. 
+0000d910: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
+0000d920: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
+0000d930: 686f 645f 7572 6c20 3d20 7222 6564 6974  hod_url = r"edit
+0000d940: 4d65 7373 6167 654d 6564 6961 220a 2020  MessageMedia".  
+0000d950: 2020 6d65 6469 615f 6a73 6f6e 2c20 6669    media_json, fi
+0000d960: 6c65 203d 2063 6f6e 7665 7274 5f69 6e70  le = convert_inp
+0000d970: 7574 5f6d 6564 6961 286d 6564 6961 290a  ut_media(media).
+0000d980: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+0000d990: 6d65 6469 6122 3a20 6d65 6469 615f 6a73  media": media_js
+0000d9a0: 6f6e 7d0a 2020 2020 6966 2063 6861 745f  on}.    if chat_
+0000d9b0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+0000d9c0: 6f61 645b 2263 6861 745f 6964 225d 203d  oad["chat_id"] =
+0000d9d0: 2063 6861 745f 6964 0a20 2020 2069 6620   chat_id.    if 
+0000d9e0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+0000d9f0: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
+0000da00: 7361 6765 5f69 6422 5d20 3d20 6d65 7373  sage_id"] = mess
+0000da10: 6167 655f 6964 0a20 2020 2069 6620 696e  age_id.    if in
+0000da20: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+0000da30: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000da40: 5b22 696e 6c69 6e65 5f6d 6573 7361 6765  ["inline_message
+0000da50: 5f69 6422 5d20 3d20 696e 6c69 6e65 5f6d  _id"] = inline_m
+0000da60: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
+0000da70: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
+0000da80: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000da90: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
+0000daa0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+0000dab0: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
+0000dac0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000dad0: 7265 7175 6573 7428 0a20 2020 2020 2020  request(.       
+0000dae0: 2074 6f6b 656e 2c20 6d65 7468 6f64 5f75   token, method_u
+0000daf0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000db00: 6164 2c20 6669 6c65 733d 6669 6c65 2c20  ad, files=file, 
+0000db10: 6d65 7468 6f64 3d22 706f 7374 2220 6966  method="post" if
+0000db20: 2066 696c 6520 656c 7365 2022 6765 7422   file else "get"
+0000db30: 0a20 2020 2029 0a0a 0a64 6566 2065 6469  .    )...def edi
+0000db40: 745f 6d65 7373 6167 655f 7265 706c 795f  t_message_reply_
+0000db50: 6d61 726b 7570 280a 2020 2020 746f 6b65  markup(.    toke
+0000db60: 6e2c 2063 6861 745f 6964 3d4e 6f6e 652c  n, chat_id=None,
+0000db70: 206d 6573 7361 6765 5f69 643d 4e6f 6e65   message_id=None
+0000db80: 2c20 696e 6c69 6e65 5f6d 6573 7361 6765  , inline_message
+0000db90: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
+0000dba0: 6d61 726b 7570 3d4e 6f6e 650a 293a 0a20  markup=None.):. 
+0000dbb0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000dbc0: 7222 6564 6974 4d65 7373 6167 6552 6570  r"editMessageRep
+0000dbd0: 6c79 4d61 726b 7570 220a 2020 2020 7061  lyMarkup".    pa
+0000dbe0: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
+0000dbf0: 6620 6368 6174 5f69 643a 0a20 2020 2020  f chat_id:.     
+0000dc00: 2020 2070 6179 6c6f 6164 5b22 6368 6174     payload["chat
+0000dc10: 5f69 6422 5d20 3d20 6368 6174 5f69 640a  _id"] = chat_id.
+0000dc20: 2020 2020 6966 206d 6573 7361 6765 5f69      if message_i
+0000dc30: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+0000dc40: 6164 5b22 6d65 7373 6167 655f 6964 225d  ad["message_id"]
+0000dc50: 203d 206d 6573 7361 6765 5f69 640a 2020   = message_id.  
+0000dc60: 2020 6966 2069 6e6c 696e 655f 6d65 7373    if inline_mess
+0000dc70: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
+0000dc80: 7061 796c 6f61 645b 2269 6e6c 696e 655f  payload["inline_
+0000dc90: 6d65 7373 6167 655f 6964 225d 203d 2069  message_id"] = i
+0000dca0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000dcb0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+0000dcc0: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
+0000dcd0: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
+0000dce0: 6b75 7022 5d20 3d20 5f63 6f6e 7665 7274  kup"] = _convert
+0000dcf0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+0000dd00: 726b 7570 290a 2020 2020 7265 7475 726e  rkup).    return
+0000dd10: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+0000dd20: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000dd30: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000dd40: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+0000dd50: 0a0a 0a64 6566 2064 656c 6574 655f 6d65  ...def delete_me
+0000dd60: 7373 6167 6528 746f 6b65 6e2c 2063 6861  ssage(token, cha
+0000dd70: 745f 6964 2c20 6d65 7373 6167 655f 6964  t_id, message_id
+0000dd80: 2c20 7469 6d65 6f75 743d 4e6f 6e65 293a  , timeout=None):
+0000dd90: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000dda0: 3d20 7222 6465 6c65 7465 4d65 7373 6167  = r"deleteMessag
+0000ddb0: 6522 0a20 2020 2070 6179 6c6f 6164 203d  e".    payload =
+0000ddc0: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
+0000ddd0: 745f 6964 2c20 226d 6573 7361 6765 5f69  t_id, "message_i
+0000dde0: 6422 3a20 6d65 7373 6167 655f 6964 7d0a  d": message_id}.
+0000ddf0: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
+0000de00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000de10: 2274 696d 656f 7574 225d 203d 2074 696d  "timeout"] = tim
+0000de20: 656f 7574 0a20 2020 2072 6574 7572 6e20  eout.    return 
+0000de30: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+0000de40: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000de50: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+0000de60: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+0000de70: 0a0a 2320 4761 6d65 0a0a 0a64 6566 2073  ..# Game...def s
+0000de80: 656e 645f 6761 6d65 280a 2020 2020 746f  end_game(.    to
+0000de90: 6b65 6e2c 0a20 2020 2063 6861 745f 6964  ken,.    chat_id
+0000dea0: 2c0a 2020 2020 6761 6d65 5f73 686f 7274  ,.    game_short
+0000deb0: 5f6e 616d 652c 0a20 2020 2064 6973 6162  _name,.    disab
+0000dec0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+0000ded0: 4e6f 6e65 2c0a 2020 2020 7265 706c 795f  None,.    reply_
+0000dee0: 6d61 726b 7570 3d4e 6f6e 652c 0a20 2020  markup=None,.   
+0000def0: 2074 696d 656f 7574 3d4e 6f6e 652c 0a20   timeout=None,. 
+0000df00: 2020 2070 726f 7465 6374 5f63 6f6e 7465     protect_conte
+0000df10: 6e74 3d4e 6f6e 652c 0a20 2020 206d 6573  nt=None,.    mes
+0000df20: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+0000df30: 6f6e 652c 0a20 2020 2072 6570 6c79 5f70  one,.    reply_p
+0000df40: 6172 616d 6574 6572 733d 4e6f 6e65 2c0a  arameters=None,.
+0000df50: 2020 2020 6275 7369 6e65 7373 5f63 6f6e      business_con
+0000df60: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 652c  nection_id=None,
+0000df70: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+0000df80: 726c 203d 2072 2273 656e 6447 616d 6522  rl = r"sendGame"
+0000df90: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000dfa0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
+0000dfb0: 6964 2c20 2267 616d 655f 7368 6f72 745f  id, "game_short_
+0000dfc0: 6e61 6d65 223a 2067 616d 655f 7368 6f72  name": game_shor
+0000dfd0: 745f 6e61 6d65 7d0a 2020 2020 6966 2064  t_name}.    if d
+0000dfe0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+0000dff0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
+0000e000: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000e010: 5b22 6469 7361 626c 655f 6e6f 7469 6669  ["disable_notifi
+0000e020: 6361 7469 6f6e 225d 203d 2064 6973 6162  cation"] = disab
+0000e030: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0a  le_notification.
+0000e040: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+0000e050: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
+0000e060: 6c6f 6164 5b22 7265 706c 795f 6d61 726b  load["reply_mark
+0000e070: 7570 225d 203d 205f 636f 6e76 6572 745f  up"] = _convert_
+0000e080: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+0000e090: 6b75 7029 0a20 2020 2069 6620 7469 6d65  kup).    if time
+0000e0a0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+0000e0b0: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
+0000e0c0: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
+0000e0d0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+0000e0e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000e0f0: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+0000e100: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
+0000e110: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+0000e120: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
+0000e130: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
+0000e140: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+0000e150: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
+0000e160: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+0000e170: 6164 5f69 640a 2020 2020 6966 2072 6570  ad_id.    if rep
+0000e180: 6c79 5f70 6172 616d 6574 6572 7320 6973  ly_parameters is
+0000e190: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000e1a0: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
+0000e1b0: 795f 7061 7261 6d65 7465 7273 225d 203d  y_parameters"] =
+0000e1c0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+0000e1d0: 732e 746f 5f6a 736f 6e28 290a 2020 2020  s.to_json().    
+0000e1e0: 6966 2062 7573 696e 6573 735f 636f 6e6e  if business_conn
+0000e1f0: 6563 7469 6f6e 5f69 643a 0a20 2020 2020  ection_id:.     
+0000e200: 2020 2070 6179 6c6f 6164 5b22 6275 7369     payload["busi
+0000e210: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+0000e220: 6964 225d 203d 2062 7573 696e 6573 735f  id"] = business_
+0000e230: 636f 6e6e 6563 7469 6f6e 5f69 640a 2020  connection_id.  
+0000e240: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+0000e250: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+0000e260: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+0000e270: 3d70 6179 6c6f 6164 290a 0a0a 2320 6874  =payload)...# ht
+0000e280: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+0000e290: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+0000e2a0: 2373 6574 6761 6d65 7363 6f72 650a 6465  #setgamescore.de
+0000e2b0: 6620 7365 745f 6761 6d65 5f73 636f 7265  f set_game_score
+0000e2c0: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
+0000e2d0: 2075 7365 725f 6964 2c0a 2020 2020 7363   user_id,.    sc
+0000e2e0: 6f72 652c 0a20 2020 2066 6f72 6365 3d4e  ore,.    force=N
+0000e2f0: 6f6e 652c 0a20 2020 2064 6973 6162 6c65  one,.    disable
+0000e300: 5f65 6469 745f 6d65 7373 6167 653d 4e6f  _edit_message=No
+0000e310: 6e65 2c0a 2020 2020 6368 6174 5f69 643d  ne,.    chat_id=
+0000e320: 4e6f 6e65 2c0a 2020 2020 6d65 7373 6167  None,.    messag
+0000e330: 655f 6964 3d4e 6f6e 652c 0a20 2020 2069  e_id=None,.    i
+0000e340: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000e350: 3d4e 6f6e 652c 0a29 3a0a 2020 2020 2222  =None,.):.    ""
+0000e360: 220a 2020 2020 5573 6520 7468 6973 206d  ".    Use this m
+0000e370: 6574 686f 6420 746f 2073 6574 2074 6865  ethod to set the
+0000e380: 2073 636f 7265 206f 6620 7468 6520 7370   score of the sp
+0000e390: 6563 6966 6965 6420 7573 6572 2069 6e20  ecified user in 
+0000e3a0: 6120 6761 6d65 2e20 4f6e 2073 7563 6365  a game. On succe
+0000e3b0: 7373 2c20 6966 2074 6865 206d 6573 7361  ss, if the messa
+0000e3c0: 6765 2077 6173 2073 656e 7420 6279 2074  ge was sent by t
+0000e3d0: 6865 2062 6f74 2c20 7265 7475 726e 7320  he bot, returns 
+0000e3e0: 7468 6520 6564 6974 6564 204d 6573 7361  the edited Messa
+0000e3f0: 6765 2c20 6f74 6865 7277 6973 6520 7265  ge, otherwise re
+0000e400: 7475 726e 7320 5472 7565 2e20 5265 7475  turns True. Retu
+0000e410: 726e 7320 616e 2065 7272 6f72 2c20 6966  rns an error, if
+0000e420: 2074 6865 206e 6577 2073 636f 7265 2069   the new score i
+0000e430: 7320 6e6f 7420 6772 6561 7465 7220 7468  s not greater th
+0000e440: 616e 2074 6865 2075 7365 7227 7320 6375  an the user's cu
+0000e450: 7272 656e 7420 7363 6f72 6520 696e 2074  rrent score in t
+0000e460: 6865 2063 6861 742e 0a20 2020 203a 7061  he chat..    :pa
+0000e470: 7261 6d20 746f 6b65 6e3a 2042 6f74 2773  ram token: Bot's
+0000e480: 2074 6f6b 656e 2028 796f 7520 646f 6e27   token (you don'
+0000e490: 7420 6e65 6564 2074 6f20 6669 6c6c 2074  t need to fill t
+0000e4a0: 6869 7329 0a20 2020 203a 7061 7261 6d20  his).    :param 
+0000e4b0: 7573 6572 5f69 643a 2055 7365 7220 6964  user_id: User id
+0000e4c0: 656e 7469 6669 6572 0a20 2020 203a 7061  entifier.    :pa
+0000e4d0: 7261 6d20 7363 6f72 653a 204e 6577 2073  ram score: New s
+0000e4e0: 636f 7265 2c20 6d75 7374 2062 6520 6e6f  core, must be no
+0000e4f0: 6e2d 6e65 6761 7469 7665 0a20 2020 203a  n-negative.    :
+0000e500: 7061 7261 6d20 666f 7263 653a 2028 4f70  param force: (Op
+0000e510: 7469 6f6e 616c 2920 5061 7373 2054 7275  tional) Pass Tru
+0000e520: 652c 2069 6620 7468 6520 6869 6768 2073  e, if the high s
+0000e530: 636f 7265 2069 7320 616c 6c6f 7765 6420  core is allowed 
+0000e540: 746f 2064 6563 7265 6173 652e 2054 6869  to decrease. Thi
+0000e550: 7320 6361 6e20 6265 2075 7365 6675 6c20  s can be useful 
+0000e560: 7768 656e 2066 6978 696e 6720 6d69 7374  when fixing mist
+0000e570: 616b 6573 206f 7220 6261 6e6e 696e 6720  akes or banning 
+0000e580: 6368 6561 7465 7273 0a20 2020 203a 7061  cheaters.    :pa
+0000e590: 7261 6d20 6469 7361 626c 655f 6564 6974  ram disable_edit
+0000e5a0: 5f6d 6573 7361 6765 3a20 284f 7074 696f  _message: (Optio
+0000e5b0: 6e61 6c29 2050 6173 7320 5472 7565 2c20  nal) Pass True, 
+0000e5c0: 6966 2074 6865 2067 616d 6520 6d65 7373  if the game mess
+0000e5d0: 6167 6520 7368 6f75 6c64 206e 6f74 2062  age should not b
+0000e5e0: 6520 6175 746f 6d61 7469 6361 6c6c 7920  e automatically 
+0000e5f0: 6564 6974 6564 2074 6f20 696e 636c 7564  edited to includ
+0000e600: 6520 7468 6520 6375 7272 656e 7420 7363  e the current sc
+0000e610: 6f72 6562 6f61 7264 0a20 2020 203a 7061  oreboard.    :pa
+0000e620: 7261 6d20 6368 6174 5f69 643a 2028 4f70  ram chat_id: (Op
+0000e630: 7469 6f6e 616c 2c20 7265 7175 6972 6564  tional, required
+0000e640: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
+0000e650: 6765 5f69 6420 6973 206e 6f74 2073 7065  ge_id is not spe
+0000e660: 6369 6669 6564 2920 556e 6971 7565 2069  cified) Unique i
+0000e670: 6465 6e74 6966 6965 7220 666f 7220 7468  dentifier for th
+0000e680: 6520 7461 7267 6574 2063 6861 7420 286f  e target chat (o
+0000e690: 7220 7573 6572 6e61 6d65 206f 6620 7468  r username of th
+0000e6a0: 6520 7461 7267 6574 2063 6861 6e6e 656c  e target channel
+0000e6b0: 2069 6e20 7468 6520 666f 726d 6174 2040   in the format @
+0000e6c0: 6368 616e 6e65 6c75 7365 726e 616d 6529  channelusername)
+0000e6d0: 0a20 2020 203a 7061 7261 6d20 6d65 7373  .    :param mess
+0000e6e0: 6167 655f 6964 3a20 284f 7074 696f 6e61  age_id: (Optiona
+0000e6f0: 6c2c 2072 6571 7569 7265 6420 6966 2069  l, required if i
+0000e700: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000e710: 2069 7320 6e6f 7420 7370 6563 6966 6965   is not specifie
+0000e720: 6429 2055 6e69 7175 6520 6964 656e 7469  d) Unique identi
+0000e730: 6669 6572 206f 6620 7468 6520 7365 6e74  fier of the sent
+0000e740: 206d 6573 7361 6765 0a20 2020 203a 7061   message.    :pa
+0000e750: 7261 6d20 696e 6c69 6e65 5f6d 6573 7361  ram inline_messa
+0000e760: 6765 5f69 643a 2028 4f70 7469 6f6e 616c  ge_id: (Optional
+0000e770: 2c20 7265 7175 6972 6564 2069 6620 6368  , required if ch
+0000e780: 6174 5f69 6420 616e 6420 6d65 7373 6167  at_id and messag
+0000e790: 655f 6964 2061 7265 206e 6f74 2073 7065  e_id are not spe
+0000e7a0: 6369 6669 6564 2920 4964 656e 7469 6669  cified) Identifi
+0000e7b0: 6572 206f 6620 7468 6520 696e 6c69 6e65  er of the inline
+0000e7c0: 206d 6573 7361 6765 0a20 2020 203a 7265   message.    :re
+0000e7d0: 7475 726e 3a0a 2020 2020 2222 220a 2020  turn:.    """.  
+0000e7e0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+0000e7f0: 2273 6574 4761 6d65 5363 6f72 6522 0a20  "setGameScore". 
+0000e800: 2020 2070 6179 6c6f 6164 203d 207b 2275     payload = {"u
+0000e810: 7365 725f 6964 223a 2075 7365 725f 6964  ser_id": user_id
+0000e820: 2c20 2273 636f 7265 223a 2073 636f 7265  , "score": score
+0000e830: 7d0a 2020 2020 6966 2066 6f72 6365 2069  }.    if force i
+0000e840: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000e850: 2020 2020 7061 796c 6f61 645b 2266 6f72      payload["for
+0000e860: 6365 225d 203d 2066 6f72 6365 0a20 2020  ce"] = force.   
+0000e870: 2069 6620 6368 6174 5f69 643a 0a20 2020   if chat_id:.   
+0000e880: 2020 2020 2070 6179 6c6f 6164 5b22 6368       payload["ch
+0000e890: 6174 5f69 6422 5d20 3d20 6368 6174 5f69  at_id"] = chat_i
+0000e8a0: 640a 2020 2020 6966 206d 6573 7361 6765  d.    if message
+0000e8b0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000e8c0: 6c6f 6164 5b22 6d65 7373 6167 655f 6964  load["message_id
+0000e8d0: 225d 203d 206d 6573 7361 6765 5f69 640a  "] = message_id.
+0000e8e0: 2020 2020 6966 2069 6e6c 696e 655f 6d65      if inline_me
+0000e8f0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
+0000e900: 2020 7061 796c 6f61 645b 2269 6e6c 696e    payload["inlin
+0000e910: 655f 6d65 7373 6167 655f 6964 225d 203d  e_message_id"] =
+0000e920: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000e930: 6964 0a20 2020 2069 6620 6469 7361 626c  id.    if disabl
+0000e940: 655f 6564 6974 5f6d 6573 7361 6765 2069  e_edit_message i
+0000e950: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000e960: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
+0000e970: 6162 6c65 5f65 6469 745f 6d65 7373 6167  able_edit_messag
+0000e980: 6522 5d20 3d20 6469 7361 626c 655f 6564  e"] = disable_ed
+0000e990: 6974 5f6d 6573 7361 6765 0a20 2020 2072  it_message.    r
+0000e9a0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000e9b0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000e9c0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000e9d0: 796c 6f61 6429 0a0a 0a23 2068 7474 7073  yload)...# https
+0000e9e0: 3a2f 2f63 6f72 652e 7465 6c65 6772 616d  ://core.telegram
+0000e9f0: 2e6f 7267 2f62 6f74 732f 6170 6923 6765  .org/bots/api#ge
+0000ea00: 7467 616d 6568 6967 6873 636f 7265 730a  tgamehighscores.
+0000ea10: 6465 6620 6765 745f 6761 6d65 5f68 6967  def get_game_hig
+0000ea20: 685f 7363 6f72 6573 280a 2020 2020 746f  h_scores(.    to
+0000ea30: 6b65 6e2c 2075 7365 725f 6964 2c20 6368  ken, user_id, ch
+0000ea40: 6174 5f69 643d 4e6f 6e65 2c20 6d65 7373  at_id=None, mess
+0000ea50: 6167 655f 6964 3d4e 6f6e 652c 2069 6e6c  age_id=None, inl
+0000ea60: 696e 655f 6d65 7373 6167 655f 6964 3d4e  ine_message_id=N
+0000ea70: 6f6e 650a 293a 0a20 2020 2022 2222 0a20  one.):.    """. 
+0000ea80: 2020 2055 7365 2074 6869 7320 6d65 7468     Use this meth
+0000ea90: 6f64 2074 6f20 6765 7420 6461 7461 2066  od to get data f
+0000eaa0: 6f72 2068 6967 6820 7363 6f72 6520 7461  or high score ta
+0000eab0: 626c 6573 2e20 5769 6c6c 2072 6574 7572  bles. Will retur
+0000eac0: 6e20 7468 6520 7363 6f72 6520 6f66 2074  n the score of t
+0000ead0: 6865 2073 7065 6369 6669 6564 2075 7365  he specified use
+0000eae0: 7220 616e 6420 7365 7665 7261 6c20 6f66  r and several of
+0000eaf0: 2068 6973 206e 6569 6768 626f 7273 2069   his neighbors i
+0000eb00: 6e20 6120 6761 6d65 2e20 4f6e 2073 7563  n a game. On suc
+0000eb10: 6365 7373 2c20 7265 7475 726e 7320 616e  cess, returns an
+0000eb20: 2041 7272 6179 206f 6620 4761 6d65 4869   Array of GameHi
+0000eb30: 6768 5363 6f72 6520 6f62 6a65 6374 732e  ghScore objects.
+0000eb40: 0a20 2020 2054 6869 7320 6d65 7468 6f64  .    This method
+0000eb50: 2077 696c 6c20 6375 7272 656e 746c 7920   will currently 
+0000eb60: 7265 7475 726e 2073 636f 7265 7320 666f  return scores fo
+0000eb70: 7220 7468 6520 7461 7267 6574 2075 7365  r the target use
+0000eb80: 722c 2070 6c75 7320 7477 6f20 6f66 2068  r, plus two of h
+0000eb90: 6973 2063 6c6f 7365 7374 206e 6569 6768  is closest neigh
+0000eba0: 626f 7273 206f 6e20 6561 6368 2073 6964  bors on each sid
+0000ebb0: 652e 2057 696c 6c20 616c 736f 2072 6574  e. Will also ret
+0000ebc0: 7572 6e20 7468 6520 746f 7020 7468 7265  urn the top thre
+0000ebd0: 6520 7573 6572 7320 6966 2074 6865 2075  e users if the u
+0000ebe0: 7365 7220 616e 6420 6869 7320 6e65 6967  ser and his neig
+0000ebf0: 6862 6f72 7320 6172 6520 6e6f 7420 616d  hbors are not am
+0000ec00: 6f6e 6720 7468 656d 2e20 506c 6561 7365  ong them. Please
+0000ec10: 206e 6f74 6520 7468 6174 2074 6869 7320   note that this 
+0000ec20: 6265 6861 7669 6f72 2069 7320 7375 626a  behavior is subj
+0000ec30: 6563 7420 746f 2063 6861 6e67 652e 0a20  ect to change.. 
+0000ec40: 2020 203a 7061 7261 6d20 746f 6b65 6e3a     :param token:
+0000ec50: 2042 6f74 2773 2074 6f6b 656e 2028 796f   Bot's token (yo
+0000ec60: 7520 646f 6e27 7420 6e65 6564 2074 6f20  u don't need to 
+0000ec70: 6669 6c6c 2074 6869 7329 0a20 2020 203a  fill this).    :
+0000ec80: 7061 7261 6d20 7573 6572 5f69 643a 2054  param user_id: T
+0000ec90: 6172 6765 7420 7573 6572 2069 640a 2020  arget user id.  
+0000eca0: 2020 3a70 6172 616d 2063 6861 745f 6964    :param chat_id
+0000ecb0: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
+0000ecc0: 7569 7265 6420 6966 2069 6e6c 696e 655f  uired if inline_
+0000ecd0: 6d65 7373 6167 655f 6964 2069 7320 6e6f  message_id is no
+0000ece0: 7420 7370 6563 6966 6965 6429 2055 6e69  t specified) Uni
+0000ecf0: 7175 6520 6964 656e 7469 6669 6572 2066  que identifier f
+0000ed00: 6f72 2074 6865 2074 6172 6765 7420 6368  or the target ch
+0000ed10: 6174 2028 6f72 2075 7365 726e 616d 6520  at (or username 
+0000ed20: 6f66 2074 6865 2074 6172 6765 7420 6368  of the target ch
+0000ed30: 616e 6e65 6c20 696e 2074 6865 2066 6f72  annel in the for
+0000ed40: 6d61 7420 4063 6861 6e6e 656c 7573 6572  mat @channeluser
+0000ed50: 6e61 6d65 290a 2020 2020 3a70 6172 616d  name).    :param
+0000ed60: 206d 6573 7361 6765 5f69 643a 2028 4f70   message_id: (Op
+0000ed70: 7469 6f6e 616c 2c20 7265 7175 6972 6564  tional, required
+0000ed80: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
+0000ed90: 6765 5f69 6420 6973 206e 6f74 2073 7065  ge_id is not spe
+0000eda0: 6369 6669 6564 2920 556e 6971 7565 2069  cified) Unique i
+0000edb0: 6465 6e74 6966 6965 7220 6f66 2074 6865  dentifier of the
+0000edc0: 2073 656e 7420 6d65 7373 6167 650a 2020   sent message.  
+0000edd0: 2020 3a70 6172 616d 2069 6e6c 696e 655f    :param inline_
+0000ede0: 6d65 7373 6167 655f 6964 3a20 284f 7074  message_id: (Opt
+0000edf0: 696f 6e61 6c2c 2072 6571 7569 7265 6420  ional, required 
+0000ee00: 6966 2063 6861 745f 6964 2061 6e64 206d  if chat_id and m
+0000ee10: 6573 7361 6765 5f69 6420 6172 6520 6e6f  essage_id are no
+0000ee20: 7420 7370 6563 6966 6965 6429 2049 6465  t specified) Ide
+0000ee30: 6e74 6966 6965 7220 6f66 2074 6865 2069  ntifier of the i
+0000ee40: 6e6c 696e 6520 6d65 7373 6167 650a 2020  nline message.  
+0000ee50: 2020 3a72 6574 7572 6e3a 0a20 2020 2022    :return:.    "
+0000ee60: 2222 0a20 2020 206d 6574 686f 645f 7572  "".    method_ur
+0000ee70: 6c20 3d20 7222 6765 7447 616d 6548 6967  l = r"getGameHig
+0000ee80: 6853 636f 7265 7322 0a20 2020 2070 6179  hScores".    pay
+0000ee90: 6c6f 6164 203d 207b 2275 7365 725f 6964  load = {"user_id
+0000eea0: 223a 2075 7365 725f 6964 7d0a 2020 2020  ": user_id}.    
+0000eeb0: 6966 2063 6861 745f 6964 3a0a 2020 2020  if chat_id:.    
+0000eec0: 2020 2020 7061 796c 6f61 645b 2263 6861      payload["cha
+0000eed0: 745f 6964 225d 203d 2063 6861 745f 6964  t_id"] = chat_id
+0000eee0: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
+0000eef0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+0000ef00: 6f61 645b 226d 6573 7361 6765 5f69 6422  oad["message_id"
+0000ef10: 5d20 3d20 6d65 7373 6167 655f 6964 0a20  ] = message_id. 
+0000ef20: 2020 2069 6620 696e 6c69 6e65 5f6d 6573     if inline_mes
+0000ef30: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
+0000ef40: 2070 6179 6c6f 6164 5b22 696e 6c69 6e65   payload["inline
+0000ef50: 5f6d 6573 7361 6765 5f69 6422 5d20 3d20  _message_id"] = 
+0000ef60: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000ef70: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
+0000ef80: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000ef90: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000efa0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+0000efb0: 2320 5061 796d 656e 7473 2028 6874 7470  # Payments (http
+0000efc0: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
+0000efd0: 6d2e 6f72 672f 626f 7473 2f61 7069 2370  m.org/bots/api#p
+0000efe0: 6179 6d65 6e74 7329 0a0a 0a64 6566 2073  ayments)...def s
+0000eff0: 656e 645f 696e 766f 6963 6528 0a20 2020  end_invoice(.   
+0000f000: 2074 6f6b 656e 2c0a 2020 2020 6368 6174   token,.    chat
+0000f010: 5f69 642c 0a20 2020 2074 6974 6c65 2c0a  _id,.    title,.
+0000f020: 2020 2020 6465 7363 7269 7074 696f 6e2c      description,
+0000f030: 0a20 2020 2069 6e76 6f69 6365 5f70 6179  .    invoice_pay
+0000f040: 6c6f 6164 2c0a 2020 2020 7072 6f76 6964  load,.    provid
+0000f050: 6572 5f74 6f6b 656e 2c0a 2020 2020 6375  er_token,.    cu
+0000f060: 7272 656e 6379 2c0a 2020 2020 7072 6963  rrency,.    pric
+0000f070: 6573 2c0a 2020 2020 7374 6172 745f 7061  es,.    start_pa
+0000f080: 7261 6d65 7465 723d 4e6f 6e65 2c0a 2020  rameter=None,.  
+0000f090: 2020 7068 6f74 6f5f 7572 6c3d 4e6f 6e65    photo_url=None
+0000f0a0: 2c0a 2020 2020 7068 6f74 6f5f 7369 7a65  ,.    photo_size
+0000f0b0: 3d4e 6f6e 652c 0a20 2020 2070 686f 746f  =None,.    photo
+0000f0c0: 5f77 6964 7468 3d4e 6f6e 652c 0a20 2020  _width=None,.   
+0000f0d0: 2070 686f 746f 5f68 6569 6768 743d 4e6f   photo_height=No
+0000f0e0: 6e65 2c0a 2020 2020 6e65 6564 5f6e 616d  ne,.    need_nam
+0000f0f0: 653d 4e6f 6e65 2c0a 2020 2020 6e65 6564  e=None,.    need
+0000f100: 5f70 686f 6e65 5f6e 756d 6265 723d 4e6f  _phone_number=No
+0000f110: 6e65 2c0a 2020 2020 6e65 6564 5f65 6d61  ne,.    need_ema
+0000f120: 696c 3d4e 6f6e 652c 0a20 2020 206e 6565  il=None,.    nee
+0000f130: 645f 7368 6970 7069 6e67 5f61 6464 7265  d_shipping_addre
+0000f140: 7373 3d4e 6f6e 652c 0a20 2020 2073 656e  ss=None,.    sen
+0000f150: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
+0000f160: 6f5f 7072 6f76 6964 6572 3d4e 6f6e 652c  o_provider=None,
+0000f170: 0a20 2020 2073 656e 645f 656d 6169 6c5f  .    send_email_
+0000f180: 746f 5f70 726f 7669 6465 723d 4e6f 6e65  to_provider=None
+0000f190: 2c0a 2020 2020 6973 5f66 6c65 7869 626c  ,.    is_flexibl
+0000f1a0: 653d 4e6f 6e65 2c0a 2020 2020 6469 7361  e=None,.    disa
+0000f1b0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+0000f1c0: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
+0000f1d0: 5f6d 6172 6b75 703d 4e6f 6e65 2c0a 2020  _markup=None,.  
+0000f1e0: 2020 7072 6f76 6964 6572 5f64 6174 613d    provider_data=
+0000f1f0: 4e6f 6e65 2c0a 2020 2020 7469 6d65 6f75  None,.    timeou
+0000f200: 743d 4e6f 6e65 2c0a 2020 2020 6d61 785f  t=None,.    max_
+0000f210: 7469 705f 616d 6f75 6e74 3d4e 6f6e 652c  tip_amount=None,
+0000f220: 0a20 2020 2073 7567 6765 7374 6564 5f74  .    suggested_t
+0000f230: 6970 5f61 6d6f 756e 7473 3d4e 6f6e 652c  ip_amounts=None,
+0000f240: 0a20 2020 2070 726f 7465 6374 5f63 6f6e  .    protect_con
+0000f250: 7465 6e74 3d4e 6f6e 652c 0a20 2020 206d  tent=None,.    m
+0000f260: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+0000f270: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
+0000f280: 5f70 6172 616d 6574 6572 733d 4e6f 6e65  _parameters=None
+0000f290: 2c0a 293a 0a20 2020 2022 2222 0a20 2020  ,.):.    """.   
+0000f2a0: 2055 7365 2074 6869 7320 6d65 7468 6f64   Use this method
+0000f2b0: 2074 6f20 7365 6e64 2069 6e76 6f69 6365   to send invoice
+0000f2c0: 732e 204f 6e20 7375 6363 6573 732c 2074  s. On success, t
+0000f2d0: 6865 2073 656e 7420 4d65 7373 6167 6520  he sent Message 
+0000f2e0: 6973 2072 6574 7572 6e65 642e 0a20 2020  is returned..   
+0000f2f0: 203a 7061 7261 6d20 746f 6b65 6e3a 2042   :param token: B
+0000f300: 6f74 2773 2074 6f6b 656e 2028 796f 7520  ot's token (you 
+0000f310: 646f 6e27 7420 6e65 6564 2074 6f20 6669  don't need to fi
+0000f320: 6c6c 2074 6869 7329 0a20 2020 203a 7061  ll this).    :pa
+0000f330: 7261 6d20 6368 6174 5f69 643a 2055 6e69  ram chat_id: Uni
+0000f340: 7175 6520 6964 656e 7469 6669 6572 2066  que identifier f
+0000f350: 6f72 2074 6865 2074 6172 6765 7420 7072  or the target pr
+0000f360: 6976 6174 6520 6368 6174 0a20 2020 203a  ivate chat.    :
+0000f370: 7061 7261 6d20 7469 746c 653a 2050 726f  param title: Pro
+0000f380: 6475 6374 206e 616d 650a 2020 2020 3a70  duct name.    :p
+0000f390: 6172 616d 2064 6573 6372 6970 7469 6f6e  aram description
+0000f3a0: 3a20 5072 6f64 7563 7420 6465 7363 7269  : Product descri
+0000f3b0: 7074 696f 6e0a 2020 2020 3a70 6172 616d  ption.    :param
+0000f3c0: 2069 6e76 6f69 6365 5f70 6179 6c6f 6164   invoice_payload
+0000f3d0: 3a20 426f 742d 6465 6669 6e65 6420 696e  : Bot-defined in
+0000f3e0: 766f 6963 6520 7061 796c 6f61 642c 2031  voice payload, 1
+0000f3f0: 2d31 3238 2062 7974 6573 2e20 5468 6973  -128 bytes. This
+0000f400: 2077 696c 6c20 6e6f 7420 6265 2064 6973   will not be dis
+0000f410: 706c 6179 6564 2074 6f20 7468 6520 7573  played to the us
+0000f420: 6572 2c20 7573 6520 666f 7220 796f 7572  er, use for your
+0000f430: 2069 6e74 6572 6e61 6c20 7072 6f63 6573   internal proces
+0000f440: 7365 732e 0a20 2020 203a 7061 7261 6d20  ses..    :param 
+0000f450: 7072 6f76 6964 6572 5f74 6f6b 656e 3a20  provider_token: 
+0000f460: 5061 796d 656e 7473 2070 726f 7669 6465  Payments provide
+0000f470: 7220 746f 6b65 6e2c 206f 6274 6169 6e65  r token, obtaine
+0000f480: 6420 7669 6120 4042 6f74 6661 7468 6572  d via @Botfather
+0000f490: 0a20 2020 203a 7061 7261 6d20 6375 7272  .    :param curr
+0000f4a0: 656e 6379 3a20 5468 7265 652d 6c65 7474  ency: Three-lett
+0000f4b0: 6572 2049 534f 2034 3231 3720 6375 7272  er ISO 4217 curr
+0000f4c0: 656e 6379 2063 6f64 652c 2073 6565 2068  ency code, see h
+0000f4d0: 7474 7073 3a2f 2f63 6f72 652e 7465 6c65  ttps://core.tele
+0000f4e0: 6772 616d 2e6f 7267 2f62 6f74 732f 7061  gram.org/bots/pa
+0000f4f0: 796d 656e 7473 2373 7570 706f 7274 6564  yments#supported
+0000f500: 2d63 7572 7265 6e63 6965 730a 2020 2020  -currencies.    
+0000f510: 3a70 6172 616d 2070 7269 6365 733a 2050  :param prices: P
+0000f520: 7269 6365 2062 7265 616b 646f 776e 2c20  rice breakdown, 
+0000f530: 6120 6c69 7374 206f 6620 636f 6d70 6f6e  a list of compon
+0000f540: 656e 7473 2028 652e 672e 2070 726f 6475  ents (e.g. produ
+0000f550: 6374 2070 7269 6365 2c20 7461 782c 2064  ct price, tax, d
+0000f560: 6973 636f 756e 742c 2064 656c 6976 6572  iscount, deliver
+0000f570: 7920 636f 7374 2c20 6465 6c69 7665 7279  y cost, delivery
+0000f580: 2074 6178 2c20 626f 6e75 732c 2065 7463   tax, bonus, etc
+0000f590: 2e29 0a20 2020 203a 7061 7261 6d20 7374  .).    :param st
+0000f5a0: 6172 745f 7061 7261 6d65 7465 723a 2055  art_parameter: U
+0000f5b0: 6e69 7175 6520 6465 6570 2d6c 696e 6b69  nique deep-linki
+0000f5c0: 6e67 2070 6172 616d 6574 6572 2074 6861  ng parameter tha
+0000f5d0: 7420 6361 6e20 6265 2075 7365 6420 746f  t can be used to
+0000f5e0: 2067 656e 6572 6174 6520 7468 6973 2069   generate this i
+0000f5f0: 6e76 6f69 6365 2077 6865 6e20 7573 6564  nvoice when used
+0000f600: 2061 7320 6120 7374 6172 7420 7061 7261   as a start para
+0000f610: 6d65 7465 720a 2020 2020 3a70 6172 616d  meter.    :param
+0000f620: 2070 686f 746f 5f75 726c 3a20 5552 4c20   photo_url: URL 
+0000f630: 6f66 2074 6865 2070 726f 6475 6374 2070  of the product p
+0000f640: 686f 746f 2066 6f72 2074 6865 2069 6e76  hoto for the inv
+0000f650: 6f69 6365 2e20 4361 6e20 6265 2061 2070  oice. Can be a p
+0000f660: 686f 746f 206f 6620 7468 6520 676f 6f64  hoto of the good
+0000f670: 7320 6f72 2061 206d 6172 6b65 7469 6e67  s or a marketing
+0000f680: 2069 6d61 6765 2066 6f72 2061 2073 6572   image for a ser
+0000f690: 7669 6365 2e20 5065 6f70 6c65 206c 696b  vice. People lik
+0000f6a0: 6520 6974 2062 6574 7465 7220 7768 656e  e it better when
+0000f6b0: 2074 6865 7920 7365 6520 7768 6174 2074   they see what t
+0000f6c0: 6865 7920 6172 6520 7061 7969 6e67 2066  hey are paying f
+0000f6d0: 6f72 2e0a 2020 2020 3a70 6172 616d 2070  or..    :param p
+0000f6e0: 686f 746f 5f73 697a 653a 2050 686f 746f  hoto_size: Photo
+0000f6f0: 2073 697a 650a 2020 2020 3a70 6172 616d   size.    :param
+0000f700: 2070 686f 746f 5f77 6964 7468 3a20 5068   photo_width: Ph
+0000f710: 6f74 6f20 7769 6474 680a 2020 2020 3a70  oto width.    :p
+0000f720: 6172 616d 2070 686f 746f 5f68 6569 6768  aram photo_heigh
+0000f730: 743a 2050 686f 746f 2068 6569 6768 740a  t: Photo height.
+0000f740: 2020 2020 3a70 6172 616d 206e 6565 645f      :param need_
+0000f750: 6e61 6d65 3a20 5061 7373 2054 7275 652c  name: Pass True,
+0000f760: 2069 6620 796f 7520 7265 7175 6972 6520   if you require 
+0000f770: 7468 6520 7573 6572 2773 2066 756c 6c20  the user's full 
+0000f780: 6e61 6d65 2074 6f20 636f 6d70 6c65 7465  name to complete
+0000f790: 2074 6865 206f 7264 6572 0a20 2020 203a   the order.    :
+0000f7a0: 7061 7261 6d20 6e65 6564 5f70 686f 6e65  param need_phone
+0000f7b0: 5f6e 756d 6265 723a 2050 6173 7320 5472  _number: Pass Tr
+0000f7c0: 7565 2c20 6966 2079 6f75 2072 6571 7569  ue, if you requi
+0000f7d0: 7265 2074 6865 2075 7365 7227 7320 7068  re the user's ph
+0000f7e0: 6f6e 6520 6e75 6d62 6572 2074 6f20 636f  one number to co
+0000f7f0: 6d70 6c65 7465 2074 6865 206f 7264 6572  mplete the order
+0000f800: 0a20 2020 203a 7061 7261 6d20 6e65 6564  .    :param need
+0000f810: 5f65 6d61 696c 3a20 5061 7373 2054 7275  _email: Pass Tru
+0000f820: 652c 2069 6620 796f 7520 7265 7175 6972  e, if you requir
+0000f830: 6520 7468 6520 7573 6572 2773 2065 6d61  e the user's ema
+0000f840: 696c 2074 6f20 636f 6d70 6c65 7465 2074  il to complete t
+0000f850: 6865 206f 7264 6572 0a20 2020 203a 7061  he order.    :pa
+0000f860: 7261 6d20 6e65 6564 5f73 6869 7070 696e  ram need_shippin
+0000f870: 675f 6164 6472 6573 733a 2050 6173 7320  g_address: Pass 
+0000f880: 5472 7565 2c20 6966 2079 6f75 2072 6571  True, if you req
+0000f890: 7569 7265 2074 6865 2075 7365 7227 7320  uire the user's 
+0000f8a0: 7368 6970 7069 6e67 2061 6464 7265 7373  shipping address
+0000f8b0: 2074 6f20 636f 6d70 6c65 7465 2074 6865   to complete the
+0000f8c0: 206f 7264 6572 0a20 2020 203a 7061 7261   order.    :para
+0000f8d0: 6d20 6973 5f66 6c65 7869 626c 653a 2050  m is_flexible: P
+0000f8e0: 6173 7320 5472 7565 2c20 6966 2074 6865  ass True, if the
+0000f8f0: 2066 696e 616c 2070 7269 6365 2064 6570   final price dep
+0000f900: 656e 6473 206f 6e20 7468 6520 7368 6970  ends on the ship
+0000f910: 7069 6e67 206d 6574 686f 640a 2020 2020  ping method.    
+0000f920: 3a70 6172 616d 2073 656e 645f 7068 6f6e  :param send_phon
+0000f930: 655f 6e75 6d62 6572 5f74 6f5f 7072 6f76  e_number_to_prov
+0000f940: 6964 6572 3a20 5061 7373 2054 7275 652c  ider: Pass True,
+0000f950: 2069 6620 7573 6572 2773 2070 686f 6e65   if user's phone
+0000f960: 206e 756d 6265 7220 7368 6f75 6c64 2062   number should b
+0000f970: 6520 7365 6e74 2074 6f20 7072 6f76 6964  e sent to provid
+0000f980: 6572 0a20 2020 203a 7061 7261 6d20 7365  er.    :param se
+0000f990: 6e64 5f65 6d61 696c 5f74 6f5f 7072 6f76  nd_email_to_prov
+0000f9a0: 6964 6572 3a20 5061 7373 2054 7275 652c  ider: Pass True,
+0000f9b0: 2069 6620 7573 6572 2773 2065 6d61 696c   if user's email
+0000f9c0: 2061 6464 7265 7373 2073 686f 756c 6420   address should 
+0000f9d0: 6265 2073 656e 7420 746f 2070 726f 7669  be sent to provi
+0000f9e0: 6465 720a 2020 2020 3a70 6172 616d 2064  der.    :param d
+0000f9f0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+0000fa00: 696f 6e3a 2053 656e 6473 2074 6865 206d  ion: Sends the m
+0000fa10: 6573 7361 6765 2073 696c 656e 746c 792e  essage silently.
+0000fa20: 2055 7365 7273 2077 696c 6c20 7265 6365   Users will rece
+0000fa30: 6976 6520 6120 6e6f 7469 6669 6361 7469  ive a notificati
+0000fa40: 6f6e 2077 6974 6820 6e6f 2073 6f75 6e64  on with no sound
+0000fa50: 2e0a 2020 2020 3a70 6172 616d 2072 6570  ..    :param rep
+0000fa60: 6c79 5f6d 6172 6b75 703a 2041 204a 534f  ly_markup: A JSO
+0000fa70: 4e2d 7365 7269 616c 697a 6564 206f 626a  N-serialized obj
+0000fa80: 6563 7420 666f 7220 616e 2069 6e6c 696e  ect for an inlin
+0000fa90: 6520 6b65 7962 6f61 7264 2e20 4966 2065  e keyboard. If e
+0000faa0: 6d70 7479 2c20 6f6e 6520 2750 6179 2074  mpty, one 'Pay t
+0000fab0: 6f74 616c 2070 7269 6365 2720 6275 7474  otal price' butt
+0000fac0: 6f6e 2077 696c 6c20 6265 2073 686f 776e  on will be shown
+0000fad0: 2e20 4966 206e 6f74 2065 6d70 7479 2c20  . If not empty, 
+0000fae0: 7468 6520 6669 7273 7420 6275 7474 6f6e  the first button
+0000faf0: 206d 7573 7420 6265 2061 2050 6179 2062   must be a Pay b
+0000fb00: 7574 746f 6e0a 2020 2020 3a70 6172 616d  utton.    :param
+0000fb10: 2070 726f 7669 6465 725f 6461 7461 3a20   provider_data: 
+0000fb20: 4120 4a53 4f4e 2d73 6572 6961 6c69 7a65  A JSON-serialize
+0000fb30: 6420 6461 7461 2061 626f 7574 2074 6865  d data about the
+0000fb40: 2069 6e76 6f69 6365 2c20 7768 6963 6820   invoice, which 
+0000fb50: 7769 6c6c 2062 6520 7368 6172 6564 2077  will be shared w
+0000fb60: 6974 6820 7468 6520 7061 796d 656e 7420  ith the payment 
+0000fb70: 7072 6f76 6964 6572 2e20 4120 6465 7461  provider. A deta
+0000fb80: 696c 6564 2064 6573 6372 6970 7469 6f6e  iled description
+0000fb90: 206f 6620 7265 7175 6972 6564 2066 6965   of required fie
+0000fba0: 6c64 7320 7368 6f75 6c64 2062 6520 7072  lds should be pr
+0000fbb0: 6f76 6964 6564 2062 7920 7468 6520 7061  ovided by the pa
+0000fbc0: 796d 656e 7420 7072 6f76 6964 6572 2e0a  yment provider..
+0000fbd0: 2020 2020 3a70 6172 616d 2074 696d 656f      :param timeo
+0000fbe0: 7574 3a0a 2020 2020 3a70 6172 616d 206d  ut:.    :param m
+0000fbf0: 6178 5f74 6970 5f61 6d6f 756e 743a 2054  ax_tip_amount: T
+0000fc00: 6865 206d 6178 696d 756d 2061 6363 6570  he maximum accep
+0000fc10: 7465 6420 616d 6f75 6e74 2066 6f72 2074  ted amount for t
+0000fc20: 6970 7320 696e 2074 6865 2073 6d61 6c6c  ips in the small
+0000fc30: 6573 7420 756e 6974 7320 6f66 2074 6865  est units of the
+0000fc40: 2063 7572 7265 6e63 790a 2020 2020 3a70   currency.    :p
+0000fc50: 6172 616d 2073 7567 6765 7374 6564 5f74  aram suggested_t
+0000fc60: 6970 5f61 6d6f 756e 7473 3a20 4120 4a53  ip_amounts: A JS
+0000fc70: 4f4e 2d73 6572 6961 6c69 7a65 6420 6172  ON-serialized ar
+0000fc80: 7261 7920 6f66 2073 7567 6765 7374 6564  ray of suggested
+0000fc90: 2061 6d6f 756e 7473 206f 6620 7469 7073   amounts of tips
+0000fca0: 2069 6e20 7468 6520 736d 616c 6c65 7374   in the smallest
+0000fcb0: 2075 6e69 7473 206f 6620 7468 6520 6375   units of the cu
+0000fcc0: 7272 656e 6379 2e20 4174 206d 6f73 7420  rrency. At most 
+0000fcd0: 3420 7375 6767 6573 7465 6420 7469 7020  4 suggested tip 
+0000fce0: 616d 6f75 6e74 7320 6361 6e20 6265 2073  amounts can be s
+0000fcf0: 7065 6369 6669 6564 2e20 5468 6520 7375  pecified. The su
+0000fd00: 6767 6573 7465 6420 7469 7020 616d 6f75  ggested tip amou
+0000fd10: 6e74 7320 6d75 7374 2062 6520 706f 7369  nts must be posi
+0000fd20: 7469 7665 2c20 7061 7373 6564 2069 6e20  tive, passed in 
+0000fd30: 6120 7374 7269 6374 6c79 2069 6e63 7265  a strictly incre
+0000fd40: 6173 6564 206f 7264 6572 2061 6e64 206d  ased order and m
+0000fd50: 7573 7420 6e6f 7420 6578 6365 6564 206d  ust not exceed m
+0000fd60: 6178 5f74 6970 5f61 6d6f 756e 742e 0a20  ax_tip_amount.. 
+0000fd70: 2020 203a 7061 7261 6d20 7072 6f74 6563     :param protec
+0000fd80: 745f 636f 6e74 656e 743a 2050 726f 7465  t_content: Prote
+0000fd90: 6374 7320 7468 6520 636f 6e74 656e 7473  cts the contents
+0000fda0: 206f 6620 7468 6520 7365 6e74 206d 6573   of the sent mes
+0000fdb0: 7361 6765 2066 726f 6d20 666f 7277 6172  sage from forwar
+0000fdc0: 6469 6e67 2061 6e64 2073 6176 696e 670a  ding and saving.
+0000fdd0: 2020 2020 3a70 6172 616d 206d 6573 7361      :param messa
+0000fde0: 6765 5f74 6872 6561 645f 6964 3a20 556e  ge_thread_id: Un
+0000fdf0: 6971 7565 2069 6465 6e74 6966 6965 7220  ique identifier 
+0000fe00: 666f 7220 7468 6520 7461 7267 6574 206d  for the target m
+0000fe10: 6573 7361 6765 2074 6872 6561 6420 2874  essage thread (t
+0000fe20: 6f70 6963 2920 6f66 2074 6865 2066 6f72  opic) of the for
+0000fe30: 756d 3b20 666f 7220 666f 7275 6d20 7375  um; for forum su
+0000fe40: 7065 7267 726f 7570 7320 6f6e 6c79 0a20  pergroups only. 
+0000fe50: 2020 203a 7061 7261 6d20 7265 706c 795f     :param reply_
+0000fe60: 7061 7261 6d65 7465 7273 3a20 4120 4a53  parameters: A JS
+0000fe70: 4f4e 2d73 6572 6961 6c69 7a65 6420 6f62  ON-serialized ob
+0000fe80: 6a65 6374 2066 6f72 2061 6e20 696e 6c69  ject for an inli
+0000fe90: 6e65 206b 6579 626f 6172 642e 2049 6620  ne keyboard. If 
+0000fea0: 656d 7074 792c 206f 6e65 2027 5061 7920  empty, one 'Pay 
+0000feb0: 746f 7461 6c20 7072 6963 6527 2062 7574  total price' but
+0000fec0: 746f 6e20 7769 6c6c 2062 6520 7368 6f77  ton will be show
+0000fed0: 6e2e 2049 6620 6e6f 7420 656d 7074 792c  n. If not empty,
+0000fee0: 2074 6865 2066 6972 7374 2062 7574 746f   the first butto
+0000fef0: 6e20 6d75 7374 2062 6520 6120 5061 7920  n must be a Pay 
+0000ff00: 6275 7474 6f6e 2e0a 2020 2020 3a72 6574  button..    :ret
+0000ff10: 7572 6e3a 0a20 2020 2022 2222 0a20 2020  urn:.    """.   
+0000ff20: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
+0000ff30: 7365 6e64 496e 766f 6963 6522 0a20 2020  sendInvoice".   
+0000ff40: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
+0000ff50: 2020 2020 2022 6368 6174 5f69 6422 3a20       "chat_id": 
+0000ff60: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
+0000ff70: 2022 7469 746c 6522 3a20 7469 746c 652c   "title": title,
+0000ff80: 0a20 2020 2020 2020 2022 6465 7363 7269  .        "descri
+0000ff90: 7074 696f 6e22 3a20 6465 7363 7269 7074  ption": descript
+0000ffa0: 696f 6e2c 0a20 2020 2020 2020 2022 7061  ion,.        "pa
+0000ffb0: 796c 6f61 6422 3a20 696e 766f 6963 655f  yload": invoice_
+0000ffc0: 7061 796c 6f61 642c 0a20 2020 2020 2020  payload,.       
+0000ffd0: 2022 7072 6f76 6964 6572 5f74 6f6b 656e   "provider_token
+0000ffe0: 223a 2070 726f 7669 6465 725f 746f 6b65  ": provider_toke
+0000fff0: 6e2c 0a20 2020 2020 2020 2022 6375 7272  n,.        "curr
+00010000: 656e 6379 223a 2063 7572 7265 6e63 792c  ency": currency,
+00010010: 0a20 2020 2020 2020 2022 7072 6963 6573  .        "prices
+00010020: 223a 205f 636f 6e76 6572 745f 6c69 7374  ": _convert_list
+00010030: 5f6a 736f 6e5f 7365 7269 616c 697a 6162  _json_serializab
+00010040: 6c65 2870 7269 6365 7329 2c0a 2020 2020  le(prices),.    
+00010050: 7d0a 2020 2020 6966 2073 7461 7274 5f70  }.    if start_p
+00010060: 6172 616d 6574 6572 3a0a 2020 2020 2020  arameter:.      
+00010070: 2020 7061 796c 6f61 645b 2273 7461 7274    payload["start
+00010080: 5f70 6172 616d 6574 6572 225d 203d 2073  _parameter"] = s
+00010090: 7461 7274 5f70 6172 616d 6574 6572 0a20  tart_parameter. 
+000100a0: 2020 2069 6620 7068 6f74 6f5f 7572 6c3a     if photo_url:
+000100b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000100c0: 5b22 7068 6f74 6f5f 7572 6c22 5d20 3d20  ["photo_url"] = 
+000100d0: 7068 6f74 6f5f 7572 6c0a 2020 2020 6966  photo_url.    if
+000100e0: 2070 686f 746f 5f73 697a 653a 0a20 2020   photo_size:.   
+000100f0: 2020 2020 2070 6179 6c6f 6164 5b22 7068       payload["ph
+00010100: 6f74 6f5f 7369 7a65 225d 203d 2070 686f  oto_size"] = pho
+00010110: 746f 5f73 697a 650a 2020 2020 6966 2070  to_size.    if p
+00010120: 686f 746f 5f77 6964 7468 3a0a 2020 2020  hoto_width:.    
+00010130: 2020 2020 7061 796c 6f61 645b 2270 686f      payload["pho
+00010140: 746f 5f77 6964 7468 225d 203d 2070 686f  to_width"] = pho
+00010150: 746f 5f77 6964 7468 0a20 2020 2069 6620  to_width.    if 
+00010160: 7068 6f74 6f5f 6865 6967 6874 3a0a 2020  photo_height:.  
+00010170: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+00010180: 686f 746f 5f68 6569 6768 7422 5d20 3d20  hoto_height"] = 
+00010190: 7068 6f74 6f5f 6865 6967 6874 0a20 2020  photo_height.   
+000101a0: 2069 6620 6e65 6564 5f6e 616d 6520 6973   if need_name is
+000101b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000101c0: 2020 2070 6179 6c6f 6164 5b22 6e65 6564     payload["need
+000101d0: 5f6e 616d 6522 5d20 3d20 6e65 6564 5f6e  _name"] = need_n
+000101e0: 616d 650a 2020 2020 6966 206e 6565 645f  ame.    if need_
+000101f0: 7068 6f6e 655f 6e75 6d62 6572 2069 7320  phone_number is 
+00010200: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00010210: 2020 7061 796c 6f61 645b 226e 6565 645f    payload["need_
+00010220: 7068 6f6e 655f 6e75 6d62 6572 225d 203d  phone_number"] =
+00010230: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
+00010240: 6572 0a20 2020 2069 6620 6e65 6564 5f65  er.    if need_e
+00010250: 6d61 696c 2069 7320 6e6f 7420 4e6f 6e65  mail is not None
+00010260: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00010270: 645b 226e 6565 645f 656d 6169 6c22 5d20  d["need_email"] 
+00010280: 3d20 6e65 6564 5f65 6d61 696c 0a20 2020  = need_email.   
+00010290: 2069 6620 6e65 6564 5f73 6869 7070 696e   if need_shippin
+000102a0: 675f 6164 6472 6573 7320 6973 206e 6f74  g_address is not
+000102b0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+000102c0: 6179 6c6f 6164 5b22 6e65 6564 5f73 6869  ayload["need_shi
+000102d0: 7070 696e 675f 6164 6472 6573 7322 5d20  pping_address"] 
+000102e0: 3d20 6e65 6564 5f73 6869 7070 696e 675f  = need_shipping_
+000102f0: 6164 6472 6573 730a 2020 2020 6966 2073  address.    if s
+00010300: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
+00010310: 5f74 6f5f 7072 6f76 6964 6572 2069 7320  _to_provider is 
+00010320: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00010330: 2020 7061 796c 6f61 645b 2273 656e 645f    payload["send_
+00010340: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
+00010350: 7072 6f76 6964 6572 225d 203d 2073 656e  provider"] = sen
+00010360: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
+00010370: 6f5f 7072 6f76 6964 6572 0a20 2020 2069  o_provider.    i
+00010380: 6620 7365 6e64 5f65 6d61 696c 5f74 6f5f  f send_email_to_
+00010390: 7072 6f76 6964 6572 2069 7320 6e6f 7420  provider is not 
+000103a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+000103b0: 796c 6f61 645b 2273 656e 645f 656d 6169  yload["send_emai
+000103c0: 6c5f 746f 5f70 726f 7669 6465 7222 5d20  l_to_provider"] 
+000103d0: 3d20 7365 6e64 5f65 6d61 696c 5f74 6f5f  = send_email_to_
+000103e0: 7072 6f76 6964 6572 0a20 2020 2069 6620  provider.    if 
+000103f0: 6973 5f66 6c65 7869 626c 6520 6973 206e  is_flexible is n
+00010400: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00010410: 2070 6179 6c6f 6164 5b22 6973 5f66 6c65   payload["is_fle
+00010420: 7869 626c 6522 5d20 3d20 6973 5f66 6c65  xible"] = is_fle
+00010430: 7869 626c 650a 2020 2020 6966 2064 6973  xible.    if dis
+00010440: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00010450: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
+00010460: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00010470: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00010480: 7469 6f6e 225d 203d 2064 6973 6162 6c65  tion"] = disable
+00010490: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
+000104a0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+000104b0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
+000104c0: 6164 5b22 7265 706c 795f 6d61 726b 7570  ad["reply_markup
+000104d0: 225d 203d 205f 636f 6e76 6572 745f 6d61  "] = _convert_ma
+000104e0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
+000104f0: 7029 0a20 2020 2069 6620 7072 6f76 6964  p).    if provid
+00010500: 6572 5f64 6174 613a 0a20 2020 2020 2020  er_data:.       
+00010510: 2070 6179 6c6f 6164 5b22 7072 6f76 6964   payload["provid
+00010520: 6572 5f64 6174 6122 5d20 3d20 7072 6f76  er_data"] = prov
+00010530: 6964 6572 5f64 6174 610a 2020 2020 6966  ider_data.    if
+00010540: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00010550: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
+00010560: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
+00010570: 2020 2069 6620 6d61 785f 7469 705f 616d     if max_tip_am
+00010580: 6f75 6e74 2069 7320 6e6f 7420 4e6f 6e65  ount is not None
+00010590: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000105a0: 645b 226d 6178 5f74 6970 5f61 6d6f 756e  d["max_tip_amoun
+000105b0: 7422 5d20 3d20 6d61 785f 7469 705f 616d  t"] = max_tip_am
+000105c0: 6f75 6e74 0a20 2020 2069 6620 7375 6767  ount.    if sugg
+000105d0: 6573 7465 645f 7469 705f 616d 6f75 6e74  ested_tip_amount
+000105e0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+000105f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00010600: 7375 6767 6573 7465 645f 7469 705f 616d  suggested_tip_am
+00010610: 6f75 6e74 7322 5d20 3d20 6a73 6f6e 2e64  ounts"] = json.d
+00010620: 756d 7073 2873 7567 6765 7374 6564 5f74  umps(suggested_t
+00010630: 6970 5f61 6d6f 756e 7473 290a 2020 2020  ip_amounts).    
+00010640: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
+00010650: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
+00010660: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00010670: 2270 726f 7465 6374 5f63 6f6e 7465 6e74  "protect_content
+00010680: 225d 203d 2070 726f 7465 6374 5f63 6f6e  "] = protect_con
+00010690: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
+000106a0: 6167 655f 7468 7265 6164 5f69 643a 0a20  age_thread_id:. 
+000106b0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000106c0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+000106d0: 6422 5d20 3d20 6d65 7373 6167 655f 7468  d"] = message_th
+000106e0: 7265 6164 5f69 640a 2020 2020 6966 2072  read_id.    if r
+000106f0: 6570 6c79 5f70 6172 616d 6574 6572 7320  eply_parameters 
+00010700: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00010710: 2020 2020 2070 6179 6c6f 6164 5b22 7265       payload["re
+00010720: 706c 795f 7061 7261 6d65 7465 7273 225d  ply_parameters"]
+00010730: 203d 2072 6570 6c79 5f70 6172 616d 6574   = reply_paramet
+00010740: 6572 732e 746f 5f6a 736f 6e28 290a 2020  ers.to_json().  
+00010750: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00010760: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00010770: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00010780: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
+00010790: 616e 7377 6572 5f73 6869 7070 696e 675f  answer_shipping_
+000107a0: 7175 6572 7928 0a20 2020 2074 6f6b 656e  query(.    token
+000107b0: 2c20 7368 6970 7069 6e67 5f71 7565 7279  , shipping_query
+000107c0: 5f69 642c 206f 6b2c 2073 6869 7070 696e  _id, ok, shippin
+000107d0: 675f 6f70 7469 6f6e 733d 4e6f 6e65 2c20  g_options=None, 
+000107e0: 6572 726f 725f 6d65 7373 6167 653d 4e6f  error_message=No
+000107f0: 6e65 0a29 3a0a 2020 2020 2222 220a 2020  ne.):.    """.  
+00010800: 2020 4966 2079 6f75 2073 656e 7420 616e    If you sent an
+00010810: 2069 6e76 6f69 6365 2072 6571 7565 7374   invoice request
+00010820: 696e 6720 6120 7368 6970 7069 6e67 2061  ing a shipping a
+00010830: 6464 7265 7373 2061 6e64 2074 6865 2070  ddress and the p
+00010840: 6172 616d 6574 6572 2069 735f 666c 6578  arameter is_flex
+00010850: 6962 6c65 2077 6173 2073 7065 6369 6669  ible was specifi
+00010860: 6564 2c20 7468 6520 426f 7420 4150 4920  ed, the Bot API 
+00010870: 7769 6c6c 2073 656e 6420 616e 2055 7064  will send an Upd
+00010880: 6174 6520 7769 7468 2061 2073 6869 7070  ate with a shipp
+00010890: 696e 675f 7175 6572 7920 6669 656c 6420  ing_query field 
+000108a0: 746f 2074 6865 2062 6f74 2e20 5573 6520  to the bot. Use 
+000108b0: 7468 6973 206d 6574 686f 6420 746f 2072  this method to r
+000108c0: 6570 6c79 2074 6f20 7368 6970 7069 6e67  eply to shipping
+000108d0: 2071 7565 7269 6573 2e20 4f6e 2073 7563   queries. On suc
+000108e0: 6365 7373 2c20 5472 7565 2069 7320 7265  cess, True is re
+000108f0: 7475 726e 6564 2e0a 2020 2020 3a70 6172  turned..    :par
+00010900: 616d 2074 6f6b 656e 3a20 426f 7427 7320  am token: Bot's 
+00010910: 746f 6b65 6e20 2879 6f75 2064 6f6e 2774  token (you don't
+00010920: 206e 6565 6420 746f 2066 696c 6c20 7468   need to fill th
+00010930: 6973 290a 2020 2020 3a70 6172 616d 2073  is).    :param s
+00010940: 6869 7070 696e 675f 7175 6572 795f 6964  hipping_query_id
+00010950: 3a20 556e 6971 7565 2069 6465 6e74 6966  : Unique identif
+00010960: 6965 7220 666f 7220 7468 6520 7175 6572  ier for the quer
+00010970: 7920 746f 2062 6520 616e 7377 6572 6564  y to be answered
+00010980: 0a20 2020 203a 7061 7261 6d20 6f6b 3a20  .    :param ok: 
+00010990: 5370 6563 6966 7920 5472 7565 2069 6620  Specify True if 
+000109a0: 6465 6c69 7665 7279 2074 6f20 7468 6520  delivery to the 
+000109b0: 7370 6563 6966 6965 6420 6164 6472 6573  specified addres
+000109c0: 7320 6973 2070 6f73 7369 626c 6520 616e  s is possible an
+000109d0: 6420 4661 6c73 6520 6966 2074 6865 7265  d False if there
+000109e0: 2061 7265 2061 6e79 2070 726f 626c 656d   are any problem
+000109f0: 7320 2866 6f72 2065 7861 6d70 6c65 2c20  s (for example, 
+00010a00: 6966 2064 656c 6976 6572 7920 746f 2074  if delivery to t
+00010a10: 6865 2073 7065 6369 6669 6564 2061 6464  he specified add
+00010a20: 7265 7373 2069 7320 6e6f 7420 706f 7373  ress is not poss
+00010a30: 6962 6c65 290a 2020 2020 3a70 6172 616d  ible).    :param
+00010a40: 2073 6869 7070 696e 675f 6f70 7469 6f6e   shipping_option
+00010a50: 733a 2052 6571 7569 7265 6420 6966 206f  s: Required if o
+00010a60: 6b20 6973 2054 7275 652e 2041 204a 534f  k is True. A JSO
+00010a70: 4e2d 7365 7269 616c 697a 6564 2061 7272  N-serialized arr
+00010a80: 6179 206f 6620 6176 6169 6c61 626c 6520  ay of available 
+00010a90: 7368 6970 7069 6e67 206f 7074 696f 6e73  shipping options
+00010aa0: 2e0a 2020 2020 3a70 6172 616d 2065 7272  ..    :param err
+00010ab0: 6f72 5f6d 6573 7361 6765 3a20 5265 7175  or_message: Requ
+00010ac0: 6972 6564 2069 6620 6f6b 2069 7320 4661  ired if ok is Fa
+00010ad0: 6c73 652e 2045 7272 6f72 206d 6573 7361  lse. Error messa
+00010ae0: 6765 2069 6e20 6875 6d61 6e20 7265 6164  ge in human read
+00010af0: 6162 6c65 2066 6f72 6d20 7468 6174 2065  able form that e
+00010b00: 7870 6c61 696e 7320 7768 7920 6974 2069  xplains why it i
+00010b10: 7320 696d 706f 7373 6962 6c65 2074 6f20  s impossible to 
+00010b20: 636f 6d70 6c65 7465 2074 6865 206f 7264  complete the ord
+00010b30: 6572 2028 652e 672e 2022 536f 7272 792c  er (e.g. "Sorry,
+00010b40: 2064 656c 6976 6572 7920 746f 2079 6f75   delivery to you
+00010b50: 7220 6465 7369 7265 6420 6164 6472 6573  r desired addres
+00010b60: 7320 6973 2075 6e61 7661 696c 6162 6c65  s is unavailable
+00010b70: 2729 2e20 5465 6c65 6772 616d 2077 696c  '). Telegram wil
+00010b80: 6c20 6469 7370 6c61 7920 7468 6973 206d  l display this m
+00010b90: 6573 7361 6765 2074 6f20 7468 6520 7573  essage to the us
+00010ba0: 6572 2e0a 2020 2020 3a72 6574 7572 6e3a  er..    :return:
+00010bb0: 0a20 2020 2022 2222 0a20 2020 206d 6574  .    """.    met
+00010bc0: 686f 645f 7572 6c20 3d20 2261 6e73 7765  hod_url = "answe
+00010bd0: 7253 6869 7070 696e 6751 7565 7279 220a  rShippingQuery".
+00010be0: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00010bf0: 7368 6970 7069 6e67 5f71 7565 7279 5f69  shipping_query_i
+00010c00: 6422 3a20 7368 6970 7069 6e67 5f71 7565  d": shipping_que
+00010c10: 7279 5f69 642c 2022 6f6b 223a 206f 6b7d  ry_id, "ok": ok}
+00010c20: 0a20 2020 2069 6620 7368 6970 7069 6e67  .    if shipping
+00010c30: 5f6f 7074 696f 6e73 3a0a 2020 2020 2020  _options:.      
+00010c40: 2020 7061 796c 6f61 645b 2273 6869 7070    payload["shipp
+00010c50: 696e 675f 6f70 7469 6f6e 7322 5d20 3d20  ing_options"] = 
+00010c60: 5f63 6f6e 7665 7274 5f6c 6973 745f 6a73  _convert_list_js
+00010c70: 6f6e 5f73 6572 6961 6c69 7a61 626c 6528  on_serializable(
+00010c80: 7368 6970 7069 6e67 5f6f 7074 696f 6e73  shipping_options
+00010c90: 290a 2020 2020 6966 2065 7272 6f72 5f6d  ).    if error_m
+00010ca0: 6573 7361 6765 3a0a 2020 2020 2020 2020  essage:.        
+00010cb0: 7061 796c 6f61 645b 2265 7272 6f72 5f6d  payload["error_m
+00010cc0: 6573 7361 6765 225d 203d 2065 7272 6f72  essage"] = error
+00010cd0: 5f6d 6573 7361 6765 0a20 2020 2072 6574  _message.    ret
+00010ce0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00010cf0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00010d00: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00010d10: 6f61 6429 0a0a 0a64 6566 2061 6e73 7765  oad)...def answe
+00010d20: 725f 7072 655f 6368 6563 6b6f 7574 5f71  r_pre_checkout_q
+00010d30: 7565 7279 2874 6f6b 656e 2c20 7072 655f  uery(token, pre_
+00010d40: 6368 6563 6b6f 7574 5f71 7565 7279 5f69  checkout_query_i
+00010d50: 642c 206f 6b2c 2065 7272 6f72 5f6d 6573  d, ok, error_mes
+00010d60: 7361 6765 3d4e 6f6e 6529 3a0a 2020 2020  sage=None):.    
+00010d70: 2222 220a 2020 2020 4f6e 6365 2074 6865  """.    Once the
+00010d80: 2075 7365 7220 6861 7320 636f 6e66 6972   user has confir
+00010d90: 6d65 6420 7468 6569 7220 7061 796d 656e  med their paymen
+00010da0: 7420 616e 6420 7368 6970 7069 6e67 2064  t and shipping d
+00010db0: 6574 6169 6c73 2c20 7468 6520 426f 7420  etails, the Bot 
+00010dc0: 4150 4920 7365 6e64 7320 7468 6520 6669  API sends the fi
+00010dd0: 6e61 6c20 636f 6e66 6972 6d61 7469 6f6e  nal confirmation
+00010de0: 2069 6e20 7468 6520 666f 726d 206f 6620   in the form of 
+00010df0: 616e 2055 7064 6174 6520 7769 7468 2074  an Update with t
+00010e00: 6865 2066 6965 6c64 2070 7265 5f63 6865  he field pre_che
+00010e10: 636b 6f75 745f 7175 6572 792e 2055 7365  ckout_query. Use
+00010e20: 2074 6869 7320 6d65 7468 6f64 2074 6f20   this method to 
+00010e30: 7265 7370 6f6e 6420 746f 2073 7563 6820  respond to such 
+00010e40: 7072 652d 6368 6563 6b6f 7574 2071 7565  pre-checkout que
+00010e50: 7269 6573 2e20 4f6e 2073 7563 6365 7373  ries. On success
+00010e60: 2c20 5472 7565 2069 7320 7265 7475 726e  , True is return
+00010e70: 6564 2e20 4e6f 7465 3a20 5468 6520 426f  ed. Note: The Bo
+00010e80: 7420 4150 4920 6d75 7374 2072 6563 6569  t API must recei
+00010e90: 7665 2061 6e20 616e 7377 6572 2077 6974  ve an answer wit
+00010ea0: 6869 6e20 3130 2073 6563 6f6e 6473 2061  hin 10 seconds a
+00010eb0: 6674 6572 2074 6865 2070 7265 2d63 6865  fter the pre-che
+00010ec0: 636b 6f75 7420 7175 6572 7920 7761 7320  ckout query was 
+00010ed0: 7365 6e74 2e0a 2020 2020 3a70 6172 616d  sent..    :param
+00010ee0: 2074 6f6b 656e 3a20 426f 7427 7320 746f   token: Bot's to
+00010ef0: 6b65 6e20 2879 6f75 2064 6f6e 2774 206e  ken (you don't n
+00010f00: 6565 6420 746f 2066 696c 6c20 7468 6973  eed to fill this
+00010f10: 290a 2020 2020 3a70 6172 616d 2070 7265  ).    :param pre
+00010f20: 5f63 6865 636b 6f75 745f 7175 6572 795f  _checkout_query_
+00010f30: 6964 3a20 556e 6971 7565 2069 6465 6e74  id: Unique ident
+00010f40: 6966 6965 7220 666f 7220 7468 6520 7175  ifier for the qu
+00010f50: 6572 7920 746f 2062 6520 616e 7377 6572  ery to be answer
+00010f60: 6564 0a20 2020 203a 7061 7261 6d20 6f6b  ed.    :param ok
+00010f70: 3a20 5370 6563 6966 7920 5472 7565 2069  : Specify True i
+00010f80: 6620 6576 6572 7974 6869 6e67 2069 7320  f everything is 
+00010f90: 616c 7269 6768 7420 2867 6f6f 6473 2061  alright (goods a
+00010fa0: 7265 2061 7661 696c 6162 6c65 2c20 6574  re available, et
+00010fb0: 632e 2920 616e 6420 7468 6520 626f 7420  c.) and the bot 
+00010fc0: 6973 2072 6561 6479 2074 6f20 7072 6f63  is ready to proc
+00010fd0: 6565 6420 7769 7468 2074 6865 206f 7264  eed with the ord
+00010fe0: 6572 2e20 5573 6520 4661 6c73 6520 6966  er. Use False if
+00010ff0: 2074 6865 7265 2061 7265 2061 6e79 2070   there are any p
+00011000: 726f 626c 656d 732e 0a20 2020 203a 7061  roblems..    :pa
+00011010: 7261 6d20 6572 726f 725f 6d65 7373 6167  ram error_messag
+00011020: 653a 2052 6571 7569 7265 6420 6966 206f  e: Required if o
+00011030: 6b20 6973 2046 616c 7365 2e20 4572 726f  k is False. Erro
+00011040: 7220 6d65 7373 6167 6520 696e 2068 756d  r message in hum
+00011050: 616e 2072 6561 6461 626c 6520 666f 726d  an readable form
+00011060: 2074 6861 7420 6578 706c 6169 6e73 2074   that explains t
+00011070: 6865 2072 6561 736f 6e20 666f 7220 6661  he reason for fa
+00011080: 696c 7572 6520 746f 2070 726f 6365 6564  ilure to proceed
+00011090: 2077 6974 6820 7468 6520 6368 6563 6b6f   with the checko
+000110a0: 7574 2028 652e 672e 2022 536f 7272 792c  ut (e.g. "Sorry,
+000110b0: 2073 6f6d 6562 6f64 7920 6a75 7374 2062   somebody just b
+000110c0: 6f75 6768 7420 7468 6520 6c61 7374 206f  ought the last o
+000110d0: 6620 6f75 7220 616d 617a 696e 6720 626c  f our amazing bl
+000110e0: 6163 6b20 542d 7368 6972 7473 2077 6869  ack T-shirts whi
+000110f0: 6c65 2079 6f75 2077 6572 6520 6275 7379  le you were busy
+00011100: 2066 696c 6c69 6e67 206f 7574 2079 6f75   filling out you
+00011110: 7220 7061 796d 656e 7420 6465 7461 696c  r payment detail
+00011120: 732e 2050 6c65 6173 6520 6368 6f6f 7365  s. Please choose
+00011130: 2061 2064 6966 6665 7265 6e74 2063 6f6c   a different col
+00011140: 6f72 206f 7220 6761 726d 656e 7421 2229  or or garment!")
+00011150: 2e20 5465 6c65 6772 616d 2077 696c 6c20  . Telegram will 
+00011160: 6469 7370 6c61 7920 7468 6973 206d 6573  display this mes
+00011170: 7361 6765 2074 6f20 7468 6520 7573 6572  sage to the user
+00011180: 2e0a 2020 2020 3a72 6574 7572 6e3a 0a20  ..    :return:. 
+00011190: 2020 2022 2222 0a20 2020 206d 6574 686f     """.    metho
+000111a0: 645f 7572 6c20 3d20 2261 6e73 7765 7250  d_url = "answerP
+000111b0: 7265 4368 6563 6b6f 7574 5175 6572 7922  reCheckoutQuery"
+000111c0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000111d0: 2270 7265 5f63 6865 636b 6f75 745f 7175  "pre_checkout_qu
+000111e0: 6572 795f 6964 223a 2070 7265 5f63 6865  ery_id": pre_che
+000111f0: 636b 6f75 745f 7175 6572 795f 6964 2c20  ckout_query_id, 
+00011200: 226f 6b22 3a20 6f6b 7d0a 2020 2020 6966  "ok": ok}.    if
+00011210: 2065 7272 6f72 5f6d 6573 7361 6765 3a0a   error_message:.
+00011220: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00011230: 2265 7272 6f72 5f6d 6573 7361 6765 225d  "error_message"]
+00011240: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
+00011250: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00011260: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00011270: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00011280: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
+00011290: 6566 2075 6e70 696e 5f61 6c6c 5f67 656e  ef unpin_all_gen
+000112a0: 6572 616c 5f66 6f72 756d 5f74 6f70 6963  eral_forum_topic
+000112b0: 5f6d 6573 7361 6765 7328 746f 6b65 6e2c  _messages(token,
+000112c0: 2063 6861 745f 6964 293a 0a20 2020 206d   chat_id):.    m
+000112d0: 6574 686f 645f 7572 6c20 3d20 2275 6e70  ethod_url = "unp
+000112e0: 696e 416c 6c47 656e 6572 616c 466f 7275  inAllGeneralForu
+000112f0: 6d54 6f70 6963 4d65 7373 6167 6573 220a  mTopicMessages".
+00011300: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00011310: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+00011320: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
+00011330: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00011340: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00011350: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+00011360: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
+00011370: 2320 496e 6c69 6e65 5175 6572 790a 0a0a  # InlineQuery...
+00011380: 6465 6620 616e 7377 6572 5f63 616c 6c62  def answer_callb
+00011390: 6163 6b5f 7175 6572 7928 0a20 2020 2074  ack_query(.    t
+000113a0: 6f6b 656e 2c20 6361 6c6c 6261 636b 5f71  oken, callback_q
+000113b0: 7565 7279 5f69 642c 2074 6578 743d 4e6f  uery_id, text=No
+000113c0: 6e65 2c20 7368 6f77 5f61 6c65 7274 3d4e  ne, show_alert=N
+000113d0: 6f6e 652c 2075 726c 3d4e 6f6e 652c 2063  one, url=None, c
+000113e0: 6163 6865 5f74 696d 653d 4e6f 6e65 0a29  ache_time=None.)
+000113f0: 3a0a 2020 2020 2222 220a 2020 2020 5573  :.    """.    Us
+00011400: 6520 7468 6973 206d 6574 686f 6420 746f  e this method to
+00011410: 2073 656e 6420 616e 7377 6572 7320 746f   send answers to
+00011420: 2063 616c 6c62 6163 6b20 7175 6572 6965   callback querie
+00011430: 7320 7365 6e74 2066 726f 6d20 696e 6c69  s sent from inli
+00011440: 6e65 206b 6579 626f 6172 6473 2e20 5468  ne keyboards. Th
+00011450: 6520 616e 7377 6572 2077 696c 6c20 6265  e answer will be
+00011460: 2064 6973 706c 6179 6564 2074 6f20 7468   displayed to th
+00011470: 6520 7573 6572 2061 7320 6120 6e6f 7469  e user as a noti
+00011480: 6669 6361 7469 6f6e 2061 7420 7468 6520  fication at the 
+00011490: 746f 7020 6f66 2074 6865 2063 6861 7420  top of the chat 
+000114a0: 7363 7265 656e 206f 7220 6173 2061 6e20  screen or as an 
+000114b0: 616c 6572 742e 204f 6e20 7375 6363 6573  alert. On succes
+000114c0: 732c 2054 7275 6520 6973 2072 6574 7572  s, True is retur
+000114d0: 6e65 642e 0a20 2020 2041 6c74 6572 6e61  ned..    Alterna
+000114e0: 7469 7665 6c79 2c20 7468 6520 7573 6572  tively, the user
+000114f0: 2063 616e 2062 6520 7265 6469 7265 6374   can be redirect
+00011500: 6564 2074 6f20 7468 6520 7370 6563 6966  ed to the specif
+00011510: 6965 6420 4761 6d65 2055 524c 2e20 466f  ied Game URL. Fo
+00011520: 7220 7468 6973 206f 7074 696f 6e20 746f  r this option to
+00011530: 2077 6f72 6b2c 2079 6f75 206d 7573 7420   work, you must 
+00011540: 6669 7273 7420 6372 6561 7465 2061 2067  first create a g
+00011550: 616d 6520 666f 7220 796f 7572 2062 6f74  ame for your bot
+00011560: 2076 6961 2042 6f74 4661 7468 6572 2061   via BotFather a
+00011570: 6e64 2061 6363 6570 7420 7468 6520 7465  nd accept the te
+00011580: 726d 732e 204f 7468 6572 7769 7365 2c20  rms. Otherwise, 
+00011590: 796f 7520 6d61 7920 7573 6520 6c69 6e6b  you may use link
+000115a0: 7320 6c69 6b65 2074 656c 6567 7261 6d2e  s like telegram.
+000115b0: 6d65 2f79 6f75 725f 626f 743f 7374 6172  me/your_bot?star
+000115c0: 743d 5858 5858 2074 6861 7420 6f70 656e  t=XXXX that open
+000115d0: 2079 6f75 7220 626f 7420 7769 7468 2061   your bot with a
+000115e0: 2070 6172 616d 6574 6572 2e0a 2020 2020   parameter..    
+000115f0: 3a70 6172 616d 2074 6f6b 656e 3a20 426f  :param token: Bo
+00011600: 7427 7320 746f 6b65 6e20 2879 6f75 2064  t's token (you d
+00011610: 6f6e 2774 206e 6565 6420 746f 2066 696c  on't need to fil
+00011620: 6c20 7468 6973 290a 2020 2020 3a70 6172  l this).    :par
+00011630: 616d 2063 616c 6c62 6163 6b5f 7175 6572  am callback_quer
+00011640: 795f 6964 3a20 556e 6971 7565 2069 6465  y_id: Unique ide
+00011650: 6e74 6966 6965 7220 666f 7220 7468 6520  ntifier for the 
+00011660: 7175 6572 7920 746f 2062 6520 616e 7377  query to be answ
+00011670: 6572 6564 0a20 2020 203a 7061 7261 6d20  ered.    :param 
+00011680: 7465 7874 3a20 284f 7074 696f 6e61 6c29  text: (Optional)
+00011690: 2054 6578 7420 6f66 2074 6865 206e 6f74   Text of the not
+000116a0: 6966 6963 6174 696f 6e2e 2049 6620 6e6f  ification. If no
+000116b0: 7420 7370 6563 6966 6965 642c 206e 6f74  t specified, not
+000116c0: 6869 6e67 2077 696c 6c20 6265 2073 686f  hing will be sho
+000116d0: 776e 2074 6f20 7468 6520 7573 6572 2c20  wn to the user, 
+000116e0: 302d 3230 3020 6368 6172 6163 7465 7273  0-200 characters
+000116f0: 0a20 2020 203a 7061 7261 6d20 7368 6f77  .    :param show
+00011700: 5f61 6c65 7274 3a20 284f 7074 696f 6e61  _alert: (Optiona
+00011710: 6c29 2049 6620 7472 7565 2c20 616e 2061  l) If true, an a
+00011720: 6c65 7274 2077 696c 6c20 6265 2073 686f  lert will be sho
+00011730: 776e 2062 7920 7468 6520 636c 6965 6e74  wn by the client
+00011740: 2069 6e73 7465 6164 206f 6620 6120 6e6f   instead of a no
+00011750: 7469 6669 6361 7469 6f6e 2061 7420 7468  tification at th
+00011760: 6520 746f 7020 6f66 2074 6865 2063 6861  e top of the cha
+00011770: 7420 7363 7265 656e 2e20 4465 6661 756c  t screen. Defaul
+00011780: 7473 2074 6f20 6661 6c73 652e 0a20 2020  ts to false..   
+00011790: 203a 7061 7261 6d20 7572 6c3a 2028 4f70   :param url: (Op
+000117a0: 7469 6f6e 616c 2920 5552 4c20 7468 6174  tional) URL that
+000117b0: 2077 696c 6c20 6265 206f 7065 6e65 6420   will be opened 
+000117c0: 6279 2074 6865 2075 7365 7227 7320 636c  by the user's cl
+000117d0: 6965 6e74 2e20 4966 2079 6f75 2068 6176  ient. If you hav
+000117e0: 6520 6372 6561 7465 6420 6120 4761 6d65  e created a Game
+000117f0: 2061 6e64 2061 6363 6570 7465 6420 7468   and accepted th
+00011800: 6520 636f 6e64 6974 696f 6e73 2076 6961  e conditions via
+00011810: 2040 426f 7466 6174 6865 722c 2073 7065   @Botfather, spe
+00011820: 6369 6679 2074 6865 2055 524c 2074 6861  cify the URL tha
+00011830: 7420 6f70 656e 7320 796f 7572 2067 616d  t opens your gam
+00011840: 6520 e280 9320 6e6f 7465 2074 6861 7420  e ... note that 
+00011850: 7468 6973 2077 696c 6c20 6f6e 6c79 2077  this will only w
+00011860: 6f72 6b20 6966 2074 6865 2071 7565 7279  ork if the query
+00011870: 2063 6f6d 6573 2066 726f 6d20 6120 6361   comes from a ca
+00011880: 6c6c 6261 636b 5f67 616d 6520 6275 7474  llback_game butt
+00011890: 6f6e 2e0a 2020 2020 4f74 6865 7277 6973  on..    Otherwis
+000118a0: 652c 2079 6f75 206d 6179 2075 7365 206c  e, you may use l
+000118b0: 696e 6b73 206c 696b 6520 7465 6c65 6772  inks like telegr
+000118c0: 616d 2e6d 652f 796f 7572 5f62 6f74 3f73  am.me/your_bot?s
+000118d0: 7461 7274 3d58 5858 5820 7468 6174 206f  tart=XXXX that o
+000118e0: 7065 6e20 796f 7572 2062 6f74 2077 6974  pen your bot wit
+000118f0: 6820 6120 7061 7261 6d65 7465 722e 0a20  h a parameter.. 
+00011900: 2020 203a 7061 7261 6d20 6361 6368 655f     :param cache_
+00011910: 7469 6d65 3a20 284f 7074 696f 6e61 6c29  time: (Optional)
+00011920: 2054 6865 206d 6178 696d 756d 2061 6d6f   The maximum amo
+00011930: 756e 7420 6f66 2074 696d 6520 696e 2073  unt of time in s
+00011940: 6563 6f6e 6473 2074 6861 7420 7468 6520  econds that the 
+00011950: 7265 7375 6c74 206f 6620 7468 6520 6361  result of the ca
+00011960: 6c6c 6261 636b 2071 7565 7279 206d 6179  llback query may
+00011970: 2062 6520 6361 6368 6564 2063 6c69 656e   be cached clien
+00011980: 742d 7369 6465 2e20 5465 6c65 6772 616d  t-side. Telegram
+00011990: 2061 7070 7320 7769 6c6c 2073 7570 706f   apps will suppo
+000119a0: 7274 2063 6163 6869 6e67 2073 7461 7274  rt caching start
+000119b0: 696e 6720 696e 2076 6572 7369 6f6e 2033  ing in version 3
+000119c0: 2e31 342e 2044 6566 6175 6c74 7320 746f  .14. Defaults to
+000119d0: 2030 2e0a 2020 2020 3a72 6574 7572 6e3a   0..    :return:
+000119e0: 0a20 2020 2022 2222 0a20 2020 206d 6574  .    """.    met
+000119f0: 686f 645f 7572 6c20 3d20 2261 6e73 7765  hod_url = "answe
+00011a00: 7243 616c 6c62 6163 6b51 7565 7279 220a  rCallbackQuery".
+00011a10: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00011a20: 6361 6c6c 6261 636b 5f71 7565 7279 5f69  callback_query_i
+00011a30: 6422 3a20 6361 6c6c 6261 636b 5f71 7565  d": callback_que
+00011a40: 7279 5f69 647d 0a20 2020 2069 6620 7465  ry_id}.    if te
+00011a50: 7874 3a0a 2020 2020 2020 2020 7061 796c  xt:.        payl
+00011a60: 6f61 645b 2274 6578 7422 5d20 3d20 7465  oad["text"] = te
+00011a70: 7874 0a20 2020 2069 6620 7368 6f77 5f61  xt.    if show_a
+00011a80: 6c65 7274 2069 7320 6e6f 7420 4e6f 6e65  lert is not None
+00011a90: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00011aa0: 645b 2273 686f 775f 616c 6572 7422 5d20  d["show_alert"] 
+00011ab0: 3d20 7368 6f77 5f61 6c65 7274 0a20 2020  = show_alert.   
+00011ac0: 2069 6620 7572 6c3a 0a20 2020 2020 2020   if url:.       
+00011ad0: 2070 6179 6c6f 6164 5b22 7572 6c22 5d20   payload["url"] 
+00011ae0: 3d20 7572 6c0a 2020 2020 6966 2063 6163  = url.    if cac
+00011af0: 6865 5f74 696d 6520 6973 206e 6f74 204e  he_time is not N
+00011b00: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00011b10: 6c6f 6164 5b22 6361 6368 655f 7469 6d65  load["cache_time
+00011b20: 225d 203d 2063 6163 6865 5f74 696d 650a  "] = cache_time.
+00011b30: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00011b40: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00011b50: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00011b60: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+00011b70: 6f64 3d22 706f 7374 2229 0a0a 0a64 6566  od="post")...def
+00011b80: 2067 6574 5f75 7365 725f 6368 6174 5f62   get_user_chat_b
+00011b90: 6f6f 7374 7328 746f 6b65 6e2c 2063 6861  oosts(token, cha
+00011ba0: 745f 6964 2c20 7573 6572 5f69 6429 3a0a  t_id, user_id):.
+00011bb0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00011bc0: 2022 6765 7455 7365 7243 6861 7442 6f6f   "getUserChatBoo
+00011bd0: 7374 7322 0a20 2020 2070 6179 6c6f 6164  sts".    payload
+00011be0: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
+00011bf0: 6861 745f 6964 2c20 2275 7365 725f 6964  hat_id, "user_id
+00011c00: 223a 2075 7365 725f 6964 7d0a 2020 2020  ": user_id}.    
+00011c10: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00011c20: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00011c30: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00011c40: 6179 6c6f 6164 290a 0a0a 6465 6620 616e  ayload)...def an
+00011c50: 7377 6572 5f69 6e6c 696e 655f 7175 6572  swer_inline_quer
+00011c60: 7928 0a20 2020 2074 6f6b 656e 2c0a 2020  y(.    token,.  
+00011c70: 2020 696e 6c69 6e65 5f71 7565 7279 5f69    inline_query_i
+00011c80: 642c 0a20 2020 2072 6573 756c 7473 2c0a  d,.    results,.
+00011c90: 2020 2020 6361 6368 655f 7469 6d65 3d4e      cache_time=N
+00011ca0: 6f6e 652c 0a20 2020 2069 735f 7065 7273  one,.    is_pers
+00011cb0: 6f6e 616c 3d4e 6f6e 652c 0a20 2020 206e  onal=None,.    n
+00011cc0: 6578 745f 6f66 6673 6574 3d4e 6f6e 652c  ext_offset=None,
+00011cd0: 0a20 2020 2062 7574 746f 6e3d 4e6f 6e65  .    button=None
+00011ce0: 2c0a 293a 0a20 2020 206d 6574 686f 645f  ,.):.    method_
+00011cf0: 7572 6c20 3d20 2261 6e73 7765 7249 6e6c  url = "answerInl
+00011d00: 696e 6551 7565 7279 220a 2020 2020 7061  ineQuery".    pa
+00011d10: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
+00011d20: 2020 2269 6e6c 696e 655f 7175 6572 795f    "inline_query_
+00011d30: 6964 223a 2069 6e6c 696e 655f 7175 6572  id": inline_quer
+00011d40: 795f 6964 2c0a 2020 2020 2020 2020 2272  y_id,.        "r
+00011d50: 6573 756c 7473 223a 205f 636f 6e76 6572  esults": _conver
+00011d60: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
+00011d70: 616c 697a 6162 6c65 2872 6573 756c 7473  alizable(results
+00011d80: 292c 0a20 2020 207d 0a20 2020 2069 6620  ),.    }.    if 
+00011d90: 6361 6368 655f 7469 6d65 2069 7320 6e6f  cache_time is no
+00011da0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00011db0: 7061 796c 6f61 645b 2263 6163 6865 5f74  payload["cache_t
+00011dc0: 696d 6522 5d20 3d20 6361 6368 655f 7469  ime"] = cache_ti
+00011dd0: 6d65 0a20 2020 2069 6620 6973 5f70 6572  me.    if is_per
+00011de0: 736f 6e61 6c20 6973 206e 6f74 204e 6f6e  sonal is not Non
+00011df0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00011e00: 6164 5b22 6973 5f70 6572 736f 6e61 6c22  ad["is_personal"
+00011e10: 5d20 3d20 6973 5f70 6572 736f 6e61 6c0a  ] = is_personal.
+00011e20: 2020 2020 6966 206e 6578 745f 6f66 6673      if next_offs
+00011e30: 6574 2069 7320 6e6f 7420 4e6f 6e65 3a0a  et is not None:.
+00011e40: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00011e50: 226e 6578 745f 6f66 6673 6574 225d 203d  "next_offset"] =
+00011e60: 206e 6578 745f 6f66 6673 6574 0a20 2020   next_offset.   
+00011e70: 2069 6620 6275 7474 6f6e 2069 7320 6e6f   if button is no
+00011e80: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00011e90: 7061 796c 6f61 645b 2262 7574 746f 6e22  payload["button"
+00011ea0: 5d20 3d20 6275 7474 6f6e 2e74 6f5f 6a73  ] = button.to_js
+00011eb0: 6f6e 2829 0a20 2020 2072 6574 7572 6e20  on().    return 
+00011ec0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00011ed0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00011ee0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00011ef0: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+00011f00: 0a0a 6465 6620 6765 745f 7374 6963 6b65  ..def get_sticke
+00011f10: 725f 7365 7428 746f 6b65 6e2c 206e 616d  r_set(token, nam
+00011f20: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+00011f30: 726c 203d 2022 6765 7453 7469 636b 6572  rl = "getSticker
+00011f40: 5365 7422 0a20 2020 2072 6574 7572 6e20  Set".    return 
+00011f50: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00011f60: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00011f70: 2070 6172 616d 733d 7b22 6e61 6d65 223a   params={"name":
+00011f80: 206e 616d 657d 290a 0a0a 6465 6620 6765   name})...def ge
+00011f90: 745f 6375 7374 6f6d 5f65 6d6f 6a69 5f73  t_custom_emoji_s
+00011fa0: 7469 636b 6572 7328 746f 6b65 6e2c 2063  tickers(token, c
+00011fb0: 7573 746f 6d5f 656d 6f6a 695f 6964 7329  ustom_emoji_ids)
+00011fc0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00011fd0: 203d 2072 2267 6574 4375 7374 6f6d 456d   = r"getCustomEm
+00011fe0: 6f6a 6953 7469 636b 6572 7322 0a20 2020  ojiStickers".   
+00011ff0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00012000: 7175 6573 7428 0a20 2020 2020 2020 2074  quest(.        t
+00012010: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00012020: 2c20 7061 7261 6d73 3d7b 2263 7573 746f  , params={"custo
+00012030: 6d5f 656d 6f6a 695f 6964 7322 3a20 6a73  m_emoji_ids": js
+00012040: 6f6e 2e64 756d 7073 2863 7573 746f 6d5f  on.dumps(custom_
+00012050: 656d 6f6a 695f 6964 7329 7d0a 2020 2020  emoji_ids)}.    
+00012060: 290a 0a0a 6465 6620 7365 745f 7374 6963  )...def set_stic
+00012070: 6b65 725f 6b65 7977 6f72 6473 2874 6f6b  ker_keywords(tok
+00012080: 656e 2c20 7374 6963 6b65 722c 206b 6579  en, sticker, key
+00012090: 776f 7264 733d 4e6f 6e65 293a 0a20 2020  words=None):.   
+000120a0: 206d 6574 686f 645f 7572 6c20 3d20 2273   method_url = "s
+000120b0: 6574 5374 6963 6b65 724b 6579 776f 7264  etStickerKeyword
+000120c0: 7322 0a20 2020 2070 6179 6c6f 6164 203d  s".    payload =
+000120d0: 207b 2273 7469 636b 6572 223a 2073 7469   {"sticker": sti
+000120e0: 636b 6572 7d0a 2020 2020 6966 206b 6579  cker}.    if key
+000120f0: 776f 7264 733a 0a20 2020 2020 2020 2070  words:.        p
+00012100: 6179 6c6f 6164 5b22 6b65 7977 6f72 6473  ayload["keywords
+00012110: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
+00012120: 6b65 7977 6f72 6473 290a 2020 2020 7265  keywords).    re
+00012130: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00012140: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00012150: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00012160: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
+00012170: 7374 2229 0a0a 0a64 6566 2073 6574 5f73  st")...def set_s
+00012180: 7469 636b 6572 5f6d 6173 6b5f 706f 7369  ticker_mask_posi
+00012190: 7469 6f6e 2874 6f6b 656e 2c20 7374 6963  tion(token, stic
+000121a0: 6b65 722c 206d 6173 6b5f 706f 7369 7469  ker, mask_positi
+000121b0: 6f6e 3d4e 6f6e 6529 3a0a 2020 2020 6d65  on=None):.    me
+000121c0: 7468 6f64 5f75 726c 203d 2022 7365 7453  thod_url = "setS
+000121d0: 7469 636b 6572 4d61 736b 506f 7369 7469  tickerMaskPositi
+000121e0: 6f6e 220a 2020 2020 7061 796c 6f61 6420  on".    payload 
+000121f0: 3d20 7b22 7374 6963 6b65 7222 3a20 7374  = {"sticker": st
+00012200: 6963 6b65 727d 0a20 2020 2069 6620 6d61  icker}.    if ma
+00012210: 736b 5f70 6f73 6974 696f 6e3a 0a20 2020  sk_position:.   
+00012220: 2020 2020 2070 6179 6c6f 6164 5b22 6d61       payload["ma
+00012230: 736b 5f70 6f73 6974 696f 6e22 5d20 3d20  sk_position"] = 
+00012240: 6d61 736b 5f70 6f73 6974 696f 6e2e 746f  mask_position.to
+00012250: 5f6a 736f 6e28 290a 2020 2020 7265 7475  _json().    retu
+00012260: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00012270: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00012280: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00012290: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+000122a0: 2229 0a0a 0a64 6566 2075 706c 6f61 645f  ")...def upload_
+000122b0: 7374 6963 6b65 725f 6669 6c65 2874 6f6b  sticker_file(tok
+000122c0: 656e 2c20 7573 6572 5f69 642c 2073 7469  en, user_id, sti
+000122d0: 636b 6572 2c20 7374 6963 6b65 725f 666f  cker, sticker_fo
+000122e0: 726d 6174 293a 0a20 2020 206d 6574 686f  rmat):.    metho
+000122f0: 645f 7572 6c20 3d20 2275 706c 6f61 6453  d_url = "uploadS
+00012300: 7469 636b 6572 4669 6c65 220a 2020 2020  tickerFile".    
+00012310: 7061 796c 6f61 6420 3d20 7b22 7573 6572  payload = {"user
+00012320: 5f69 6422 3a20 7573 6572 5f69 642c 2022  _id": user_id, "
+00012330: 7374 6963 6b65 725f 666f 726d 6174 223a  sticker_format":
+00012340: 2073 7469 636b 6572 5f66 6f72 6d61 747d   sticker_format}
+00012350: 0a20 2020 2066 696c 6573 203d 207b 2273  .    files = {"s
+00012360: 7469 636b 6572 223a 2073 7469 636b 6572  ticker": sticker
+00012370: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+00012380: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00012390: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000123a0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
+000123b0: 6c65 733d 6669 6c65 732c 206d 6574 686f  les=files, metho
+000123c0: 643d 2270 6f73 7422 290a 0a0a 6465 6620  d="post")...def 
+000123d0: 7365 745f 6375 7374 6f6d 5f65 6d6f 6a69  set_custom_emoji
+000123e0: 5f73 7469 636b 6572 5f73 6574 5f74 6875  _sticker_set_thu
+000123f0: 6d62 6e61 696c 2874 6f6b 656e 2c20 6e61  mbnail(token, na
+00012400: 6d65 2c20 6375 7374 6f6d 5f65 6d6f 6a69  me, custom_emoji
+00012410: 5f69 643d 4e6f 6e65 293a 0a20 2020 206d  _id=None):.    m
+00012420: 6574 686f 645f 7572 6c20 3d20 2273 6574  ethod_url = "set
+00012430: 4375 7374 6f6d 456d 6f6a 6953 7469 636b  CustomEmojiStick
+00012440: 6572 5365 7454 6875 6d62 6e61 696c 220a  erSetThumbnail".
+00012450: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00012460: 6e61 6d65 223a 206e 616d 657d 0a20 2020  name": name}.   
+00012470: 2069 6620 6375 7374 6f6d 5f65 6d6f 6a69   if custom_emoji
+00012480: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
+00012490: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000124a0: 5b22 6375 7374 6f6d 5f65 6d6f 6a69 5f69  ["custom_emoji_i
+000124b0: 6422 5d20 3d20 6375 7374 6f6d 5f65 6d6f  d"] = custom_emo
+000124c0: 6a69 5f69 640a 2020 2020 7265 7475 726e  ji_id.    return
+000124d0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+000124e0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+000124f0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00012500: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+00012510: 0a0a 0a64 6566 2073 6574 5f73 7469 636b  ...def set_stick
+00012520: 6572 5f73 6574 5f74 6974 6c65 2874 6f6b  er_set_title(tok
+00012530: 656e 2c20 6e61 6d65 2c20 7469 746c 6529  en, name, title)
+00012540: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00012550: 203d 2022 7365 7453 7469 636b 6572 5365   = "setStickerSe
+00012560: 7454 6974 6c65 220a 2020 2020 7061 796c  tTitle".    payl
+00012570: 6f61 6420 3d20 7b22 6e61 6d65 223a 206e  oad = {"name": n
+00012580: 616d 652c 2022 7469 746c 6522 3a20 7469  ame, "title": ti
+00012590: 746c 657d 0a20 2020 2072 6574 7572 6e20  tle}.    return 
+000125a0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+000125b0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+000125c0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+000125d0: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+000125e0: 0a0a 6465 6620 6465 6c65 7465 5f73 7469  ..def delete_sti
+000125f0: 636b 6572 5f73 6574 2874 6f6b 656e 2c20  cker_set(token, 
+00012600: 6e61 6d65 293a 0a20 2020 206d 6574 686f  name):.    metho
+00012610: 645f 7572 6c20 3d20 2264 656c 6574 6553  d_url = "deleteS
+00012620: 7469 636b 6572 5365 7422 0a20 2020 2070  tickerSet".    p
+00012630: 6179 6c6f 6164 203d 207b 226e 616d 6522  ayload = {"name"
+00012640: 3a20 6e61 6d65 7d0a 2020 2020 7265 7475  : name}.    retu
+00012650: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00012660: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00012670: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00012680: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+00012690: 2229 0a0a 0a64 6566 2073 6574 5f73 7469  ")...def set_sti
+000126a0: 636b 6572 5f65 6d6f 6a69 5f6c 6973 7428  cker_emoji_list(
+000126b0: 746f 6b65 6e2c 2073 7469 636b 6572 2c20  token, sticker, 
+000126c0: 656d 6f6a 695f 6c69 7374 293a 0a20 2020  emoji_list):.   
+000126d0: 206d 6574 686f 645f 7572 6c20 3d20 2273   method_url = "s
+000126e0: 6574 5374 6963 6b65 7245 6d6f 6a69 4c69  etStickerEmojiLi
+000126f0: 7374 220a 2020 2020 7061 796c 6f61 6420  st".    payload 
+00012700: 3d20 7b22 7374 6963 6b65 7222 3a20 7374  = {"sticker": st
+00012710: 6963 6b65 722c 2022 656d 6f6a 695f 6c69  icker, "emoji_li
+00012720: 7374 223a 206a 736f 6e2e 6475 6d70 7328  st": json.dumps(
+00012730: 656d 6f6a 695f 6c69 7374 297d 0a20 2020  emoji_list)}.   
+00012740: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00012750: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00012760: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00012770: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+00012780: 2270 6f73 7422 290a 0a0a 6465 6620 6372  "post")...def cr
+00012790: 6561 7465 5f6e 6577 5f73 7469 636b 6572  eate_new_sticker
+000127a0: 5f73 6574 280a 2020 2020 746f 6b65 6e2c  _set(.    token,
+000127b0: 2075 7365 725f 6964 2c20 6e61 6d65 2c20   user_id, name, 
+000127c0: 7469 746c 652c 2073 7469 636b 6572 732c  title, stickers,
+000127d0: 2073 7469 636b 6572 5f74 7970 653d 4e6f   sticker_type=No
+000127e0: 6e65 2c20 6e65 6564 735f 7265 7061 696e  ne, needs_repain
+000127f0: 7469 6e67 3d4e 6f6e 650a 293a 0a20 2020  ting=None.):.   
+00012800: 206d 6574 686f 645f 7572 6c20 3d20 2263   method_url = "c
+00012810: 7265 6174 654e 6577 5374 6963 6b65 7253  reateNewStickerS
+00012820: 6574 220a 2020 2020 7061 796c 6f61 6420  et".    payload 
+00012830: 3d20 7b22 7573 6572 5f69 6422 3a20 7573  = {"user_id": us
+00012840: 6572 5f69 642c 2022 6e61 6d65 223a 206e  er_id, "name": n
+00012850: 616d 652c 2022 7469 746c 6522 3a20 7469  ame, "title": ti
+00012860: 746c 657d 0a20 2020 2069 6620 7374 6963  tle}.    if stic
+00012870: 6b65 725f 7479 7065 3a0a 2020 2020 2020  ker_type:.      
+00012880: 2020 7061 796c 6f61 645b 2273 7469 636b    payload["stick
+00012890: 6572 5f74 7970 6522 5d20 3d20 7374 6963  er_type"] = stic
+000128a0: 6b65 725f 7479 7065 0a20 2020 2069 6620  ker_type.    if 
+000128b0: 6e65 6564 735f 7265 7061 696e 7469 6e67  needs_repainting
+000128c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000128d0: 2020 2020 2020 7061 796c 6f61 645b 226e        payload["n
+000128e0: 6565 6473 5f72 6570 6169 6e74 696e 6722  eeds_repainting"
+000128f0: 5d20 3d20 6e65 6564 735f 7265 7061 696e  ] = needs_repain
+00012900: 7469 6e67 0a0a 2020 2020 6669 6c65 7320  ting..    files 
+00012910: 3d20 7b7d 0a20 2020 206c 7374 203d 205b  = {}.    lst = [
+00012920: 5d0a 0a20 2020 2066 6f72 2073 7469 636b  ]..    for stick
+00012930: 6572 2069 6e20 7374 6963 6b65 7273 3a0a  er in stickers:.
+00012940: 2020 2020 2020 2020 6a73 6f6e 5f64 6963          json_dic
+00012950: 742c 2066 696c 6520 3d20 7374 6963 6b65  t, file = sticke
+00012960: 722e 636f 6e76 6572 745f 696e 7075 745f  r.convert_input_
+00012970: 7374 6963 6b65 7228 290a 2020 2020 2020  sticker().      
+00012980: 2020 6a73 6f6e 5f64 6963 7420 3d20 7374    json_dict = st
+00012990: 6963 6b65 722e 746f 5f64 6963 7428 290a  icker.to_dict().
+000129a0: 0a20 2020 2020 2020 2069 6620 6669 6c65  .        if file
+000129b0: 3a0a 2020 2020 2020 2020 2020 2020 6c69  :.            li
+000129c0: 7374 5f6b 6579 7320 3d20 6c69 7374 2866  st_keys = list(f
+000129d0: 696c 652e 6b65 7973 2829 290a 2020 2020  ile.keys()).    
+000129e0: 2020 2020 2020 2020 6669 6c65 735b 6c69          files[li
+000129f0: 7374 5f6b 6579 735b 305d 5d20 3d20 6669  st_keys[0]] = fi
+00012a00: 6c65 5b6c 6973 745f 6b65 7973 5b30 5d5d  le[list_keys[0]]
+00012a10: 0a20 2020 2020 2020 206c 7374 2e61 7070  .        lst.app
+00012a20: 656e 6428 6a73 6f6e 5f64 6963 7429 0a0a  end(json_dict)..
+00012a30: 2020 2020 7061 796c 6f61 645b 2273 7469      payload["sti
+00012a40: 636b 6572 7322 5d20 3d20 6a73 6f6e 2e64  ckers"] = json.d
+00012a50: 756d 7073 286c 7374 290a 0a20 2020 2072  umps(lst)..    r
+00012a60: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00012a70: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00012a80: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012a90: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00012aa0: 6573 2c20 6d65 7468 6f64 3d22 706f 7374  es, method="post
+00012ab0: 2229 0a0a 0a64 6566 2061 6464 5f73 7469  ")...def add_sti
+00012ac0: 636b 6572 5f74 6f5f 7365 7428 746f 6b65  cker_to_set(toke
+00012ad0: 6e2c 2075 7365 725f 6964 2c20 6e61 6d65  n, user_id, name
+00012ae0: 2c20 7374 6963 6b65 7229 3a0a 2020 2020  , sticker):.    
+00012af0: 6d65 7468 6f64 5f75 726c 203d 2022 6164  method_url = "ad
+00012b00: 6453 7469 636b 6572 546f 5365 7422 0a20  dStickerToSet". 
+00012b10: 2020 206a 736f 6e5f 6469 6374 2c20 6669     json_dict, fi
+00012b20: 6c65 7320 3d20 7374 6963 6b65 722e 636f  les = sticker.co
+00012b30: 6e76 6572 745f 696e 7075 745f 7374 6963  nvert_input_stic
+00012b40: 6b65 7228 290a 2020 2020 7061 796c 6f61  ker().    payloa
+00012b50: 6420 3d20 7b22 7573 6572 5f69 6422 3a20  d = {"user_id": 
+00012b60: 7573 6572 5f69 642c 2022 6e61 6d65 223a  user_id, "name":
+00012b70: 206e 616d 652c 2022 7374 6963 6b65 7222   name, "sticker"
+00012b80: 3a20 6a73 6f6e 5f64 6963 747d 0a20 2020  : json_dict}.   
+00012b90: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00012ba0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00012bb0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00012bc0: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00012bd0: 696c 6573 2c20 6d65 7468 6f64 3d22 706f  iles, method="po
+00012be0: 7374 2229 0a0a 0a64 6566 2073 6574 5f73  st")...def set_s
+00012bf0: 7469 636b 6572 5f70 6f73 6974 696f 6e5f  ticker_position_
+00012c00: 696e 5f73 6574 2874 6f6b 656e 2c20 7374  in_set(token, st
+00012c10: 6963 6b65 722c 2070 6f73 6974 696f 6e29  icker, position)
+00012c20: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00012c30: 203d 2022 7365 7453 7469 636b 6572 506f   = "setStickerPo
+00012c40: 7369 7469 6f6e 496e 5365 7422 0a20 2020  sitionInSet".   
+00012c50: 2070 6179 6c6f 6164 203d 207b 2273 7469   payload = {"sti
+00012c60: 636b 6572 223a 2073 7469 636b 6572 2c20  cker": sticker, 
+00012c70: 2270 6f73 6974 696f 6e22 3a20 706f 7369  "position": posi
+00012c80: 7469 6f6e 7d0a 2020 2020 7265 7475 726e  tion}.    return
+00012c90: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00012ca0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00012cb0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00012cc0: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+00012cd0: 0a0a 0a64 6566 2064 656c 6574 655f 7374  ...def delete_st
+00012ce0: 6963 6b65 725f 6672 6f6d 5f73 6574 2874  icker_from_set(t
+00012cf0: 6f6b 656e 2c20 7374 6963 6b65 7229 3a0a  oken, sticker):.
+00012d00: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00012d10: 2022 6465 6c65 7465 5374 6963 6b65 7246   "deleteStickerF
+00012d20: 726f 6d53 6574 220a 2020 2020 7061 796c  romSet".    payl
+00012d30: 6f61 6420 3d20 7b22 7374 6963 6b65 7222  oad = {"sticker"
+00012d40: 3a20 7374 6963 6b65 727d 0a20 2020 2072  : sticker}.    r
+00012d50: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00012d60: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00012d70: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012d80: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
+00012d90: 6f73 7422 290a 0a0a 6465 6620 616e 7377  ost")...def answ
+00012da0: 6572 5f77 6562 5f61 7070 5f71 7565 7279  er_web_app_query
+00012db0: 2874 6f6b 656e 2c20 7765 625f 6170 705f  (token, web_app_
+00012dc0: 7175 6572 795f 6964 2c20 7265 7375 6c74  query_id, result
+00012dd0: 3a20 7479 7065 732e 496e 6c69 6e65 5175  : types.InlineQu
+00012de0: 6572 7952 6573 756c 7442 6173 6529 3a0a  eryResultBase):.
+00012df0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00012e00: 2022 616e 7377 6572 5765 6241 7070 5175   "answerWebAppQu
+00012e10: 6572 7922 0a20 2020 2070 6179 6c6f 6164  ery".    payload
+00012e20: 203d 207b 2277 6562 5f61 7070 5f71 7565   = {"web_app_que
+00012e30: 7279 5f69 6422 3a20 7765 625f 6170 705f  ry_id": web_app_
+00012e40: 7175 6572 795f 6964 2c20 2272 6573 756c  query_id, "resul
+00012e50: 7422 3a20 7265 7375 6c74 2e74 6f5f 6a73  t": result.to_js
+00012e60: 6f6e 2829 7d0a 2020 2020 7265 7475 726e  on()}.    return
+00012e70: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00012e80: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00012e90: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00012ea0: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+00012eb0: 0a0a 0a64 6566 2063 7265 6174 655f 696e  ...def create_in
+00012ec0: 766f 6963 655f 6c69 6e6b 280a 2020 2020  voice_link(.    
+00012ed0: 746f 6b65 6e2c 0a20 2020 2074 6974 6c65  token,.    title
+00012ee0: 2c0a 2020 2020 6465 7363 7269 7074 696f  ,.    descriptio
+00012ef0: 6e2c 0a20 2020 2070 6179 6c6f 6164 2c0a  n,.    payload,.
+00012f00: 2020 2020 7072 6f76 6964 6572 5f74 6f6b      provider_tok
+00012f10: 656e 2c0a 2020 2020 6375 7272 656e 6379  en,.    currency
+00012f20: 2c0a 2020 2020 7072 6963 6573 2c0a 2020  ,.    prices,.  
+00012f30: 2020 6d61 785f 7469 705f 616d 6f75 6e74    max_tip_amount
+00012f40: 3d4e 6f6e 652c 0a20 2020 2073 7567 6765  =None,.    sugge
+00012f50: 7374 6564 5f74 6970 5f61 6d6f 756e 7473  sted_tip_amounts
+00012f60: 3d4e 6f6e 652c 0a20 2020 2070 726f 7669  =None,.    provi
+00012f70: 6465 725f 6461 7461 3d4e 6f6e 652c 0a20  der_data=None,. 
+00012f80: 2020 2070 686f 746f 5f75 726c 3d4e 6f6e     photo_url=Non
+00012f90: 652c 0a20 2020 2070 686f 746f 5f73 697a  e,.    photo_siz
+00012fa0: 653d 4e6f 6e65 2c0a 2020 2020 7068 6f74  e=None,.    phot
+00012fb0: 6f5f 7769 6474 683d 4e6f 6e65 2c0a 2020  o_width=None,.  
+00012fc0: 2020 7068 6f74 6f5f 6865 6967 6874 3d4e    photo_height=N
+00012fd0: 6f6e 652c 0a20 2020 206e 6565 645f 6e61  one,.    need_na
+00012fe0: 6d65 3d4e 6f6e 652c 0a20 2020 206e 6565  me=None,.    nee
+00012ff0: 645f 7068 6f6e 655f 6e75 6d62 6572 3d4e  d_phone_number=N
+00013000: 6f6e 652c 0a20 2020 206e 6565 645f 656d  one,.    need_em
+00013010: 6169 6c3d 4e6f 6e65 2c0a 2020 2020 6e65  ail=None,.    ne
+00013020: 6564 5f73 6869 7070 696e 675f 6164 6472  ed_shipping_addr
+00013030: 6573 733d 4e6f 6e65 2c0a 2020 2020 7365  ess=None,.    se
+00013040: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
+00013050: 746f 5f70 726f 7669 6465 723d 4e6f 6e65  to_provider=None
+00013060: 2c0a 2020 2020 7365 6e64 5f65 6d61 696c  ,.    send_email
+00013070: 5f74 6f5f 7072 6f76 6964 6572 3d4e 6f6e  _to_provider=Non
+00013080: 652c 0a20 2020 2069 735f 666c 6578 6962  e,.    is_flexib
+00013090: 6c65 3d4e 6f6e 652c 0a29 3a0a 2020 2020  le=None,.):.    
+000130a0: 6d65 7468 6f64 5f75 726c 203d 2072 2263  method_url = r"c
+000130b0: 7265 6174 6549 6e76 6f69 6365 4c69 6e6b  reateInvoiceLink
+000130c0: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+000130d0: 7b0a 2020 2020 2020 2020 2274 6974 6c65  {.        "title
+000130e0: 223a 2074 6974 6c65 2c0a 2020 2020 2020  ": title,.      
+000130f0: 2020 2264 6573 6372 6970 7469 6f6e 223a    "description":
+00013100: 2064 6573 6372 6970 7469 6f6e 2c0a 2020   description,.  
+00013110: 2020 2020 2020 2270 6179 6c6f 6164 223a        "payload":
+00013120: 2070 6179 6c6f 6164 2c0a 2020 2020 2020   payload,.      
+00013130: 2020 2270 726f 7669 6465 725f 746f 6b65    "provider_toke
+00013140: 6e22 3a20 7072 6f76 6964 6572 5f74 6f6b  n": provider_tok
+00013150: 656e 2c0a 2020 2020 2020 2020 2263 7572  en,.        "cur
+00013160: 7265 6e63 7922 3a20 6375 7272 656e 6379  rency": currency
+00013170: 2c0a 2020 2020 2020 2020 2270 7269 6365  ,.        "price
+00013180: 7322 3a20 5f63 6f6e 7665 7274 5f6c 6973  s": _convert_lis
+00013190: 745f 6a73 6f6e 5f73 6572 6961 6c69 7a61  t_json_serializa
+000131a0: 626c 6528 7072 6963 6573 292c 0a20 2020  ble(prices),.   
+000131b0: 207d 0a20 2020 2069 6620 6d61 785f 7469   }.    if max_ti
+000131c0: 705f 616d 6f75 6e74 3a0a 2020 2020 2020  p_amount:.      
+000131d0: 2020 7061 796c 6f61 645b 226d 6178 5f74    payload["max_t
+000131e0: 6970 5f61 6d6f 756e 7422 5d20 3d20 6d61  ip_amount"] = ma
+000131f0: 785f 7469 705f 616d 6f75 6e74 0a20 2020  x_tip_amount.   
+00013200: 2069 6620 7375 6767 6573 7465 645f 7469   if suggested_ti
+00013210: 705f 616d 6f75 6e74 733a 0a20 2020 2020  p_amounts:.     
+00013220: 2020 2070 6179 6c6f 6164 5b22 7375 6767     payload["sugg
+00013230: 6573 7465 645f 7469 705f 616d 6f75 6e74  ested_tip_amount
+00013240: 7322 5d20 3d20 6a73 6f6e 2e64 756d 7073  s"] = json.dumps
+00013250: 2873 7567 6765 7374 6564 5f74 6970 5f61  (suggested_tip_a
+00013260: 6d6f 756e 7473 290a 2020 2020 6966 2070  mounts).    if p
+00013270: 726f 7669 6465 725f 6461 7461 3a0a 2020  rovider_data:.  
+00013280: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+00013290: 726f 7669 6465 725f 6461 7461 225d 203d  rovider_data"] =
+000132a0: 2070 726f 7669 6465 725f 6461 7461 0a20   provider_data. 
+000132b0: 2020 2069 6620 7068 6f74 6f5f 7572 6c3a     if photo_url:
+000132c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000132d0: 5b22 7068 6f74 6f5f 7572 6c22 5d20 3d20  ["photo_url"] = 
+000132e0: 7068 6f74 6f5f 7572 6c0a 2020 2020 6966  photo_url.    if
+000132f0: 2070 686f 746f 5f73 697a 653a 0a20 2020   photo_size:.   
+00013300: 2020 2020 2070 6179 6c6f 6164 5b22 7068       payload["ph
+00013310: 6f74 6f5f 7369 7a65 225d 203d 2070 686f  oto_size"] = pho
+00013320: 746f 5f73 697a 650a 2020 2020 6966 2070  to_size.    if p
+00013330: 686f 746f 5f77 6964 7468 3a0a 2020 2020  hoto_width:.    
+00013340: 2020 2020 7061 796c 6f61 645b 2270 686f      payload["pho
+00013350: 746f 5f77 6964 7468 225d 203d 2070 686f  to_width"] = pho
+00013360: 746f 5f77 6964 7468 0a20 2020 2069 6620  to_width.    if 
+00013370: 7068 6f74 6f5f 6865 6967 6874 3a0a 2020  photo_height:.  
+00013380: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+00013390: 686f 746f 5f68 6569 6768 7422 5d20 3d20  hoto_height"] = 
+000133a0: 7068 6f74 6f5f 6865 6967 6874 0a20 2020  photo_height.   
+000133b0: 2069 6620 6e65 6564 5f6e 616d 6520 6973   if need_name is
+000133c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000133d0: 2020 2070 6179 6c6f 6164 5b22 6e65 6564     payload["need
+000133e0: 5f6e 616d 6522 5d20 3d20 6e65 6564 5f6e  _name"] = need_n
+000133f0: 616d 650a 2020 2020 6966 206e 6565 645f  ame.    if need_
+00013400: 7068 6f6e 655f 6e75 6d62 6572 2069 7320  phone_number is 
+00013410: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00013420: 2020 7061 796c 6f61 645b 226e 6565 645f    payload["need_
+00013430: 7068 6f6e 655f 6e75 6d62 6572 225d 203d  phone_number"] =
+00013440: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
+00013450: 6572 0a20 2020 2069 6620 6e65 6564 5f65  er.    if need_e
+00013460: 6d61 696c 2069 7320 6e6f 7420 4e6f 6e65  mail is not None
+00013470: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00013480: 645b 226e 6565 645f 656d 6169 6c22 5d20  d["need_email"] 
+00013490: 3d20 6e65 6564 5f65 6d61 696c 0a20 2020  = need_email.   
+000134a0: 2069 6620 6e65 6564 5f73 6869 7070 696e   if need_shippin
+000134b0: 675f 6164 6472 6573 7320 6973 206e 6f74  g_address is not
+000134c0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+000134d0: 6179 6c6f 6164 5b22 6e65 6564 5f73 6869  ayload["need_shi
+000134e0: 7070 696e 675f 6164 6472 6573 7322 5d20  pping_address"] 
+000134f0: 3d20 6e65 6564 5f73 6869 7070 696e 675f  = need_shipping_
+00013500: 6164 6472 6573 730a 2020 2020 6966 2073  address.    if s
+00013510: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
+00013520: 5f74 6f5f 7072 6f76 6964 6572 2069 7320  _to_provider is 
+00013530: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00013540: 2020 7061 796c 6f61 645b 2273 656e 645f    payload["send_
+00013550: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
+00013560: 7072 6f76 6964 6572 225d 203d 2073 656e  provider"] = sen
+00013570: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
+00013580: 6f5f 7072 6f76 6964 6572 0a20 2020 2069  o_provider.    i
+00013590: 6620 7365 6e64 5f65 6d61 696c 5f74 6f5f  f send_email_to_
+000135a0: 7072 6f76 6964 6572 2069 7320 6e6f 7420  provider is not 
+000135b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+000135c0: 796c 6f61 645b 2273 656e 645f 656d 6169  yload["send_emai
+000135d0: 6c5f 746f 5f70 726f 7669 6465 7222 5d20  l_to_provider"] 
+000135e0: 3d20 7365 6e64 5f65 6d61 696c 5f74 6f5f  = send_email_to_
+000135f0: 7072 6f76 6964 6572 0a20 2020 2069 6620  provider.    if 
+00013600: 6973 5f66 6c65 7869 626c 6520 6973 206e  is_flexible is n
+00013610: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00013620: 2070 6179 6c6f 6164 5b22 6973 5f66 6c65   payload["is_fle
+00013630: 7869 626c 6522 5d20 3d20 6973 5f66 6c65  xible"] = is_fle
+00013640: 7869 626c 650a 2020 2020 7265 7475 726e  xible.    return
+00013650: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00013660: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00013670: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00013680: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+00013690: 0a0a 0a23 206e 6f69 6e73 7065 6374 696f  ...# noinspectio
+000136a0: 6e20 5079 5368 6164 6f77 696e 6742 7569  n PyShadowingBui
+000136b0: 6c74 696e 730a 6465 6620 7365 6e64 5f70  ltins.def send_p
+000136c0: 6f6c 6c28 0a20 2020 2020 2020 2074 6f6b  oll(.        tok
+000136d0: 656e 2c20 6368 6174 5f69 642c 2071 7565  en, chat_id, que
+000136e0: 7374 696f 6e2c 206f 7074 696f 6e73 2c0a  stion, options,.
+000136f0: 2020 2020 2020 2020 6973 5f61 6e6f 6e79          is_anony
+00013700: 6d6f 7573 203d 204e 6f6e 652c 2074 7970  mous = None, typ
+00013710: 6520 3d20 4e6f 6e65 2c20 616c 6c6f 7773  e = None, allows
+00013720: 5f6d 756c 7469 706c 655f 616e 7377 6572  _multiple_answer
+00013730: 7320 3d20 4e6f 6e65 2c20 636f 7272 6563  s = None, correc
+00013740: 745f 6f70 7469 6f6e 5f69 6420 3d20 4e6f  t_option_id = No
+00013750: 6e65 2c20 6578 706c 616e 6174 696f 6e20  ne, explanation 
+00013760: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+00013770: 6578 706c 616e 6174 696f 6e5f 7061 7273  explanation_pars
+00013780: 655f 6d6f 6465 3d4e 6f6e 652c 206f 7065  e_mode=None, ope
+00013790: 6e5f 7065 7269 6f64 203d 204e 6f6e 652c  n_period = None,
+000137a0: 2063 6c6f 7365 5f64 6174 6520 3d20 4e6f   close_date = No
+000137b0: 6e65 2c20 6973 5f63 6c6f 7365 6420 3d20  ne, is_closed = 
+000137c0: 4e6f 6e65 2c20 6469 7361 626c 655f 6e6f  None, disable_no
+000137d0: 7469 6669 6361 7469 6f6e 3d46 616c 7365  tification=False
+000137e0: 2c0a 2020 2020 2020 2020 7265 706c 795f  ,.        reply_
+000137f0: 6d61 726b 7570 3d4e 6f6e 652c 2074 696d  markup=None, tim
+00013800: 656f 7574 3d4e 6f6e 652c 2065 7870 6c61  eout=None, expla
+00013810: 6e61 7469 6f6e 5f65 6e74 6974 6965 733d  nation_entities=
+00013820: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
+00013830: 6e74 656e 743d 4e6f 6e65 2c20 6d65 7373  ntent=None, mess
+00013840: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
+00013850: 6e65 2c0a 2020 2020 2020 2020 7265 706c  ne,.        repl
+00013860: 795f 7061 7261 6d65 7465 7273 3d4e 6f6e  y_parameters=Non
+00013870: 652c 2062 7573 696e 6573 735f 636f 6e6e  e, business_conn
+00013880: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c20  ection_id=None, 
+00013890: 7175 6573 7469 6f6e 5f70 6172 7365 5f6d  question_parse_m
+000138a0: 6f64 653d 4e6f 6e65 2c20 7175 6573 7469  ode=None, questi
+000138b0: 6f6e 5f65 6e74 6974 6965 733d 4e6f 6e65  on_entities=None
+000138c0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+000138d0: 6c20 3d20 7227 7365 6e64 506f 6c6c 270a  l = r'sendPoll'.
+000138e0: 2020 2020 7061 796c 6f61 6420 3d20 7b0a      payload = {.
+000138f0: 2020 2020 2020 2020 2763 6861 745f 6964          'chat_id
+00013900: 273a 2073 7472 2863 6861 745f 6964 292c  ': str(chat_id),
+00013910: 0a20 2020 2020 2020 2027 7175 6573 7469  .        'questi
+00013920: 6f6e 273a 2071 7565 7374 696f 6e2c 0a20  on': question,. 
+00013930: 2020 2020 2020 2027 6f70 7469 6f6e 7327         'options'
+00013940: 3a20 6a73 6f6e 2e64 756d 7073 285b 6f70  : json.dumps([op
+00013950: 7469 6f6e 2e74 6f5f 6469 6374 2829 2066  tion.to_dict() f
+00013960: 6f72 206f 7074 696f 6e20 696e 206f 7074  or option in opt
+00013970: 696f 6e73 5d29 0a20 2020 207d 0a0a 2020  ions]).    }..  
+00013980: 2020 6966 2069 735f 616e 6f6e 796d 6f75    if is_anonymou
+00013990: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+000139a0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000139b0: 6973 5f61 6e6f 6e79 6d6f 7573 275d 203d  is_anonymous'] =
+000139c0: 2069 735f 616e 6f6e 796d 6f75 730a 2020   is_anonymous.  
+000139d0: 2020 6966 2074 7970 653a 0a20 2020 2020    if type:.     
+000139e0: 2020 2070 6179 6c6f 6164 5b27 7479 7065     payload['type
+000139f0: 275d 203d 2074 7970 650a 2020 2020 6966  '] = type.    if
+00013a00: 2061 6c6c 6f77 735f 6d75 6c74 6970 6c65   allows_multiple
+00013a10: 5f61 6e73 7765 7273 2069 7320 6e6f 7420  _answers is not 
+00013a20: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00013a30: 796c 6f61 645b 2261 6c6c 6f77 735f 6d75  yload["allows_mu
+00013a40: 6c74 6970 6c65 5f61 6e73 7765 7273 225d  ltiple_answers"]
+00013a50: 203d 2061 6c6c 6f77 735f 6d75 6c74 6970   = allows_multip
+00013a60: 6c65 5f61 6e73 7765 7273 0a20 2020 2069  le_answers.    i
+00013a70: 6620 636f 7272 6563 745f 6f70 7469 6f6e  f correct_option
+00013a80: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
+00013a90: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00013aa0: 5b27 636f 7272 6563 745f 6f70 7469 6f6e  ['correct_option
+00013ab0: 5f69 6427 5d20 3d20 636f 7272 6563 745f  _id'] = correct_
+00013ac0: 6f70 7469 6f6e 5f69 640a 2020 2020 6966  option_id.    if
+00013ad0: 2065 7870 6c61 6e61 7469 6f6e 3a0a 2020   explanation:.  
+00013ae0: 2020 2020 2020 7061 796c 6f61 645b 2765        payload['e
+00013af0: 7870 6c61 6e61 7469 6f6e 275d 203d 2065  xplanation'] = e
+00013b00: 7870 6c61 6e61 7469 6f6e 0a20 2020 2069  xplanation.    i
+00013b10: 6620 6578 706c 616e 6174 696f 6e5f 7061  f explanation_pa
+00013b20: 7273 655f 6d6f 6465 3a0a 2020 2020 2020  rse_mode:.      
+00013b30: 2020 7061 796c 6f61 645b 2765 7870 6c61    payload['expla
+00013b40: 6e61 7469 6f6e 5f70 6172 7365 5f6d 6f64  nation_parse_mod
+00013b50: 6527 5d20 3d20 6578 706c 616e 6174 696f  e'] = explanatio
+00013b60: 6e5f 7061 7273 655f 6d6f 6465 0a20 2020  n_parse_mode.   
+00013b70: 2069 6620 6f70 656e 5f70 6572 696f 643a   if open_period:
+00013b80: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00013b90: 5b27 6f70 656e 5f70 6572 696f 6427 5d20  ['open_period'] 
+00013ba0: 3d20 6f70 656e 5f70 6572 696f 640a 2020  = open_period.  
+00013bb0: 2020 6966 2063 6c6f 7365 5f64 6174 653a    if close_date:
+00013bc0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00013bd0: 7374 616e 6365 2863 6c6f 7365 5f64 6174  stance(close_dat
+00013be0: 652c 2064 6174 6574 696d 6529 3a0a 2020  e, datetime):.  
+00013bf0: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
+00013c00: 645b 2263 6c6f 7365 5f64 6174 6522 5d20  d["close_date"] 
+00013c10: 3d20 636c 6f73 655f 6461 7465 2e74 696d  = close_date.tim
+00013c20: 6573 7461 6d70 2829 0a20 2020 2020 2020  estamp().       
+00013c30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00013c40: 2020 2070 6179 6c6f 6164 5b22 636c 6f73     payload["clos
+00013c50: 655f 6461 7465 225d 203d 2063 6c6f 7365  e_date"] = close
+00013c60: 5f64 6174 650a 2020 2020 6966 2069 735f  _date.    if is_
+00013c70: 636c 6f73 6564 2069 7320 6e6f 7420 4e6f  closed is not No
+00013c80: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00013c90: 6f61 645b 2269 735f 636c 6f73 6564 225d  oad["is_closed"]
+00013ca0: 203d 2069 735f 636c 6f73 6564 0a20 2020   = is_closed.   
+00013cb0: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00013cc0: 6669 6361 7469 6f6e 3a0a 2020 2020 2020  fication:.      
+00013cd0: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
+00013ce0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
+00013cf0: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+00013d00: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
+00013d10: 7265 706c 795f 6d61 726b 7570 3a0a 2020  reply_markup:.  
+00013d20: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+00013d30: 6570 6c79 5f6d 6172 6b75 7027 5d20 3d20  eply_markup'] = 
+00013d40: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
+00013d50: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
+00013d60: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
+00013d70: 2020 2020 2020 7061 796c 6f61 645b 2274        payload["t
+00013d80: 696d 656f 7574 225d 203d 2074 696d 656f  imeout"] = timeo
+00013d90: 7574 0a20 2020 2069 6620 6578 706c 616e  ut.    if explan
+00013da0: 6174 696f 6e5f 656e 7469 7469 6573 3a0a  ation_entities:.
+00013db0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00013dc0: 2765 7870 6c61 6e61 7469 6f6e 5f65 6e74  'explanation_ent
+00013dd0: 6974 6965 7327 5d20 3d20 6a73 6f6e 2e64  ities'] = json.d
+00013de0: 756d 7073 2874 7970 6573 2e4d 6573 7361  umps(types.Messa
+00013df0: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
+00013e00: 5f6f 665f 6469 6374 7328 6578 706c 616e  _of_dicts(explan
+00013e10: 6174 696f 6e5f 656e 7469 7469 6573 2929  ation_entities))
+00013e20: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
+00013e30: 636f 6e74 656e 743a 0a20 2020 2020 2020  content:.       
+00013e40: 2070 6179 6c6f 6164 5b22 7072 6f74 6563   payload["protec
+00013e50: 745f 636f 6e74 656e 7422 5d20 3d20 7072  t_content"] = pr
+00013e60: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
+00013e70: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
+00013e80: 6561 645f 6964 3a0a 2020 2020 2020 2020  ead_id:.        
+00013e90: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
+00013ea0: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
+00013eb0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00013ec0: 0a20 2020 2069 6620 7265 706c 795f 7061  .    if reply_pa
+00013ed0: 7261 6d65 7465 7273 3a0a 2020 2020 2020  rameters:.      
+00013ee0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
+00013ef0: 5f70 6172 616d 6574 6572 7327 5d20 3d20  _parameters'] = 
+00013f00: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00013f10: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
+00013f20: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
+00013f30: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
+00013f40: 2020 7061 796c 6f61 645b 2762 7573 696e    payload['busin
+00013f50: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00013f60: 6427 5d20 3d20 6275 7369 6e65 7373 5f63  d'] = business_c
+00013f70: 6f6e 6e65 6374 696f 6e5f 6964 0a20 2020  onnection_id.   
+00013f80: 2069 6620 7175 6573 7469 6f6e 5f70 6172   if question_par
+00013f90: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
+00013fa0: 2070 6179 6c6f 6164 5b27 7175 6573 7469   payload['questi
+00013fb0: 6f6e 5f70 6172 7365 5f6d 6f64 6527 5d20  on_parse_mode'] 
+00013fc0: 3d20 7175 6573 7469 6f6e 5f70 6172 7365  = question_parse
+00013fd0: 5f6d 6f64 650a 2020 2020 6966 2071 7565  _mode.    if que
+00013fe0: 7374 696f 6e5f 656e 7469 7469 6573 3a0a  stion_entities:.
+00013ff0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00014000: 2771 7565 7374 696f 6e5f 656e 7469 7469  'question_entiti
+00014010: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
+00014020: 7328 7479 7065 732e 4d65 7373 6167 6545  s(types.MessageE
+00014030: 6e74 6974 792e 746f 5f6c 6973 745f 6f66  ntity.to_list_of
+00014040: 5f64 6963 7473 2871 7565 7374 696f 6e5f  _dicts(question_
+00014050: 656e 7469 7469 6573 2929 0a20 2020 2072  entities)).    r
+00014060: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00014070: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00014080: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00014090: 796c 6f61 6429 0a0a 0a64 6566 2063 7265  yload)...def cre
+000140a0: 6174 655f 666f 7275 6d5f 746f 7069 6328  ate_forum_topic(
+000140b0: 0a20 2020 2074 6f6b 656e 2c20 6368 6174  .    token, chat
+000140c0: 5f69 642c 206e 616d 652c 2069 636f 6e5f  _id, name, icon_
+000140d0: 636f 6c6f 723d 4e6f 6e65 2c20 6963 6f6e  color=None, icon
+000140e0: 5f63 7573 746f 6d5f 656d 6f6a 695f 6964  _custom_emoji_id
+000140f0: 3d4e 6f6e 650a 293a 0a20 2020 206d 6574  =None.):.    met
+00014100: 686f 645f 7572 6c20 3d20 7222 6372 6561  hod_url = r"crea
+00014110: 7465 466f 7275 6d54 6f70 6963 220a 2020  teForumTopic".  
+00014120: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+00014130: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
+00014140: 2022 6e61 6d65 223a 206e 616d 657d 0a20   "name": name}. 
+00014150: 2020 2069 6620 6963 6f6e 5f63 6f6c 6f72     if icon_color
+00014160: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00014170: 645b 2269 636f 6e5f 636f 6c6f 7222 5d20  d["icon_color"] 
+00014180: 3d20 6963 6f6e 5f63 6f6c 6f72 0a20 2020  = icon_color.   
+00014190: 2069 6620 6963 6f6e 5f63 7573 746f 6d5f   if icon_custom_
+000141a0: 656d 6f6a 695f 6964 3a0a 2020 2020 2020  emoji_id:.      
+000141b0: 2020 7061 796c 6f61 645b 2269 636f 6e5f    payload["icon_
+000141c0: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 6422  custom_emoji_id"
+000141d0: 5d20 3d20 6963 6f6e 5f63 7573 746f 6d5f  ] = icon_custom_
+000141e0: 656d 6f6a 695f 6964 0a20 2020 2072 6574  emoji_id.    ret
+000141f0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00014200: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00014210: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00014220: 6f61 6429 0a0a 0a64 6566 2065 6469 745f  oad)...def edit_
+00014230: 666f 7275 6d5f 746f 7069 6328 0a20 2020  forum_topic(.   
+00014240: 2074 6f6b 656e 2c20 6368 6174 5f69 642c   token, chat_id,
+00014250: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00014260: 6964 2c20 6e61 6d65 3d4e 6f6e 652c 2069  id, name=None, i
+00014270: 636f 6e5f 6375 7374 6f6d 5f65 6d6f 6a69  con_custom_emoji
+00014280: 5f69 643d 4e6f 6e65 0a29 3a0a 2020 2020  _id=None.):.    
+00014290: 6d65 7468 6f64 5f75 726c 203d 2072 2265  method_url = r"e
+000142a0: 6469 7446 6f72 756d 546f 7069 6322 0a20  ditForumTopic". 
+000142b0: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
+000142c0: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
+000142d0: 2c20 226d 6573 7361 6765 5f74 6872 6561  , "message_threa
+000142e0: 645f 6964 223a 206d 6573 7361 6765 5f74  d_id": message_t
+000142f0: 6872 6561 645f 6964 7d0a 2020 2020 6966  hread_id}.    if
+00014300: 206e 616d 6520 6973 206e 6f74 204e 6f6e   name is not Non
+00014310: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00014320: 6164 5b22 6e61 6d65 225d 203d 206e 616d  ad["name"] = nam
+00014330: 650a 2020 2020 6966 2069 636f 6e5f 6375  e.    if icon_cu
+00014340: 7374 6f6d 5f65 6d6f 6a69 5f69 6420 6973  stom_emoji_id is
+00014350: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00014360: 2020 2070 6179 6c6f 6164 5b22 6963 6f6e     payload["icon
+00014370: 5f63 7573 746f 6d5f 656d 6f6a 695f 6964  _custom_emoji_id
+00014380: 225d 203d 2069 636f 6e5f 6375 7374 6f6d  "] = icon_custom
+00014390: 5f65 6d6f 6a69 5f69 640a 2020 2020 7265  _emoji_id.    re
+000143a0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+000143b0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+000143c0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+000143d0: 6c6f 6164 290a 0a0a 6465 6620 636c 6f73  load)...def clos
+000143e0: 655f 666f 7275 6d5f 746f 7069 6328 746f  e_forum_topic(to
+000143f0: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
+00014400: 7373 6167 655f 7468 7265 6164 5f69 6429  ssage_thread_id)
+00014410: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00014420: 203d 2072 2263 6c6f 7365 466f 7275 6d54   = r"closeForumT
+00014430: 6f70 6963 220a 2020 2020 7061 796c 6f61  opic".    payloa
+00014440: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
+00014450: 6368 6174 5f69 642c 2022 6d65 7373 6167  chat_id, "messag
+00014460: 655f 7468 7265 6164 5f69 6422 3a20 6d65  e_thread_id": me
+00014470: 7373 6167 655f 7468 7265 6164 5f69 647d  ssage_thread_id}
+00014480: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00014490: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+000144a0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+000144b0: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
+000144c0: 6566 2072 656f 7065 6e5f 666f 7275 6d5f  ef reopen_forum_
+000144d0: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
+000144e0: 745f 6964 2c20 6d65 7373 6167 655f 7468  t_id, message_th
+000144f0: 7265 6164 5f69 6429 3a0a 2020 2020 6d65  read_id):.    me
+00014500: 7468 6f64 5f75 726c 203d 2072 2272 656f  thod_url = r"reo
+00014510: 7065 6e46 6f72 756d 546f 7069 6322 0a20  penForumTopic". 
+00014520: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
+00014530: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
+00014540: 2c20 226d 6573 7361 6765 5f74 6872 6561  , "message_threa
+00014550: 645f 6964 223a 206d 6573 7361 6765 5f74  d_id": message_t
+00014560: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
+00014570: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00014580: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00014590: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+000145a0: 6c6f 6164 290a 0a0a 6465 6620 6465 6c65  load)...def dele
+000145b0: 7465 5f66 6f72 756d 5f74 6f70 6963 2874  te_forum_topic(t
+000145c0: 6f6b 656e 2c20 6368 6174 5f69 642c 206d  oken, chat_id, m
+000145d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000145e0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+000145f0: 6c20 3d20 7222 6465 6c65 7465 466f 7275  l = r"deleteForu
+00014600: 6d54 6f70 6963 220a 2020 2020 7061 796c  mTopic".    payl
+00014610: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
+00014620: 3a20 6368 6174 5f69 642c 2022 6d65 7373  : chat_id, "mess
+00014630: 6167 655f 7468 7265 6164 5f69 6422 3a20  age_thread_id": 
+00014640: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00014650: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
+00014660: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00014670: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00014680: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
+00014690: 0a64 6566 2075 6e70 696e 5f61 6c6c 5f66  .def unpin_all_f
+000146a0: 6f72 756d 5f74 6f70 6963 5f6d 6573 7361  orum_topic_messa
+000146b0: 6765 7328 746f 6b65 6e2c 2063 6861 745f  ges(token, chat_
+000146c0: 6964 2c20 6d65 7373 6167 655f 7468 7265  id, message_thre
+000146d0: 6164 5f69 6429 3a0a 2020 2020 6d65 7468  ad_id):.    meth
+000146e0: 6f64 5f75 726c 203d 2072 2275 6e70 696e  od_url = r"unpin
+000146f0: 416c 6c46 6f72 756d 546f 7069 634d 6573  AllForumTopicMes
+00014700: 7361 6765 7322 0a20 2020 2070 6179 6c6f  sages".    paylo
+00014710: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+00014720: 2063 6861 745f 6964 2c20 226d 6573 7361   chat_id, "messa
+00014730: 6765 5f74 6872 6561 645f 6964 223a 206d  ge_thread_id": m
+00014740: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00014750: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+00014760: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00014770: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00014780: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+00014790: 6465 6620 6765 745f 666f 7275 6d5f 746f  def get_forum_to
+000147a0: 7069 635f 6963 6f6e 5f73 7469 636b 6572  pic_icon_sticker
+000147b0: 7328 746f 6b65 6e29 3a0a 2020 2020 6d65  s(token):.    me
+000147c0: 7468 6f64 5f75 726c 203d 2072 2267 6574  thod_url = r"get
+000147d0: 466f 7275 6d54 6f70 6963 4963 6f6e 5374  ForumTopicIconSt
+000147e0: 6963 6b65 7273 220a 2020 2020 7265 7475  ickers".    retu
+000147f0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00014800: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00014810: 726c 290a 0a0a 6465 6620 7374 6f70 5f70  rl)...def stop_p
+00014820: 6f6c 6c28 746f 6b65 6e2c 2063 6861 745f  oll(token, chat_
+00014830: 6964 2c20 6d65 7373 6167 655f 6964 2c20  id, message_id, 
+00014840: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00014850: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+00014860: 726c 203d 2072 2273 746f 7050 6f6c 6c22  rl = r"stopPoll"
+00014870: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00014880: 2263 6861 745f 6964 223a 2073 7472 2863  "chat_id": str(c
+00014890: 6861 745f 6964 292c 2022 6d65 7373 6167  hat_id), "messag
+000148a0: 655f 6964 223a 206d 6573 7361 6765 5f69  e_id": message_i
+000148b0: 647d 0a20 2020 2069 6620 7265 706c 795f  d}.    if reply_
+000148c0: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
+000148d0: 7061 796c 6f61 645b 2272 6570 6c79 5f6d  payload["reply_m
+000148e0: 6172 6b75 7022 5d20 3d20 5f63 6f6e 7665  arkup"] = _conve
+000148f0: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
+00014900: 6d61 726b 7570 290a 2020 2020 7265 7475  markup).    retu
+00014910: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00014920: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00014930: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00014940: 6164 290a 0a0a 6465 6620 6564 6974 5f67  ad)...def edit_g
+00014950: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
+00014960: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00014970: 642c 206e 616d 6529 3a0a 2020 2020 6d65  d, name):.    me
+00014980: 7468 6f64 5f75 726c 203d 2072 2265 6469  thod_url = r"edi
+00014990: 7447 656e 6572 616c 466f 7275 6d54 6f70  tGeneralForumTop
+000149a0: 6963 220a 2020 2020 7061 796c 6f61 6420  ic".    payload 
+000149b0: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
+000149c0: 6174 5f69 642c 2022 6e61 6d65 223a 206e  at_id, "name": n
+000149d0: 616d 657d 0a20 2020 2072 6574 7572 6e20  ame}.    return 
+000149e0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+000149f0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00014a00: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00014a10: 0a0a 0a64 6566 2063 6c6f 7365 5f67 656e  ...def close_gen
+00014a20: 6572 616c 5f66 6f72 756d 5f74 6f70 6963  eral_forum_topic
+00014a30: 2874 6f6b 656e 2c20 6368 6174 5f69 6429  (token, chat_id)
+00014a40: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00014a50: 203d 2072 2263 6c6f 7365 4765 6e65 7261   = r"closeGenera
+00014a60: 6c46 6f72 756d 546f 7069 6322 0a20 2020  lForumTopic".   
+00014a70: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+00014a80: 745f 6964 223a 2063 6861 745f 6964 7d0a  t_id": chat_id}.
+00014a90: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00014aa0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00014ab0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00014ac0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
+00014ad0: 6620 7265 6f70 656e 5f67 656e 6572 616c  f reopen_general
+00014ae0: 5f66 6f72 756d 5f74 6f70 6963 2874 6f6b  _forum_topic(tok
+00014af0: 656e 2c20 6368 6174 5f69 6429 3a0a 2020  en, chat_id):.  
+00014b00: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00014b10: 2272 656f 7065 6e47 656e 6572 616c 466f  "reopenGeneralFo
+00014b20: 7275 6d54 6f70 6963 220a 2020 2020 7061  rumTopic".    pa
+00014b30: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
+00014b40: 6422 3a20 6368 6174 5f69 647d 0a20 2020  d": chat_id}.   
+00014b50: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00014b60: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00014b70: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00014b80: 7061 796c 6f61 6429 0a0a 0a64 6566 2068  payload)...def h
+00014b90: 6964 655f 6765 6e65 7261 6c5f 666f 7275  ide_general_foru
+00014ba0: 6d5f 746f 7069 6328 746f 6b65 6e2c 2063  m_topic(token, c
+00014bb0: 6861 745f 6964 293a 0a20 2020 206d 6574  hat_id):.    met
+00014bc0: 686f 645f 7572 6c20 3d20 7222 6869 6465  hod_url = r"hide
+00014bd0: 4765 6e65 7261 6c46 6f72 756d 546f 7069  GeneralForumTopi
+00014be0: 6322 0a20 2020 2070 6179 6c6f 6164 203d  c".    payload =
+00014bf0: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
+00014c00: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
+00014c10: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00014c20: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00014c30: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00014c40: 290a 0a0a 6465 6620 756e 6869 6465 5f67  )...def unhide_g
+00014c50: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
+00014c60: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00014c70: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
+00014c80: 726c 203d 2072 2275 6e68 6964 6547 656e  rl = r"unhideGen
+00014c90: 6572 616c 466f 7275 6d54 6f70 6963 220a  eralForumTopic".
+00014ca0: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00014cb0: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+00014cc0: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
+00014cd0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00014ce0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00014cf0: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
+00014d00: 0a64 6566 2064 656c 6574 655f 6d65 7373  .def delete_mess
+00014d10: 6167 6573 2874 6f6b 656e 2c20 6368 6174  ages(token, chat
+00014d20: 5f69 642c 206d 6573 7361 6765 5f69 6473  _id, message_ids
+00014d30: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+00014d40: 6c20 3d20 2264 656c 6574 654d 6573 7361  l = "deleteMessa
+00014d50: 6765 7322 0a20 2020 2070 6179 6c6f 6164  ges".    payload
+00014d60: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
+00014d70: 6861 745f 6964 2c20 226d 6573 7361 6765  hat_id, "message
+00014d80: 5f69 6473 223a 206a 736f 6e2e 6475 6d70  _ids": json.dump
+00014d90: 7328 6d65 7373 6167 655f 6964 7329 7d0a  s(message_ids)}.
+00014da0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00014db0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00014dc0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00014dd0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
+00014de0: 6620 666f 7277 6172 645f 6d65 7373 6167  f forward_messag
+00014df0: 6573 280a 2020 2020 746f 6b65 6e2c 0a20  es(.    token,. 
+00014e00: 2020 2063 6861 745f 6964 2c0a 2020 2020     chat_id,.    
+00014e10: 6672 6f6d 5f63 6861 745f 6964 2c0a 2020  from_chat_id,.  
+00014e20: 2020 6d65 7373 6167 655f 6964 732c 0a20    message_ids,. 
+00014e30: 2020 2064 6973 6162 6c65 5f6e 6f74 6966     disable_notif
+00014e40: 6963 6174 696f 6e3d 4e6f 6e65 2c0a 2020  ication=None,.  
+00014e50: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
+00014e60: 5f69 643d 4e6f 6e65 2c0a 2020 2020 7072  _id=None,.    pr
+00014e70: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
+00014e80: 6e65 2c0a 293a 0a20 2020 206d 6574 686f  ne,.):.    metho
+00014e90: 645f 7572 6c20 3d20 2266 6f72 7761 7264  d_url = "forward
+00014ea0: 4d65 7373 6167 6573 220a 2020 2020 7061  Messages".    pa
+00014eb0: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
+00014ec0: 2020 2263 6861 745f 6964 223a 2063 6861    "chat_id": cha
+00014ed0: 745f 6964 2c0a 2020 2020 2020 2020 2266  t_id,.        "f
+00014ee0: 726f 6d5f 6368 6174 5f69 6422 3a20 6672  rom_chat_id": fr
+00014ef0: 6f6d 5f63 6861 745f 6964 2c0a 2020 2020  om_chat_id,.    
+00014f00: 2020 2020 226d 6573 7361 6765 5f69 6473      "message_ids
+00014f10: 223a 206a 736f 6e2e 6475 6d70 7328 6d65  ": json.dumps(me
+00014f20: 7373 6167 655f 6964 7329 2c0a 2020 2020  ssage_ids),.    
+00014f30: 7d0a 2020 2020 6966 2064 6973 6162 6c65  }.    if disable
+00014f40: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
+00014f50: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00014f60: 2020 2070 6179 6c6f 6164 5b22 6469 7361     payload["disa
+00014f70: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00014f80: 225d 203d 2064 6973 6162 6c65 5f6e 6f74  "] = disable_not
+00014f90: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
+00014fa0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00014fb0: 6964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  id is not None:.
+00014fc0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00014fd0: 226d 6573 7361 6765 5f74 6872 6561 645f  "message_thread_
+00014fe0: 6964 225d 203d 206d 6573 7361 6765 5f74  id"] = message_t
+00014ff0: 6872 6561 645f 6964 0a20 2020 2069 6620  hread_id.    if 
+00015000: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+00015010: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00015020: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
+00015030: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
+00015040: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
+00015050: 740a 2020 2020 7265 7475 726e 205f 6d61  t.    return _ma
+00015060: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00015070: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00015080: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+00015090: 6465 6620 636f 7079 5f6d 6573 7361 6765  def copy_message
+000150a0: 7328 0a20 2020 2074 6f6b 656e 2c0a 2020  s(.    token,.  
+000150b0: 2020 6368 6174 5f69 642c 0a20 2020 2066    chat_id,.    f
+000150c0: 726f 6d5f 6368 6174 5f69 642c 0a20 2020  rom_chat_id,.   
+000150d0: 206d 6573 7361 6765 5f69 6473 2c0a 2020   message_ids,.  
+000150e0: 2020 6469 7361 626c 655f 6e6f 7469 6669    disable_notifi
+000150f0: 6361 7469 6f6e 3d4e 6f6e 652c 0a20 2020  cation=None,.   
+00015100: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00015110: 6964 3d4e 6f6e 652c 0a20 2020 2070 726f  id=None,.    pro
+00015120: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
+00015130: 652c 0a20 2020 2072 656d 6f76 655f 6361  e,.    remove_ca
+00015140: 7074 696f 6e3d 4e6f 6e65 2c0a 293a 0a20  ption=None,.):. 
+00015150: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00015160: 2263 6f70 794d 6573 7361 6765 7322 0a20  "copyMessages". 
+00015170: 2020 2070 6179 6c6f 6164 203d 207b 0a20     payload = {. 
+00015180: 2020 2020 2020 2022 6368 6174 5f69 6422         "chat_id"
+00015190: 3a20 6368 6174 5f69 642c 0a20 2020 2020  : chat_id,.     
+000151a0: 2020 2022 6672 6f6d 5f63 6861 745f 6964     "from_chat_id
+000151b0: 223a 2066 726f 6d5f 6368 6174 5f69 642c  ": from_chat_id,
+000151c0: 0a20 2020 2020 2020 2022 6d65 7373 6167  .        "messag
+000151d0: 655f 6964 7322 3a20 6a73 6f6e 2e64 756d  e_ids": json.dum
+000151e0: 7073 286d 6573 7361 6765 5f69 6473 292c  ps(message_ids),
+000151f0: 0a20 2020 207d 0a20 2020 2069 6620 6469  .    }.    if di
+00015200: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00015210: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
+00015220: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00015230: 2264 6973 6162 6c65 5f6e 6f74 6966 6963  "disable_notific
+00015240: 6174 696f 6e22 5d20 3d20 6469 7361 626c  ation"] = disabl
+00015250: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
+00015260: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00015270: 7265 6164 5f69 6420 6973 206e 6f74 204e  read_id is not N
+00015280: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00015290: 6c6f 6164 5b22 6d65 7373 6167 655f 7468  load["message_th
+000152a0: 7265 6164 5f69 6422 5d20 3d20 6d65 7373  read_id"] = mess
+000152b0: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
+000152c0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+000152d0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+000152e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000152f0: 645b 2270 726f 7465 6374 5f63 6f6e 7465  d["protect_conte
+00015300: 6e74 225d 203d 2070 726f 7465 6374 5f63  nt"] = protect_c
+00015310: 6f6e 7465 6e74 0a20 2020 2069 6620 7265  ontent.    if re
+00015320: 6d6f 7665 5f63 6170 7469 6f6e 2069 7320  move_caption is 
+00015330: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00015340: 2020 7061 796c 6f61 645b 2272 656d 6f76    payload["remov
+00015350: 655f 6361 7074 696f 6e22 5d20 3d20 7265  e_caption"] = re
+00015360: 6d6f 7665 5f63 6170 7469 6f6e 0a20 2020  move_caption.   
+00015370: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00015380: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00015390: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+000153a0: 7061 796c 6f61 6429 0a0a 0a64 6566 205f  payload)...def _
+000153b0: 636f 6e76 6572 745f 6c69 7374 5f6a 736f  convert_list_jso
+000153c0: 6e5f 7365 7269 616c 697a 6162 6c65 2872  n_serializable(r
+000153d0: 6573 756c 7473 293a 0a20 2020 2072 6574  esults):.    ret
+000153e0: 203d 2022 220a 2020 2020 666f 7220 7220   = "".    for r 
+000153f0: 696e 2072 6573 756c 7473 3a0a 2020 2020  in results:.    
+00015400: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00015410: 6528 722c 2074 7970 6573 2e4a 736f 6e53  e(r, types.JsonS
+00015420: 6572 6961 6c69 7a61 626c 6529 3a0a 2020  erializable):.  
+00015430: 2020 2020 2020 2020 2020 7265 7420 3d20            ret = 
+00015440: 7265 7420 2b20 722e 746f 5f6a 736f 6e28  ret + r.to_json(
+00015450: 2920 2b20 222c 220a 2020 2020 6966 206c  ) + ",".    if l
+00015460: 656e 2872 6574 2920 3e20 303a 0a20 2020  en(ret) > 0:.   
+00015470: 2020 2020 2072 6574 203d 2072 6574 5b3a       ret = ret[:
+00015480: 2d31 5d0a 2020 2020 7265 7475 726e 2022  -1].    return "
+00015490: 5b22 202b 2072 6574 202b 2022 5d22 0a0a  [" + ret + "]"..
+000154a0: 0a64 6566 205f 636f 6e76 6572 745f 6d61  .def _convert_ma
+000154b0: 726b 7570 286d 6172 6b75 7029 3a0a 2020  rkup(markup):.  
+000154c0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+000154d0: 6d61 726b 7570 2c20 7479 7065 732e 4a73  markup, types.Js
+000154e0: 6f6e 5365 7269 616c 697a 6162 6c65 293a  onSerializable):
+000154f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00015500: 6d61 726b 7570 2e74 6f5f 6a73 6f6e 2829  markup.to_json()
+00015510: 0a20 2020 2072 6574 7572 6e20 6d61 726b  .    return mark
+00015520: 7570 0a0a 0a64 6566 2063 6f6e 7665 7274  up...def convert
+00015530: 5f69 6e70 7574 5f6d 6564 6961 286d 6564  _input_media(med
+00015540: 6961 293a 0a20 2020 2069 6620 6973 696e  ia):.    if isin
+00015550: 7374 616e 6365 286d 6564 6961 2c20 7479  stance(media, ty
+00015560: 7065 732e 496e 7075 744d 6564 6961 293a  pes.InputMedia):
+00015570: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00015580: 6d65 6469 612e 636f 6e76 6572 745f 696e  media.convert_in
+00015590: 7075 745f 6d65 6469 6128 290a 2020 2020  put_media().    
+000155a0: 7265 7475 726e 204e 6f6e 652c 204e 6f6e  return None, Non
+000155b0: 650a 0a0a 6465 6620 636f 6e76 6572 745f  e...def convert_
+000155c0: 696e 7075 745f 6d65 6469 615f 6172 7261  input_media_arra
+000155d0: 7928 6172 7261 7929 3a0a 2020 2020 6d65  y(array):.    me
+000155e0: 6469 6120 3d20 5b5d 0a20 2020 2066 696c  dia = [].    fil
+000155f0: 6573 203d 207b 7d0a 2020 2020 666f 7220  es = {}.    for 
+00015600: 696e 7075 745f 6d65 6469 6120 696e 2061  input_media in a
+00015610: 7272 6179 3a0a 2020 2020 2020 2020 6966  rray:.        if
+00015620: 2069 7369 6e73 7461 6e63 6528 696e 7075   isinstance(inpu
+00015630: 745f 6d65 6469 612c 2074 7970 6573 2e49  t_media, types.I
+00015640: 6e70 7574 4d65 6469 6129 3a0a 2020 2020  nputMedia):.    
+00015650: 2020 2020 2020 2020 6d65 6469 615f 6469          media_di
+00015660: 6374 203d 2069 6e70 7574 5f6d 6564 6961  ct = input_media
+00015670: 2e74 6f5f 6469 6374 2829 0a20 2020 2020  .to_dict().     
+00015680: 2020 2020 2020 2069 6620 6d65 6469 615f         if media_
+00015690: 6469 6374 5b22 6d65 6469 6122 5d2e 7374  dict["media"].st
+000156a0: 6172 7473 7769 7468 2822 6174 7461 6368  artswith("attach
+000156b0: 3a2f 2f22 293a 0a20 2020 2020 2020 2020  ://"):.         
+000156c0: 2020 2020 2020 206b 6579 203d 206d 6564         key = med
+000156d0: 6961 5f64 6963 745b 226d 6564 6961 225d  ia_dict["media"]
+000156e0: 2e72 6570 6c61 6365 2822 6174 7461 6368  .replace("attach
+000156f0: 3a2f 2f22 2c20 2222 290a 2020 2020 2020  ://", "").      
+00015700: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
+00015710: 6b65 795d 203d 2069 6e70 7574 5f6d 6564  key] = input_med
+00015720: 6961 2e6d 6564 6961 0a20 2020 2020 2020  ia.media.       
+00015730: 2020 2020 206d 6564 6961 2e61 7070 656e       media.appen
+00015740: 6428 6d65 6469 615f 6469 6374 290a 2020  d(media_dict).  
+00015750: 2020 7265 7475 726e 206a 736f 6e2e 6475    return json.du
+00015760: 6d70 7328 6d65 6469 6129 2c20 6669 6c65  mps(media), file
+00015770: 730a 0a0a 6465 6620 5f6e 6f5f 656e 636f  s...def _no_enco
+00015780: 6465 2866 756e 6329 3a0a 2020 2020 6465  de(func):.    de
+00015790: 6620 7772 6170 7065 7228 6b65 792c 2076  f wrapper(key, v
+000157a0: 616c 293a 0a20 2020 2020 2020 2069 6620  al):.        if 
+000157b0: 6b65 7920 3d3d 2022 6669 6c65 6e61 6d65  key == "filename
+000157c0: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
+000157d0: 6574 7572 6e20 227b 307d 3d7b 317d 222e  eturn "{0}={1}".
+000157e0: 666f 726d 6174 286b 6579 2c20 7661 6c29  format(key, val)
+000157f0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00015800: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00015810: 6e20 6675 6e63 286b 6579 2c20 7661 6c29  n func(key, val)
+00015820: 0a0a 2020 2020 7265 7475 726e 2077 7261  ..    return wra
+00015830: 7070 6572 0a0a 0a63 6c61 7373 2041 7069  pper...class Api
+00015840: 4578 6365 7074 696f 6e28 4578 6365 7074  Exception(Except
+00015850: 696f 6e29 3a0a 2020 2020 2222 220a 2020  ion):.    """.  
+00015860: 2020 5468 6973 2063 6c61 7373 2072 6570    This class rep
+00015870: 7265 7365 6e74 7320 6120 6261 7365 2045  resents a base E
+00015880: 7863 6570 7469 6f6e 2074 6872 6f77 6e20  xception thrown 
+00015890: 7768 656e 2061 2063 616c 6c20 746f 2074  when a call to t
+000158a0: 6865 2054 656c 6567 7261 6d20 4150 4920  he Telegram API 
+000158b0: 6661 696c 732e 0a20 2020 2049 6e20 6164  fails..    In ad
+000158c0: 6469 7469 6f6e 2074 6f20 616e 2069 6e66  dition to an inf
+000158d0: 6f72 6d61 7469 7665 206d 6573 7361 6765  ormative message
+000158e0: 2c20 6974 2068 6173 2061 2060 6675 6e63  , it has a `func
+000158f0: 7469 6f6e 5f6e 616d 6560 2061 6e64 2061  tion_name` and a
+00015900: 2060 7265 7375 6c74 6020 6174 7472 6962   `result` attrib
+00015910: 7574 652c 2077 6869 6368 2072 6573 7065  ute, which respe
+00015920: 6374 6976 656c 790a 2020 2020 636f 6e74  ctively.    cont
+00015930: 6169 6e20 7468 6520 6e61 6d65 206f 6620  ain the name of 
+00015940: 7468 6520 6661 696c 6564 2066 756e 6374  the failed funct
+00015950: 696f 6e20 616e 6420 7468 6520 7265 7475  ion and the retu
+00015960: 726e 6564 2072 6573 756c 7420 7468 6174  rned result that
+00015970: 206d 6164 6520 7468 6520 6675 6e63 7469   made the functi
+00015980: 6f6e 2074 6f20 6265 2063 6f6e 7369 6465  on to be conside
+00015990: 7265 6420 2061 730a 2020 2020 6661 696c  red  as.    fail
+000159a0: 6564 2e0a 2020 2020 2222 220a 0a20 2020  ed..    """..   
+000159b0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+000159c0: 6c66 2c20 6d73 672c 2066 756e 6374 696f  lf, msg, functio
+000159d0: 6e5f 6e61 6d65 2c20 7265 7375 6c74 293a  n_name, result):
+000159e0: 0a20 2020 2020 2020 2073 7570 6572 2841  .        super(A
+000159f0: 7069 4578 6365 7074 696f 6e2c 2073 656c  piException, sel
+00015a00: 6629 2e5f 5f69 6e69 745f 5f28 0a20 2020  f).__init__(.   
+00015a10: 2020 2020 2020 2020 2022 4120 7265 7175           "A requ
+00015a20: 6573 7420 746f 2074 6865 2054 656c 6567  est to the Teleg
+00015a30: 7261 6d20 4150 4920 7761 7320 756e 7375  ram API was unsu
+00015a40: 6363 6573 7366 756c 2e20 7b30 7d22 2e66  ccessful. {0}".f
+00015a50: 6f72 6d61 7428 6d73 6729 0a20 2020 2020  ormat(msg).     
+00015a60: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+00015a70: 662e 6675 6e63 7469 6f6e 5f6e 616d 6520  f.function_name 
+00015a80: 3d20 6675 6e63 7469 6f6e 5f6e 616d 650a  = function_name.
+00015a90: 2020 2020 2020 2020 7365 6c66 2e72 6573          self.res
+00015aa0: 756c 7420 3d20 7265 7375 6c74 0a0a 0a63  ult = result...c
+00015ab0: 6c61 7373 2041 7069 4854 5450 4578 6365  lass ApiHTTPExce
+00015ac0: 7074 696f 6e28 4170 6945 7863 6570 7469  ption(ApiExcepti
+00015ad0: 6f6e 293a 0a20 2020 2022 2222 0a20 2020  on):.    """.   
+00015ae0: 2054 6869 7320 636c 6173 7320 7265 7072   This class repr
+00015af0: 6573 656e 7473 2061 6e20 4578 6365 7074  esents an Except
+00015b00: 696f 6e20 7468 726f 776e 2077 6865 6e20  ion thrown when 
+00015b10: 6120 6361 6c6c 2074 6f20 7468 650a 2020  a call to the.  
+00015b20: 2020 5465 6c65 6772 616d 2041 5049 2073    Telegram API s
+00015b30: 6572 7665 7220 7265 7475 726e 7320 4854  erver returns HT
+00015b40: 5450 2063 6f64 6520 7468 6174 2069 7320  TP code that is 
+00015b50: 6e6f 7420 3230 302e 0a20 2020 2022 2222  not 200..    """
+00015b60: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00015b70: 5f5f 2873 656c 662c 2066 756e 6374 696f  __(self, functio
+00015b80: 6e5f 6e61 6d65 2c20 7265 7375 6c74 293a  n_name, result):
+00015b90: 0a20 2020 2020 2020 2073 7570 6572 2841  .        super(A
+00015ba0: 7069 4854 5450 4578 6365 7074 696f 6e2c  piHTTPException,
+00015bb0: 2073 656c 6629 2e5f 5f69 6e69 745f 5f28   self).__init__(
+00015bc0: 0a20 2020 2020 2020 2020 2020 2022 5468  .            "Th
+00015bd0: 6520 7365 7276 6572 2072 6574 7572 6e65  e server returne
+00015be0: 6420 4854 5450 207b 307d 207b 317d 2e20  d HTTP {0} {1}. 
+00015bf0: 5265 7370 6f6e 7365 2062 6f64 793a 5c6e  Response body:\n
+00015c00: 5b7b 327d 5d22 2e66 6f72 6d61 7428 0a20  [{2}]".format(. 
+00015c10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00015c20: 6573 756c 742e 7374 6174 7573 5f63 6f64  esult.status_cod
+00015c30: 652c 2072 6573 756c 742e 7265 6173 6f6e  e, result.reason
+00015c40: 2c20 7265 7375 6c74 2e74 6578 742e 656e  , result.text.en
+00015c50: 636f 6465 2822 7574 6638 2229 0a20 2020  code("utf8").   
+00015c60: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+00015c70: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+00015c80: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
+00015c90: 2020 2072 6573 756c 742c 0a20 2020 2020     result,.     
+00015ca0: 2020 2029 0a0a 0a63 6c61 7373 2041 7069     )...class Api
+00015cb0: 496e 7661 6c69 644a 534f 4e45 7863 6570  InvalidJSONExcep
+00015cc0: 7469 6f6e 2841 7069 4578 6365 7074 696f  tion(ApiExceptio
+00015cd0: 6e29 3a0a 2020 2020 2222 220a 2020 2020  n):.    """.    
+00015ce0: 5468 6973 2063 6c61 7373 2072 6570 7265  This class repre
+00015cf0: 7365 6e74 7320 616e 2045 7863 6570 7469  sents an Excepti
+00015d00: 6f6e 2074 6872 6f77 6e20 7768 656e 2061  on thrown when a
+00015d10: 2063 616c 6c20 746f 2074 6865 0a20 2020   call to the.   
+00015d20: 2054 656c 6567 7261 6d20 4150 4920 7365   Telegram API se
+00015d30: 7276 6572 2072 6574 7572 6e73 2069 6e76  rver returns inv
+00015d40: 616c 6964 206a 736f 6e2e 0a20 2020 2022  alid json..    "
+00015d50: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00015d60: 6974 5f5f 2873 656c 662c 2066 756e 6374  it__(self, funct
+00015d70: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+00015d80: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
+00015d90: 2841 7069 496e 7661 6c69 644a 534f 4e45  (ApiInvalidJSONE
+00015da0: 7863 6570 7469 6f6e 2c20 7365 6c66 292e  xception, self).
+00015db0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+00015dc0: 2020 2020 2020 2254 6865 2073 6572 7665        "The serve
+00015dd0: 7220 7265 7475 726e 6564 2061 6e20 696e  r returned an in
+00015de0: 7661 6c69 6420 4a53 4f4e 2072 6573 706f  valid JSON respo
+00015df0: 6e73 652e 2052 6573 706f 6e73 6520 626f  nse. Response bo
+00015e00: 6479 3a5c 6e5b 7b30 7d5d 222e 666f 726d  dy:\n[{0}]".form
+00015e10: 6174 280a 2020 2020 2020 2020 2020 2020  at(.            
+00015e20: 2020 2020 7265 7375 6c74 2e74 6578 742e      result.text.
+00015e30: 656e 636f 6465 2822 7574 6638 2229 0a20  encode("utf8"). 
+00015e40: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+00015e50: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
+00015e60: 6f6e 5f6e 616d 652c 0a20 2020 2020 2020  on_name,.       
+00015e70: 2020 2020 2072 6573 756c 742c 0a20 2020       result,.   
+00015e80: 2020 2020 2029 0a0a 0a63 6c61 7373 2041       )...class A
+00015e90: 7069 5465 6c65 6772 616d 4578 6365 7074  piTelegramExcept
+00015ea0: 696f 6e28 4170 6945 7863 6570 7469 6f6e  ion(ApiException
+00015eb0: 293a 0a20 2020 2022 2222 0a20 2020 2054  ):.    """.    T
+00015ec0: 6869 7320 636c 6173 7320 7265 7072 6573  his class repres
+00015ed0: 656e 7473 2061 6e20 4578 6365 7074 696f  ents an Exceptio
+00015ee0: 6e20 7468 726f 776e 2077 6865 6e20 6120  n thrown when a 
+00015ef0: 5465 6c65 6772 616d 2041 5049 2072 6574  Telegram API ret
+00015f00: 7572 6e73 2065 7272 6f72 2063 6f64 652e  urns error code.
+00015f10: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+00015f20: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00015f30: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
+00015f40: 7265 7375 6c74 2c20 7265 7375 6c74 5f6a  result, result_j
+00015f50: 736f 6e29 3a0a 2020 2020 2020 2020 7375  son):.        su
+00015f60: 7065 7228 4170 6954 656c 6567 7261 6d45  per(ApiTelegramE
+00015f70: 7863 6570 7469 6f6e 2c20 7365 6c66 292e  xception, self).
+00015f80: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+00015f90: 2020 2020 2020 2245 7272 6f72 2063 6f64        "Error cod
+00015fa0: 653a 207b 307d 2e20 4465 7363 7269 7074  e: {0}. Descript
+00015fb0: 696f 6e3a 207b 317d 222e 666f 726d 6174  ion: {1}".format
+00015fc0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00015fd0: 2020 7265 7375 6c74 5f6a 736f 6e5b 2265    result_json["e
+00015fe0: 7272 6f72 5f63 6f64 6522 5d2c 2072 6573  rror_code"], res
+00015ff0: 756c 745f 6a73 6f6e 5b22 6465 7363 7269  ult_json["descri
+00016000: 7074 696f 6e22 5d0a 2020 2020 2020 2020  ption"].        
+00016010: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+00016020: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+00016030: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
+00016040: 7375 6c74 2c0a 2020 2020 2020 2020 290a  sult,.        ).
+00016050: 2020 2020 2020 2020 7365 6c66 2e72 6573          self.res
+00016060: 756c 745f 6a73 6f6e 203d 2072 6573 756c  ult_json = resul
+00016070: 745f 6a73 6f6e 0a20 2020 2020 2020 2073  t_json.        s
+00016080: 656c 662e 6572 726f 725f 636f 6465 203d  elf.error_code =
+00016090: 2072 6573 756c 745f 6a73 6f6e 5b22 6572   result_json["er
+000160a0: 726f 725f 636f 6465 225d 0a20 2020 2020  ror_code"].     
+000160b0: 2020 2073 656c 662e 6465 7363 7269 7074     self.descript
+000160c0: 696f 6e20 3d20 7265 7375 6c74 5f6a 736f  ion = result_jso
+000160d0: 6e5b 2264 6573 6372 6970 7469 6f6e 225d  n["description"]
+000160e0: 0a                                       .
```

### Comparing `telegram_bale_bot-4.17.3/telebot/async_telebot.py` & `telegram_bale_bot-4.18.3/telebot/async_telebot.py`

 * *Files 0% similar despite different names*

```diff
@@ -3407,29 +3407,29 @@
 
         """
         result = await asyncio_helper.get_user_profile_photos(
             self.token, user_id, offset, limit
         )
         return types.UserProfilePhotos.de_json(result)
 
-    async def get_chat(self, chat_id: Union[int, str]) -> types.Chat:
+    async def get_chat(self, chat_id: Union[int, str]) -> types.ChatFullInfo:
         """
         Use this method to get up to date information about the chat (current name of the user for one-on-one
         conversations, current username of a user, group or channel, etc.). Returns a Chat object on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getchat
 
         :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: Chat information
-        :rtype: :class:`telebot.types.Chat`
+        :rtype: :class:`telebot.types.ChatFullInfo`
         """
         result = await asyncio_helper.get_chat(self.token, chat_id)
-        return types.Chat.de_json(result)
+        return types.ChatFullInfo.de_json(result)
 
     async def leave_chat(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method for your bot to leave a group, supergroup or channel. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#leavechat
 
@@ -4540,17 +4540,15 @@
         allow_sending_without_reply: Optional[bool] = None,
         protect_content: Optional[bool] = None,
         message_thread_id: Optional[int] = None,
         reply_parameters: Optional[types.ReplyParameters] = None,
         business_connection_id: Optional[str] = None,
     ) -> types.Message:
         """
-        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message.
-        For this to work, your audio must be in an .OGG file encoded with OPUS (other formats may be sent as Audio or Document).
-        On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
+        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message. For this to work, your audio must be in an .OGG file encoded with OPUS, or in .MP3 format, or in .M4A format (other formats may be sent as Audio or Document). On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendvoice
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :param voice: Audio file to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended),
@@ -5595,15 +5593,15 @@
 
         :param latitude: Latitude of the location
         :type latitude: :obj:`float`
 
         :param longitude: Longitude of the location
         :type longitude: :obj:`float`
 
-        :param live_period: Period in seconds for which the location will be updated (see Live Locations, should be between 60 and 86400.
+        :param live_period: Period in seconds during which the location will be updated (see Live Locations, should be between 60 and 86400, or 0x7FFFFFFF for live locations that can be edited indefinitely.
         :type live_period: :obj:`int`
 
         :param reply_to_message_id: Deprecated - Use reply_parameters instead. If the message is a reply, ID of the original message
         :type reply_to_message_id: :obj:`int`
 
         :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
             or to force a reply from the user.
@@ -5701,25 +5699,24 @@
                 message_thread_id,
                 reply_parameters,
                 business_connection_id,
             )
         )
 
     async def edit_message_live_location(
-        self,
-        latitude: float,
-        longitude: float,
-        chat_id: Optional[Union[int, str]] = None,
-        message_id: Optional[int] = None,
-        inline_message_id: Optional[str] = None,
-        reply_markup: Optional[types.InlineKeyboardMarkup] = None,
-        timeout: Optional[int] = None,
-        horizontal_accuracy: Optional[float] = None,
-        heading: Optional[int] = None,
-        proximity_alert_radius: Optional[int] = None,
+            self, latitude: float, longitude: float, 
+            chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None,
+            inline_message_id: Optional[str]=None, 
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
+            timeout: Optional[int]=None,
+            horizontal_accuracy: Optional[float]=None, 
+            heading: Optional[int]=None, 
+            proximity_alert_radius: Optional[int]=None,
+            live_period: Optional[int]=None,
     ) -> types.Message:
         """
         Use this method to edit live location messages. A location can be edited until its live_period expires or editing is explicitly
             disabled by a call to stopMessageLiveLocation. On success, if the edited message is not an inline message, the edited Message
             is returned, otherwise True is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagelivelocation
@@ -5751,31 +5748,25 @@
 
         :param heading: Direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
         :type heading: :obj:`int`
 
         :param proximity_alert_radius: The maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
         :type proximity_alert_radius: :obj:`int`
 
+        :param live_period: New period in seconds during which the location can be updated, starting from the message send date. If 0x7FFFFFFF is specified, then the location can be updated forever. Otherwise, the new value must not exceed the current live_period by more than a day, and the live location expiration date must remain within the next 90 days. If not specified, then live_period remains unchanged
+        :type live_period: :obj:`int`
+
         :return: On success, if the edited message is not an inline message, the edited Message is returned, otherwise True is returned.
         :rtype: :class:`telebot.types.Message` or bool
         """
         return types.Message.de_json(
             await asyncio_helper.edit_message_live_location(
-                self.token,
-                latitude,
-                longitude,
-                chat_id,
-                message_id,
-                inline_message_id,
-                reply_markup,
-                timeout,
-                horizontal_accuracy,
-                heading,
-                proximity_alert_radius,
-            )
+                self.token, latitude, longitude, chat_id, message_id,
+                inline_message_id, reply_markup, timeout,
+                horizontal_accuracy, heading, proximity_alert_radius, live_period=live_period)
         )
 
     async def stop_message_live_location(
         self,
         chat_id: Optional[Union[int, str]] = None,
         message_id: Optional[int] = None,
         inline_message_id: Optional[str] = None,
@@ -7913,52 +7904,50 @@
             send_email_to_provider,
             is_flexible,
         )
         return result
 
     # noinspection PyShadowingBuiltins
     async def send_poll(
-        self,
-        chat_id: Union[int, str],
-        question: str,
-        options: List[str],
-        is_anonymous: Optional[bool] = None,
-        type: Optional[str] = None,
-        allows_multiple_answers: Optional[bool] = None,
-        correct_option_id: Optional[int] = None,
-        explanation: Optional[str] = None,
-        explanation_parse_mode: Optional[str] = None,
-        open_period: Optional[int] = None,
-        close_date: Optional[Union[int, datetime]] = None,
-        is_closed: Optional[bool] = None,
-        disable_notification: Optional[bool] = False,
-        reply_to_message_id: Optional[int] = None,
-        reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
-        allow_sending_without_reply: Optional[bool] = None,
-        timeout: Optional[int] = None,
-        explanation_entities: Optional[List[types.MessageEntity]] = None,
-        protect_content: Optional[bool] = None,
-        message_thread_id: Optional[int] = None,
-        reply_parameters: Optional[types.ReplyParameters] = None,
-        business_connection_id: Optional[str] = None,
+            self, chat_id: Union[int, str], question: str, options: List[InputPollOption],
+            is_anonymous: Optional[bool]=None, type: Optional[str]=None, 
+            allows_multiple_answers: Optional[bool]=None, 
+            correct_option_id: Optional[int]=None,
+            explanation: Optional[str]=None, 
+            explanation_parse_mode: Optional[str]=None, 
+            open_period: Optional[int]=None, 
+            close_date: Optional[Union[int, datetime]]=None, 
+            is_closed: Optional[bool]=None,
+            disable_notification: Optional[bool]=False,
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            allow_sending_without_reply: Optional[bool]=None, 
+            timeout: Optional[int]=None,
+            explanation_entities: Optional[List[types.MessageEntity]]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None,
+            reply_parameters: Optional[types.ReplyParameters]=None,
+            business_connection_id: Optional[str]=None,
+            question_parse_mode: Optional[str] = None,
+            question_entities: Optional[List[types.MessageEntity]] = None,
     ) -> types.Message:
         """
         Use this method to send a native poll.
         On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendpoll
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
         :type chat_id: :obj:`int` | :obj:`str`
 
         :param question: Poll question, 1-300 characters
         :type question: :obj:`str`
 
-        :param options: A JSON-serialized list of answer options, 2-10 strings 1-100 characters each
-        :type options: :obj:`list` of :obj:`str`
+        :param options: A JSON-serialized list of 2-10 answer options
+        :type options: :obj:`list` of :obj:`InputPollOption`
 
         :param is_anonymous: True, if the poll needs to be anonymous, defaults to True
         :type is_anonymous: :obj:`bool`
 
         :param type: Poll type, “quiz” or “regular”, defaults to “regular”
         :type type: :obj:`str`
 
@@ -8013,31 +8002,28 @@
 
         :param reply_parameters: Reply parameters.
         :type reply_parameters: :class:`telebot.types.ReplyParameters`
 
         :param business_connection_id: Identifier of the business connection to send the message through
         :type business_connection_id: :obj:`str`
 
+        :param question_parse_mode: Mode for parsing entities in the question. See formatting options for more details. Currently, only custom emoji entities are allowed
+        :type question_parse_mode: :obj:`str`
+
+        :param question_entities: A JSON-serialized list of special entities that appear in the poll question. It can be specified instead of question_parse_mode
+        :type question_entities: :obj:`list` of :obj:`MessageEntity`
+
         :return: On success, the sent Message is returned.
         :rtype: :obj:`types.Message`
         """
-        disable_notification = (
-            self.disable_notification
-            if (disable_notification is None)
-            else disable_notification
-        )
-        protect_content = (
-            self.protect_content if (protect_content is None) else protect_content
-        )
-
-        explanation_parse_mode = (
-            self.parse_mode
-            if (explanation_parse_mode is None)
-            else explanation_parse_mode
-        )
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        
+        explanation_parse_mode = self.parse_mode if (explanation_parse_mode is None) else explanation_parse_mode
+        question_parse_mode = self.parse_mode if (question_parse_mode is None) else question_parse_mode
 
         if allow_sending_without_reply is not None:
             logger.warning(
                 "The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead."
             )
 
         if reply_to_message_id:
@@ -8068,14 +8054,25 @@
             )
 
         if isinstance(question, types.Poll):
             raise RuntimeError(
                 "The send_poll signature was changed, please see send_poll function details."
             )
 
+        if options and (not isinstance(options[0], types.InputPollOption)):
+            # show a deprecation warning
+            logger.warning("The parameter 'options' changed, should be List[types.InputPollOption], other types are deprecated.")
+            # convert options to appropriate type
+            if isinstance(options[0], str):
+                options = [types.InputPollOption(option) for option in options]
+            elif isinstance(options[0], types.PollOption):
+                options = [types.InputPollOption(option.text, text_entities=option.text_entities) for option in options]
+            else:
+                raise RuntimeError("Type of 'options' items is unknown. Options should be List[types.InputPollOption], other types are deprecated.")
+
         return types.Message.de_json(
             await asyncio_helper.send_poll(
                 self.token,
                 chat_id,
                 question,
                 options,
                 is_anonymous,
@@ -8084,23 +8081,16 @@
                 correct_option_id,
                 explanation,
                 explanation_parse_mode,
                 open_period,
                 close_date,
                 is_closed,
                 disable_notification,
-                reply_markup,
-                timeout,
-                explanation_entities,
-                protect_content,
-                message_thread_id,
-                reply_parameters,
-                business_connection_id,
-            )
-        )
+                reply_markup, timeout, explanation_entities, protect_content, message_thread_id, reply_parameters,
+                business_connection_id, question_parse_mode=question_parse_mode, question_entities=question_entities))
 
     async def stop_poll(
         self,
         chat_id: Union[int, str],
         message_id: int,
         reply_markup: Optional[types.InlineKeyboardMarkup] = None,
     ) -> types.Poll:
```

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_filters.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_filters.py`

 * *Files 2% similar despite different names*

```diff
@@ -23,15 +23,15 @@
             def check(self, message):
                 return message.forward_date is not None
 
     """
 
     key: str = None
 
-    async def check(self, message):
+    async def check(self, message) -> bool:
         """
         Perform a check.
         """
         pass
 
 
 class AdvancedCustomFilter(ABC):
```

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_handler_backends.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_handler_backends.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_helper.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_helper.py`

 * *Files 0% similar despite different names*

```diff
@@ -1422,4297 +1422,4287 @@
 000058d0: 6374 696f 6e5f 6964 0a20 2020 2072 6574  ction_id.    ret
 000058e0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
 000058f0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
 00005900: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
 00005910: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
 00005920: 6173 796e 6320 6465 6620 6564 6974 5f6d  async def edit_m
 00005930: 6573 7361 6765 5f6c 6976 655f 6c6f 6361  essage_live_loca
-00005940: 7469 6f6e 280a 2020 2020 746f 6b65 6e2c  tion(.    token,
-00005950: 0a20 2020 206c 6174 6974 7564 652c 0a20  .    latitude,. 
-00005960: 2020 206c 6f6e 6769 7475 6465 2c0a 2020     longitude,.  
-00005970: 2020 6368 6174 5f69 643d 4e6f 6e65 2c0a    chat_id=None,.
-00005980: 2020 2020 6d65 7373 6167 655f 6964 3d4e      message_id=N
-00005990: 6f6e 652c 0a20 2020 2069 6e6c 696e 655f  one,.    inline_
-000059a0: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
-000059b0: 0a20 2020 2072 6570 6c79 5f6d 6172 6b75  .    reply_marku
-000059c0: 703d 4e6f 6e65 2c0a 2020 2020 7469 6d65  p=None,.    time
-000059d0: 6f75 743d 4e6f 6e65 2c0a 2020 2020 686f  out=None,.    ho
-000059e0: 7269 7a6f 6e74 616c 5f61 6363 7572 6163  rizontal_accurac
-000059f0: 793d 4e6f 6e65 2c0a 2020 2020 6865 6164  y=None,.    head
-00005a00: 696e 673d 4e6f 6e65 2c0a 2020 2020 7072  ing=None,.    pr
-00005a10: 6f78 696d 6974 795f 616c 6572 745f 7261  oximity_alert_ra
-00005a20: 6469 7573 3d4e 6f6e 652c 0a29 3a0a 2020  dius=None,.):.  
-00005a30: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00005a40: 2265 6469 744d 6573 7361 6765 4c69 7665  "editMessageLive
-00005a50: 4c6f 6361 7469 6f6e 220a 2020 2020 7061  Location".    pa
-00005a60: 796c 6f61 6420 3d20 7b22 6c61 7469 7475  yload = {"latitu
-00005a70: 6465 223a 206c 6174 6974 7564 652c 2022  de": latitude, "
-00005a80: 6c6f 6e67 6974 7564 6522 3a20 6c6f 6e67  longitude": long
-00005a90: 6974 7564 657d 0a20 2020 2069 6620 6368  itude}.    if ch
-00005aa0: 6174 5f69 643a 0a20 2020 2020 2020 2070  at_id:.        p
-00005ab0: 6179 6c6f 6164 5b22 6368 6174 5f69 6422  ayload["chat_id"
-00005ac0: 5d20 3d20 6368 6174 5f69 640a 2020 2020  ] = chat_id.    
-00005ad0: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
-00005ae0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00005af0: 6d65 7373 6167 655f 6964 225d 203d 206d  message_id"] = m
-00005b00: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-00005b10: 2068 6f72 697a 6f6e 7461 6c5f 6163 6375   horizontal_accu
-00005b20: 7261 6379 3a0a 2020 2020 2020 2020 7061  racy:.        pa
-00005b30: 796c 6f61 645b 2268 6f72 697a 6f6e 7461  yload["horizonta
-00005b40: 6c5f 6163 6375 7261 6379 225d 203d 2068  l_accuracy"] = h
-00005b50: 6f72 697a 6f6e 7461 6c5f 6163 6375 7261  orizontal_accura
-00005b60: 6379 0a20 2020 2069 6620 6865 6164 696e  cy.    if headin
-00005b70: 673a 0a20 2020 2020 2020 2070 6179 6c6f  g:.        paylo
-00005b80: 6164 5b22 6865 6164 696e 6722 5d20 3d20  ad["heading"] = 
-00005b90: 6865 6164 696e 670a 2020 2020 6966 2070  heading.    if p
-00005ba0: 726f 7869 6d69 7479 5f61 6c65 7274 5f72  roximity_alert_r
-00005bb0: 6164 6975 733a 0a20 2020 2020 2020 2070  adius:.        p
-00005bc0: 6179 6c6f 6164 5b22 7072 6f78 696d 6974  ayload["proximit
-00005bd0: 795f 616c 6572 745f 7261 6469 7573 225d  y_alert_radius"]
-00005be0: 203d 2070 726f 7869 6d69 7479 5f61 6c65   = proximity_ale
-00005bf0: 7274 5f72 6164 6975 730a 2020 2020 6966  rt_radius.    if
-00005c00: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-00005c10: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00005c20: 6f61 645b 2269 6e6c 696e 655f 6d65 7373  oad["inline_mess
-00005c30: 6167 655f 6964 225d 203d 2069 6e6c 696e  age_id"] = inlin
-00005c40: 655f 6d65 7373 6167 655f 6964 0a20 2020  e_message_id.   
-00005c50: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
-00005c60: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005c70: 645b 2272 6570 6c79 5f6d 6172 6b75 7022  d["reply_markup"
-00005c80: 5d20 3d20 6177 6169 7420 5f63 6f6e 7665  ] = await _conve
-00005c90: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
-00005ca0: 6d61 726b 7570 290a 2020 2020 6966 2074  markup).    if t
-00005cb0: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
-00005cc0: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
-00005cd0: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
-00005ce0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00005cf0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00005d00: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00005d10: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00005d20: 290a 0a0a 6173 796e 6320 6465 6620 7374  )...async def st
-00005d30: 6f70 5f6d 6573 7361 6765 5f6c 6976 655f  op_message_live_
-00005d40: 6c6f 6361 7469 6f6e 280a 2020 2020 746f  location(.    to
-00005d50: 6b65 6e2c 0a20 2020 2063 6861 745f 6964  ken,.    chat_id
-00005d60: 3d4e 6f6e 652c 0a20 2020 206d 6573 7361  =None,.    messa
-00005d70: 6765 5f69 643d 4e6f 6e65 2c0a 2020 2020  ge_id=None,.    
-00005d80: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-00005d90: 643d 4e6f 6e65 2c0a 2020 2020 7265 706c  d=None,.    repl
-00005da0: 795f 6d61 726b 7570 3d4e 6f6e 652c 0a20  y_markup=None,. 
-00005db0: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
-00005dc0: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
-00005dd0: 726c 203d 2072 2273 746f 704d 6573 7361  rl = r"stopMessa
-00005de0: 6765 4c69 7665 4c6f 6361 7469 6f6e 220a  geLiveLocation".
-00005df0: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
-00005e00: 0a20 2020 2069 6620 6368 6174 5f69 643a  .    if chat_id:
-00005e10: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00005e20: 5b22 6368 6174 5f69 6422 5d20 3d20 6368  ["chat_id"] = ch
-00005e30: 6174 5f69 640a 2020 2020 6966 206d 6573  at_id.    if mes
-00005e40: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
-00005e50: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
-00005e60: 655f 6964 225d 203d 206d 6573 7361 6765  e_id"] = message
-00005e70: 5f69 640a 2020 2020 6966 2069 6e6c 696e  _id.    if inlin
-00005e80: 655f 6d65 7373 6167 655f 6964 3a0a 2020  e_message_id:.  
-00005e90: 2020 2020 2020 7061 796c 6f61 645b 2269        payload["i
-00005ea0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-00005eb0: 225d 203d 2069 6e6c 696e 655f 6d65 7373  "] = inline_mess
-00005ec0: 6167 655f 6964 0a20 2020 2069 6620 7265  age_id.    if re
-00005ed0: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-00005ee0: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
-00005ef0: 6c79 5f6d 6172 6b75 7022 5d20 3d20 6177  ly_markup"] = aw
-00005f00: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
-00005f10: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-00005f20: 290a 2020 2020 6966 2074 696d 656f 7574  ).    if timeout
-00005f30: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005f40: 645b 2274 696d 656f 7574 225d 203d 2074  d["timeout"] = t
-00005f50: 696d 656f 7574 0a20 2020 2072 6574 7572  imeout.    retur
-00005f60: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-00005f70: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00005f80: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00005f90: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6173  ms=payload)...as
-00005fa0: 796e 6320 6465 6620 7365 6e64 5f76 656e  ync def send_ven
-00005fb0: 7565 280a 2020 2020 746f 6b65 6e2c 0a20  ue(.    token,. 
-00005fc0: 2020 2063 6861 745f 6964 2c0a 2020 2020     chat_id,.    
-00005fd0: 6c61 7469 7475 6465 2c0a 2020 2020 6c6f  latitude,.    lo
-00005fe0: 6e67 6974 7564 652c 0a20 2020 2074 6974  ngitude,.    tit
-00005ff0: 6c65 2c0a 2020 2020 6164 6472 6573 732c  le,.    address,
-00006000: 0a20 2020 2066 6f75 7273 7175 6172 655f  .    foursquare_
-00006010: 6964 3d4e 6f6e 652c 0a20 2020 2066 6f75  id=None,.    fou
-00006020: 7273 7175 6172 655f 7479 7065 3d4e 6f6e  rsquare_type=Non
-00006030: 652c 0a20 2020 2064 6973 6162 6c65 5f6e  e,.    disable_n
-00006040: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
-00006050: 2c0a 2020 2020 7265 706c 795f 6d61 726b  ,.    reply_mark
-00006060: 7570 3d4e 6f6e 652c 0a20 2020 2074 696d  up=None,.    tim
-00006070: 656f 7574 3d4e 6f6e 652c 0a20 2020 2067  eout=None,.    g
-00006080: 6f6f 676c 655f 706c 6163 655f 6964 3d4e  oogle_place_id=N
-00006090: 6f6e 652c 0a20 2020 2067 6f6f 676c 655f  one,.    google_
-000060a0: 706c 6163 655f 7479 7065 3d4e 6f6e 652c  place_type=None,
-000060b0: 0a20 2020 2070 726f 7465 6374 5f63 6f6e  .    protect_con
-000060c0: 7465 6e74 3d4e 6f6e 652c 0a20 2020 206d  tent=None,.    m
-000060d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000060e0: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
-000060f0: 5f70 6172 616d 6574 6572 733d 4e6f 6e65  _parameters=None
-00006100: 2c0a 2020 2020 6275 7369 6e65 7373 5f63  ,.    business_c
-00006110: 6f6e 6e65 6374 696f 6e5f 6964 3d4e 6f6e  onnection_id=Non
-00006120: 652c 0a29 3a0a 2020 2020 6d65 7468 6f64  e,.):.    method
-00006130: 5f75 726c 203d 2072 2273 656e 6456 656e  _url = r"sendVen
-00006140: 7565 220a 2020 2020 7061 796c 6f61 6420  ue".    payload 
-00006150: 3d20 7b0a 2020 2020 2020 2020 2263 6861  = {.        "cha
-00006160: 745f 6964 223a 2063 6861 745f 6964 2c0a  t_id": chat_id,.
-00006170: 2020 2020 2020 2020 226c 6174 6974 7564          "latitud
-00006180: 6522 3a20 6c61 7469 7475 6465 2c0a 2020  e": latitude,.  
-00006190: 2020 2020 2020 226c 6f6e 6769 7475 6465        "longitude
-000061a0: 223a 206c 6f6e 6769 7475 6465 2c0a 2020  ": longitude,.  
-000061b0: 2020 2020 2020 2274 6974 6c65 223a 2074        "title": t
-000061c0: 6974 6c65 2c0a 2020 2020 2020 2020 2261  itle,.        "a
-000061d0: 6464 7265 7373 223a 2061 6464 7265 7373  ddress": address
-000061e0: 2c0a 2020 2020 7d0a 2020 2020 6966 2066  ,.    }.    if f
-000061f0: 6f75 7273 7175 6172 655f 6964 3a0a 2020  oursquare_id:.  
-00006200: 2020 2020 2020 7061 796c 6f61 645b 2266        payload["f
-00006210: 6f75 7273 7175 6172 655f 6964 225d 203d  oursquare_id"] =
-00006220: 2066 6f75 7273 7175 6172 655f 6964 0a20   foursquare_id. 
-00006230: 2020 2069 6620 666f 7572 7371 7561 7265     if foursquare
-00006240: 5f74 7970 653a 0a20 2020 2020 2020 2070  _type:.        p
-00006250: 6179 6c6f 6164 5b22 666f 7572 7371 7561  ayload["foursqua
-00006260: 7265 5f74 7970 6522 5d20 3d20 666f 7572  re_type"] = four
-00006270: 7371 7561 7265 5f74 7970 650a 2020 2020  square_type.    
-00006280: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-00006290: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-000062a0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-000062b0: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
-000062c0: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
-000062d0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-000062e0: 696f 6e0a 2020 2020 6966 2072 6570 6c79  ion.    if reply
-000062f0: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
-00006300: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00006310: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
-00006320: 7061 7261 6d65 7465 7273 225d 203d 206a  parameters"] = j
-00006330: 736f 6e2e 6475 6d70 7328 7265 706c 795f  son.dumps(reply_
-00006340: 7061 7261 6d65 7465 7273 2e74 6f5f 6469  parameters.to_di
-00006350: 6374 2829 290a 2020 2020 6966 2072 6570  ct()).    if rep
-00006360: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-00006370: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
-00006380: 795f 6d61 726b 7570 225d 203d 2061 7761  y_markup"] = awa
-00006390: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
-000063a0: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-000063b0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-000063c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000063d0: 5b22 7469 6d65 6f75 7422 5d20 3d20 7469  ["timeout"] = ti
-000063e0: 6d65 6f75 740a 2020 2020 6966 2067 6f6f  meout.    if goo
-000063f0: 676c 655f 706c 6163 655f 6964 3a0a 2020  gle_place_id:.  
-00006400: 2020 2020 2020 7061 796c 6f61 645b 2267        payload["g
-00006410: 6f6f 676c 655f 706c 6163 655f 6964 225d  oogle_place_id"]
-00006420: 203d 2067 6f6f 676c 655f 706c 6163 655f   = google_place_
-00006430: 6964 0a20 2020 2069 6620 676f 6f67 6c65  id.    if google
-00006440: 5f70 6c61 6365 5f74 7970 653a 0a20 2020  _place_type:.   
-00006450: 2020 2020 2070 6179 6c6f 6164 5b22 676f       payload["go
-00006460: 6f67 6c65 5f70 6c61 6365 5f74 7970 6522  ogle_place_type"
-00006470: 5d20 3d20 676f 6f67 6c65 5f70 6c61 6365  ] = google_place
-00006480: 5f74 7970 650a 2020 2020 6966 2070 726f  _type.    if pro
-00006490: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-000064a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000064b0: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
-000064c0: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
-000064d0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-000064e0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-000064f0: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
-00006500: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
-00006510: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
-00006520: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00006530: 640a 2020 2020 6966 2062 7573 696e 6573  d.    if busines
-00006540: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
-00006550: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006560: 5b22 6275 7369 6e65 7373 5f63 6f6e 6e65  ["business_conne
-00006570: 6374 696f 6e5f 6964 225d 203d 2062 7573  ction_id"] = bus
-00006580: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00006590: 5f69 640a 2020 2020 7265 7475 726e 2061  _id.    return a
-000065a0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-000065b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-000065c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-000065d0: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-000065e0: 2064 6566 2073 656e 645f 636f 6e74 6163   def send_contac
-000065f0: 7428 0a20 2020 2074 6f6b 656e 2c0a 2020  t(.    token,.  
-00006600: 2020 6368 6174 5f69 642c 0a20 2020 2070    chat_id,.    p
-00006610: 686f 6e65 5f6e 756d 6265 722c 0a20 2020  hone_number,.   
-00006620: 2066 6972 7374 5f6e 616d 652c 0a20 2020   first_name,.   
-00006630: 206c 6173 745f 6e61 6d65 3d4e 6f6e 652c   last_name=None,
-00006640: 0a20 2020 2076 6361 7264 3d4e 6f6e 652c  .    vcard=None,
-00006650: 0a20 2020 2064 6973 6162 6c65 5f6e 6f74  .    disable_not
-00006660: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c0a  ification=None,.
-00006670: 2020 2020 7265 706c 795f 6d61 726b 7570      reply_markup
-00006680: 3d4e 6f6e 652c 0a20 2020 2074 696d 656f  =None,.    timeo
-00006690: 7574 3d4e 6f6e 652c 0a20 2020 2070 726f  ut=None,.    pro
-000066a0: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-000066b0: 652c 0a20 2020 206d 6573 7361 6765 5f74  e,.    message_t
-000066c0: 6872 6561 645f 6964 3d4e 6f6e 652c 0a20  hread_id=None,. 
-000066d0: 2020 2072 6570 6c79 5f70 6172 616d 6574     reply_paramet
-000066e0: 6572 733d 4e6f 6e65 2c0a 2020 2020 6275  ers=None,.    bu
-000066f0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00006700: 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a 2020  n_id=None,.):.  
-00006710: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00006720: 2273 656e 6443 6f6e 7461 6374 220a 2020  "sendContact".  
-00006730: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
-00006740: 2020 2020 2020 2263 6861 745f 6964 223a        "chat_id":
-00006750: 2063 6861 745f 6964 2c0a 2020 2020 2020   chat_id,.      
-00006760: 2020 2270 686f 6e65 5f6e 756d 6265 7222    "phone_number"
-00006770: 3a20 7068 6f6e 655f 6e75 6d62 6572 2c0a  : phone_number,.
-00006780: 2020 2020 2020 2020 2266 6972 7374 5f6e          "first_n
-00006790: 616d 6522 3a20 6669 7273 745f 6e61 6d65  ame": first_name
-000067a0: 2c0a 2020 2020 7d0a 2020 2020 6966 206c  ,.    }.    if l
-000067b0: 6173 745f 6e61 6d65 3a0a 2020 2020 2020  ast_name:.      
-000067c0: 2020 7061 796c 6f61 645b 226c 6173 745f    payload["last_
-000067d0: 6e61 6d65 225d 203d 206c 6173 745f 6e61  name"] = last_na
-000067e0: 6d65 0a20 2020 2069 6620 7663 6172 643a  me.    if vcard:
-000067f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006800: 5b22 7663 6172 6422 5d20 3d20 7663 6172  ["vcard"] = vcar
-00006810: 640a 2020 2020 6966 2064 6973 6162 6c65  d.    if disable
-00006820: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
-00006830: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00006840: 2020 2070 6179 6c6f 6164 5b22 6469 7361     payload["disa
-00006850: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00006860: 225d 203d 2064 6973 6162 6c65 5f6e 6f74  "] = disable_not
-00006870: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
-00006880: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-00006890: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-000068a0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000068b0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-000068c0: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
-000068d0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-000068e0: 2e74 6f5f 6469 6374 2829 290a 2020 2020  .to_dict()).    
-000068f0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-00006900: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006910: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
-00006920: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
-00006930: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
-00006940: 6172 6b75 7029 0a20 2020 2069 6620 7469  arkup).    if ti
-00006950: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-00006960: 6179 6c6f 6164 5b22 7469 6d65 6f75 7422  ayload["timeout"
-00006970: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-00006980: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
-00006990: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-000069a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000069b0: 2270 726f 7465 6374 5f63 6f6e 7465 6e74  "protect_content
-000069c0: 225d 203d 2070 726f 7465 6374 5f63 6f6e  "] = protect_con
-000069d0: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
-000069e0: 6167 655f 7468 7265 6164 5f69 643a 0a20  age_thread_id:. 
-000069f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00006a00: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00006a10: 6422 5d20 3d20 6d65 7373 6167 655f 7468  d"] = message_th
-00006a20: 7265 6164 5f69 640a 2020 2020 6966 2062  read_id.    if b
-00006a30: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-00006a40: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
-00006a50: 6179 6c6f 6164 5b22 6275 7369 6e65 7373  ayload["business
-00006a60: 5f63 6f6e 6e65 6374 696f 6e5f 6964 225d  _connection_id"]
-00006a70: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
-00006a80: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
-00006a90: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-00006aa0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-00006ab0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00006ac0: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-00006ad0: 0a61 7379 6e63 2064 6566 2073 656e 645f  .async def send_
-00006ae0: 6368 6174 5f61 6374 696f 6e28 0a20 2020  chat_action(.   
-00006af0: 2074 6f6b 656e 2c0a 2020 2020 6368 6174   token,.    chat
-00006b00: 5f69 642c 0a20 2020 2061 6374 696f 6e2c  _id,.    action,
-00006b10: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
-00006b20: 652c 0a20 2020 206d 6573 7361 6765 5f74  e,.    message_t
-00006b30: 6872 6561 645f 6964 3d4e 6f6e 652c 0a20  hread_id=None,. 
-00006b40: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
-00006b50: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
-00006b60: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00006b70: 6c20 3d20 7222 7365 6e64 4368 6174 4163  l = r"sendChatAc
-00006b80: 7469 6f6e 220a 2020 2020 7061 796c 6f61  tion".    payloa
-00006b90: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-00006ba0: 6368 6174 5f69 642c 2022 6163 7469 6f6e  chat_id, "action
-00006bb0: 223a 2061 6374 696f 6e7d 0a20 2020 2069  ": action}.    i
-00006bc0: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00006bd0: 2020 2070 6179 6c6f 6164 5b22 7469 6d65     payload["time
-00006be0: 6f75 7422 5d20 3d20 7469 6d65 6f75 740a  out"] = timeout.
-00006bf0: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
-00006c00: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
-00006c10: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
-00006c20: 6765 5f74 6872 6561 645f 6964 225d 203d  ge_thread_id"] =
-00006c30: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00006c40: 6964 0a20 2020 2069 6620 6275 7369 6e65  id.    if busine
-00006c50: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-00006c60: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00006c70: 645b 2262 7573 696e 6573 735f 636f 6e6e  d["business_conn
-00006c80: 6563 7469 6f6e 5f69 6422 5d20 3d20 6275  ection_id"] = bu
-00006c90: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00006ca0: 6e5f 6964 0a20 2020 2072 6574 7572 6e20  n_id.    return 
-00006cb0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-00006cc0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00006cd0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00006ce0: 3d70 6179 6c6f 6164 290a 0a0a 6173 796e  =payload)...asyn
-00006cf0: 6320 6465 6620 7365 6e64 5f76 6964 656f  c def send_video
-00006d00: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-00006d10: 2063 6861 745f 6964 2c0a 2020 2020 6461   chat_id,.    da
-00006d20: 7461 2c0a 2020 2020 6475 7261 7469 6f6e  ta,.    duration
-00006d30: 3d4e 6f6e 652c 0a20 2020 2063 6170 7469  =None,.    capti
-00006d40: 6f6e 3d4e 6f6e 652c 0a20 2020 2072 6570  on=None,.    rep
-00006d50: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-00006d60: 2020 2020 7061 7273 655f 6d6f 6465 3d4e      parse_mode=N
-00006d70: 6f6e 652c 0a20 2020 2073 7570 706f 7274  one,.    support
-00006d80: 735f 7374 7265 616d 696e 673d 4e6f 6e65  s_streaming=None
-00006d90: 2c0a 2020 2020 6469 7361 626c 655f 6e6f  ,.    disable_no
-00006da0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00006db0: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
-00006dc0: 652c 0a20 2020 2074 6875 6d62 6e61 696c  e,.    thumbnail
-00006dd0: 3d4e 6f6e 652c 0a20 2020 2077 6964 7468  =None,.    width
-00006de0: 3d4e 6f6e 652c 0a20 2020 2068 6569 6768  =None,.    heigh
-00006df0: 743d 4e6f 6e65 2c0a 2020 2020 6361 7074  t=None,.    capt
-00006e00: 696f 6e5f 656e 7469 7469 6573 3d4e 6f6e  ion_entities=Non
-00006e10: 652c 0a20 2020 2070 726f 7465 6374 5f63  e,.    protect_c
-00006e20: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
-00006e30: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00006e40: 6964 3d4e 6f6e 652c 0a20 2020 2068 6173  id=None,.    has
-00006e50: 5f73 706f 696c 6572 3d4e 6f6e 652c 0a20  _spoiler=None,. 
-00006e60: 2020 2072 6570 6c79 5f70 6172 616d 6574     reply_paramet
-00006e70: 6572 733d 4e6f 6e65 2c0a 2020 2020 6275  ers=None,.    bu
-00006e80: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00006e90: 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a 2020  n_id=None,.):.  
-00006ea0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00006eb0: 2273 656e 6456 6964 656f 220a 2020 2020  "sendVideo".    
-00006ec0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-00006ed0: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
-00006ee0: 2020 2066 696c 6573 203d 204e 6f6e 650a     files = None.
-00006ef0: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
-00006f00: 6973 5f73 7472 696e 6728 6461 7461 293a  is_string(data):
-00006f10: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
-00006f20: 207b 2276 6964 656f 223a 2064 6174 617d   {"video": data}
-00006f30: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00006f40: 2020 2070 6179 6c6f 6164 5b22 7669 6465     payload["vide
-00006f50: 6f22 5d20 3d20 6461 7461 0a20 2020 2069  o"] = data.    i
-00006f60: 6620 6475 7261 7469 6f6e 3a0a 2020 2020  f duration:.    
-00006f70: 2020 2020 7061 796c 6f61 645b 2264 7572      payload["dur
-00006f80: 6174 696f 6e22 5d20 3d20 6475 7261 7469  ation"] = durati
-00006f90: 6f6e 0a20 2020 2069 6620 6361 7074 696f  on.    if captio
-00006fa0: 6e3a 0a20 2020 2020 2020 2070 6179 6c6f  n:.        paylo
-00006fb0: 6164 5b22 6361 7074 696f 6e22 5d20 3d20  ad["caption"] = 
-00006fc0: 6361 7074 696f 6e0a 2020 2020 6966 2072  caption.    if r
-00006fd0: 6570 6c79 5f70 6172 616d 6574 6572 7320  eply_parameters 
-00006fe0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00006ff0: 2020 2020 2070 6179 6c6f 6164 5b22 7265       payload["re
-00007000: 706c 795f 7061 7261 6d65 7465 7273 225d  ply_parameters"]
-00007010: 203d 206a 736f 6e2e 6475 6d70 7328 7265   = json.dumps(re
-00007020: 706c 795f 7061 7261 6d65 7465 7273 2e74  ply_parameters.t
-00007030: 6f5f 6469 6374 2829 290a 2020 2020 6966  o_dict()).    if
-00007040: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-00007050: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00007060: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
-00007070: 2061 7761 6974 205f 636f 6e76 6572 745f   await _convert_
-00007080: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-00007090: 6b75 7029 0a20 2020 2069 6620 7061 7273  kup).    if pars
-000070a0: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
-000070b0: 7061 796c 6f61 645b 2270 6172 7365 5f6d  payload["parse_m
-000070c0: 6f64 6522 5d20 3d20 7061 7273 655f 6d6f  ode"] = parse_mo
-000070d0: 6465 0a20 2020 2069 6620 7375 7070 6f72  de.    if suppor
-000070e0: 7473 5f73 7472 6561 6d69 6e67 2069 7320  ts_streaming is 
-000070f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00007100: 2020 7061 796c 6f61 645b 2273 7570 706f    payload["suppo
-00007110: 7274 735f 7374 7265 616d 696e 6722 5d20  rts_streaming"] 
-00007120: 3d20 7375 7070 6f72 7473 5f73 7472 6561  = supports_strea
-00007130: 6d69 6e67 0a20 2020 2069 6620 6469 7361  ming.    if disa
-00007140: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00007150: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00007160: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
-00007170: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00007180: 696f 6e22 5d20 3d20 6469 7361 626c 655f  ion"] = disable_
-00007190: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
-000071a0: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
-000071b0: 2020 2020 2070 6179 6c6f 6164 5b22 7469       payload["ti
-000071c0: 6d65 6f75 7422 5d20 3d20 7469 6d65 6f75  meout"] = timeou
-000071d0: 740a 2020 2020 6966 2074 6875 6d62 6e61  t.    if thumbna
-000071e0: 696c 3a0a 2020 2020 2020 2020 6966 206e  il:.        if n
-000071f0: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
-00007200: 6728 7468 756d 626e 6169 6c29 3a0a 2020  g(thumbnail):.  
-00007210: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
-00007220: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-00007230: 2020 2020 6669 6c65 735b 2274 6875 6d62      files["thumb
-00007240: 6e61 696c 225d 203d 2074 6875 6d62 6e61  nail"] = thumbna
-00007250: 696c 0a20 2020 2020 2020 2020 2020 2065  il.            e
-00007260: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00007270: 2020 2020 2066 696c 6573 203d 207b 2274       files = {"t
-00007280: 6875 6d62 6e61 696c 223a 2074 6875 6d62  humbnail": thumb
-00007290: 6e61 696c 7d0a 2020 2020 2020 2020 656c  nail}.        el
-000072a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000072b0: 7061 796c 6f61 645b 2274 6875 6d62 6e61  payload["thumbna
-000072c0: 696c 225d 203d 2074 6875 6d62 6e61 696c  il"] = thumbnail
-000072d0: 0a20 2020 2069 6620 7769 6474 683a 0a20  .    if width:. 
-000072e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000072f0: 7769 6474 6822 5d20 3d20 7769 6474 680a  width"] = width.
-00007300: 2020 2020 6966 2068 6569 6768 743a 0a20      if height:. 
-00007310: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00007320: 6865 6967 6874 225d 203d 2068 6569 6768  height"] = heigh
-00007330: 740a 2020 2020 6966 2063 6170 7469 6f6e  t.    if caption
-00007340: 5f65 6e74 6974 6965 733a 0a20 2020 2020  _entities:.     
-00007350: 2020 2070 6179 6c6f 6164 5b22 6361 7074     payload["capt
-00007360: 696f 6e5f 656e 7469 7469 6573 225d 203d  ion_entities"] =
-00007370: 206a 736f 6e2e 6475 6d70 7328 0a20 2020   json.dumps(.   
-00007380: 2020 2020 2020 2020 2074 7970 6573 2e4d           types.M
-00007390: 6573 7361 6765 456e 7469 7479 2e74 6f5f  essageEntity.to_
-000073a0: 6c69 7374 5f6f 665f 6469 6374 7328 6361  list_of_dicts(ca
-000073b0: 7074 696f 6e5f 656e 7469 7469 6573 290a  ption_entities).
-000073c0: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
-000073d0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-000073e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000073f0: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-00007400: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
-00007410: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00007420: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
-00007430: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
-00007440: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
-00007450: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
-00007460: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-00007470: 6164 5f69 640a 2020 2020 6966 2068 6173  ad_id.    if has
-00007480: 5f73 706f 696c 6572 2069 7320 6e6f 7420  _spoiler is not 
-00007490: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000074a0: 796c 6f61 645b 2268 6173 5f73 706f 696c  yload["has_spoil
-000074b0: 6572 225d 203d 2068 6173 5f73 706f 696c  er"] = has_spoil
-000074c0: 6572 0a20 2020 2069 6620 6275 7369 6e65  er.    if busine
-000074d0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-000074e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000074f0: 645b 2262 7573 696e 6573 735f 636f 6e6e  d["business_conn
-00007500: 6563 7469 6f6e 5f69 6422 5d20 3d20 6275  ection_id"] = bu
-00007510: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00007520: 6e5f 6964 0a20 2020 2072 6574 7572 6e20  n_id.    return 
-00007530: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-00007540: 6571 7565 7374 280a 2020 2020 2020 2020  equest(.        
-00007550: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00007560: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00007570: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
-00007580: 6d65 7468 6f64 3d22 706f 7374 220a 2020  method="post".  
-00007590: 2020 290a 0a0a 6173 796e 6320 6465 6620    )...async def 
-000075a0: 7365 6e64 5f61 6e69 6d61 7469 6f6e 280a  send_animation(.
-000075b0: 2020 2020 746f 6b65 6e2c 0a20 2020 2063      token,.    c
-000075c0: 6861 745f 6964 2c0a 2020 2020 6461 7461  hat_id,.    data
-000075d0: 2c0a 2020 2020 6475 7261 7469 6f6e 3d4e  ,.    duration=N
-000075e0: 6f6e 652c 0a20 2020 2063 6170 7469 6f6e  one,.    caption
-000075f0: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
-00007600: 5f6d 6172 6b75 703d 4e6f 6e65 2c0a 2020  _markup=None,.  
-00007610: 2020 7061 7273 655f 6d6f 6465 3d4e 6f6e    parse_mode=Non
-00007620: 652c 0a20 2020 2064 6973 6162 6c65 5f6e  e,.    disable_n
-00007630: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
-00007640: 2c0a 2020 2020 7469 6d65 6f75 743d 4e6f  ,.    timeout=No
-00007650: 6e65 2c0a 2020 2020 7468 756d 626e 6169  ne,.    thumbnai
-00007660: 6c3d 4e6f 6e65 2c0a 2020 2020 6361 7074  l=None,.    capt
-00007670: 696f 6e5f 656e 7469 7469 6573 3d4e 6f6e  ion_entities=Non
-00007680: 652c 0a20 2020 2077 6964 7468 3d4e 6f6e  e,.    width=Non
-00007690: 652c 0a20 2020 2068 6569 6768 743d 4e6f  e,.    height=No
-000076a0: 6e65 2c0a 2020 2020 7072 6f74 6563 745f  ne,.    protect_
-000076b0: 636f 6e74 656e 743d 4e6f 6e65 2c0a 2020  content=None,.  
-000076c0: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
-000076d0: 5f69 643d 4e6f 6e65 2c0a 2020 2020 6861  _id=None,.    ha
-000076e0: 735f 7370 6f69 6c65 723d 4e6f 6e65 2c0a  s_spoiler=None,.
-000076f0: 2020 2020 7265 706c 795f 7061 7261 6d65      reply_parame
-00007700: 7465 7273 3d4e 6f6e 652c 0a20 2020 2062  ters=None,.    b
-00007710: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-00007720: 6f6e 5f69 643d 4e6f 6e65 2c0a 293a 0a20  on_id=None,.):. 
-00007730: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00007740: 7222 7365 6e64 416e 696d 6174 696f 6e22  r"sendAnimation"
-00007750: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00007760: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-00007770: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
-00007780: 4e6f 6e65 0a20 2020 2069 6620 6e6f 7420  None.    if not 
-00007790: 7574 696c 2e69 735f 7374 7269 6e67 2864  util.is_string(d
-000077a0: 6174 6129 3a0a 2020 2020 2020 2020 6669  ata):.        fi
-000077b0: 6c65 7320 3d20 7b22 616e 696d 6174 696f  les = {"animatio
-000077c0: 6e22 3a20 6461 7461 7d0a 2020 2020 656c  n": data}.    el
-000077d0: 7365 3a0a 2020 2020 2020 2020 7061 796c  se:.        payl
-000077e0: 6f61 645b 2261 6e69 6d61 7469 6f6e 225d  oad["animation"]
-000077f0: 203d 2064 6174 610a 2020 2020 6966 2064   = data.    if d
-00007800: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
-00007810: 2070 6179 6c6f 6164 5b22 6475 7261 7469   payload["durati
-00007820: 6f6e 225d 203d 2064 7572 6174 696f 6e0a  on"] = duration.
-00007830: 2020 2020 6966 2063 6170 7469 6f6e 3a0a      if caption:.
-00007840: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00007850: 2263 6170 7469 6f6e 225d 203d 2063 6170  "caption"] = cap
-00007860: 7469 6f6e 0a20 2020 2069 6620 7265 706c  tion.    if repl
-00007870: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
-00007880: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00007890: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
-000078a0: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
-000078b0: 6a73 6f6e 2e64 756d 7073 2872 6570 6c79  json.dumps(reply
-000078c0: 5f70 6172 616d 6574 6572 732e 746f 5f64  _parameters.to_d
-000078d0: 6963 7428 2929 0a20 2020 2069 6620 7265  ict()).    if re
-000078e0: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-000078f0: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
-00007900: 6c79 5f6d 6172 6b75 7022 5d20 3d20 6177  ly_markup"] = aw
-00007910: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
-00007920: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-00007930: 290a 2020 2020 6966 2070 6172 7365 5f6d  ).    if parse_m
-00007940: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
-00007950: 6c6f 6164 5b22 7061 7273 655f 6d6f 6465  load["parse_mode
-00007960: 225d 203d 2070 6172 7365 5f6d 6f64 650a  "] = parse_mode.
-00007970: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
-00007980: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
-00007990: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000079a0: 2070 6179 6c6f 6164 5b22 6469 7361 626c   payload["disabl
-000079b0: 655f 6e6f 7469 6669 6361 7469 6f6e 225d  e_notification"]
-000079c0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
-000079d0: 6963 6174 696f 6e0a 2020 2020 6966 2074  ication.    if t
-000079e0: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
-000079f0: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
-00007a00: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
-00007a10: 2069 6620 7468 756d 626e 6169 6c3a 0a20   if thumbnail:. 
-00007a20: 2020 2020 2020 2069 6620 6e6f 7420 7574         if not ut
-00007a30: 696c 2e69 735f 7374 7269 6e67 2874 6875  il.is_string(thu
-00007a40: 6d62 6e61 696c 293a 0a20 2020 2020 2020  mbnail):.       
-00007a50: 2020 2020 2069 6620 6669 6c65 733a 0a20       if files:. 
-00007a60: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00007a70: 696c 6573 5b22 7468 756d 626e 6169 6c22  iles["thumbnail"
-00007a80: 5d20 3d20 7468 756d 626e 6169 6c0a 2020  ] = thumbnail.  
-00007a90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00007aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ab0: 6669 6c65 7320 3d20 7b22 7468 756d 626e  files = {"thumbn
-00007ac0: 6169 6c22 3a20 7468 756d 626e 6169 6c7d  ail": thumbnail}
-00007ad0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00007ae0: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
-00007af0: 6164 5b22 7468 756d 626e 6169 6c22 5d20  ad["thumbnail"] 
-00007b00: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
-00007b10: 6966 2063 6170 7469 6f6e 5f65 6e74 6974  if caption_entit
-00007b20: 6965 733a 0a20 2020 2020 2020 2070 6179  ies:.        pay
-00007b30: 6c6f 6164 5b22 6361 7074 696f 6e5f 656e  load["caption_en
-00007b40: 7469 7469 6573 225d 203d 206a 736f 6e2e  tities"] = json.
-00007b50: 6475 6d70 7328 0a20 2020 2020 2020 2020  dumps(.         
-00007b60: 2020 2074 7970 6573 2e4d 6573 7361 6765     types.Message
-00007b70: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
-00007b80: 665f 6469 6374 7328 6361 7074 696f 6e5f  f_dicts(caption_
-00007b90: 656e 7469 7469 6573 290a 2020 2020 2020  entities).      
-00007ba0: 2020 290a 2020 2020 6966 2077 6964 7468    ).    if width
-00007bb0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007bc0: 645b 2277 6964 7468 225d 203d 2077 6964  d["width"] = wid
-00007bd0: 7468 0a20 2020 2069 6620 6865 6967 6874  th.    if height
-00007be0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007bf0: 645b 2268 6569 6768 7422 5d20 3d20 6865  d["height"] = he
-00007c00: 6967 6874 0a20 2020 2069 6620 7072 6f74  ight.    if prot
-00007c10: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
-00007c20: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00007c30: 2070 6179 6c6f 6164 5b22 7072 6f74 6563   payload["protec
-00007c40: 745f 636f 6e74 656e 7422 5d20 3d20 7072  t_content"] = pr
-00007c50: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
-00007c60: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-00007c70: 6561 645f 6964 3a0a 2020 2020 2020 2020  ead_id:.        
-00007c80: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-00007c90: 5f74 6872 6561 645f 6964 225d 203d 206d  _thread_id"] = m
-00007ca0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00007cb0: 0a20 2020 2069 6620 6861 735f 7370 6f69  .    if has_spoi
-00007cc0: 6c65 7220 6973 206e 6f74 204e 6f6e 653a  ler is not None:
-00007cd0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007ce0: 5b22 6861 735f 7370 6f69 6c65 7222 5d20  ["has_spoiler"] 
-00007cf0: 3d20 6861 735f 7370 6f69 6c65 720a 2020  = has_spoiler.  
-00007d00: 2020 6966 2062 7573 696e 6573 735f 636f    if business_co
-00007d10: 6e6e 6563 7469 6f6e 5f69 643a 0a20 2020  nnection_id:.   
-00007d20: 2020 2020 2070 6179 6c6f 6164 5b22 6275       payload["bu
-00007d30: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00007d40: 6e5f 6964 225d 203d 2062 7573 696e 6573  n_id"] = busines
-00007d50: 735f 636f 6e6e 6563 7469 6f6e 5f69 640a  s_connection_id.
-00007d60: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00007d70: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-00007d80: 7428 0a20 2020 2020 2020 2074 6f6b 656e  t(.        token
-00007d90: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00007da0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
-00007db0: 6c65 733d 6669 6c65 732c 206d 6574 686f  les=files, metho
-00007dc0: 643d 2270 6f73 7422 0a20 2020 2029 0a0a  d="post".    )..
-00007dd0: 0a61 7379 6e63 2064 6566 2073 656e 645f  .async def send_
-00007de0: 766f 6963 6528 0a20 2020 2074 6f6b 656e  voice(.    token
-00007df0: 2c0a 2020 2020 6368 6174 5f69 642c 0a20  ,.    chat_id,. 
-00007e00: 2020 2076 6f69 6365 2c0a 2020 2020 6361     voice,.    ca
-00007e10: 7074 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ption=None,.    
-00007e20: 6475 7261 7469 6f6e 3d4e 6f6e 652c 0a20  duration=None,. 
-00007e30: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
-00007e40: 4e6f 6e65 2c0a 2020 2020 7061 7273 655f  None,.    parse_
-00007e50: 6d6f 6465 3d4e 6f6e 652c 0a20 2020 2064  mode=None,.    d
-00007e60: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00007e70: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 7469  ion=None,.    ti
-00007e80: 6d65 6f75 743d 4e6f 6e65 2c0a 2020 2020  meout=None,.    
-00007e90: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00007ea0: 3d4e 6f6e 652c 0a20 2020 2070 726f 7465  =None,.    prote
-00007eb0: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-00007ec0: 0a20 2020 206d 6573 7361 6765 5f74 6872  .    message_thr
-00007ed0: 6561 645f 6964 3d4e 6f6e 652c 0a20 2020  ead_id=None,.   
-00007ee0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-00007ef0: 733d 4e6f 6e65 2c0a 2020 2020 6275 7369  s=None,.    busi
-00007f00: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00007f10: 6964 3d4e 6f6e 652c 0a29 3a0a 2020 2020  id=None,.):.    
-00007f20: 6d65 7468 6f64 5f75 726c 203d 2072 2273  method_url = r"s
-00007f30: 656e 6456 6f69 6365 220a 2020 2020 7061  endVoice".    pa
-00007f40: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-00007f50: 6422 3a20 6368 6174 5f69 647d 0a20 2020  d": chat_id}.   
-00007f60: 2066 696c 6573 203d 204e 6f6e 650a 2020   files = None.  
-00007f70: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00007f80: 5f73 7472 696e 6728 766f 6963 6529 3a0a  _string(voice):.
-00007f90: 2020 2020 2020 2020 6669 6c65 7320 3d20          files = 
-00007fa0: 7b22 766f 6963 6522 3a20 766f 6963 657d  {"voice": voice}
-00007fb0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00007fc0: 2020 2070 6179 6c6f 6164 5b22 766f 6963     payload["voic
-00007fd0: 6522 5d20 3d20 766f 6963 650a 2020 2020  e"] = voice.    
-00007fe0: 6966 2063 6170 7469 6f6e 3a0a 2020 2020  if caption:.    
-00007ff0: 2020 2020 7061 796c 6f61 645b 2263 6170      payload["cap
-00008000: 7469 6f6e 225d 203d 2063 6170 7469 6f6e  tion"] = caption
-00008010: 0a20 2020 2069 6620 6475 7261 7469 6f6e  .    if duration
-00008020: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008030: 645b 2264 7572 6174 696f 6e22 5d20 3d20  d["duration"] = 
-00008040: 6475 7261 7469 6f6e 0a20 2020 2069 6620  duration.    if 
-00008050: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00008060: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00008070: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
-00008080: 6570 6c79 5f70 6172 616d 6574 6572 7322  eply_parameters"
-00008090: 5d20 3d20 6a73 6f6e 2e64 756d 7073 2872  ] = json.dumps(r
-000080a0: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
-000080b0: 746f 5f64 6963 7428 2929 0a20 2020 2069  to_dict()).    i
-000080c0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-000080d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000080e0: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
-000080f0: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
-00008100: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-00008110: 726b 7570 290a 2020 2020 6966 2070 6172  rkup).    if par
-00008120: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
-00008130: 2070 6179 6c6f 6164 5b22 7061 7273 655f   payload["parse_
-00008140: 6d6f 6465 225d 203d 2070 6172 7365 5f6d  mode"] = parse_m
-00008150: 6f64 650a 2020 2020 6966 2064 6973 6162  ode.    if disab
-00008160: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
-00008170: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00008180: 2020 2020 2070 6179 6c6f 6164 5b22 6469       payload["di
-00008190: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-000081a0: 6f6e 225d 203d 2064 6973 6162 6c65 5f6e  on"] = disable_n
-000081b0: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
-000081c0: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
-000081d0: 2020 2020 7061 796c 6f61 645b 2274 696d      payload["tim
-000081e0: 656f 7574 225d 203d 2074 696d 656f 7574  eout"] = timeout
-000081f0: 0a20 2020 2069 6620 6361 7074 696f 6e5f  .    if caption_
-00008200: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
-00008210: 2020 7061 796c 6f61 645b 2263 6170 7469    payload["capti
-00008220: 6f6e 5f65 6e74 6974 6965 7322 5d20 3d20  on_entities"] = 
-00008230: 6a73 6f6e 2e64 756d 7073 280a 2020 2020  json.dumps(.    
-00008240: 2020 2020 2020 2020 7479 7065 732e 4d65          types.Me
-00008250: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
-00008260: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
-00008270: 7469 6f6e 5f65 6e74 6974 6965 7329 0a20  tion_entities). 
-00008280: 2020 2020 2020 2029 0a20 2020 2069 6620         ).    if 
-00008290: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-000082a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000082b0: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
-000082c0: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
-000082d0: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-000082e0: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-000082f0: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
-00008300: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
-00008310: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
-00008320: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00008330: 645f 6964 0a20 2020 2069 6620 6275 7369  d_id.    if busi
-00008340: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00008350: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00008360: 6f61 645b 2262 7573 696e 6573 735f 636f  oad["business_co
-00008370: 6e6e 6563 7469 6f6e 5f69 6422 5d20 3d20  nnection_id"] = 
-00008380: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00008390: 696f 6e5f 6964 0a20 2020 2072 6574 7572  ion_id.    retur
-000083a0: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-000083b0: 5f72 6571 7565 7374 280a 2020 2020 2020  _request(.      
-000083c0: 2020 746f 6b65 6e2c 206d 6574 686f 645f    token, method_
-000083d0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-000083e0: 6f61 642c 2066 696c 6573 3d66 696c 6573  oad, files=files
-000083f0: 2c20 6d65 7468 6f64 3d22 706f 7374 220a  , method="post".
-00008400: 2020 2020 290a 0a0a 6173 796e 6320 6465      )...async de
-00008410: 6620 7365 6e64 5f76 6964 656f 5f6e 6f74  f send_video_not
-00008420: 6528 0a20 2020 2074 6f6b 656e 2c0a 2020  e(.    token,.  
-00008430: 2020 6368 6174 5f69 642c 0a20 2020 2064    chat_id,.    d
-00008440: 6174 612c 0a20 2020 2064 7572 6174 696f  ata,.    duratio
-00008450: 6e3d 4e6f 6e65 2c0a 2020 2020 6c65 6e67  n=None,.    leng
-00008460: 7468 3d4e 6f6e 652c 0a20 2020 2072 6570  th=None,.    rep
-00008470: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-00008480: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
-00008490: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
-000084a0: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
-000084b0: 0a20 2020 2074 6875 6d62 6e61 696c 3d4e  .    thumbnail=N
-000084c0: 6f6e 652c 0a20 2020 2070 726f 7465 6374  one,.    protect
-000084d0: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 0a20  _content=None,. 
-000084e0: 2020 206d 6573 7361 6765 5f74 6872 6561     message_threa
-000084f0: 645f 6964 3d4e 6f6e 652c 0a20 2020 2072  d_id=None,.    r
-00008500: 6570 6c79 5f70 6172 616d 6574 6572 733d  eply_parameters=
-00008510: 4e6f 6e65 2c0a 2020 2020 6275 7369 6e65  None,.    busine
-00008520: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-00008530: 3d4e 6f6e 652c 0a29 3a0a 2020 2020 6d65  =None,.):.    me
-00008540: 7468 6f64 5f75 726c 203d 2072 2273 656e  thod_url = r"sen
-00008550: 6456 6964 656f 4e6f 7465 220a 2020 2020  dVideoNote".    
-00008560: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
-00008570: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
-00008580: 2020 2066 696c 6573 203d 204e 6f6e 650a     files = None.
-00008590: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
-000085a0: 6973 5f73 7472 696e 6728 6461 7461 293a  is_string(data):
-000085b0: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
-000085c0: 207b 2276 6964 656f 5f6e 6f74 6522 3a20   {"video_note": 
-000085d0: 6461 7461 7d0a 2020 2020 656c 7365 3a0a  data}.    else:.
-000085e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000085f0: 2276 6964 656f 5f6e 6f74 6522 5d20 3d20  "video_note"] = 
-00008600: 6461 7461 0a20 2020 2069 6620 6475 7261  data.    if dura
-00008610: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
-00008620: 796c 6f61 645b 2264 7572 6174 696f 6e22  yload["duration"
-00008630: 5d20 3d20 6475 7261 7469 6f6e 0a20 2020  ] = duration.   
-00008640: 2069 6620 6c65 6e67 7468 2061 6e64 2028   if length and (
-00008650: 7374 7228 6c65 6e67 7468 292e 6973 6469  str(length).isdi
-00008660: 6769 7428 2920 616e 6420 696e 7428 6c65  git() and int(le
-00008670: 6e67 7468 2920 3c3d 2036 3339 293a 0a20  ngth) <= 639):. 
-00008680: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00008690: 6c65 6e67 7468 225d 203d 206c 656e 6774  length"] = lengt
-000086a0: 680a 2020 2020 656c 7365 3a0a 2020 2020  h.    else:.    
-000086b0: 2020 2020 7061 796c 6f61 645b 226c 656e      payload["len
-000086c0: 6774 6822 5d20 3d20 3633 3920 2023 2073  gth"] = 639  # s
-000086d0: 6565 6d73 206c 696b 6520 6974 2069 7320  eems like it is 
-000086e0: 4d41 5820 6c65 6e67 7468 2073 697a 650a  MAX length size.
-000086f0: 2020 2020 6966 2072 6570 6c79 5f70 6172      if reply_par
-00008700: 616d 6574 6572 7320 6973 206e 6f74 204e  ameters is not N
-00008710: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00008720: 6c6f 6164 5b22 7265 706c 795f 7061 7261  load["reply_para
-00008730: 6d65 7465 7273 225d 203d 206a 736f 6e2e  meters"] = json.
-00008740: 6475 6d70 7328 7265 706c 795f 7061 7261  dumps(reply_para
-00008750: 6d65 7465 7273 2e74 6f5f 6469 6374 2829  meters.to_dict()
-00008760: 290a 2020 2020 6966 2072 6570 6c79 5f6d  ).    if reply_m
-00008770: 6172 6b75 703a 0a20 2020 2020 2020 2070  arkup:.        p
-00008780: 6179 6c6f 6164 5b22 7265 706c 795f 6d61  ayload["reply_ma
-00008790: 726b 7570 225d 203d 2061 7761 6974 205f  rkup"] = await _
-000087a0: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
-000087b0: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
-000087c0: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
-000087d0: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
-000087e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000087f0: 796c 6f61 645b 2264 6973 6162 6c65 5f6e  yload["disable_n
-00008800: 6f74 6966 6963 6174 696f 6e22 5d20 3d20  otification"] = 
-00008810: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00008820: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
-00008830: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00008840: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
-00008850: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-00008860: 2074 6875 6d62 6e61 696c 3a0a 2020 2020   thumbnail:.    
-00008870: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
-00008880: 6973 5f73 7472 696e 6728 7468 756d 626e  is_string(thumbn
-00008890: 6169 6c29 3a0a 2020 2020 2020 2020 2020  ail):.          
-000088a0: 2020 6966 2066 696c 6573 3a0a 2020 2020    if files:.    
-000088b0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000088c0: 735b 2274 6875 6d62 6e61 696c 225d 203d  s["thumbnail"] =
-000088d0: 2074 6875 6d62 6e61 696c 0a20 2020 2020   thumbnail.     
-000088e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000088f0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00008900: 6573 203d 207b 2274 6875 6d62 6e61 696c  es = {"thumbnail
-00008910: 223a 2074 6875 6d62 6e61 696c 7d0a 2020  ": thumbnail}.  
-00008920: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00008930: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00008940: 2274 6875 6d62 6e61 696c 225d 203d 2074  "thumbnail"] = t
-00008950: 6875 6d62 6e61 696c 0a20 2020 2069 6620  humbnail.    if 
-00008960: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-00008970: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00008980: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
-00008990: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
-000089a0: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-000089b0: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-000089c0: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
-000089d0: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
-000089e0: 7361 6765 5f74 6872 6561 645f 6964 225d  sage_thread_id"]
-000089f0: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00008a00: 645f 6964 0a20 2020 2069 6620 6275 7369  d_id.    if busi
-00008a10: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00008a20: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00008a30: 6f61 645b 2262 7573 696e 6573 735f 636f  oad["business_co
-00008a40: 6e6e 6563 7469 6f6e 5f69 6422 5d20 3d20  nnection_id"] = 
-00008a50: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00008a60: 696f 6e5f 6964 0a20 2020 2072 6574 7572  ion_id.    retur
-00008a70: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-00008a80: 5f72 6571 7565 7374 280a 2020 2020 2020  _request(.      
-00008a90: 2020 746f 6b65 6e2c 206d 6574 686f 645f    token, method_
-00008aa0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00008ab0: 6f61 642c 2066 696c 6573 3d66 696c 6573  oad, files=files
-00008ac0: 2c20 6d65 7468 6f64 3d22 706f 7374 220a  , method="post".
-00008ad0: 2020 2020 290a 0a0a 6173 796e 6320 6465      )...async de
-00008ae0: 6620 7365 6e64 5f61 7564 696f 280a 2020  f send_audio(.  
-00008af0: 2020 746f 6b65 6e2c 0a20 2020 2063 6861    token,.    cha
-00008b00: 745f 6964 2c0a 2020 2020 6175 6469 6f2c  t_id,.    audio,
-00008b10: 0a20 2020 2063 6170 7469 6f6e 3d4e 6f6e  .    caption=Non
-00008b20: 652c 0a20 2020 2064 7572 6174 696f 6e3d  e,.    duration=
-00008b30: 4e6f 6e65 2c0a 2020 2020 7065 7266 6f72  None,.    perfor
-00008b40: 6d65 723d 4e6f 6e65 2c0a 2020 2020 7469  mer=None,.    ti
-00008b50: 746c 653d 4e6f 6e65 2c0a 2020 2020 7265  tle=None,.    re
-00008b60: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-00008b70: 0a20 2020 2070 6172 7365 5f6d 6f64 653d  .    parse_mode=
-00008b80: 4e6f 6e65 2c0a 2020 2020 6469 7361 626c  None,.    disabl
-00008b90: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-00008ba0: 6f6e 652c 0a20 2020 2074 696d 656f 7574  one,.    timeout
-00008bb0: 3d4e 6f6e 652c 0a20 2020 2074 6875 6d62  =None,.    thumb
-00008bc0: 6e61 696c 3d4e 6f6e 652c 0a20 2020 2063  nail=None,.    c
-00008bd0: 6170 7469 6f6e 5f65 6e74 6974 6965 733d  aption_entities=
-00008be0: 4e6f 6e65 2c0a 2020 2020 7072 6f74 6563  None,.    protec
-00008bf0: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0a  t_content=None,.
-00008c00: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
-00008c10: 6164 5f69 643d 4e6f 6e65 2c0a 2020 2020  ad_id=None,.    
-00008c20: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00008c30: 3d4e 6f6e 652c 0a20 2020 2062 7573 696e  =None,.    busin
-00008c40: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00008c50: 643d 4e6f 6e65 2c0a 293a 0a20 2020 206d  d=None,.):.    m
-00008c60: 6574 686f 645f 7572 6c20 3d20 7222 7365  ethod_url = r"se
-00008c70: 6e64 4175 6469 6f22 0a20 2020 2070 6179  ndAudio".    pay
-00008c80: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-00008c90: 223a 2063 6861 745f 6964 7d0a 2020 2020  ": chat_id}.    
-00008ca0: 6669 6c65 7320 3d20 4e6f 6e65 0a20 2020  files = None.   
-00008cb0: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
-00008cc0: 7374 7269 6e67 2861 7564 696f 293a 0a20  string(audio):. 
-00008cd0: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-00008ce0: 2261 7564 696f 223a 2061 7564 696f 7d0a  "audio": audio}.
-00008cf0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00008d00: 2020 7061 796c 6f61 645b 2261 7564 696f    payload["audio
-00008d10: 225d 203d 2061 7564 696f 0a20 2020 2069  "] = audio.    i
-00008d20: 6620 6361 7074 696f 6e3a 0a20 2020 2020  f caption:.     
-00008d30: 2020 2070 6179 6c6f 6164 5b22 6361 7074     payload["capt
-00008d40: 696f 6e22 5d20 3d20 6361 7074 696f 6e0a  ion"] = caption.
-00008d50: 2020 2020 6966 2064 7572 6174 696f 6e3a      if duration:
-00008d60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008d70: 5b22 6475 7261 7469 6f6e 225d 203d 2064  ["duration"] = d
-00008d80: 7572 6174 696f 6e0a 2020 2020 6966 2070  uration.    if p
-00008d90: 6572 666f 726d 6572 3a0a 2020 2020 2020  erformer:.      
-00008da0: 2020 7061 796c 6f61 645b 2270 6572 666f    payload["perfo
-00008db0: 726d 6572 225d 203d 2070 6572 666f 726d  rmer"] = perform
-00008dc0: 6572 0a20 2020 2069 6620 7469 746c 653a  er.    if title:
-00008dd0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008de0: 5b22 7469 746c 6522 5d20 3d20 7469 746c  ["title"] = titl
-00008df0: 650a 2020 2020 6966 2072 6570 6c79 5f70  e.    if reply_p
-00008e00: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
-00008e10: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00008e20: 6179 6c6f 6164 5b22 7265 706c 795f 7061  ayload["reply_pa
-00008e30: 7261 6d65 7465 7273 225d 203d 206a 736f  rameters"] = jso
-00008e40: 6e2e 6475 6d70 7328 7265 706c 795f 7061  n.dumps(reply_pa
-00008e50: 7261 6d65 7465 7273 2e74 6f5f 6469 6374  rameters.to_dict
-00008e60: 2829 290a 2020 2020 6966 2072 6570 6c79  ()).    if reply
-00008e70: 5f6d 6172 6b75 703a 0a20 2020 2020 2020  _markup:.       
-00008e80: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
-00008e90: 6d61 726b 7570 225d 203d 2061 7761 6974  markup"] = await
-00008ea0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-00008eb0: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-00008ec0: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
-00008ed0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008ee0: 645b 2270 6172 7365 5f6d 6f64 6522 5d20  d["parse_mode"] 
-00008ef0: 3d20 7061 7273 655f 6d6f 6465 0a20 2020  = parse_mode.   
-00008f00: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
-00008f10: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
-00008f20: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00008f30: 796c 6f61 645b 2264 6973 6162 6c65 5f6e  yload["disable_n
-00008f40: 6f74 6966 6963 6174 696f 6e22 5d20 3d20  otification"] = 
-00008f50: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00008f60: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
-00008f70: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00008f80: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
-00008f90: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-00008fa0: 2074 6875 6d62 6e61 696c 3a0a 2020 2020   thumbnail:.    
-00008fb0: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
-00008fc0: 6973 5f73 7472 696e 6728 7468 756d 626e  is_string(thumbn
-00008fd0: 6169 6c29 3a0a 2020 2020 2020 2020 2020  ail):.          
-00008fe0: 2020 6966 2066 696c 6573 3a0a 2020 2020    if files:.    
-00008ff0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00009000: 735b 2274 6875 6d62 6e61 696c 225d 203d  s["thumbnail"] =
-00009010: 2074 6875 6d62 6e61 696c 0a20 2020 2020   thumbnail.     
-00009020: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00009030: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00009040: 6573 203d 207b 2274 6875 6d62 6e61 696c  es = {"thumbnail
-00009050: 223a 2074 6875 6d62 6e61 696c 7d0a 2020  ": thumbnail}.  
-00009060: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00009070: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009080: 2274 6875 6d62 6e61 696c 225d 203d 2074  "thumbnail"] = t
-00009090: 6875 6d62 6e61 696c 0a20 2020 2069 6620  humbnail.    if 
-000090a0: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-000090b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000090c0: 645b 2263 6170 7469 6f6e 5f65 6e74 6974  d["caption_entit
-000090d0: 6965 7322 5d20 3d20 6a73 6f6e 2e64 756d  ies"] = json.dum
-000090e0: 7073 280a 2020 2020 2020 2020 2020 2020  ps(.            
-000090f0: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
-00009100: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
-00009110: 6963 7473 2863 6170 7469 6f6e 5f65 6e74  icts(caption_ent
-00009120: 6974 6965 7329 0a20 2020 2020 2020 2029  ities).        )
-00009130: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
-00009140: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
-00009150: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00009160: 6c6f 6164 5b22 7072 6f74 6563 745f 636f  load["protect_co
-00009170: 6e74 656e 7422 5d20 3d20 7072 6f74 6563  ntent"] = protec
-00009180: 745f 636f 6e74 656e 740a 2020 2020 6966  t_content.    if
-00009190: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-000091a0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-000091b0: 6f61 645b 226d 6573 7361 6765 5f74 6872  oad["message_thr
-000091c0: 6561 645f 6964 225d 203d 206d 6573 7361  ead_id"] = messa
-000091d0: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
-000091e0: 2069 6620 6275 7369 6e65 7373 5f63 6f6e   if business_con
-000091f0: 6e65 6374 696f 6e5f 6964 3a0a 2020 2020  nection_id:.    
-00009200: 2020 2020 7061 796c 6f61 645b 2262 7573      payload["bus
-00009210: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00009220: 5f69 6422 5d20 3d20 6275 7369 6e65 7373  _id"] = business
-00009230: 5f63 6f6e 6e65 6374 696f 6e5f 6964 0a20  _connection_id. 
-00009240: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-00009250: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-00009260: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
-00009270: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-00009280: 616d 733d 7061 796c 6f61 642c 2066 696c  ams=payload, fil
-00009290: 6573 3d66 696c 6573 2c20 6d65 7468 6f64  es=files, method
-000092a0: 3d22 706f 7374 220a 2020 2020 290a 0a0a  ="post".    )...
-000092b0: 6173 796e 6320 6465 6620 7365 6e64 5f64  async def send_d
-000092c0: 6174 6128 0a20 2020 2074 6f6b 656e 2c0a  ata(.    token,.
-000092d0: 2020 2020 6368 6174 5f69 642c 0a20 2020      chat_id,.   
-000092e0: 2064 6174 612c 0a20 2020 2064 6174 615f   data,.    data_
-000092f0: 7479 7065 2c0a 2020 2020 7265 706c 795f  type,.    reply_
-00009300: 6d61 726b 7570 3d4e 6f6e 652c 0a20 2020  markup=None,.   
-00009310: 2070 6172 7365 5f6d 6f64 653d 4e6f 6e65   parse_mode=None
-00009320: 2c0a 2020 2020 6469 7361 626c 655f 6e6f  ,.    disable_no
-00009330: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00009340: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
-00009350: 652c 0a20 2020 2063 6170 7469 6f6e 3d4e  e,.    caption=N
-00009360: 6f6e 652c 0a20 2020 2074 6875 6d62 6e61  one,.    thumbna
-00009370: 696c 3d4e 6f6e 652c 0a20 2020 2063 6170  il=None,.    cap
-00009380: 7469 6f6e 5f65 6e74 6974 6965 733d 4e6f  tion_entities=No
-00009390: 6e65 2c0a 2020 2020 6469 7361 626c 655f  ne,.    disable_
-000093a0: 636f 6e74 656e 745f 7479 7065 5f64 6574  content_type_det
-000093b0: 6563 7469 6f6e 3d4e 6f6e 652c 0a20 2020  ection=None,.   
-000093c0: 2076 6973 6962 6c65 5f66 696c 655f 6e61   visible_file_na
-000093d0: 6d65 3d4e 6f6e 652c 0a20 2020 2070 726f  me=None,.    pro
-000093e0: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-000093f0: 652c 0a20 2020 206d 6573 7361 6765 5f74  e,.    message_t
-00009400: 6872 6561 645f 6964 3d4e 6f6e 652c 0a20  hread_id=None,. 
-00009410: 2020 2065 6d6f 6a69 3d4e 6f6e 652c 0a20     emoji=None,. 
-00009420: 2020 2072 6570 6c79 5f70 6172 616d 6574     reply_paramet
-00009430: 6572 733d 4e6f 6e65 2c0a 2020 2020 6275  ers=None,.    bu
-00009440: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00009450: 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a 2020  n_id=None,.):.  
-00009460: 2020 6d65 7468 6f64 5f75 726c 203d 2061    method_url = a
-00009470: 7761 6974 2067 6574 5f6d 6574 686f 645f  wait get_method_
-00009480: 6279 5f74 7970 6528 6461 7461 5f74 7970  by_type(data_typ
-00009490: 6529 0a20 2020 2070 6179 6c6f 6164 203d  e).    payload =
-000094a0: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
-000094b0: 745f 6964 7d0a 2020 2020 6669 6c65 7320  t_id}.    files 
-000094c0: 3d20 4e6f 6e65 0a20 2020 2069 6620 6e6f  = None.    if no
-000094d0: 7420 7574 696c 2e69 735f 7374 7269 6e67  t util.is_string
-000094e0: 2864 6174 6129 3a0a 2020 2020 2020 2020  (data):.        
-000094f0: 6669 6c65 5f64 6174 6120 3d20 6461 7461  file_data = data
-00009500: 0a20 2020 2020 2020 2069 6620 7669 7369  .        if visi
-00009510: 626c 655f 6669 6c65 5f6e 616d 653a 0a20  ble_file_name:. 
-00009520: 2020 2020 2020 2020 2020 2066 696c 655f             file_
-00009530: 6461 7461 203d 2028 7669 7369 626c 655f  data = (visible_
-00009540: 6669 6c65 5f6e 616d 652c 2064 6174 6129  file_name, data)
-00009550: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
-00009560: 207b 6461 7461 5f74 7970 653a 2066 696c   {data_type: fil
-00009570: 655f 6461 7461 7d0a 2020 2020 656c 7365  e_data}.    else
-00009580: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00009590: 645b 6461 7461 5f74 7970 655d 203d 2064  d[data_type] = d
-000095a0: 6174 610a 2020 2020 6966 2072 6570 6c79  ata.    if reply
-000095b0: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
-000095c0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000095d0: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
-000095e0: 7061 7261 6d65 7465 7273 225d 203d 206a  parameters"] = j
-000095f0: 736f 6e2e 6475 6d70 7328 7265 706c 795f  son.dumps(reply_
-00009600: 7061 7261 6d65 7465 7273 2e74 6f5f 6469  parameters.to_di
-00009610: 6374 2829 290a 2020 2020 6966 2072 6570  ct()).    if rep
-00009620: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-00009630: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
-00009640: 795f 6d61 726b 7570 225d 203d 2061 7761  y_markup"] = awa
-00009650: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
-00009660: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-00009670: 0a20 2020 2069 6620 7061 7273 655f 6d6f  .    if parse_mo
-00009680: 6465 2061 6e64 2064 6174 615f 7479 7065  de and data_type
-00009690: 203d 3d20 2264 6f63 756d 656e 7422 3a0a   == "document":.
-000096a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000096b0: 2270 6172 7365 5f6d 6f64 6522 5d20 3d20  "parse_mode"] = 
-000096c0: 7061 7273 655f 6d6f 6465 0a20 2020 2069  parse_mode.    i
-000096d0: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-000096e0: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-000096f0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00009700: 6f61 645b 2264 6973 6162 6c65 5f6e 6f74  oad["disable_not
-00009710: 6966 6963 6174 696f 6e22 5d20 3d20 6469  ification"] = di
-00009720: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00009730: 6f6e 0a20 2020 2069 6620 7469 6d65 6f75  on.    if timeou
-00009740: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00009750: 6164 5b22 7469 6d65 6f75 7422 5d20 3d20  ad["timeout"] = 
-00009760: 7469 6d65 6f75 740a 2020 2020 6966 2063  timeout.    if c
-00009770: 6170 7469 6f6e 3a0a 2020 2020 2020 2020  aption:.        
-00009780: 7061 796c 6f61 645b 2263 6170 7469 6f6e  payload["caption
-00009790: 225d 203d 2063 6170 7469 6f6e 0a20 2020  "] = caption.   
-000097a0: 2069 6620 7468 756d 626e 6169 6c3a 0a20   if thumbnail:. 
-000097b0: 2020 2020 2020 2069 6620 6e6f 7420 7574         if not ut
-000097c0: 696c 2e69 735f 7374 7269 6e67 2874 6875  il.is_string(thu
-000097d0: 6d62 6e61 696c 293a 0a20 2020 2020 2020  mbnail):.       
-000097e0: 2020 2020 2069 6620 6669 6c65 733a 0a20       if files:. 
-000097f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00009800: 696c 6573 5b22 7468 756d 626e 6169 6c22  iles["thumbnail"
-00009810: 5d20 3d20 7468 756d 626e 6169 6c0a 2020  ] = thumbnail.  
-00009820: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00009830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009840: 6669 6c65 7320 3d20 7b22 7468 756d 626e  files = {"thumbn
-00009850: 6169 6c22 3a20 7468 756d 626e 6169 6c7d  ail": thumbnail}
-00009860: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00009870: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
-00009880: 6164 5b22 7468 756d 626e 6169 6c22 5d20  ad["thumbnail"] 
-00009890: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
-000098a0: 6966 2063 6170 7469 6f6e 5f65 6e74 6974  if caption_entit
-000098b0: 6965 733a 0a20 2020 2020 2020 2070 6179  ies:.        pay
-000098c0: 6c6f 6164 5b22 6361 7074 696f 6e5f 656e  load["caption_en
-000098d0: 7469 7469 6573 225d 203d 206a 736f 6e2e  tities"] = json.
-000098e0: 6475 6d70 7328 0a20 2020 2020 2020 2020  dumps(.         
-000098f0: 2020 2074 7970 6573 2e4d 6573 7361 6765     types.Message
-00009900: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
-00009910: 665f 6469 6374 7328 6361 7074 696f 6e5f  f_dicts(caption_
-00009920: 656e 7469 7469 6573 290a 2020 2020 2020  entities).      
-00009930: 2020 290a 2020 2020 6966 2070 726f 7465    ).    if prote
-00009940: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-00009950: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00009960: 7061 796c 6f61 645b 2270 726f 7465 6374  payload["protect
-00009970: 5f63 6f6e 7465 6e74 225d 203d 2070 726f  _content"] = pro
-00009980: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-00009990: 2069 6620 6d65 7468 6f64 5f75 726c 203d   if method_url =
-000099a0: 3d20 2273 656e 6444 6f63 756d 656e 7422  = "sendDocument"
-000099b0: 2061 6e64 2064 6973 6162 6c65 5f63 6f6e   and disable_con
-000099c0: 7465 6e74 5f74 7970 655f 6465 7465 6374  tent_type_detect
-000099d0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
-000099e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000099f0: 5b22 6469 7361 626c 655f 636f 6e74 656e  ["disable_conten
-00009a00: 745f 7479 7065 5f64 6574 6563 7469 6f6e  t_type_detection
-00009a10: 225d 203d 2064 6973 6162 6c65 5f63 6f6e  "] = disable_con
-00009a20: 7465 6e74 5f74 7970 655f 6465 7465 6374  tent_type_detect
-00009a30: 696f 6e0a 2020 2020 6966 206d 6573 7361  ion.    if messa
-00009a40: 6765 5f74 6872 6561 645f 6964 3a0a 2020  ge_thread_id:.  
-00009a50: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
-00009a60: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00009a70: 225d 203d 206d 6573 7361 6765 5f74 6872  "] = message_thr
-00009a80: 6561 645f 6964 0a20 2020 2069 6620 656d  ead_id.    if em
-00009a90: 6f6a 693a 0a20 2020 2020 2020 2070 6179  oji:.        pay
-00009aa0: 6c6f 6164 5b22 656d 6f6a 6922 5d20 3d20  load["emoji"] = 
-00009ab0: 656d 6f6a 690a 2020 2020 6966 2062 7573  emoji.    if bus
-00009ac0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00009ad0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00009ae0: 6c6f 6164 5b22 6275 7369 6e65 7373 5f63  load["business_c
-00009af0: 6f6e 6e65 6374 696f 6e5f 6964 225d 203d  onnection_id"] =
-00009b00: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00009b10: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
-00009b20: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-00009b30: 735f 7265 7175 6573 7428 0a20 2020 2020  s_request(.     
-00009b40: 2020 2074 6f6b 656e 2c20 6d65 7468 6f64     token, method
-00009b50: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00009b60: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00009b70: 732c 206d 6574 686f 643d 2270 6f73 7422  s, method="post"
-00009b80: 0a20 2020 2029 0a0a 0a61 7379 6e63 2064  .    )...async d
-00009b90: 6566 2067 6574 5f6d 6574 686f 645f 6279  ef get_method_by
-00009ba0: 5f74 7970 6528 6461 7461 5f74 7970 6529  _type(data_type)
-00009bb0: 3a0a 2020 2020 6966 2064 6174 615f 7479  :.    if data_ty
-00009bc0: 7065 203d 3d20 2264 6f63 756d 656e 7422  pe == "document"
-00009bd0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00009be0: 2072 2273 656e 6444 6f63 756d 656e 7422   r"sendDocument"
-00009bf0: 0a20 2020 2069 6620 6461 7461 5f74 7970  .    if data_typ
-00009c00: 6520 3d3d 2022 7374 6963 6b65 7222 3a0a  e == "sticker":.
-00009c10: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00009c20: 2273 656e 6453 7469 636b 6572 220a 0a0a  "sendSticker"...
-00009c30: 6173 796e 6320 6465 6620 6261 6e5f 6368  async def ban_ch
-00009c40: 6174 5f6d 656d 6265 7228 0a20 2020 2074  at_member(.    t
-00009c50: 6f6b 656e 2c20 6368 6174 5f69 642c 2075  oken, chat_id, u
-00009c60: 7365 725f 6964 2c20 756e 7469 6c5f 6461  ser_id, until_da
-00009c70: 7465 3d4e 6f6e 652c 2072 6576 6f6b 655f  te=None, revoke_
-00009c80: 6d65 7373 6167 6573 3d4e 6f6e 650a 293a  messages=None.):
-00009c90: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00009ca0: 3d20 2262 616e 4368 6174 4d65 6d62 6572  = "banChatMember
-00009cb0: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00009cc0: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-00009cd0: 5f69 642c 2022 7573 6572 5f69 6422 3a20  _id, "user_id": 
-00009ce0: 7573 6572 5f69 647d 0a20 2020 2069 6620  user_id}.    if 
-00009cf0: 6973 696e 7374 616e 6365 2875 6e74 696c  isinstance(until
-00009d00: 5f64 6174 652c 2064 6174 6574 696d 6529  _date, datetime)
-00009d10: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00009d20: 645b 2275 6e74 696c 5f64 6174 6522 5d20  d["until_date"] 
-00009d30: 3d20 756e 7469 6c5f 6461 7465 2e74 696d  = until_date.tim
-00009d40: 6573 7461 6d70 2829 0a20 2020 2065 6c73  estamp().    els
-00009d50: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00009d60: 6164 5b22 756e 7469 6c5f 6461 7465 225d  ad["until_date"]
-00009d70: 203d 2075 6e74 696c 5f64 6174 650a 2020   = until_date.  
-00009d80: 2020 6966 2072 6576 6f6b 655f 6d65 7373    if revoke_mess
-00009d90: 6167 6573 2069 7320 6e6f 7420 4e6f 6e65  ages is not None
-00009da0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00009db0: 645b 2272 6576 6f6b 655f 6d65 7373 6167  d["revoke_messag
-00009dc0: 6573 225d 203d 2072 6576 6f6b 655f 6d65  es"] = revoke_me
-00009dd0: 7373 6167 6573 0a20 2020 2072 6574 7572  ssages.    retur
-00009de0: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-00009df0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00009e00: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00009e10: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-00009e20: 6f64 3d22 706f 7374 2229 0a0a 0a61 7379  od="post")...asy
-00009e30: 6e63 2064 6566 2075 6e62 616e 5f63 6861  nc def unban_cha
-00009e40: 745f 6d65 6d62 6572 2874 6f6b 656e 2c20  t_member(token, 
-00009e50: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
-00009e60: 2c20 6f6e 6c79 5f69 665f 6261 6e6e 6564  , only_if_banned
-00009e70: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00009e80: 6c20 3d20 2275 6e62 616e 4368 6174 4d65  l = "unbanChatMe
-00009e90: 6d62 6572 220a 2020 2020 7061 796c 6f61  mber".    payloa
-00009ea0: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-00009eb0: 6368 6174 5f69 642c 2022 7573 6572 5f69  chat_id, "user_i
-00009ec0: 6422 3a20 7573 6572 5f69 647d 0a20 2020  d": user_id}.   
-00009ed0: 2069 6620 6f6e 6c79 5f69 665f 6261 6e6e   if only_if_bann
-00009ee0: 6564 2069 7320 6e6f 7420 4e6f 6e65 3a20  ed is not None: 
-00009ef0: 2023 204e 6f6e 6520 2f20 5472 7565 202f   # None / True /
-00009f00: 2046 616c 7365 0a20 2020 2020 2020 2070   False.        p
-00009f10: 6179 6c6f 6164 5b22 6f6e 6c79 5f69 665f  ayload["only_if_
-00009f20: 6261 6e6e 6564 225d 203d 206f 6e6c 795f  banned"] = only_
-00009f30: 6966 5f62 616e 6e65 640a 2020 2020 7265  if_banned.    re
-00009f40: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-00009f50: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-00009f60: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00009f70: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-00009f80: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-00009f90: 6173 796e 6320 6465 6620 7265 7374 7269  async def restri
-00009fa0: 6374 5f63 6861 745f 6d65 6d62 6572 280a  ct_chat_member(.
-00009fb0: 2020 2020 746f 6b65 6e2c 0a20 2020 2063      token,.    c
-00009fc0: 6861 745f 6964 2c0a 2020 2020 7573 6572  hat_id,.    user
-00009fd0: 5f69 642c 0a20 2020 2070 6572 6d69 7373  _id,.    permiss
-00009fe0: 696f 6e73 2c0a 2020 2020 756e 7469 6c5f  ions,.    until_
-00009ff0: 6461 7465 3d4e 6f6e 652c 0a20 2020 2075  date=None,.    u
-0000a000: 7365 5f69 6e64 6570 656e 6465 6e74 5f63  se_independent_c
-0000a010: 6861 745f 7065 726d 6973 7369 6f6e 733d  hat_permissions=
-0000a020: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
-0000a030: 686f 645f 7572 6c20 3d20 2272 6573 7472  hod_url = "restr
-0000a040: 6963 7443 6861 744d 656d 6265 7222 0a20  ictChatMember". 
-0000a050: 2020 2070 6179 6c6f 6164 203d 207b 0a20     payload = {. 
-0000a060: 2020 2020 2020 2022 6368 6174 5f69 6422         "chat_id"
-0000a070: 3a20 6368 6174 5f69 642c 0a20 2020 2020  : chat_id,.     
-0000a080: 2020 2022 7573 6572 5f69 6422 3a20 7573     "user_id": us
-0000a090: 6572 5f69 642c 0a20 2020 2020 2020 2022  er_id,.        "
-0000a0a0: 7065 726d 6973 7369 6f6e 7322 3a20 7065  permissions": pe
-0000a0b0: 726d 6973 7369 6f6e 732e 746f 5f6a 736f  rmissions.to_jso
-0000a0c0: 6e28 292c 0a20 2020 207d 0a0a 2020 2020  n(),.    }..    
-0000a0d0: 6966 2075 7365 5f69 6e64 6570 656e 6465  if use_independe
-0000a0e0: 6e74 5f63 6861 745f 7065 726d 6973 7369  nt_chat_permissi
-0000a0f0: 6f6e 7320 6973 206e 6f74 204e 6f6e 653a  ons is not None:
-0000a100: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000a110: 5b22 7573 655f 696e 6465 7065 6e64 656e  ["use_independen
-0000a120: 745f 6368 6174 5f70 6572 6d69 7373 696f  t_chat_permissio
-0000a130: 6e73 225d 203d 2075 7365 5f69 6e64 6570  ns"] = use_indep
-0000a140: 656e 6465 6e74 5f63 6861 745f 7065 726d  endent_chat_perm
-0000a150: 6973 7369 6f6e 730a 2020 2020 6966 2075  issions.    if u
-0000a160: 6e74 696c 5f64 6174 6520 6973 206e 6f74  ntil_date is not
-0000a170: 204e 6f6e 653a 0a20 2020 2020 2020 2069   None:.        i
-0000a180: 6620 6973 696e 7374 616e 6365 2875 6e74  f isinstance(unt
-0000a190: 696c 5f64 6174 652c 2064 6174 6574 696d  il_date, datetim
-0000a1a0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-0000a1b0: 7061 796c 6f61 645b 2275 6e74 696c 5f64  payload["until_d
-0000a1c0: 6174 6522 5d20 3d20 756e 7469 6c5f 6461  ate"] = until_da
-0000a1d0: 7465 2e74 696d 6573 7461 6d70 2829 0a20  te.timestamp(). 
-0000a1e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000a1f0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-0000a200: 5b22 756e 7469 6c5f 6461 7465 225d 203d  ["until_date"] =
-0000a210: 2075 6e74 696c 5f64 6174 650a 2020 2020   until_date.    
-0000a220: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-0000a230: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-0000a240: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000a250: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000a260: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-0000a270: 0a0a 6173 796e 6320 6465 6620 7072 6f6d  ..async def prom
-0000a280: 6f74 655f 6368 6174 5f6d 656d 6265 7228  ote_chat_member(
-0000a290: 0a20 2020 2074 6f6b 656e 2c0a 2020 2020  .    token,.    
-0000a2a0: 6368 6174 5f69 642c 0a20 2020 2075 7365  chat_id,.    use
-0000a2b0: 725f 6964 2c0a 2020 2020 6361 6e5f 6368  r_id,.    can_ch
-0000a2c0: 616e 6765 5f69 6e66 6f3d 4e6f 6e65 2c0a  ange_info=None,.
-0000a2d0: 2020 2020 6361 6e5f 706f 7374 5f6d 6573      can_post_mes
-0000a2e0: 7361 6765 733d 4e6f 6e65 2c0a 2020 2020  sages=None,.    
-0000a2f0: 6361 6e5f 6564 6974 5f6d 6573 7361 6765  can_edit_message
-0000a300: 733d 4e6f 6e65 2c0a 2020 2020 6361 6e5f  s=None,.    can_
-0000a310: 6465 6c65 7465 5f6d 6573 7361 6765 733d  delete_messages=
-0000a320: 4e6f 6e65 2c0a 2020 2020 6361 6e5f 696e  None,.    can_in
-0000a330: 7669 7465 5f75 7365 7273 3d4e 6f6e 652c  vite_users=None,
-0000a340: 0a20 2020 2063 616e 5f72 6573 7472 6963  .    can_restric
-0000a350: 745f 6d65 6d62 6572 733d 4e6f 6e65 2c0a  t_members=None,.
-0000a360: 2020 2020 6361 6e5f 7069 6e5f 6d65 7373      can_pin_mess
-0000a370: 6167 6573 3d4e 6f6e 652c 0a20 2020 2063  ages=None,.    c
-0000a380: 616e 5f70 726f 6d6f 7465 5f6d 656d 6265  an_promote_membe
-0000a390: 7273 3d4e 6f6e 652c 0a20 2020 2069 735f  rs=None,.    is_
-0000a3a0: 616e 6f6e 796d 6f75 733d 4e6f 6e65 2c0a  anonymous=None,.
-0000a3b0: 2020 2020 6361 6e5f 6d61 6e61 6765 5f63      can_manage_c
-0000a3c0: 6861 743d 4e6f 6e65 2c0a 2020 2020 6361  hat=None,.    ca
-0000a3d0: 6e5f 6d61 6e61 6765 5f76 6964 656f 5f63  n_manage_video_c
-0000a3e0: 6861 7473 3d4e 6f6e 652c 0a20 2020 2063  hats=None,.    c
-0000a3f0: 616e 5f6d 616e 6167 655f 746f 7069 6373  an_manage_topics
-0000a400: 3d4e 6f6e 652c 0a20 2020 2063 616e 5f70  =None,.    can_p
-0000a410: 6f73 745f 7374 6f72 6965 733d 4e6f 6e65  ost_stories=None
-0000a420: 2c0a 2020 2020 6361 6e5f 6564 6974 5f73  ,.    can_edit_s
-0000a430: 746f 7269 6573 3d4e 6f6e 652c 0a20 2020  tories=None,.   
-0000a440: 2063 616e 5f64 656c 6574 655f 7374 6f72   can_delete_stor
-0000a450: 6965 733d 4e6f 6e65 2c0a 293a 0a20 2020  ies=None,.):.   
-0000a460: 206d 6574 686f 645f 7572 6c20 3d20 2270   method_url = "p
-0000a470: 726f 6d6f 7465 4368 6174 4d65 6d62 6572  romoteChatMember
-0000a480: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-0000a490: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-0000a4a0: 5f69 642c 2022 7573 6572 5f69 6422 3a20  _id, "user_id": 
-0000a4b0: 7573 6572 5f69 647d 0a20 2020 2069 6620  user_id}.    if 
-0000a4c0: 6361 6e5f 6368 616e 6765 5f69 6e66 6f20  can_change_info 
-0000a4d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000a4e0: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
-0000a4f0: 6e5f 6368 616e 6765 5f69 6e66 6f22 5d20  n_change_info"] 
-0000a500: 3d20 6361 6e5f 6368 616e 6765 5f69 6e66  = can_change_inf
-0000a510: 6f0a 2020 2020 6966 2063 616e 5f70 6f73  o.    if can_pos
-0000a520: 745f 6d65 7373 6167 6573 2069 7320 6e6f  t_messages is no
-0000a530: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a540: 7061 796c 6f61 645b 2263 616e 5f70 6f73  payload["can_pos
-0000a550: 745f 6d65 7373 6167 6573 225d 203d 2063  t_messages"] = c
-0000a560: 616e 5f70 6f73 745f 6d65 7373 6167 6573  an_post_messages
-0000a570: 0a20 2020 2069 6620 6361 6e5f 6564 6974  .    if can_edit
-0000a580: 5f6d 6573 7361 6765 7320 6973 206e 6f74  _messages is not
-0000a590: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-0000a5a0: 6179 6c6f 6164 5b22 6361 6e5f 6564 6974  ayload["can_edit
-0000a5b0: 5f6d 6573 7361 6765 7322 5d20 3d20 6361  _messages"] = ca
-0000a5c0: 6e5f 6564 6974 5f6d 6573 7361 6765 730a  n_edit_messages.
-0000a5d0: 2020 2020 6966 2063 616e 5f64 656c 6574      if can_delet
-0000a5e0: 655f 6d65 7373 6167 6573 2069 7320 6e6f  e_messages is no
-0000a5f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a600: 7061 796c 6f61 645b 2263 616e 5f64 656c  payload["can_del
-0000a610: 6574 655f 6d65 7373 6167 6573 225d 203d  ete_messages"] =
-0000a620: 2063 616e 5f64 656c 6574 655f 6d65 7373   can_delete_mess
-0000a630: 6167 6573 0a20 2020 2069 6620 6361 6e5f  ages.    if can_
-0000a640: 696e 7669 7465 5f75 7365 7273 2069 7320  invite_users is 
-0000a650: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a660: 2020 7061 796c 6f61 645b 2263 616e 5f69    payload["can_i
-0000a670: 6e76 6974 655f 7573 6572 7322 5d20 3d20  nvite_users"] = 
-0000a680: 6361 6e5f 696e 7669 7465 5f75 7365 7273  can_invite_users
-0000a690: 0a20 2020 2069 6620 6361 6e5f 7265 7374  .    if can_rest
-0000a6a0: 7269 6374 5f6d 656d 6265 7273 2069 7320  rict_members is 
-0000a6b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a6c0: 2020 7061 796c 6f61 645b 2263 616e 5f72    payload["can_r
-0000a6d0: 6573 7472 6963 745f 6d65 6d62 6572 7322  estrict_members"
-0000a6e0: 5d20 3d20 6361 6e5f 7265 7374 7269 6374  ] = can_restrict
-0000a6f0: 5f6d 656d 6265 7273 0a20 2020 2069 6620  _members.    if 
-0000a700: 6361 6e5f 7069 6e5f 6d65 7373 6167 6573  can_pin_messages
-0000a710: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000a720: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
-0000a730: 616e 5f70 696e 5f6d 6573 7361 6765 7322  an_pin_messages"
-0000a740: 5d20 3d20 6361 6e5f 7069 6e5f 6d65 7373  ] = can_pin_mess
-0000a750: 6167 6573 0a20 2020 2069 6620 6361 6e5f  ages.    if can_
-0000a760: 7072 6f6d 6f74 655f 6d65 6d62 6572 7320  promote_members 
-0000a770: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000a780: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
-0000a790: 6e5f 7072 6f6d 6f74 655f 6d65 6d62 6572  n_promote_member
-0000a7a0: 7322 5d20 3d20 6361 6e5f 7072 6f6d 6f74  s"] = can_promot
-0000a7b0: 655f 6d65 6d62 6572 730a 2020 2020 6966  e_members.    if
-0000a7c0: 2069 735f 616e 6f6e 796d 6f75 7320 6973   is_anonymous is
-0000a7d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000a7e0: 2020 2070 6179 6c6f 6164 5b22 6973 5f61     payload["is_a
-0000a7f0: 6e6f 6e79 6d6f 7573 225d 203d 2069 735f  nonymous"] = is_
-0000a800: 616e 6f6e 796d 6f75 730a 2020 2020 6966  anonymous.    if
-0000a810: 2063 616e 5f6d 616e 6167 655f 6368 6174   can_manage_chat
-0000a820: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000a830: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
-0000a840: 616e 5f6d 616e 6167 655f 6368 6174 225d  an_manage_chat"]
-0000a850: 203d 2063 616e 5f6d 616e 6167 655f 6368   = can_manage_ch
-0000a860: 6174 0a20 2020 2069 6620 6361 6e5f 6d61  at.    if can_ma
-0000a870: 6e61 6765 5f76 6964 656f 5f63 6861 7473  nage_video_chats
-0000a880: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000a890: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
+00005940: 7469 6f6e 280a 2020 2020 2020 2020 746f  tion(.        to
+00005950: 6b65 6e2c 206c 6174 6974 7564 652c 206c  ken, latitude, l
+00005960: 6f6e 6769 7475 6465 2c20 6368 6174 5f69  ongitude, chat_i
+00005970: 643d 4e6f 6e65 2c20 6d65 7373 6167 655f  d=None, message_
+00005980: 6964 3d4e 6f6e 652c 2069 6e6c 696e 655f  id=None, inline_
+00005990: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+000059a0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+000059b0: 6e65 2c0a 2020 2020 2020 2020 7469 6d65  ne,.        time
+000059c0: 6f75 743d 4e6f 6e65 2c20 686f 7269 7a6f  out=None, horizo
+000059d0: 6e74 616c 5f61 6363 7572 6163 793d 4e6f  ntal_accuracy=No
+000059e0: 6e65 2c20 6865 6164 696e 673d 4e6f 6e65  ne, heading=None
+000059f0: 2c20 7072 6f78 696d 6974 795f 616c 6572  , proximity_aler
+00005a00: 745f 7261 6469 7573 3d4e 6f6e 652c 206c  t_radius=None, l
+00005a10: 6976 655f 7065 7269 6f64 3d4e 6f6e 6529  ive_period=None)
+00005a20: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00005a30: 203d 2072 2765 6469 744d 6573 7361 6765   = r'editMessage
+00005a40: 4c69 7665 4c6f 6361 7469 6f6e 270a 2020  LiveLocation'.  
+00005a50: 2020 7061 796c 6f61 6420 3d20 7b27 6c61    payload = {'la
+00005a60: 7469 7475 6465 273a 206c 6174 6974 7564  titude': latitud
+00005a70: 652c 2027 6c6f 6e67 6974 7564 6527 3a20  e, 'longitude': 
+00005a80: 6c6f 6e67 6974 7564 657d 0a20 2020 2069  longitude}.    i
+00005a90: 6620 6368 6174 5f69 643a 0a20 2020 2020  f chat_id:.     
+00005aa0: 2020 2070 6179 6c6f 6164 5b22 6368 6174     payload["chat
+00005ab0: 5f69 6422 5d20 3d20 6368 6174 5f69 640a  _id"] = chat_id.
+00005ac0: 2020 2020 6966 206d 6573 7361 6765 5f69      if message_i
+00005ad0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00005ae0: 6164 5b22 6d65 7373 6167 655f 6964 225d  ad["message_id"]
+00005af0: 203d 206d 6573 7361 6765 5f69 640a 2020   = message_id.  
+00005b00: 2020 6966 2068 6f72 697a 6f6e 7461 6c5f    if horizontal_
+00005b10: 6163 6375 7261 6379 3a0a 2020 2020 2020  accuracy:.      
+00005b20: 2020 7061 796c 6f61 645b 2268 6f72 697a    payload["horiz
+00005b30: 6f6e 7461 6c5f 6163 6375 7261 6379 225d  ontal_accuracy"]
+00005b40: 203d 2068 6f72 697a 6f6e 7461 6c5f 6163   = horizontal_ac
+00005b50: 6375 7261 6379 0a20 2020 2069 6620 6865  curacy.    if he
+00005b60: 6164 696e 673a 0a20 2020 2020 2020 2070  ading:.        p
+00005b70: 6179 6c6f 6164 5b22 6865 6164 696e 6722  ayload["heading"
+00005b80: 5d20 3d20 6865 6164 696e 670a 2020 2020  ] = heading.    
+00005b90: 6966 2070 726f 7869 6d69 7479 5f61 6c65  if proximity_ale
+00005ba0: 7274 5f72 6164 6975 733a 0a20 2020 2020  rt_radius:.     
+00005bb0: 2020 2070 6179 6c6f 6164 5b27 7072 6f78     payload['prox
+00005bc0: 696d 6974 795f 616c 6572 745f 7261 6469  imity_alert_radi
+00005bd0: 7573 275d 203d 2070 726f 7869 6d69 7479  us'] = proximity
+00005be0: 5f61 6c65 7274 5f72 6164 6975 730a 2020  _alert_radius.  
+00005bf0: 2020 6966 206c 6976 655f 7065 7269 6f64    if live_period
+00005c00: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00005c10: 645b 276c 6976 655f 7065 7269 6f64 275d  d['live_period']
+00005c20: 203d 206c 6976 655f 7065 7269 6f64 0a20   = live_period. 
+00005c30: 2020 2069 6620 696e 6c69 6e65 5f6d 6573     if inline_mes
+00005c40: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
+00005c50: 2070 6179 6c6f 6164 5b22 696e 6c69 6e65   payload["inline
+00005c60: 5f6d 6573 7361 6765 5f69 6422 5d20 3d20  _message_id"] = 
+00005c70: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+00005c80: 640a 2020 2020 6966 2072 6570 6c79 5f6d  d.    if reply_m
+00005c90: 6172 6b75 703a 0a20 2020 2020 2020 2070  arkup:.        p
+00005ca0: 6179 6c6f 6164 5b22 7265 706c 795f 6d61  ayload["reply_ma
+00005cb0: 726b 7570 225d 203d 2061 7761 6974 205f  rkup"] = await _
+00005cc0: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
+00005cd0: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
+00005ce0: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
+00005cf0: 2020 2020 2070 6179 6c6f 6164 5b22 7469       payload["ti
+00005d00: 6d65 6f75 7422 5d20 3d20 7469 6d65 6f75  meout"] = timeou
+00005d10: 740a 2020 2020 7265 7475 726e 2061 7761  t.    return awa
+00005d20: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+00005d30: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00005d40: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00005d50: 796c 6f61 6429 0a0a 0a61 7379 6e63 2064  yload)...async d
+00005d60: 6566 2073 746f 705f 6d65 7373 6167 655f  ef stop_message_
+00005d70: 6c69 7665 5f6c 6f63 6174 696f 6e28 0a20  live_location(. 
+00005d80: 2020 2074 6f6b 656e 2c0a 2020 2020 6368     token,.    ch
+00005d90: 6174 5f69 643d 4e6f 6e65 2c0a 2020 2020  at_id=None,.    
+00005da0: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+00005db0: 0a20 2020 2069 6e6c 696e 655f 6d65 7373  .    inline_mess
+00005dc0: 6167 655f 6964 3d4e 6f6e 652c 0a20 2020  age_id=None,.   
+00005dd0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00005de0: 6e65 2c0a 2020 2020 7469 6d65 6f75 743d  ne,.    timeout=
+00005df0: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
+00005e00: 686f 645f 7572 6c20 3d20 7222 7374 6f70  hod_url = r"stop
+00005e10: 4d65 7373 6167 654c 6976 654c 6f63 6174  MessageLiveLocat
+00005e20: 696f 6e22 0a20 2020 2070 6179 6c6f 6164  ion".    payload
+00005e30: 203d 207b 7d0a 2020 2020 6966 2063 6861   = {}.    if cha
+00005e40: 745f 6964 3a0a 2020 2020 2020 2020 7061  t_id:.        pa
+00005e50: 796c 6f61 645b 2263 6861 745f 6964 225d  yload["chat_id"]
+00005e60: 203d 2063 6861 745f 6964 0a20 2020 2069   = chat_id.    i
+00005e70: 6620 6d65 7373 6167 655f 6964 3a0a 2020  f message_id:.  
+00005e80: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+00005e90: 6573 7361 6765 5f69 6422 5d20 3d20 6d65  essage_id"] = me
+00005ea0: 7373 6167 655f 6964 0a20 2020 2069 6620  ssage_id.    if 
+00005eb0: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+00005ec0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00005ed0: 6164 5b22 696e 6c69 6e65 5f6d 6573 7361  ad["inline_messa
+00005ee0: 6765 5f69 6422 5d20 3d20 696e 6c69 6e65  ge_id"] = inline
+00005ef0: 5f6d 6573 7361 6765 5f69 640a 2020 2020  _message_id.    
+00005f00: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+00005f10: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00005f20: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
+00005f30: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
+00005f40: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+00005f50: 6172 6b75 7029 0a20 2020 2069 6620 7469  arkup).    if ti
+00005f60: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
+00005f70: 6179 6c6f 6164 5b22 7469 6d65 6f75 7422  ayload["timeout"
+00005f80: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
+00005f90: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+00005fa0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+00005fb0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00005fc0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00005fd0: 0a0a 0a61 7379 6e63 2064 6566 2073 656e  ...async def sen
+00005fe0: 645f 7665 6e75 6528 0a20 2020 2074 6f6b  d_venue(.    tok
+00005ff0: 656e 2c0a 2020 2020 6368 6174 5f69 642c  en,.    chat_id,
+00006000: 0a20 2020 206c 6174 6974 7564 652c 0a20  .    latitude,. 
+00006010: 2020 206c 6f6e 6769 7475 6465 2c0a 2020     longitude,.  
+00006020: 2020 7469 746c 652c 0a20 2020 2061 6464    title,.    add
+00006030: 7265 7373 2c0a 2020 2020 666f 7572 7371  ress,.    foursq
+00006040: 7561 7265 5f69 643d 4e6f 6e65 2c0a 2020  uare_id=None,.  
+00006050: 2020 666f 7572 7371 7561 7265 5f74 7970    foursquare_typ
+00006060: 653d 4e6f 6e65 2c0a 2020 2020 6469 7361  e=None,.    disa
+00006070: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00006080: 3d4e 6f6e 652c 0a20 2020 2072 6570 6c79  =None,.    reply
+00006090: 5f6d 6172 6b75 703d 4e6f 6e65 2c0a 2020  _markup=None,.  
+000060a0: 2020 7469 6d65 6f75 743d 4e6f 6e65 2c0a    timeout=None,.
+000060b0: 2020 2020 676f 6f67 6c65 5f70 6c61 6365      google_place
+000060c0: 5f69 643d 4e6f 6e65 2c0a 2020 2020 676f  _id=None,.    go
+000060d0: 6f67 6c65 5f70 6c61 6365 5f74 7970 653d  ogle_place_type=
+000060e0: 4e6f 6e65 2c0a 2020 2020 7072 6f74 6563  None,.    protec
+000060f0: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0a  t_content=None,.
+00006100: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
+00006110: 6164 5f69 643d 4e6f 6e65 2c0a 2020 2020  ad_id=None,.    
+00006120: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00006130: 3d4e 6f6e 652c 0a20 2020 2062 7573 696e  =None,.    busin
+00006140: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00006150: 643d 4e6f 6e65 2c0a 293a 0a20 2020 206d  d=None,.):.    m
+00006160: 6574 686f 645f 7572 6c20 3d20 7222 7365  ethod_url = r"se
+00006170: 6e64 5665 6e75 6522 0a20 2020 2070 6179  ndVenue".    pay
+00006180: 6c6f 6164 203d 207b 0a20 2020 2020 2020  load = {.       
+00006190: 2022 6368 6174 5f69 6422 3a20 6368 6174   "chat_id": chat
+000061a0: 5f69 642c 0a20 2020 2020 2020 2022 6c61  _id,.        "la
+000061b0: 7469 7475 6465 223a 206c 6174 6974 7564  titude": latitud
+000061c0: 652c 0a20 2020 2020 2020 2022 6c6f 6e67  e,.        "long
+000061d0: 6974 7564 6522 3a20 6c6f 6e67 6974 7564  itude": longitud
+000061e0: 652c 0a20 2020 2020 2020 2022 7469 746c  e,.        "titl
+000061f0: 6522 3a20 7469 746c 652c 0a20 2020 2020  e": title,.     
+00006200: 2020 2022 6164 6472 6573 7322 3a20 6164     "address": ad
+00006210: 6472 6573 732c 0a20 2020 207d 0a20 2020  dress,.    }.   
+00006220: 2069 6620 666f 7572 7371 7561 7265 5f69   if foursquare_i
+00006230: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00006240: 6164 5b22 666f 7572 7371 7561 7265 5f69  ad["foursquare_i
+00006250: 6422 5d20 3d20 666f 7572 7371 7561 7265  d"] = foursquare
+00006260: 5f69 640a 2020 2020 6966 2066 6f75 7273  _id.    if fours
+00006270: 7175 6172 655f 7479 7065 3a0a 2020 2020  quare_type:.    
+00006280: 2020 2020 7061 796c 6f61 645b 2266 6f75      payload["fou
+00006290: 7273 7175 6172 655f 7479 7065 225d 203d  rsquare_type"] =
+000062a0: 2066 6f75 7273 7175 6172 655f 7479 7065   foursquare_type
+000062b0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+000062c0: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+000062d0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000062e0: 2020 7061 796c 6f61 645b 2264 6973 6162    payload["disab
+000062f0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e22  le_notification"
+00006300: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+00006310: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
+00006320: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00006330: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00006340: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
+00006350: 6570 6c79 5f70 6172 616d 6574 6572 7322  eply_parameters"
+00006360: 5d20 3d20 6a73 6f6e 2e64 756d 7073 2872  ] = json.dumps(r
+00006370: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
+00006380: 746f 5f64 6963 7428 2929 0a20 2020 2069  to_dict()).    i
+00006390: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+000063a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000063b0: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
+000063c0: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
+000063d0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+000063e0: 726b 7570 290a 2020 2020 6966 2074 696d  rkup).    if tim
+000063f0: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+00006400: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
+00006410: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+00006420: 6620 676f 6f67 6c65 5f70 6c61 6365 5f69  f google_place_i
+00006430: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00006440: 6164 5b22 676f 6f67 6c65 5f70 6c61 6365  ad["google_place
+00006450: 5f69 6422 5d20 3d20 676f 6f67 6c65 5f70  _id"] = google_p
+00006460: 6c61 6365 5f69 640a 2020 2020 6966 2067  lace_id.    if g
+00006470: 6f6f 676c 655f 706c 6163 655f 7479 7065  oogle_place_type
+00006480: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00006490: 645b 2267 6f6f 676c 655f 706c 6163 655f  d["google_place_
+000064a0: 7479 7065 225d 203d 2067 6f6f 676c 655f  type"] = google_
+000064b0: 706c 6163 655f 7479 7065 0a20 2020 2069  place_type.    i
+000064c0: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
+000064d0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+000064e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000064f0: 7072 6f74 6563 745f 636f 6e74 656e 7422  protect_content"
+00006500: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
+00006510: 656e 740a 2020 2020 6966 206d 6573 7361  ent.    if messa
+00006520: 6765 5f74 6872 6561 645f 6964 3a0a 2020  ge_thread_id:.  
+00006530: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+00006540: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00006550: 225d 203d 206d 6573 7361 6765 5f74 6872  "] = message_thr
+00006560: 6561 645f 6964 0a20 2020 2069 6620 6275  ead_id.    if bu
+00006570: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00006580: 6e5f 6964 3a0a 2020 2020 2020 2020 7061  n_id:.        pa
+00006590: 796c 6f61 645b 2262 7573 696e 6573 735f  yload["business_
+000065a0: 636f 6e6e 6563 7469 6f6e 5f69 6422 5d20  connection_id"] 
+000065b0: 3d20 6275 7369 6e65 7373 5f63 6f6e 6e65  = business_conne
+000065c0: 6374 696f 6e5f 6964 0a20 2020 2072 6574  ction_id.    ret
+000065d0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+000065e0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+000065f0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00006600: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+00006610: 6173 796e 6320 6465 6620 7365 6e64 5f63  async def send_c
+00006620: 6f6e 7461 6374 280a 2020 2020 746f 6b65  ontact(.    toke
+00006630: 6e2c 0a20 2020 2063 6861 745f 6964 2c0a  n,.    chat_id,.
+00006640: 2020 2020 7068 6f6e 655f 6e75 6d62 6572      phone_number
+00006650: 2c0a 2020 2020 6669 7273 745f 6e61 6d65  ,.    first_name
+00006660: 2c0a 2020 2020 6c61 7374 5f6e 616d 653d  ,.    last_name=
+00006670: 4e6f 6e65 2c0a 2020 2020 7663 6172 643d  None,.    vcard=
+00006680: 4e6f 6e65 2c0a 2020 2020 6469 7361 626c  None,.    disabl
+00006690: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
+000066a0: 6f6e 652c 0a20 2020 2072 6570 6c79 5f6d  one,.    reply_m
+000066b0: 6172 6b75 703d 4e6f 6e65 2c0a 2020 2020  arkup=None,.    
+000066c0: 7469 6d65 6f75 743d 4e6f 6e65 2c0a 2020  timeout=None,.  
+000066d0: 2020 7072 6f74 6563 745f 636f 6e74 656e    protect_conten
+000066e0: 743d 4e6f 6e65 2c0a 2020 2020 6d65 7373  t=None,.    mess
+000066f0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
+00006700: 6e65 2c0a 2020 2020 7265 706c 795f 7061  ne,.    reply_pa
+00006710: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
+00006720: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
+00006730: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
+00006740: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+00006750: 6c20 3d20 7222 7365 6e64 436f 6e74 6163  l = r"sendContac
+00006760: 7422 0a20 2020 2070 6179 6c6f 6164 203d  t".    payload =
+00006770: 207b 0a20 2020 2020 2020 2022 6368 6174   {.        "chat
+00006780: 5f69 6422 3a20 6368 6174 5f69 642c 0a20  _id": chat_id,. 
+00006790: 2020 2020 2020 2022 7068 6f6e 655f 6e75         "phone_nu
+000067a0: 6d62 6572 223a 2070 686f 6e65 5f6e 756d  mber": phone_num
+000067b0: 6265 722c 0a20 2020 2020 2020 2022 6669  ber,.        "fi
+000067c0: 7273 745f 6e61 6d65 223a 2066 6972 7374  rst_name": first
+000067d0: 5f6e 616d 652c 0a20 2020 207d 0a20 2020  _name,.    }.   
+000067e0: 2069 6620 6c61 7374 5f6e 616d 653a 0a20   if last_name:. 
+000067f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00006800: 6c61 7374 5f6e 616d 6522 5d20 3d20 6c61  last_name"] = la
+00006810: 7374 5f6e 616d 650a 2020 2020 6966 2076  st_name.    if v
+00006820: 6361 7264 3a0a 2020 2020 2020 2020 7061  card:.        pa
+00006830: 796c 6f61 645b 2276 6361 7264 225d 203d  yload["vcard"] =
+00006840: 2076 6361 7264 0a20 2020 2069 6620 6469   vcard.    if di
+00006850: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00006860: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
+00006870: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006880: 2264 6973 6162 6c65 5f6e 6f74 6966 6963  "disable_notific
+00006890: 6174 696f 6e22 5d20 3d20 6469 7361 626c  ation"] = disabl
+000068a0: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
+000068b0: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
+000068c0: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
+000068d0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+000068e0: 6f61 645b 2272 6570 6c79 5f70 6172 616d  oad["reply_param
+000068f0: 6574 6572 7322 5d20 3d20 6a73 6f6e 2e64  eters"] = json.d
+00006900: 756d 7073 2872 6570 6c79 5f70 6172 616d  umps(reply_param
+00006910: 6574 6572 732e 746f 5f64 6963 7428 2929  eters.to_dict())
+00006920: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+00006930: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
+00006940: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
+00006950: 6b75 7022 5d20 3d20 6177 6169 7420 5f63  kup"] = await _c
+00006960: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
+00006970: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
+00006980: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
+00006990: 2020 2020 7061 796c 6f61 645b 2274 696d      payload["tim
+000069a0: 656f 7574 225d 203d 2074 696d 656f 7574  eout"] = timeout
+000069b0: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
+000069c0: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
+000069d0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+000069e0: 6c6f 6164 5b22 7072 6f74 6563 745f 636f  load["protect_co
+000069f0: 6e74 656e 7422 5d20 3d20 7072 6f74 6563  ntent"] = protec
+00006a00: 745f 636f 6e74 656e 740a 2020 2020 6966  t_content.    if
+00006a10: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00006a20: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+00006a30: 6f61 645b 226d 6573 7361 6765 5f74 6872  oad["message_thr
+00006a40: 6561 645f 6964 225d 203d 206d 6573 7361  ead_id"] = messa
+00006a50: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
+00006a60: 2069 6620 6275 7369 6e65 7373 5f63 6f6e   if business_con
+00006a70: 6e65 6374 696f 6e5f 6964 3a0a 2020 2020  nection_id:.    
+00006a80: 2020 2020 7061 796c 6f61 645b 2262 7573      payload["bus
+00006a90: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+00006aa0: 5f69 6422 5d20 3d20 6275 7369 6e65 7373  _id"] = business
+00006ab0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 0a20  _connection_id. 
+00006ac0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00006ad0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00006ae0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00006af0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00006b00: 6164 290a 0a0a 6173 796e 6320 6465 6620  ad)...async def 
+00006b10: 7365 6e64 5f63 6861 745f 6163 7469 6f6e  send_chat_action
+00006b20: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
+00006b30: 2063 6861 745f 6964 2c0a 2020 2020 6163   chat_id,.    ac
+00006b40: 7469 6f6e 2c0a 2020 2020 7469 6d65 6f75  tion,.    timeou
+00006b50: 743d 4e6f 6e65 2c0a 2020 2020 6d65 7373  t=None,.    mess
+00006b60: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
+00006b70: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
+00006b80: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
+00006b90: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
+00006ba0: 6f64 5f75 726c 203d 2072 2273 656e 6443  od_url = r"sendC
+00006bb0: 6861 7441 6374 696f 6e22 0a20 2020 2070  hatAction".    p
+00006bc0: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+00006bd0: 6964 223a 2063 6861 745f 6964 2c20 2261  id": chat_id, "a
+00006be0: 6374 696f 6e22 3a20 6163 7469 6f6e 7d0a  ction": action}.
+00006bf0: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
+00006c00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006c10: 2274 696d 656f 7574 225d 203d 2074 696d  "timeout"] = tim
+00006c20: 656f 7574 0a20 2020 2069 6620 6d65 7373  eout.    if mess
+00006c30: 6167 655f 7468 7265 6164 5f69 643a 0a20  age_thread_id:. 
+00006c40: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00006c50: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00006c60: 6422 5d20 3d20 6d65 7373 6167 655f 7468  d"] = message_th
+00006c70: 7265 6164 5f69 640a 2020 2020 6966 2062  read_id.    if b
+00006c80: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00006c90: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00006ca0: 6179 6c6f 6164 5b22 6275 7369 6e65 7373  ayload["business
+00006cb0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 225d  _connection_id"]
+00006cc0: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00006cd0: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+00006ce0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+00006cf0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+00006d00: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00006d10: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
+00006d20: 0a61 7379 6e63 2064 6566 2073 656e 645f  .async def send_
+00006d30: 7669 6465 6f28 0a20 2020 2074 6f6b 656e  video(.    token
+00006d40: 2c0a 2020 2020 6368 6174 5f69 642c 0a20  ,.    chat_id,. 
+00006d50: 2020 2064 6174 612c 0a20 2020 2064 7572     data,.    dur
+00006d60: 6174 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ation=None,.    
+00006d70: 6361 7074 696f 6e3d 4e6f 6e65 2c0a 2020  caption=None,.  
+00006d80: 2020 7265 706c 795f 6d61 726b 7570 3d4e    reply_markup=N
+00006d90: 6f6e 652c 0a20 2020 2070 6172 7365 5f6d  one,.    parse_m
+00006da0: 6f64 653d 4e6f 6e65 2c0a 2020 2020 7375  ode=None,.    su
+00006db0: 7070 6f72 7473 5f73 7472 6561 6d69 6e67  pports_streaming
+00006dc0: 3d4e 6f6e 652c 0a20 2020 2064 6973 6162  =None,.    disab
+00006dd0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00006de0: 4e6f 6e65 2c0a 2020 2020 7469 6d65 6f75  None,.    timeou
+00006df0: 743d 4e6f 6e65 2c0a 2020 2020 7468 756d  t=None,.    thum
+00006e00: 626e 6169 6c3d 4e6f 6e65 2c0a 2020 2020  bnail=None,.    
+00006e10: 7769 6474 683d 4e6f 6e65 2c0a 2020 2020  width=None,.    
+00006e20: 6865 6967 6874 3d4e 6f6e 652c 0a20 2020  height=None,.   
+00006e30: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00006e40: 733d 4e6f 6e65 2c0a 2020 2020 7072 6f74  s=None,.    prot
+00006e50: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
+00006e60: 2c0a 2020 2020 6d65 7373 6167 655f 7468  ,.    message_th
+00006e70: 7265 6164 5f69 643d 4e6f 6e65 2c0a 2020  read_id=None,.  
+00006e80: 2020 6861 735f 7370 6f69 6c65 723d 4e6f    has_spoiler=No
+00006e90: 6e65 2c0a 2020 2020 7265 706c 795f 7061  ne,.    reply_pa
+00006ea0: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
+00006eb0: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
+00006ec0: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
+00006ed0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+00006ee0: 6c20 3d20 7222 7365 6e64 5669 6465 6f22  l = r"sendVideo"
+00006ef0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00006f00: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
+00006f10: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
+00006f20: 4e6f 6e65 0a20 2020 2069 6620 6e6f 7420  None.    if not 
+00006f30: 7574 696c 2e69 735f 7374 7269 6e67 2864  util.is_string(d
+00006f40: 6174 6129 3a0a 2020 2020 2020 2020 6669  ata):.        fi
+00006f50: 6c65 7320 3d20 7b22 7669 6465 6f22 3a20  les = {"video": 
+00006f60: 6461 7461 7d0a 2020 2020 656c 7365 3a0a  data}.    else:.
+00006f70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006f80: 2276 6964 656f 225d 203d 2064 6174 610a  "video"] = data.
+00006f90: 2020 2020 6966 2064 7572 6174 696f 6e3a      if duration:
+00006fa0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006fb0: 5b22 6475 7261 7469 6f6e 225d 203d 2064  ["duration"] = d
+00006fc0: 7572 6174 696f 6e0a 2020 2020 6966 2063  uration.    if c
+00006fd0: 6170 7469 6f6e 3a0a 2020 2020 2020 2020  aption:.        
+00006fe0: 7061 796c 6f61 645b 2263 6170 7469 6f6e  payload["caption
+00006ff0: 225d 203d 2063 6170 7469 6f6e 0a20 2020  "] = caption.   
+00007000: 2069 6620 7265 706c 795f 7061 7261 6d65   if reply_parame
+00007010: 7465 7273 2069 7320 6e6f 7420 4e6f 6e65  ters is not None
+00007020: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00007030: 645b 2272 6570 6c79 5f70 6172 616d 6574  d["reply_paramet
+00007040: 6572 7322 5d20 3d20 6a73 6f6e 2e64 756d  ers"] = json.dum
+00007050: 7073 2872 6570 6c79 5f70 6172 616d 6574  ps(reply_paramet
+00007060: 6572 732e 746f 5f64 6963 7428 2929 0a20  ers.to_dict()). 
+00007070: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
+00007080: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
+00007090: 6f61 645b 2272 6570 6c79 5f6d 6172 6b75  oad["reply_marku
+000070a0: 7022 5d20 3d20 6177 6169 7420 5f63 6f6e  p"] = await _con
+000070b0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+000070c0: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
+000070d0: 2070 6172 7365 5f6d 6f64 653a 0a20 2020   parse_mode:.   
+000070e0: 2020 2020 2070 6179 6c6f 6164 5b22 7061       payload["pa
+000070f0: 7273 655f 6d6f 6465 225d 203d 2070 6172  rse_mode"] = par
+00007100: 7365 5f6d 6f64 650a 2020 2020 6966 2073  se_mode.    if s
+00007110: 7570 706f 7274 735f 7374 7265 616d 696e  upports_streamin
+00007120: 6720 6973 206e 6f74 204e 6f6e 653a 0a20  g is not None:. 
+00007130: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00007140: 7375 7070 6f72 7473 5f73 7472 6561 6d69  supports_streami
+00007150: 6e67 225d 203d 2073 7570 706f 7274 735f  ng"] = supports_
+00007160: 7374 7265 616d 696e 670a 2020 2020 6966  streaming.    if
+00007170: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00007180: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
+00007190: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+000071a0: 6164 5b22 6469 7361 626c 655f 6e6f 7469  ad["disable_noti
+000071b0: 6669 6361 7469 6f6e 225d 203d 2064 6973  fication"] = dis
+000071c0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000071d0: 6e0a 2020 2020 6966 2074 696d 656f 7574  n.    if timeout
+000071e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000071f0: 645b 2274 696d 656f 7574 225d 203d 2074  d["timeout"] = t
+00007200: 696d 656f 7574 0a20 2020 2069 6620 7468  imeout.    if th
+00007210: 756d 626e 6169 6c3a 0a20 2020 2020 2020  umbnail:.       
+00007220: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
+00007230: 7374 7269 6e67 2874 6875 6d62 6e61 696c  string(thumbnail
+00007240: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+00007250: 6620 6669 6c65 733a 0a20 2020 2020 2020  f files:.       
+00007260: 2020 2020 2020 2020 2066 696c 6573 5b22           files["
+00007270: 7468 756d 626e 6169 6c22 5d20 3d20 7468  thumbnail"] = th
+00007280: 756d 626e 6169 6c0a 2020 2020 2020 2020  umbnail.        
+00007290: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000072a0: 2020 2020 2020 2020 2020 6669 6c65 7320            files 
+000072b0: 3d20 7b22 7468 756d 626e 6169 6c22 3a20  = {"thumbnail": 
+000072c0: 7468 756d 626e 6169 6c7d 0a20 2020 2020  thumbnail}.     
+000072d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000072e0: 2020 2020 2070 6179 6c6f 6164 5b22 7468       payload["th
+000072f0: 756d 626e 6169 6c22 5d20 3d20 7468 756d  umbnail"] = thum
+00007300: 626e 6169 6c0a 2020 2020 6966 2077 6964  bnail.    if wid
+00007310: 7468 3a0a 2020 2020 2020 2020 7061 796c  th:.        payl
+00007320: 6f61 645b 2277 6964 7468 225d 203d 2077  oad["width"] = w
+00007330: 6964 7468 0a20 2020 2069 6620 6865 6967  idth.    if heig
+00007340: 6874 3a0a 2020 2020 2020 2020 7061 796c  ht:.        payl
+00007350: 6f61 645b 2268 6569 6768 7422 5d20 3d20  oad["height"] = 
+00007360: 6865 6967 6874 0a20 2020 2069 6620 6361  height.    if ca
+00007370: 7074 696f 6e5f 656e 7469 7469 6573 3a0a  ption_entities:.
+00007380: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007390: 2263 6170 7469 6f6e 5f65 6e74 6974 6965  "caption_entitie
+000073a0: 7322 5d20 3d20 6a73 6f6e 2e64 756d 7073  s"] = json.dumps
+000073b0: 280a 2020 2020 2020 2020 2020 2020 7479  (.            ty
+000073c0: 7065 732e 4d65 7373 6167 6545 6e74 6974  pes.MessageEntit
+000073d0: 792e 746f 5f6c 6973 745f 6f66 5f64 6963  y.to_list_of_dic
+000073e0: 7473 2863 6170 7469 6f6e 5f65 6e74 6974  ts(caption_entit
+000073f0: 6965 7329 0a20 2020 2020 2020 2029 0a20  ies).        ). 
+00007400: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
+00007410: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
+00007420: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00007430: 6164 5b22 7072 6f74 6563 745f 636f 6e74  ad["protect_cont
+00007440: 656e 7422 5d20 3d20 7072 6f74 6563 745f  ent"] = protect_
+00007450: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
+00007460: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00007470: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00007480: 645b 226d 6573 7361 6765 5f74 6872 6561  d["message_threa
+00007490: 645f 6964 225d 203d 206d 6573 7361 6765  d_id"] = message
+000074a0: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
+000074b0: 6620 6861 735f 7370 6f69 6c65 7220 6973  f has_spoiler is
+000074c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000074d0: 2020 2070 6179 6c6f 6164 5b22 6861 735f     payload["has_
+000074e0: 7370 6f69 6c65 7222 5d20 3d20 6861 735f  spoiler"] = has_
+000074f0: 7370 6f69 6c65 720a 2020 2020 6966 2062  spoiler.    if b
+00007500: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00007510: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00007520: 6179 6c6f 6164 5b22 6275 7369 6e65 7373  ayload["business
+00007530: 5f63 6f6e 6e65 6374 696f 6e5f 6964 225d  _connection_id"]
+00007540: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00007550: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+00007560: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+00007570: 6573 735f 7265 7175 6573 7428 0a20 2020  ess_request(.   
+00007580: 2020 2020 2074 6f6b 656e 2c20 6d65 7468       token, meth
+00007590: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+000075a0: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
+000075b0: 6c65 732c 206d 6574 686f 643d 2270 6f73  les, method="pos
+000075c0: 7422 0a20 2020 2029 0a0a 0a61 7379 6e63  t".    )...async
+000075d0: 2064 6566 2073 656e 645f 616e 696d 6174   def send_animat
+000075e0: 696f 6e28 0a20 2020 2074 6f6b 656e 2c0a  ion(.    token,.
+000075f0: 2020 2020 6368 6174 5f69 642c 0a20 2020      chat_id,.   
+00007600: 2064 6174 612c 0a20 2020 2064 7572 6174   data,.    durat
+00007610: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 6361  ion=None,.    ca
+00007620: 7074 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ption=None,.    
+00007630: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00007640: 652c 0a20 2020 2070 6172 7365 5f6d 6f64  e,.    parse_mod
+00007650: 653d 4e6f 6e65 2c0a 2020 2020 6469 7361  e=None,.    disa
+00007660: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00007670: 3d4e 6f6e 652c 0a20 2020 2074 696d 656f  =None,.    timeo
+00007680: 7574 3d4e 6f6e 652c 0a20 2020 2074 6875  ut=None,.    thu
+00007690: 6d62 6e61 696c 3d4e 6f6e 652c 0a20 2020  mbnail=None,.   
+000076a0: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+000076b0: 733d 4e6f 6e65 2c0a 2020 2020 7769 6474  s=None,.    widt
+000076c0: 683d 4e6f 6e65 2c0a 2020 2020 6865 6967  h=None,.    heig
+000076d0: 6874 3d4e 6f6e 652c 0a20 2020 2070 726f  ht=None,.    pro
+000076e0: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
+000076f0: 652c 0a20 2020 206d 6573 7361 6765 5f74  e,.    message_t
+00007700: 6872 6561 645f 6964 3d4e 6f6e 652c 0a20  hread_id=None,. 
+00007710: 2020 2068 6173 5f73 706f 696c 6572 3d4e     has_spoiler=N
+00007720: 6f6e 652c 0a20 2020 2072 6570 6c79 5f70  one,.    reply_p
+00007730: 6172 616d 6574 6572 733d 4e6f 6e65 2c0a  arameters=None,.
+00007740: 2020 2020 6275 7369 6e65 7373 5f63 6f6e      business_con
+00007750: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 652c  nection_id=None,
+00007760: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+00007770: 726c 203d 2072 2273 656e 6441 6e69 6d61  rl = r"sendAnima
+00007780: 7469 6f6e 220a 2020 2020 7061 796c 6f61  tion".    payloa
+00007790: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
+000077a0: 6368 6174 5f69 647d 0a20 2020 2066 696c  chat_id}.    fil
+000077b0: 6573 203d 204e 6f6e 650a 2020 2020 6966  es = None.    if
+000077c0: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
+000077d0: 696e 6728 6461 7461 293a 0a20 2020 2020  ing(data):.     
+000077e0: 2020 2066 696c 6573 203d 207b 2261 6e69     files = {"ani
+000077f0: 6d61 7469 6f6e 223a 2064 6174 617d 0a20  mation": data}. 
+00007800: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00007810: 2070 6179 6c6f 6164 5b22 616e 696d 6174   payload["animat
+00007820: 696f 6e22 5d20 3d20 6461 7461 0a20 2020  ion"] = data.   
+00007830: 2069 6620 6475 7261 7469 6f6e 3a0a 2020   if duration:.  
+00007840: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
+00007850: 7572 6174 696f 6e22 5d20 3d20 6475 7261  uration"] = dura
+00007860: 7469 6f6e 0a20 2020 2069 6620 6361 7074  tion.    if capt
+00007870: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
+00007880: 6c6f 6164 5b22 6361 7074 696f 6e22 5d20  load["caption"] 
+00007890: 3d20 6361 7074 696f 6e0a 2020 2020 6966  = caption.    if
+000078a0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+000078b0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+000078c0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000078d0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+000078e0: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
+000078f0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+00007900: 2e74 6f5f 6469 6374 2829 290a 2020 2020  .to_dict()).    
+00007910: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+00007920: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007930: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
+00007940: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
+00007950: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+00007960: 6172 6b75 7029 0a20 2020 2069 6620 7061  arkup).    if pa
+00007970: 7273 655f 6d6f 6465 3a0a 2020 2020 2020  rse_mode:.      
+00007980: 2020 7061 796c 6f61 645b 2270 6172 7365    payload["parse
+00007990: 5f6d 6f64 6522 5d20 3d20 7061 7273 655f  _mode"] = parse_
+000079a0: 6d6f 6465 0a20 2020 2069 6620 6469 7361  mode.    if disa
+000079b0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000079c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000079d0: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
+000079e0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+000079f0: 696f 6e22 5d20 3d20 6469 7361 626c 655f  ion"] = disable_
+00007a00: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
+00007a10: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
+00007a20: 2020 2020 2070 6179 6c6f 6164 5b22 7469       payload["ti
+00007a30: 6d65 6f75 7422 5d20 3d20 7469 6d65 6f75  meout"] = timeou
+00007a40: 740a 2020 2020 6966 2074 6875 6d62 6e61  t.    if thumbna
+00007a50: 696c 3a0a 2020 2020 2020 2020 6966 206e  il:.        if n
+00007a60: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
+00007a70: 6728 7468 756d 626e 6169 6c29 3a0a 2020  g(thumbnail):.  
+00007a80: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
+00007a90: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00007aa0: 2020 2020 6669 6c65 735b 2274 6875 6d62      files["thumb
+00007ab0: 6e61 696c 225d 203d 2074 6875 6d62 6e61  nail"] = thumbna
+00007ac0: 696c 0a20 2020 2020 2020 2020 2020 2065  il.            e
+00007ad0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00007ae0: 2020 2020 2066 696c 6573 203d 207b 2274       files = {"t
+00007af0: 6875 6d62 6e61 696c 223a 2074 6875 6d62  humbnail": thumb
+00007b00: 6e61 696c 7d0a 2020 2020 2020 2020 656c  nail}.        el
+00007b10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00007b20: 7061 796c 6f61 645b 2274 6875 6d62 6e61  payload["thumbna
+00007b30: 696c 225d 203d 2074 6875 6d62 6e61 696c  il"] = thumbnail
+00007b40: 0a20 2020 2069 6620 6361 7074 696f 6e5f  .    if caption_
+00007b50: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
+00007b60: 2020 7061 796c 6f61 645b 2263 6170 7469    payload["capti
+00007b70: 6f6e 5f65 6e74 6974 6965 7322 5d20 3d20  on_entities"] = 
+00007b80: 6a73 6f6e 2e64 756d 7073 280a 2020 2020  json.dumps(.    
+00007b90: 2020 2020 2020 2020 7479 7065 732e 4d65          types.Me
+00007ba0: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
+00007bb0: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
+00007bc0: 7469 6f6e 5f65 6e74 6974 6965 7329 0a20  tion_entities). 
+00007bd0: 2020 2020 2020 2029 0a20 2020 2069 6620         ).    if 
+00007be0: 7769 6474 683a 0a20 2020 2020 2020 2070  width:.        p
+00007bf0: 6179 6c6f 6164 5b22 7769 6474 6822 5d20  ayload["width"] 
+00007c00: 3d20 7769 6474 680a 2020 2020 6966 2068  = width.    if h
+00007c10: 6569 6768 743a 0a20 2020 2020 2020 2070  eight:.        p
+00007c20: 6179 6c6f 6164 5b22 6865 6967 6874 225d  ayload["height"]
+00007c30: 203d 2068 6569 6768 740a 2020 2020 6966   = height.    if
+00007c40: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00007c50: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00007c60: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+00007c70: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
+00007c80: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+00007c90: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
+00007ca0: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
+00007cb0: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+00007cc0: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
+00007cd0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00007ce0: 6164 5f69 640a 2020 2020 6966 2068 6173  ad_id.    if has
+00007cf0: 5f73 706f 696c 6572 2069 7320 6e6f 7420  _spoiler is not 
+00007d00: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00007d10: 796c 6f61 645b 2268 6173 5f73 706f 696c  yload["has_spoil
+00007d20: 6572 225d 203d 2068 6173 5f73 706f 696c  er"] = has_spoil
+00007d30: 6572 0a20 2020 2069 6620 6275 7369 6e65  er.    if busine
+00007d40: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+00007d50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00007d60: 645b 2262 7573 696e 6573 735f 636f 6e6e  d["business_conn
+00007d70: 6563 7469 6f6e 5f69 6422 5d20 3d20 6275  ection_id"] = bu
+00007d80: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00007d90: 6e5f 6964 0a20 2020 2072 6574 7572 6e20  n_id.    return 
+00007da0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00007db0: 6571 7565 7374 280a 2020 2020 2020 2020  equest(.        
+00007dc0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00007dd0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00007de0: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
+00007df0: 6d65 7468 6f64 3d22 706f 7374 220a 2020  method="post".  
+00007e00: 2020 290a 0a0a 6173 796e 6320 6465 6620    )...async def 
+00007e10: 7365 6e64 5f76 6f69 6365 280a 2020 2020  send_voice(.    
+00007e20: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
+00007e30: 6964 2c0a 2020 2020 766f 6963 652c 0a20  id,.    voice,. 
+00007e40: 2020 2063 6170 7469 6f6e 3d4e 6f6e 652c     caption=None,
+00007e50: 0a20 2020 2064 7572 6174 696f 6e3d 4e6f  .    duration=No
+00007e60: 6e65 2c0a 2020 2020 7265 706c 795f 6d61  ne,.    reply_ma
+00007e70: 726b 7570 3d4e 6f6e 652c 0a20 2020 2070  rkup=None,.    p
+00007e80: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c0a  arse_mode=None,.
+00007e90: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
+00007ea0: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
+00007eb0: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
+00007ec0: 0a20 2020 2063 6170 7469 6f6e 5f65 6e74  .    caption_ent
+00007ed0: 6974 6965 733d 4e6f 6e65 2c0a 2020 2020  ities=None,.    
+00007ee0: 7072 6f74 6563 745f 636f 6e74 656e 743d  protect_content=
+00007ef0: 4e6f 6e65 2c0a 2020 2020 6d65 7373 6167  None,.    messag
+00007f00: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
+00007f10: 2c0a 2020 2020 7265 706c 795f 7061 7261  ,.    reply_para
+00007f20: 6d65 7465 7273 3d4e 6f6e 652c 0a20 2020  meters=None,.   
+00007f30: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00007f40: 7469 6f6e 5f69 643d 4e6f 6e65 2c0a 293a  tion_id=None,.):
+00007f50: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00007f60: 3d20 7222 7365 6e64 566f 6963 6522 0a20  = r"sendVoice". 
+00007f70: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
+00007f80: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
+00007f90: 7d0a 2020 2020 6669 6c65 7320 3d20 4e6f  }.    files = No
+00007fa0: 6e65 0a20 2020 2069 6620 6e6f 7420 7574  ne.    if not ut
+00007fb0: 696c 2e69 735f 7374 7269 6e67 2876 6f69  il.is_string(voi
+00007fc0: 6365 293a 0a20 2020 2020 2020 2066 696c  ce):.        fil
+00007fd0: 6573 203d 207b 2276 6f69 6365 223a 2076  es = {"voice": v
+00007fe0: 6f69 6365 7d0a 2020 2020 656c 7365 3a0a  oice}.    else:.
+00007ff0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00008000: 2276 6f69 6365 225d 203d 2076 6f69 6365  "voice"] = voice
+00008010: 0a20 2020 2069 6620 6361 7074 696f 6e3a  .    if caption:
+00008020: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00008030: 5b22 6361 7074 696f 6e22 5d20 3d20 6361  ["caption"] = ca
+00008040: 7074 696f 6e0a 2020 2020 6966 2064 7572  ption.    if dur
+00008050: 6174 696f 6e3a 0a20 2020 2020 2020 2070  ation:.        p
+00008060: 6179 6c6f 6164 5b22 6475 7261 7469 6f6e  ayload["duration
+00008070: 225d 203d 2064 7572 6174 696f 6e0a 2020  "] = duration.  
+00008080: 2020 6966 2072 6570 6c79 5f70 6172 616d    if reply_param
+00008090: 6574 6572 7320 6973 206e 6f74 204e 6f6e  eters is not Non
+000080a0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+000080b0: 6164 5b22 7265 706c 795f 7061 7261 6d65  ad["reply_parame
+000080c0: 7465 7273 225d 203d 206a 736f 6e2e 6475  ters"] = json.du
+000080d0: 6d70 7328 7265 706c 795f 7061 7261 6d65  mps(reply_parame
+000080e0: 7465 7273 2e74 6f5f 6469 6374 2829 290a  ters.to_dict()).
+000080f0: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+00008100: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
+00008110: 6c6f 6164 5b22 7265 706c 795f 6d61 726b  load["reply_mark
+00008120: 7570 225d 203d 2061 7761 6974 205f 636f  up"] = await _co
+00008130: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
+00008140: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
+00008150: 6620 7061 7273 655f 6d6f 6465 3a0a 2020  f parse_mode:.  
+00008160: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+00008170: 6172 7365 5f6d 6f64 6522 5d20 3d20 7061  arse_mode"] = pa
+00008180: 7273 655f 6d6f 6465 0a20 2020 2069 6620  rse_mode.    if 
+00008190: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000081a0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+000081b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000081c0: 645b 2264 6973 6162 6c65 5f6e 6f74 6966  d["disable_notif
+000081d0: 6963 6174 696f 6e22 5d20 3d20 6469 7361  ication"] = disa
+000081e0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000081f0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00008200: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00008210: 5b22 7469 6d65 6f75 7422 5d20 3d20 7469  ["timeout"] = ti
+00008220: 6d65 6f75 740a 2020 2020 6966 2063 6170  meout.    if cap
+00008230: 7469 6f6e 5f65 6e74 6974 6965 733a 0a20  tion_entities:. 
+00008240: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00008250: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
+00008260: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
+00008270: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
+00008280: 6573 2e4d 6573 7361 6765 456e 7469 7479  es.MessageEntity
+00008290: 2e74 6f5f 6c69 7374 5f6f 665f 6469 6374  .to_list_of_dict
+000082a0: 7328 6361 7074 696f 6e5f 656e 7469 7469  s(caption_entiti
+000082b0: 6573 290a 2020 2020 2020 2020 290a 2020  es).        ).  
+000082c0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+000082d0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+000082e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000082f0: 645b 2270 726f 7465 6374 5f63 6f6e 7465  d["protect_conte
+00008300: 6e74 225d 203d 2070 726f 7465 6374 5f63  nt"] = protect_c
+00008310: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
+00008320: 7373 6167 655f 7468 7265 6164 5f69 643a  ssage_thread_id:
+00008330: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00008340: 5b22 6d65 7373 6167 655f 7468 7265 6164  ["message_thread
+00008350: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
+00008360: 7468 7265 6164 5f69 640a 2020 2020 6966  thread_id.    if
+00008370: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00008380: 7469 6f6e 5f69 643a 0a20 2020 2020 2020  tion_id:.       
+00008390: 2070 6179 6c6f 6164 5b22 6275 7369 6e65   payload["busine
+000083a0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+000083b0: 225d 203d 2062 7573 696e 6573 735f 636f  "] = business_co
+000083c0: 6e6e 6563 7469 6f6e 5f69 640a 2020 2020  nnection_id.    
+000083d0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+000083e0: 6f63 6573 735f 7265 7175 6573 7428 0a20  ocess_request(. 
+000083f0: 2020 2020 2020 2074 6f6b 656e 2c20 6d65         token, me
+00008400: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00008410: 3d70 6179 6c6f 6164 2c20 6669 6c65 733d  =payload, files=
+00008420: 6669 6c65 732c 206d 6574 686f 643d 2270  files, method="p
+00008430: 6f73 7422 0a20 2020 2029 0a0a 0a61 7379  ost".    )...asy
+00008440: 6e63 2064 6566 2073 656e 645f 7669 6465  nc def send_vide
+00008450: 6f5f 6e6f 7465 280a 2020 2020 746f 6b65  o_note(.    toke
+00008460: 6e2c 0a20 2020 2063 6861 745f 6964 2c0a  n,.    chat_id,.
+00008470: 2020 2020 6461 7461 2c0a 2020 2020 6475      data,.    du
+00008480: 7261 7469 6f6e 3d4e 6f6e 652c 0a20 2020  ration=None,.   
+00008490: 206c 656e 6774 683d 4e6f 6e65 2c0a 2020   length=None,.  
+000084a0: 2020 7265 706c 795f 6d61 726b 7570 3d4e    reply_markup=N
+000084b0: 6f6e 652c 0a20 2020 2064 6973 6162 6c65  one,.    disable
+000084c0: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
+000084d0: 6e65 2c0a 2020 2020 7469 6d65 6f75 743d  ne,.    timeout=
+000084e0: 4e6f 6e65 2c0a 2020 2020 7468 756d 626e  None,.    thumbn
+000084f0: 6169 6c3d 4e6f 6e65 2c0a 2020 2020 7072  ail=None,.    pr
+00008500: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
+00008510: 6e65 2c0a 2020 2020 6d65 7373 6167 655f  ne,.    message_
+00008520: 7468 7265 6164 5f69 643d 4e6f 6e65 2c0a  thread_id=None,.
+00008530: 2020 2020 7265 706c 795f 7061 7261 6d65      reply_parame
+00008540: 7465 7273 3d4e 6f6e 652c 0a20 2020 2062  ters=None,.    b
+00008550: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00008560: 6f6e 5f69 643d 4e6f 6e65 2c0a 293a 0a20  on_id=None,.):. 
+00008570: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00008580: 7222 7365 6e64 5669 6465 6f4e 6f74 6522  r"sendVideoNote"
+00008590: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000085a0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
+000085b0: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
+000085c0: 4e6f 6e65 0a20 2020 2069 6620 6e6f 7420  None.    if not 
+000085d0: 7574 696c 2e69 735f 7374 7269 6e67 2864  util.is_string(d
+000085e0: 6174 6129 3a0a 2020 2020 2020 2020 6669  ata):.        fi
+000085f0: 6c65 7320 3d20 7b22 7669 6465 6f5f 6e6f  les = {"video_no
+00008600: 7465 223a 2064 6174 617d 0a20 2020 2065  te": data}.    e
+00008610: 6c73 653a 0a20 2020 2020 2020 2070 6179  lse:.        pay
+00008620: 6c6f 6164 5b22 7669 6465 6f5f 6e6f 7465  load["video_note
+00008630: 225d 203d 2064 6174 610a 2020 2020 6966  "] = data.    if
+00008640: 2064 7572 6174 696f 6e3a 0a20 2020 2020   duration:.     
+00008650: 2020 2070 6179 6c6f 6164 5b22 6475 7261     payload["dura
+00008660: 7469 6f6e 225d 203d 2064 7572 6174 696f  tion"] = duratio
+00008670: 6e0a 2020 2020 6966 206c 656e 6774 6820  n.    if length 
+00008680: 616e 6420 2873 7472 286c 656e 6774 6829  and (str(length)
+00008690: 2e69 7364 6967 6974 2829 2061 6e64 2069  .isdigit() and i
+000086a0: 6e74 286c 656e 6774 6829 203c 3d20 3633  nt(length) <= 63
+000086b0: 3929 3a0a 2020 2020 2020 2020 7061 796c  9):.        payl
+000086c0: 6f61 645b 226c 656e 6774 6822 5d20 3d20  oad["length"] = 
+000086d0: 6c65 6e67 7468 0a20 2020 2065 6c73 653a  length.    else:
+000086e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000086f0: 5b22 6c65 6e67 7468 225d 203d 2036 3339  ["length"] = 639
+00008700: 2020 2320 7365 656d 7320 6c69 6b65 2069    # seems like i
+00008710: 7420 6973 204d 4158 206c 656e 6774 6820  t is MAX length 
+00008720: 7369 7a65 0a20 2020 2069 6620 7265 706c  size.    if repl
+00008730: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
+00008740: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00008750: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
+00008760: 5f70 6172 616d 6574 6572 7322 5d20 3d20  _parameters"] = 
+00008770: 6a73 6f6e 2e64 756d 7073 2872 6570 6c79  json.dumps(reply
+00008780: 5f70 6172 616d 6574 6572 732e 746f 5f64  _parameters.to_d
+00008790: 6963 7428 2929 0a20 2020 2069 6620 7265  ict()).    if re
+000087a0: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
+000087b0: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
+000087c0: 6c79 5f6d 6172 6b75 7022 5d20 3d20 6177  ly_markup"] = aw
+000087d0: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
+000087e0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
+000087f0: 290a 2020 2020 6966 2064 6973 6162 6c65  ).    if disable
+00008800: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
+00008810: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00008820: 2020 2070 6179 6c6f 6164 5b22 6469 7361     payload["disa
+00008830: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00008840: 225d 203d 2064 6973 6162 6c65 5f6e 6f74  "] = disable_not
+00008850: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
+00008860: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00008870: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
+00008880: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
+00008890: 2020 2069 6620 7468 756d 626e 6169 6c3a     if thumbnail:
+000088a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+000088b0: 7574 696c 2e69 735f 7374 7269 6e67 2874  util.is_string(t
+000088c0: 6875 6d62 6e61 696c 293a 0a20 2020 2020  humbnail):.     
+000088d0: 2020 2020 2020 2069 6620 6669 6c65 733a         if files:
+000088e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000088f0: 2066 696c 6573 5b22 7468 756d 626e 6169   files["thumbnai
+00008900: 6c22 5d20 3d20 7468 756d 626e 6169 6c0a  l"] = thumbnail.
+00008910: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00008920: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00008930: 2020 6669 6c65 7320 3d20 7b22 7468 756d    files = {"thum
+00008940: 626e 6169 6c22 3a20 7468 756d 626e 6169  bnail": thumbnai
+00008950: 6c7d 0a20 2020 2020 2020 2065 6c73 653a  l}.        else:
+00008960: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
+00008970: 6c6f 6164 5b22 7468 756d 626e 6169 6c22  load["thumbnail"
+00008980: 5d20 3d20 7468 756d 626e 6169 6c0a 2020  ] = thumbnail.  
+00008990: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+000089a0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+000089b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000089c0: 645b 2270 726f 7465 6374 5f63 6f6e 7465  d["protect_conte
+000089d0: 6e74 225d 203d 2070 726f 7465 6374 5f63  nt"] = protect_c
+000089e0: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
+000089f0: 7373 6167 655f 7468 7265 6164 5f69 643a  ssage_thread_id:
+00008a00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00008a10: 5b22 6d65 7373 6167 655f 7468 7265 6164  ["message_thread
+00008a20: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
+00008a30: 7468 7265 6164 5f69 640a 2020 2020 6966  thread_id.    if
+00008a40: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+00008a50: 7469 6f6e 5f69 643a 0a20 2020 2020 2020  tion_id:.       
+00008a60: 2070 6179 6c6f 6164 5b22 6275 7369 6e65   payload["busine
+00008a70: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+00008a80: 225d 203d 2062 7573 696e 6573 735f 636f  "] = business_co
+00008a90: 6e6e 6563 7469 6f6e 5f69 640a 2020 2020  nnection_id.    
+00008aa0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+00008ab0: 6f63 6573 735f 7265 7175 6573 7428 0a20  ocess_request(. 
+00008ac0: 2020 2020 2020 2074 6f6b 656e 2c20 6d65         token, me
+00008ad0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00008ae0: 3d70 6179 6c6f 6164 2c20 6669 6c65 733d  =payload, files=
+00008af0: 6669 6c65 732c 206d 6574 686f 643d 2270  files, method="p
+00008b00: 6f73 7422 0a20 2020 2029 0a0a 0a61 7379  ost".    )...asy
+00008b10: 6e63 2064 6566 2073 656e 645f 6175 6469  nc def send_audi
+00008b20: 6f28 0a20 2020 2074 6f6b 656e 2c0a 2020  o(.    token,.  
+00008b30: 2020 6368 6174 5f69 642c 0a20 2020 2061    chat_id,.    a
+00008b40: 7564 696f 2c0a 2020 2020 6361 7074 696f  udio,.    captio
+00008b50: 6e3d 4e6f 6e65 2c0a 2020 2020 6475 7261  n=None,.    dura
+00008b60: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2070  tion=None,.    p
+00008b70: 6572 666f 726d 6572 3d4e 6f6e 652c 0a20  erformer=None,. 
+00008b80: 2020 2074 6974 6c65 3d4e 6f6e 652c 0a20     title=None,. 
+00008b90: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
+00008ba0: 4e6f 6e65 2c0a 2020 2020 7061 7273 655f  None,.    parse_
+00008bb0: 6d6f 6465 3d4e 6f6e 652c 0a20 2020 2064  mode=None,.    d
+00008bc0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00008bd0: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 7469  ion=None,.    ti
+00008be0: 6d65 6f75 743d 4e6f 6e65 2c0a 2020 2020  meout=None,.    
+00008bf0: 7468 756d 626e 6169 6c3d 4e6f 6e65 2c0a  thumbnail=None,.
+00008c00: 2020 2020 6361 7074 696f 6e5f 656e 7469      caption_enti
+00008c10: 7469 6573 3d4e 6f6e 652c 0a20 2020 2070  ties=None,.    p
+00008c20: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00008c30: 6f6e 652c 0a20 2020 206d 6573 7361 6765  one,.    message
+00008c40: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
+00008c50: 0a20 2020 2072 6570 6c79 5f70 6172 616d  .    reply_param
+00008c60: 6574 6572 733d 4e6f 6e65 2c0a 2020 2020  eters=None,.    
+00008c70: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+00008c80: 696f 6e5f 6964 3d4e 6f6e 652c 0a29 3a0a  ion_id=None,.):.
+00008c90: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00008ca0: 2072 2273 656e 6441 7564 696f 220a 2020   r"sendAudio".  
+00008cb0: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+00008cc0: 6174 5f69 6422 3a20 6368 6174 5f69 647d  at_id": chat_id}
+00008cd0: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
+00008ce0: 650a 2020 2020 6966 206e 6f74 2075 7469  e.    if not uti
+00008cf0: 6c2e 6973 5f73 7472 696e 6728 6175 6469  l.is_string(audi
+00008d00: 6f29 3a0a 2020 2020 2020 2020 6669 6c65  o):.        file
+00008d10: 7320 3d20 7b22 6175 6469 6f22 3a20 6175  s = {"audio": au
+00008d20: 6469 6f7d 0a20 2020 2065 6c73 653a 0a20  dio}.    else:. 
+00008d30: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00008d40: 6175 6469 6f22 5d20 3d20 6175 6469 6f0a  audio"] = audio.
+00008d50: 2020 2020 6966 2063 6170 7469 6f6e 3a0a      if caption:.
+00008d60: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00008d70: 2263 6170 7469 6f6e 225d 203d 2063 6170  "caption"] = cap
+00008d80: 7469 6f6e 0a20 2020 2069 6620 6475 7261  tion.    if dura
+00008d90: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
+00008da0: 796c 6f61 645b 2264 7572 6174 696f 6e22  yload["duration"
+00008db0: 5d20 3d20 6475 7261 7469 6f6e 0a20 2020  ] = duration.   
+00008dc0: 2069 6620 7065 7266 6f72 6d65 723a 0a20   if performer:. 
+00008dd0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00008de0: 7065 7266 6f72 6d65 7222 5d20 3d20 7065  performer"] = pe
+00008df0: 7266 6f72 6d65 720a 2020 2020 6966 2074  rformer.    if t
+00008e00: 6974 6c65 3a0a 2020 2020 2020 2020 7061  itle:.        pa
+00008e10: 796c 6f61 645b 2274 6974 6c65 225d 203d  yload["title"] =
+00008e20: 2074 6974 6c65 0a20 2020 2069 6620 7265   title.    if re
+00008e30: 706c 795f 7061 7261 6d65 7465 7273 2069  ply_parameters i
+00008e40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00008e50: 2020 2020 7061 796c 6f61 645b 2272 6570      payload["rep
+00008e60: 6c79 5f70 6172 616d 6574 6572 7322 5d20  ly_parameters"] 
+00008e70: 3d20 6a73 6f6e 2e64 756d 7073 2872 6570  = json.dumps(rep
+00008e80: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00008e90: 5f64 6963 7428 2929 0a20 2020 2069 6620  _dict()).    if 
+00008ea0: 7265 706c 795f 6d61 726b 7570 3a0a 2020  reply_markup:.  
+00008eb0: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
+00008ec0: 6570 6c79 5f6d 6172 6b75 7022 5d20 3d20  eply_markup"] = 
+00008ed0: 6177 6169 7420 5f63 6f6e 7665 7274 5f6d  await _convert_m
+00008ee0: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
+00008ef0: 7570 290a 2020 2020 6966 2070 6172 7365  up).    if parse
+00008f00: 5f6d 6f64 653a 0a20 2020 2020 2020 2070  _mode:.        p
+00008f10: 6179 6c6f 6164 5b22 7061 7273 655f 6d6f  ayload["parse_mo
+00008f20: 6465 225d 203d 2070 6172 7365 5f6d 6f64  de"] = parse_mod
+00008f30: 650a 2020 2020 6966 2064 6973 6162 6c65  e.    if disable
+00008f40: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
+00008f50: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00008f60: 2020 2070 6179 6c6f 6164 5b22 6469 7361     payload["disa
+00008f70: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00008f80: 225d 203d 2064 6973 6162 6c65 5f6e 6f74  "] = disable_not
+00008f90: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
+00008fa0: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00008fb0: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
+00008fc0: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
+00008fd0: 2020 2069 6620 7468 756d 626e 6169 6c3a     if thumbnail:
+00008fe0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00008ff0: 7574 696c 2e69 735f 7374 7269 6e67 2874  util.is_string(t
+00009000: 6875 6d62 6e61 696c 293a 0a20 2020 2020  humbnail):.     
+00009010: 2020 2020 2020 2069 6620 6669 6c65 733a         if files:
+00009020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009030: 2066 696c 6573 5b22 7468 756d 626e 6169   files["thumbnai
+00009040: 6c22 5d20 3d20 7468 756d 626e 6169 6c0a  l"] = thumbnail.
+00009050: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00009060: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009070: 2020 6669 6c65 7320 3d20 7b22 7468 756d    files = {"thum
+00009080: 626e 6169 6c22 3a20 7468 756d 626e 6169  bnail": thumbnai
+00009090: 6c7d 0a20 2020 2020 2020 2065 6c73 653a  l}.        else:
+000090a0: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
+000090b0: 6c6f 6164 5b22 7468 756d 626e 6169 6c22  load["thumbnail"
+000090c0: 5d20 3d20 7468 756d 626e 6169 6c0a 2020  ] = thumbnail.  
+000090d0: 2020 6966 2063 6170 7469 6f6e 5f65 6e74    if caption_ent
+000090e0: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
+000090f0: 6179 6c6f 6164 5b22 6361 7074 696f 6e5f  ayload["caption_
+00009100: 656e 7469 7469 6573 225d 203d 206a 736f  entities"] = jso
+00009110: 6e2e 6475 6d70 7328 0a20 2020 2020 2020  n.dumps(.       
+00009120: 2020 2020 2074 7970 6573 2e4d 6573 7361       types.Messa
+00009130: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
+00009140: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
+00009150: 6e5f 656e 7469 7469 6573 290a 2020 2020  n_entities).    
+00009160: 2020 2020 290a 2020 2020 6966 2070 726f      ).    if pro
+00009170: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+00009180: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00009190: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
+000091a0: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
+000091b0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+000091c0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+000091d0: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
+000091e0: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
+000091f0: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
+00009200: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00009210: 640a 2020 2020 6966 2062 7573 696e 6573  d.    if busines
+00009220: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
+00009230: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00009240: 5b22 6275 7369 6e65 7373 5f63 6f6e 6e65  ["business_conne
+00009250: 6374 696f 6e5f 6964 225d 203d 2062 7573  ction_id"] = bus
+00009260: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+00009270: 5f69 640a 2020 2020 7265 7475 726e 2061  _id.    return a
+00009280: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+00009290: 7175 6573 7428 0a20 2020 2020 2020 2074  quest(.        t
+000092a0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+000092b0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+000092c0: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
+000092d0: 6574 686f 643d 2270 6f73 7422 0a20 2020  ethod="post".   
+000092e0: 2029 0a0a 0a61 7379 6e63 2064 6566 2073   )...async def s
+000092f0: 656e 645f 6461 7461 280a 2020 2020 746f  end_data(.    to
+00009300: 6b65 6e2c 0a20 2020 2063 6861 745f 6964  ken,.    chat_id
+00009310: 2c0a 2020 2020 6461 7461 2c0a 2020 2020  ,.    data,.    
+00009320: 6461 7461 5f74 7970 652c 0a20 2020 2072  data_type,.    r
+00009330: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+00009340: 2c0a 2020 2020 7061 7273 655f 6d6f 6465  ,.    parse_mode
+00009350: 3d4e 6f6e 652c 0a20 2020 2064 6973 6162  =None,.    disab
+00009360: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00009370: 4e6f 6e65 2c0a 2020 2020 7469 6d65 6f75  None,.    timeou
+00009380: 743d 4e6f 6e65 2c0a 2020 2020 6361 7074  t=None,.    capt
+00009390: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 7468  ion=None,.    th
+000093a0: 756d 626e 6169 6c3d 4e6f 6e65 2c0a 2020  umbnail=None,.  
+000093b0: 2020 6361 7074 696f 6e5f 656e 7469 7469    caption_entiti
+000093c0: 6573 3d4e 6f6e 652c 0a20 2020 2064 6973  es=None,.    dis
+000093d0: 6162 6c65 5f63 6f6e 7465 6e74 5f74 7970  able_content_typ
+000093e0: 655f 6465 7465 6374 696f 6e3d 4e6f 6e65  e_detection=None
+000093f0: 2c0a 2020 2020 7669 7369 626c 655f 6669  ,.    visible_fi
+00009400: 6c65 5f6e 616d 653d 4e6f 6e65 2c0a 2020  le_name=None,.  
+00009410: 2020 7072 6f74 6563 745f 636f 6e74 656e    protect_conten
+00009420: 743d 4e6f 6e65 2c0a 2020 2020 6d65 7373  t=None,.    mess
+00009430: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
+00009440: 6e65 2c0a 2020 2020 656d 6f6a 693d 4e6f  ne,.    emoji=No
+00009450: 6e65 2c0a 2020 2020 7265 706c 795f 7061  ne,.    reply_pa
+00009460: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
+00009470: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
+00009480: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
+00009490: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+000094a0: 6c20 3d20 6177 6169 7420 6765 745f 6d65  l = await get_me
+000094b0: 7468 6f64 5f62 795f 7479 7065 2864 6174  thod_by_type(dat
+000094c0: 615f 7479 7065 290a 2020 2020 7061 796c  a_type).    payl
+000094d0: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
+000094e0: 3a20 6368 6174 5f69 647d 0a20 2020 2066  : chat_id}.    f
+000094f0: 696c 6573 203d 204e 6f6e 650a 2020 2020  iles = None.    
+00009500: 6966 206e 6f74 2075 7469 6c2e 6973 5f73  if not util.is_s
+00009510: 7472 696e 6728 6461 7461 293a 0a20 2020  tring(data):.   
+00009520: 2020 2020 2066 696c 655f 6461 7461 203d       file_data =
+00009530: 2064 6174 610a 2020 2020 2020 2020 6966   data.        if
+00009540: 2076 6973 6962 6c65 5f66 696c 655f 6e61   visible_file_na
+00009550: 6d65 3a0a 2020 2020 2020 2020 2020 2020  me:.            
+00009560: 6669 6c65 5f64 6174 6120 3d20 2876 6973  file_data = (vis
+00009570: 6962 6c65 5f66 696c 655f 6e61 6d65 2c20  ible_file_name, 
+00009580: 6461 7461 290a 2020 2020 2020 2020 6669  data).        fi
+00009590: 6c65 7320 3d20 7b64 6174 615f 7479 7065  les = {data_type
+000095a0: 3a20 6669 6c65 5f64 6174 617d 0a20 2020  : file_data}.   
+000095b0: 2065 6c73 653a 0a20 2020 2020 2020 2070   else:.        p
+000095c0: 6179 6c6f 6164 5b64 6174 615f 7479 7065  ayload[data_type
+000095d0: 5d20 3d20 6461 7461 0a20 2020 2069 6620  ] = data.    if 
+000095e0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+000095f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00009600: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
+00009610: 6570 6c79 5f70 6172 616d 6574 6572 7322  eply_parameters"
+00009620: 5d20 3d20 6a73 6f6e 2e64 756d 7073 2872  ] = json.dumps(r
+00009630: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
+00009640: 746f 5f64 6963 7428 2929 0a20 2020 2069  to_dict()).    i
+00009650: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+00009660: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009670: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
+00009680: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
+00009690: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+000096a0: 726b 7570 290a 2020 2020 6966 2070 6172  rkup).    if par
+000096b0: 7365 5f6d 6f64 6520 616e 6420 6461 7461  se_mode and data
+000096c0: 5f74 7970 6520 3d3d 2022 646f 6375 6d65  _type == "docume
+000096d0: 6e74 223a 0a20 2020 2020 2020 2070 6179  nt":.        pay
+000096e0: 6c6f 6164 5b22 7061 7273 655f 6d6f 6465  load["parse_mode
+000096f0: 225d 203d 2070 6172 7365 5f6d 6f64 650a  "] = parse_mode.
+00009700: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+00009710: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+00009720: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00009730: 2070 6179 6c6f 6164 5b22 6469 7361 626c   payload["disabl
+00009740: 655f 6e6f 7469 6669 6361 7469 6f6e 225d  e_notification"]
+00009750: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00009760: 6963 6174 696f 6e0a 2020 2020 6966 2074  ication.    if t
+00009770: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00009780: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
+00009790: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
+000097a0: 2069 6620 6361 7074 696f 6e3a 0a20 2020   if caption:.   
+000097b0: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
+000097c0: 7074 696f 6e22 5d20 3d20 6361 7074 696f  ption"] = captio
+000097d0: 6e0a 2020 2020 6966 2074 6875 6d62 6e61  n.    if thumbna
+000097e0: 696c 3a0a 2020 2020 2020 2020 6966 206e  il:.        if n
+000097f0: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
+00009800: 6728 7468 756d 626e 6169 6c29 3a0a 2020  g(thumbnail):.  
+00009810: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
+00009820: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00009830: 2020 2020 6669 6c65 735b 2274 6875 6d62      files["thumb
+00009840: 6e61 696c 225d 203d 2074 6875 6d62 6e61  nail"] = thumbna
+00009850: 696c 0a20 2020 2020 2020 2020 2020 2065  il.            e
+00009860: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00009870: 2020 2020 2066 696c 6573 203d 207b 2274       files = {"t
+00009880: 6875 6d62 6e61 696c 223a 2074 6875 6d62  humbnail": thumb
+00009890: 6e61 696c 7d0a 2020 2020 2020 2020 656c  nail}.        el
+000098a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000098b0: 7061 796c 6f61 645b 2274 6875 6d62 6e61  payload["thumbna
+000098c0: 696c 225d 203d 2074 6875 6d62 6e61 696c  il"] = thumbnail
+000098d0: 0a20 2020 2069 6620 6361 7074 696f 6e5f  .    if caption_
+000098e0: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
+000098f0: 2020 7061 796c 6f61 645b 2263 6170 7469    payload["capti
+00009900: 6f6e 5f65 6e74 6974 6965 7322 5d20 3d20  on_entities"] = 
+00009910: 6a73 6f6e 2e64 756d 7073 280a 2020 2020  json.dumps(.    
+00009920: 2020 2020 2020 2020 7479 7065 732e 4d65          types.Me
+00009930: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
+00009940: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
+00009950: 7469 6f6e 5f65 6e74 6974 6965 7329 0a20  tion_entities). 
+00009960: 2020 2020 2020 2029 0a20 2020 2069 6620         ).    if 
+00009970: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+00009980: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00009990: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
+000099a0: 6f74 6563 745f 636f 6e74 656e 7422 5d20  otect_content"] 
+000099b0: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
+000099c0: 740a 2020 2020 6966 206d 6574 686f 645f  t.    if method_
+000099d0: 7572 6c20 3d3d 2022 7365 6e64 446f 6375  url == "sendDocu
+000099e0: 6d65 6e74 2220 616e 6420 6469 7361 626c  ment" and disabl
+000099f0: 655f 636f 6e74 656e 745f 7479 7065 5f64  e_content_type_d
+00009a00: 6574 6563 7469 6f6e 2069 7320 6e6f 7420  etection is not 
+00009a10: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00009a20: 796c 6f61 645b 2264 6973 6162 6c65 5f63  yload["disable_c
+00009a30: 6f6e 7465 6e74 5f74 7970 655f 6465 7465  ontent_type_dete
+00009a40: 6374 696f 6e22 5d20 3d20 6469 7361 626c  ction"] = disabl
+00009a50: 655f 636f 6e74 656e 745f 7479 7065 5f64  e_content_type_d
+00009a60: 6574 6563 7469 6f6e 0a20 2020 2069 6620  etection.    if 
+00009a70: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00009a80: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00009a90: 6164 5b22 6d65 7373 6167 655f 7468 7265  ad["message_thre
+00009aa0: 6164 5f69 6422 5d20 3d20 6d65 7373 6167  ad_id"] = messag
+00009ab0: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
+00009ac0: 6966 2065 6d6f 6a69 3a0a 2020 2020 2020  if emoji:.      
+00009ad0: 2020 7061 796c 6f61 645b 2265 6d6f 6a69    payload["emoji
+00009ae0: 225d 203d 2065 6d6f 6a69 0a20 2020 2069  "] = emoji.    i
+00009af0: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
+00009b00: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
+00009b10: 2020 7061 796c 6f61 645b 2262 7573 696e    payload["busin
+00009b20: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00009b30: 6422 5d20 3d20 6275 7369 6e65 7373 5f63  d"] = business_c
+00009b40: 6f6e 6e65 6374 696f 6e5f 6964 0a20 2020  onnection_id.   
+00009b50: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+00009b60: 726f 6365 7373 5f72 6571 7565 7374 280a  rocess_request(.
+00009b70: 2020 2020 2020 2020 746f 6b65 6e2c 206d          token, m
+00009b80: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00009b90: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
+00009ba0: 3d66 696c 6573 2c20 6d65 7468 6f64 3d22  =files, method="
+00009bb0: 706f 7374 220a 2020 2020 290a 0a0a 6173  post".    )...as
+00009bc0: 796e 6320 6465 6620 6765 745f 6d65 7468  ync def get_meth
+00009bd0: 6f64 5f62 795f 7479 7065 2864 6174 615f  od_by_type(data_
+00009be0: 7479 7065 293a 0a20 2020 2069 6620 6461  type):.    if da
+00009bf0: 7461 5f74 7970 6520 3d3d 2022 646f 6375  ta_type == "docu
+00009c00: 6d65 6e74 223a 0a20 2020 2020 2020 2072  ment":.        r
+00009c10: 6574 7572 6e20 7222 7365 6e64 446f 6375  eturn r"sendDocu
+00009c20: 6d65 6e74 220a 2020 2020 6966 2064 6174  ment".    if dat
+00009c30: 615f 7479 7065 203d 3d20 2273 7469 636b  a_type == "stick
+00009c40: 6572 223a 0a20 2020 2020 2020 2072 6574  er":.        ret
+00009c50: 7572 6e20 7222 7365 6e64 5374 6963 6b65  urn r"sendSticke
+00009c60: 7222 0a0a 0a61 7379 6e63 2064 6566 2062  r"...async def b
+00009c70: 616e 5f63 6861 745f 6d65 6d62 6572 280a  an_chat_member(.
+00009c80: 2020 2020 746f 6b65 6e2c 2063 6861 745f      token, chat_
+00009c90: 6964 2c20 7573 6572 5f69 642c 2075 6e74  id, user_id, unt
+00009ca0: 696c 5f64 6174 653d 4e6f 6e65 2c20 7265  il_date=None, re
+00009cb0: 766f 6b65 5f6d 6573 7361 6765 733d 4e6f  voke_messages=No
+00009cc0: 6e65 0a29 3a0a 2020 2020 6d65 7468 6f64  ne.):.    method
+00009cd0: 5f75 726c 203d 2022 6261 6e43 6861 744d  _url = "banChatM
+00009ce0: 656d 6265 7222 0a20 2020 2070 6179 6c6f  ember".    paylo
+00009cf0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+00009d00: 2063 6861 745f 6964 2c20 2275 7365 725f   chat_id, "user_
+00009d10: 6964 223a 2075 7365 725f 6964 7d0a 2020  id": user_id}.  
+00009d20: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00009d30: 756e 7469 6c5f 6461 7465 2c20 6461 7465  until_date, date
+00009d40: 7469 6d65 293a 0a20 2020 2020 2020 2070  time):.        p
+00009d50: 6179 6c6f 6164 5b22 756e 7469 6c5f 6461  ayload["until_da
+00009d60: 7465 225d 203d 2075 6e74 696c 5f64 6174  te"] = until_dat
+00009d70: 652e 7469 6d65 7374 616d 7028 290a 2020  e.timestamp().  
+00009d80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00009d90: 7061 796c 6f61 645b 2275 6e74 696c 5f64  payload["until_d
+00009da0: 6174 6522 5d20 3d20 756e 7469 6c5f 6461  ate"] = until_da
+00009db0: 7465 0a20 2020 2069 6620 7265 766f 6b65  te.    if revoke
+00009dc0: 5f6d 6573 7361 6765 7320 6973 206e 6f74  _messages is not
+00009dd0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00009de0: 6179 6c6f 6164 5b22 7265 766f 6b65 5f6d  ayload["revoke_m
+00009df0: 6573 7361 6765 7322 5d20 3d20 7265 766f  essages"] = revo
+00009e00: 6b65 5f6d 6573 7361 6765 730a 2020 2020  ke_messages.    
+00009e10: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+00009e20: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+00009e30: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00009e40: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00009e50: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+00009e60: 0a0a 6173 796e 6320 6465 6620 756e 6261  ..async def unba
+00009e70: 6e5f 6368 6174 5f6d 656d 6265 7228 746f  n_chat_member(to
+00009e80: 6b65 6e2c 2063 6861 745f 6964 2c20 7573  ken, chat_id, us
+00009e90: 6572 5f69 642c 206f 6e6c 795f 6966 5f62  er_id, only_if_b
+00009ea0: 616e 6e65 6429 3a0a 2020 2020 6d65 7468  anned):.    meth
+00009eb0: 6f64 5f75 726c 203d 2022 756e 6261 6e43  od_url = "unbanC
+00009ec0: 6861 744d 656d 6265 7222 0a20 2020 2070  hatMember".    p
+00009ed0: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+00009ee0: 6964 223a 2063 6861 745f 6964 2c20 2275  id": chat_id, "u
+00009ef0: 7365 725f 6964 223a 2075 7365 725f 6964  ser_id": user_id
+00009f00: 7d0a 2020 2020 6966 206f 6e6c 795f 6966  }.    if only_if
+00009f10: 5f62 616e 6e65 6420 6973 206e 6f74 204e  _banned is not N
+00009f20: 6f6e 653a 2020 2320 4e6f 6e65 202f 2054  one:  # None / T
+00009f30: 7275 6520 2f20 4661 6c73 650a 2020 2020  rue / False.    
+00009f40: 2020 2020 7061 796c 6f61 645b 226f 6e6c      payload["onl
+00009f50: 795f 6966 5f62 616e 6e65 6422 5d20 3d20  y_if_banned"] = 
+00009f60: 6f6e 6c79 5f69 665f 6261 6e6e 6564 0a20  only_if_banned. 
+00009f70: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00009f80: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00009f90: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00009fa0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00009fb0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+00009fc0: 2229 0a0a 0a61 7379 6e63 2064 6566 2072  ")...async def r
+00009fd0: 6573 7472 6963 745f 6368 6174 5f6d 656d  estrict_chat_mem
+00009fe0: 6265 7228 0a20 2020 2074 6f6b 656e 2c0a  ber(.    token,.
+00009ff0: 2020 2020 6368 6174 5f69 642c 0a20 2020      chat_id,.   
+0000a000: 2075 7365 725f 6964 2c0a 2020 2020 7065   user_id,.    pe
+0000a010: 726d 6973 7369 6f6e 732c 0a20 2020 2075  rmissions,.    u
+0000a020: 6e74 696c 5f64 6174 653d 4e6f 6e65 2c0a  ntil_date=None,.
+0000a030: 2020 2020 7573 655f 696e 6465 7065 6e64      use_independ
+0000a040: 656e 745f 6368 6174 5f70 6572 6d69 7373  ent_chat_permiss
+0000a050: 696f 6e73 3d4e 6f6e 652c 0a29 3a0a 2020  ions=None,.):.  
+0000a060: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
+0000a070: 7265 7374 7269 6374 4368 6174 4d65 6d62  restrictChatMemb
+0000a080: 6572 220a 2020 2020 7061 796c 6f61 6420  er".    payload 
+0000a090: 3d20 7b0a 2020 2020 2020 2020 2263 6861  = {.        "cha
+0000a0a0: 745f 6964 223a 2063 6861 745f 6964 2c0a  t_id": chat_id,.
+0000a0b0: 2020 2020 2020 2020 2275 7365 725f 6964          "user_id
+0000a0c0: 223a 2075 7365 725f 6964 2c0a 2020 2020  ": user_id,.    
+0000a0d0: 2020 2020 2270 6572 6d69 7373 696f 6e73      "permissions
+0000a0e0: 223a 2070 6572 6d69 7373 696f 6e73 2e74  ": permissions.t
+0000a0f0: 6f5f 6a73 6f6e 2829 2c0a 2020 2020 7d0a  o_json(),.    }.
+0000a100: 0a20 2020 2069 6620 7573 655f 696e 6465  .    if use_inde
+0000a110: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
+0000a120: 6d69 7373 696f 6e73 2069 7320 6e6f 7420  missions is not 
+0000a130: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000a140: 796c 6f61 645b 2275 7365 5f69 6e64 6570  yload["use_indep
+0000a150: 656e 6465 6e74 5f63 6861 745f 7065 726d  endent_chat_perm
+0000a160: 6973 7369 6f6e 7322 5d20 3d20 7573 655f  issions"] = use_
+0000a170: 696e 6465 7065 6e64 656e 745f 6368 6174  independent_chat
+0000a180: 5f70 6572 6d69 7373 696f 6e73 0a20 2020  _permissions.   
+0000a190: 2069 6620 756e 7469 6c5f 6461 7465 2069   if until_date i
+0000a1a0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a1b0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0000a1c0: 6528 756e 7469 6c5f 6461 7465 2c20 6461  e(until_date, da
+0000a1d0: 7465 7469 6d65 293a 0a20 2020 2020 2020  tetime):.       
+0000a1e0: 2020 2020 2070 6179 6c6f 6164 5b22 756e       payload["un
+0000a1f0: 7469 6c5f 6461 7465 225d 203d 2075 6e74  til_date"] = unt
+0000a200: 696c 5f64 6174 652e 7469 6d65 7374 616d  il_date.timestam
+0000a210: 7028 290a 2020 2020 2020 2020 656c 7365  p().        else
+0000a220: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
+0000a230: 796c 6f61 645b 2275 6e74 696c 5f64 6174  yload["until_dat
+0000a240: 6522 5d20 3d20 756e 7469 6c5f 6461 7465  e"] = until_date
+0000a250: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+0000a260: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+0000a270: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000a280: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000a290: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
+0000a2a0: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
+0000a2b0: 2070 726f 6d6f 7465 5f63 6861 745f 6d65   promote_chat_me
+0000a2c0: 6d62 6572 280a 2020 2020 746f 6b65 6e2c  mber(.    token,
+0000a2d0: 0a20 2020 2063 6861 745f 6964 2c0a 2020  .    chat_id,.  
+0000a2e0: 2020 7573 6572 5f69 642c 0a20 2020 2063    user_id,.    c
+0000a2f0: 616e 5f63 6861 6e67 655f 696e 666f 3d4e  an_change_info=N
+0000a300: 6f6e 652c 0a20 2020 2063 616e 5f70 6f73  one,.    can_pos
+0000a310: 745f 6d65 7373 6167 6573 3d4e 6f6e 652c  t_messages=None,
+0000a320: 0a20 2020 2063 616e 5f65 6469 745f 6d65  .    can_edit_me
+0000a330: 7373 6167 6573 3d4e 6f6e 652c 0a20 2020  ssages=None,.   
+0000a340: 2063 616e 5f64 656c 6574 655f 6d65 7373   can_delete_mess
+0000a350: 6167 6573 3d4e 6f6e 652c 0a20 2020 2063  ages=None,.    c
+0000a360: 616e 5f69 6e76 6974 655f 7573 6572 733d  an_invite_users=
+0000a370: 4e6f 6e65 2c0a 2020 2020 6361 6e5f 7265  None,.    can_re
+0000a380: 7374 7269 6374 5f6d 656d 6265 7273 3d4e  strict_members=N
+0000a390: 6f6e 652c 0a20 2020 2063 616e 5f70 696e  one,.    can_pin
+0000a3a0: 5f6d 6573 7361 6765 733d 4e6f 6e65 2c0a  _messages=None,.
+0000a3b0: 2020 2020 6361 6e5f 7072 6f6d 6f74 655f      can_promote_
+0000a3c0: 6d65 6d62 6572 733d 4e6f 6e65 2c0a 2020  members=None,.  
+0000a3d0: 2020 6973 5f61 6e6f 6e79 6d6f 7573 3d4e    is_anonymous=N
+0000a3e0: 6f6e 652c 0a20 2020 2063 616e 5f6d 616e  one,.    can_man
+0000a3f0: 6167 655f 6368 6174 3d4e 6f6e 652c 0a20  age_chat=None,. 
+0000a400: 2020 2063 616e 5f6d 616e 6167 655f 7669     can_manage_vi
+0000a410: 6465 6f5f 6368 6174 733d 4e6f 6e65 2c0a  deo_chats=None,.
+0000a420: 2020 2020 6361 6e5f 6d61 6e61 6765 5f74      can_manage_t
+0000a430: 6f70 6963 733d 4e6f 6e65 2c0a 2020 2020  opics=None,.    
+0000a440: 6361 6e5f 706f 7374 5f73 746f 7269 6573  can_post_stories
+0000a450: 3d4e 6f6e 652c 0a20 2020 2063 616e 5f65  =None,.    can_e
+0000a460: 6469 745f 7374 6f72 6965 733d 4e6f 6e65  dit_stories=None
+0000a470: 2c0a 2020 2020 6361 6e5f 6465 6c65 7465  ,.    can_delete
+0000a480: 5f73 746f 7269 6573 3d4e 6f6e 652c 0a29  _stories=None,.)
+0000a490: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+0000a4a0: 203d 2022 7072 6f6d 6f74 6543 6861 744d   = "promoteChatM
+0000a4b0: 656d 6265 7222 0a20 2020 2070 6179 6c6f  ember".    paylo
+0000a4c0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+0000a4d0: 2063 6861 745f 6964 2c20 2275 7365 725f   chat_id, "user_
+0000a4e0: 6964 223a 2075 7365 725f 6964 7d0a 2020  id": user_id}.  
+0000a4f0: 2020 6966 2063 616e 5f63 6861 6e67 655f    if can_change_
+0000a500: 696e 666f 2069 7320 6e6f 7420 4e6f 6e65  info is not None
+0000a510: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000a520: 645b 2263 616e 5f63 6861 6e67 655f 696e  d["can_change_in
+0000a530: 666f 225d 203d 2063 616e 5f63 6861 6e67  fo"] = can_chang
+0000a540: 655f 696e 666f 0a20 2020 2069 6620 6361  e_info.    if ca
+0000a550: 6e5f 706f 7374 5f6d 6573 7361 6765 7320  n_post_messages 
+0000a560: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000a570: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
+0000a580: 6e5f 706f 7374 5f6d 6573 7361 6765 7322  n_post_messages"
+0000a590: 5d20 3d20 6361 6e5f 706f 7374 5f6d 6573  ] = can_post_mes
+0000a5a0: 7361 6765 730a 2020 2020 6966 2063 616e  sages.    if can
+0000a5b0: 5f65 6469 745f 6d65 7373 6167 6573 2069  _edit_messages i
+0000a5c0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a5d0: 2020 2020 7061 796c 6f61 645b 2263 616e      payload["can
+0000a5e0: 5f65 6469 745f 6d65 7373 6167 6573 225d  _edit_messages"]
+0000a5f0: 203d 2063 616e 5f65 6469 745f 6d65 7373   = can_edit_mess
+0000a600: 6167 6573 0a20 2020 2069 6620 6361 6e5f  ages.    if can_
+0000a610: 6465 6c65 7465 5f6d 6573 7361 6765 7320  delete_messages 
+0000a620: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000a630: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
+0000a640: 6e5f 6465 6c65 7465 5f6d 6573 7361 6765  n_delete_message
+0000a650: 7322 5d20 3d20 6361 6e5f 6465 6c65 7465  s"] = can_delete
+0000a660: 5f6d 6573 7361 6765 730a 2020 2020 6966  _messages.    if
+0000a670: 2063 616e 5f69 6e76 6974 655f 7573 6572   can_invite_user
+0000a680: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+0000a690: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000a6a0: 6361 6e5f 696e 7669 7465 5f75 7365 7273  can_invite_users
+0000a6b0: 225d 203d 2063 616e 5f69 6e76 6974 655f  "] = can_invite_
+0000a6c0: 7573 6572 730a 2020 2020 6966 2063 616e  users.    if can
+0000a6d0: 5f72 6573 7472 6963 745f 6d65 6d62 6572  _restrict_member
+0000a6e0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+0000a6f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000a700: 6361 6e5f 7265 7374 7269 6374 5f6d 656d  can_restrict_mem
+0000a710: 6265 7273 225d 203d 2063 616e 5f72 6573  bers"] = can_res
+0000a720: 7472 6963 745f 6d65 6d62 6572 730a 2020  trict_members.  
+0000a730: 2020 6966 2063 616e 5f70 696e 5f6d 6573    if can_pin_mes
+0000a740: 7361 6765 7320 6973 206e 6f74 204e 6f6e  sages is not Non
+0000a750: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000a760: 6164 5b22 6361 6e5f 7069 6e5f 6d65 7373  ad["can_pin_mess
+0000a770: 6167 6573 225d 203d 2063 616e 5f70 696e  ages"] = can_pin
+0000a780: 5f6d 6573 7361 6765 730a 2020 2020 6966  _messages.    if
+0000a790: 2063 616e 5f70 726f 6d6f 7465 5f6d 656d   can_promote_mem
+0000a7a0: 6265 7273 2069 7320 6e6f 7420 4e6f 6e65  bers is not None
+0000a7b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000a7c0: 645b 2263 616e 5f70 726f 6d6f 7465 5f6d  d["can_promote_m
+0000a7d0: 656d 6265 7273 225d 203d 2063 616e 5f70  embers"] = can_p
+0000a7e0: 726f 6d6f 7465 5f6d 656d 6265 7273 0a20  romote_members. 
+0000a7f0: 2020 2069 6620 6973 5f61 6e6f 6e79 6d6f     if is_anonymo
+0000a800: 7573 2069 7320 6e6f 7420 4e6f 6e65 3a0a  us is not None:.
+0000a810: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000a820: 2269 735f 616e 6f6e 796d 6f75 7322 5d20  "is_anonymous"] 
+0000a830: 3d20 6973 5f61 6e6f 6e79 6d6f 7573 0a20  = is_anonymous. 
+0000a840: 2020 2069 6620 6361 6e5f 6d61 6e61 6765     if can_manage
+0000a850: 5f63 6861 7420 6973 206e 6f74 204e 6f6e  _chat is not Non
+0000a860: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000a870: 6164 5b22 6361 6e5f 6d61 6e61 6765 5f63  ad["can_manage_c
+0000a880: 6861 7422 5d20 3d20 6361 6e5f 6d61 6e61  hat"] = can_mana
+0000a890: 6765 5f63 6861 740a 2020 2020 6966 2063  ge_chat.    if c
 0000a8a0: 616e 5f6d 616e 6167 655f 7669 6465 6f5f  an_manage_video_
-0000a8b0: 6368 6174 7322 5d20 3d20 6361 6e5f 6d61  chats"] = can_ma
-0000a8c0: 6e61 6765 5f76 6964 656f 5f63 6861 7473  nage_video_chats
-0000a8d0: 0a20 2020 2069 6620 6361 6e5f 6d61 6e61  .    if can_mana
-0000a8e0: 6765 5f74 6f70 6963 7320 6973 206e 6f74  ge_topics is not
-0000a8f0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-0000a900: 6179 6c6f 6164 5b22 6361 6e5f 6d61 6e61  ayload["can_mana
-0000a910: 6765 5f74 6f70 6963 7322 5d20 3d20 6361  ge_topics"] = ca
-0000a920: 6e5f 6d61 6e61 6765 5f74 6f70 6963 730a  n_manage_topics.
-0000a930: 2020 2020 6966 2063 616e 5f70 6f73 745f      if can_post_
-0000a940: 7374 6f72 6965 7320 6973 206e 6f74 204e  stories is not N
-0000a950: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000a960: 6c6f 6164 5b22 6361 6e5f 706f 7374 5f73  load["can_post_s
-0000a970: 746f 7269 6573 225d 203d 2063 616e 5f70  tories"] = can_p
-0000a980: 6f73 745f 7374 6f72 6965 730a 2020 2020  ost_stories.    
-0000a990: 6966 2063 616e 5f65 6469 745f 7374 6f72  if can_edit_stor
-0000a9a0: 6965 7320 6973 206e 6f74 204e 6f6e 653a  ies is not None:
-0000a9b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000a9c0: 5b22 6361 6e5f 6564 6974 5f73 746f 7269  ["can_edit_stori
-0000a9d0: 6573 225d 203d 2063 616e 5f65 6469 745f  es"] = can_edit_
-0000a9e0: 7374 6f72 6965 730a 2020 2020 6966 2063  stories.    if c
-0000a9f0: 616e 5f64 656c 6574 655f 7374 6f72 6965  an_delete_storie
-0000aa00: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-0000aa10: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000aa20: 6361 6e5f 6465 6c65 7465 5f73 746f 7269  can_delete_stori
-0000aa30: 6573 225d 203d 2063 616e 5f64 656c 6574  es"] = can_delet
-0000aa40: 655f 7374 6f72 6965 730a 2020 2020 7265  e_stories.    re
-0000aa50: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000aa60: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000aa70: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000aa80: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000aa90: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000aaa0: 6173 796e 6320 6465 6620 7365 745f 6368  async def set_ch
-0000aab0: 6174 5f61 646d 696e 6973 7472 6174 6f72  at_administrator
-0000aac0: 5f63 7573 746f 6d5f 7469 746c 6528 746f  _custom_title(to
-0000aad0: 6b65 6e2c 2063 6861 745f 6964 2c20 7573  ken, chat_id, us
-0000aae0: 6572 5f69 642c 2063 7573 746f 6d5f 7469  er_id, custom_ti
-0000aaf0: 746c 6529 3a0a 2020 2020 6d65 7468 6f64  tle):.    method
-0000ab00: 5f75 726c 203d 2022 7365 7443 6861 7441  _url = "setChatA
-0000ab10: 646d 696e 6973 7472 6174 6f72 4375 7374  dministratorCust
-0000ab20: 6f6d 5469 746c 6522 0a20 2020 2070 6179  omTitle".    pay
-0000ab30: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-0000ab40: 223a 2063 6861 745f 6964 2c20 2275 7365  ": chat_id, "use
-0000ab50: 725f 6964 223a 2075 7365 725f 6964 2c20  r_id": user_id, 
-0000ab60: 2263 7573 746f 6d5f 7469 746c 6522 3a20  "custom_title": 
-0000ab70: 6375 7374 6f6d 5f74 6974 6c65 7d0a 2020  custom_title}.  
-0000ab80: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-0000ab90: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-0000aba0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-0000abb0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-0000abc0: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
-0000abd0: 290a 0a0a 6173 796e 6320 6465 6620 6261  )...async def ba
-0000abe0: 6e5f 6368 6174 5f73 656e 6465 725f 6368  n_chat_sender_ch
-0000abf0: 6174 2874 6f6b 656e 2c20 6368 6174 5f69  at(token, chat_i
-0000ac00: 642c 2073 656e 6465 725f 6368 6174 5f69  d, sender_chat_i
-0000ac10: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000ac20: 726c 203d 2022 6261 6e43 6861 7453 656e  rl = "banChatSen
-0000ac30: 6465 7243 6861 7422 0a20 2020 2070 6179  derChat".    pay
-0000ac40: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-0000ac50: 223a 2063 6861 745f 6964 2c20 2273 656e  ": chat_id, "sen
-0000ac60: 6465 725f 6368 6174 5f69 6422 3a20 7365  der_chat_id": se
-0000ac70: 6e64 6572 5f63 6861 745f 6964 7d0a 2020  nder_chat_id}.  
-0000ac80: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-0000ac90: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-0000aca0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-0000acb0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-0000acc0: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
-0000acd0: 290a 0a0a 6173 796e 6320 6465 6620 756e  )...async def un
-0000ace0: 6261 6e5f 6368 6174 5f73 656e 6465 725f  ban_chat_sender_
-0000acf0: 6368 6174 2874 6f6b 656e 2c20 6368 6174  chat(token, chat
-0000ad00: 5f69 642c 2073 656e 6465 725f 6368 6174  _id, sender_chat
-0000ad10: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-0000ad20: 5f75 726c 203d 2022 756e 6261 6e43 6861  _url = "unbanCha
-0000ad30: 7453 656e 6465 7243 6861 7422 0a20 2020  tSenderChat".   
-0000ad40: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-0000ad50: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
-0000ad60: 2273 656e 6465 725f 6368 6174 5f69 6422  "sender_chat_id"
-0000ad70: 3a20 7365 6e64 6572 5f63 6861 745f 6964  : sender_chat_id
-0000ad80: 7d0a 2020 2020 7265 7475 726e 2061 7761  }.    return awa
-0000ad90: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-0000ada0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000adb0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000adc0: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
-0000add0: 6f73 7422 290a 0a0a 6173 796e 6320 6465  ost")...async de
-0000ade0: 6620 7365 745f 6368 6174 5f70 6572 6d69  f set_chat_permi
-0000adf0: 7373 696f 6e73 280a 2020 2020 746f 6b65  ssions(.    toke
-0000ae00: 6e2c 2063 6861 745f 6964 2c20 7065 726d  n, chat_id, perm
-0000ae10: 6973 7369 6f6e 732c 2075 7365 5f69 6e64  issions, use_ind
-0000ae20: 6570 656e 6465 6e74 5f63 6861 745f 7065  ependent_chat_pe
-0000ae30: 726d 6973 7369 6f6e 733d 4e6f 6e65 0a29  rmissions=None.)
-0000ae40: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000ae50: 203d 2022 7365 7443 6861 7450 6572 6d69   = "setChatPermi
-0000ae60: 7373 696f 6e73 220a 2020 2020 7061 796c  ssions".    payl
-0000ae70: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
-0000ae80: 3a20 6368 6174 5f69 642c 2022 7065 726d  : chat_id, "perm
-0000ae90: 6973 7369 6f6e 7322 3a20 7065 726d 6973  issions": permis
-0000aea0: 7369 6f6e 732e 746f 5f6a 736f 6e28 297d  sions.to_json()}
-0000aeb0: 0a20 2020 2069 6620 7573 655f 696e 6465  .    if use_inde
-0000aec0: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
-0000aed0: 6d69 7373 696f 6e73 2069 7320 6e6f 7420  missions is not 
-0000aee0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000aef0: 796c 6f61 645b 2275 7365 5f69 6e64 6570  yload["use_indep
-0000af00: 656e 6465 6e74 5f63 6861 745f 7065 726d  endent_chat_perm
-0000af10: 6973 7369 6f6e 7322 5d20 3d20 7573 655f  issions"] = use_
-0000af20: 696e 6465 7065 6e64 656e 745f 6368 6174  independent_chat
-0000af30: 5f70 6572 6d69 7373 696f 6e73 0a20 2020  _permissions.   
-0000af40: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-0000af50: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-0000af60: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000af70: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000af80: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
-0000af90: 0a0a 0a61 7379 6e63 2064 6566 2063 7265  ...async def cre
-0000afa0: 6174 655f 6368 6174 5f69 6e76 6974 655f  ate_chat_invite_
-0000afb0: 6c69 6e6b 280a 2020 2020 746f 6b65 6e2c  link(.    token,
-0000afc0: 2063 6861 745f 6964 2c20 6e61 6d65 2c20   chat_id, name, 
-0000afd0: 6578 7069 7265 5f64 6174 652c 206d 656d  expire_date, mem
-0000afe0: 6265 725f 6c69 6d69 742c 2063 7265 6174  ber_limit, creat
-0000aff0: 6573 5f6a 6f69 6e5f 7265 7175 6573 740a  es_join_request.
-0000b000: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000b010: 6c20 3d20 2263 7265 6174 6543 6861 7449  l = "createChatI
-0000b020: 6e76 6974 654c 696e 6b22 0a20 2020 2070  nviteLink".    p
-0000b030: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-0000b040: 6964 223a 2063 6861 745f 6964 7d0a 0a20  id": chat_id}.. 
-0000b050: 2020 2069 6620 6578 7069 7265 5f64 6174     if expire_dat
-0000b060: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0000b070: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000b080: 616e 6365 2865 7870 6972 655f 6461 7465  ance(expire_date
-0000b090: 2c20 6461 7465 7469 6d65 293a 0a20 2020  , datetime):.   
-0000b0a0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-0000b0b0: 5b22 6578 7069 7265 5f64 6174 6522 5d20  ["expire_date"] 
-0000b0c0: 3d20 6578 7069 7265 5f64 6174 652e 7469  = expire_date.ti
-0000b0d0: 6d65 7374 616d 7028 290a 2020 2020 2020  mestamp().      
-0000b0e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000b0f0: 2020 2020 7061 796c 6f61 645b 2265 7870      payload["exp
-0000b100: 6972 655f 6461 7465 225d 203d 2065 7870  ire_date"] = exp
-0000b110: 6972 655f 6461 7465 0a20 2020 2069 6620  ire_date.    if 
-0000b120: 6d65 6d62 6572 5f6c 696d 6974 3a0a 2020  member_limit:.  
-0000b130: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
-0000b140: 656d 6265 725f 6c69 6d69 7422 5d20 3d20  ember_limit"] = 
-0000b150: 6d65 6d62 6572 5f6c 696d 6974 0a20 2020  member_limit.   
-0000b160: 2069 6620 6372 6561 7465 735f 6a6f 696e   if creates_join
-0000b170: 5f72 6571 7565 7374 2069 7320 6e6f 7420  _request is not 
-0000b180: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000b190: 796c 6f61 645b 2263 7265 6174 6573 5f6a  yload["creates_j
-0000b1a0: 6f69 6e5f 7265 7175 6573 7422 5d20 3d20  oin_request"] = 
-0000b1b0: 6372 6561 7465 735f 6a6f 696e 5f72 6571  creates_join_req
-0000b1c0: 7565 7374 0a20 2020 2069 6620 6e61 6d65  uest.    if name
-0000b1d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000b1e0: 645b 226e 616d 6522 5d20 3d20 6e61 6d65  d["name"] = name
-0000b1f0: 0a0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
-0000b200: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-0000b210: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000b220: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000b230: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
-0000b240: 6f73 7422 290a 0a0a 6173 796e 6320 6465  ost")...async de
-0000b250: 6620 6564 6974 5f63 6861 745f 696e 7669  f edit_chat_invi
-0000b260: 7465 5f6c 696e 6b28 0a20 2020 2074 6f6b  te_link(.    tok
-0000b270: 656e 2c20 6368 6174 5f69 642c 2069 6e76  en, chat_id, inv
-0000b280: 6974 655f 6c69 6e6b 2c20 6e61 6d65 2c20  ite_link, name, 
-0000b290: 6578 7069 7265 5f64 6174 652c 206d 656d  expire_date, mem
-0000b2a0: 6265 725f 6c69 6d69 742c 2063 7265 6174  ber_limit, creat
-0000b2b0: 6573 5f6a 6f69 6e5f 7265 7175 6573 740a  es_join_request.
-0000b2c0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000b2d0: 6c20 3d20 2265 6469 7443 6861 7449 6e76  l = "editChatInv
-0000b2e0: 6974 654c 696e 6b22 0a20 2020 2070 6179  iteLink".    pay
-0000b2f0: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-0000b300: 223a 2063 6861 745f 6964 2c20 2269 6e76  ": chat_id, "inv
-0000b310: 6974 655f 6c69 6e6b 223a 2069 6e76 6974  ite_link": invit
-0000b320: 655f 6c69 6e6b 7d0a 0a20 2020 2069 6620  e_link}..    if 
-0000b330: 6578 7069 7265 5f64 6174 6520 6973 206e  expire_date is n
-0000b340: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000b350: 2069 6620 6973 696e 7374 616e 6365 2865   if isinstance(e
-0000b360: 7870 6972 655f 6461 7465 2c20 6461 7465  xpire_date, date
-0000b370: 7469 6d65 293a 0a20 2020 2020 2020 2020  time):.         
-0000b380: 2020 2070 6179 6c6f 6164 5b22 6578 7069     payload["expi
-0000b390: 7265 5f64 6174 6522 5d20 3d20 6578 7069  re_date"] = expi
-0000b3a0: 7265 5f64 6174 652e 7469 6d65 7374 616d  re_date.timestam
-0000b3b0: 7028 290a 2020 2020 2020 2020 656c 7365  p().        else
-0000b3c0: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
-0000b3d0: 796c 6f61 645b 2265 7870 6972 655f 6461  yload["expire_da
-0000b3e0: 7465 225d 203d 2065 7870 6972 655f 6461  te"] = expire_da
-0000b3f0: 7465 0a0a 2020 2020 6966 206d 656d 6265  te..    if membe
-0000b400: 725f 6c69 6d69 7420 6973 206e 6f74 204e  r_limit is not N
-0000b410: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000b420: 6c6f 6164 5b22 6d65 6d62 6572 5f6c 696d  load["member_lim
-0000b430: 6974 225d 203d 206d 656d 6265 725f 6c69  it"] = member_li
-0000b440: 6d69 740a 2020 2020 6966 206e 616d 653a  mit.    if name:
-0000b450: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000b460: 5b22 6e61 6d65 225d 203d 206e 616d 650a  ["name"] = name.
-0000b470: 2020 2020 6966 2063 7265 6174 6573 5f6a      if creates_j
-0000b480: 6f69 6e5f 7265 7175 6573 7420 6973 206e  oin_request is n
-0000b490: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000b4a0: 2070 6179 6c6f 6164 5b22 6372 6561 7465   payload["create
-0000b4b0: 735f 6a6f 696e 5f72 6571 7565 7374 225d  s_join_request"]
-0000b4c0: 203d 2063 7265 6174 6573 5f6a 6f69 6e5f   = creates_join_
-0000b4d0: 7265 7175 6573 740a 0a20 2020 2072 6574  request..    ret
-0000b4e0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-0000b4f0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000b500: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000b510: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000b520: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
-0000b530: 7379 6e63 2064 6566 2072 6576 6f6b 655f  sync def revoke_
-0000b540: 6368 6174 5f69 6e76 6974 655f 6c69 6e6b  chat_invite_link
-0000b550: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-0000b560: 2069 6e76 6974 655f 6c69 6e6b 293a 0a20   invite_link):. 
-0000b570: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000b580: 2272 6576 6f6b 6543 6861 7449 6e76 6974  "revokeChatInvit
-0000b590: 654c 696e 6b22 0a20 2020 2070 6179 6c6f  eLink".    paylo
-0000b5a0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
-0000b5b0: 2063 6861 745f 6964 2c20 2269 6e76 6974   chat_id, "invit
-0000b5c0: 655f 6c69 6e6b 223a 2069 6e76 6974 655f  e_link": invite_
-0000b5d0: 6c69 6e6b 7d0a 2020 2020 7265 7475 726e  link}.    return
-0000b5e0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-0000b5f0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000b600: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000b610: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000b620: 643d 2270 6f73 7422 290a 0a0a 6173 796e  d="post")...asyn
-0000b630: 6320 6465 6620 6578 706f 7274 5f63 6861  c def export_cha
-0000b640: 745f 696e 7669 7465 5f6c 696e 6b28 746f  t_invite_link(to
-0000b650: 6b65 6e2c 2063 6861 745f 6964 293a 0a20  ken, chat_id):. 
-0000b660: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000b670: 2265 7870 6f72 7443 6861 7449 6e76 6974  "exportChatInvit
-0000b680: 654c 696e 6b22 0a20 2020 2070 6179 6c6f  eLink".    paylo
-0000b690: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
-0000b6a0: 2063 6861 745f 6964 7d0a 2020 2020 7265   chat_id}.    re
-0000b6b0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000b6c0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000b6d0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000b6e0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000b6f0: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000b700: 6173 796e 6320 6465 6620 6170 7072 6f76  async def approv
-0000b710: 655f 6368 6174 5f6a 6f69 6e5f 7265 7175  e_chat_join_requ
-0000b720: 6573 7428 746f 6b65 6e2c 2063 6861 745f  est(token, chat_
-0000b730: 6964 2c20 7573 6572 5f69 6429 3a0a 2020  id, user_id):.  
-0000b740: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
-0000b750: 6170 7072 6f76 6543 6861 744a 6f69 6e52  approveChatJoinR
-0000b760: 6571 7565 7374 220a 2020 2020 7061 796c  equest".    payl
-0000b770: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
-0000b780: 3a20 6368 6174 5f69 642c 2022 7573 6572  : chat_id, "user
-0000b790: 5f69 6422 3a20 7573 6572 5f69 647d 0a20  _id": user_id}. 
-0000b7a0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-0000b7b0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-0000b7c0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000b7d0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000b7e0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
-0000b7f0: 2229 0a0a 0a61 7379 6e63 2064 6566 2064  ")...async def d
-0000b800: 6563 6c69 6e65 5f63 6861 745f 6a6f 696e  ecline_chat_join
-0000b810: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000b820: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
-0000b830: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000b840: 6c20 3d20 2264 6563 6c69 6e65 4368 6174  l = "declineChat
-0000b850: 4a6f 696e 5265 7175 6573 7422 0a20 2020  JoinRequest".   
-0000b860: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-0000b870: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
-0000b880: 2275 7365 725f 6964 223a 2075 7365 725f  "user_id": user_
-0000b890: 6964 7d0a 2020 2020 7265 7475 726e 2061  id}.    return a
-0000b8a0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000b8b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b8c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b8d0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b8e0: 2270 6f73 7422 290a 0a0a 6173 796e 6320  "post")...async 
-0000b8f0: 6465 6620 7365 745f 6368 6174 5f70 686f  def set_chat_pho
-0000b900: 746f 2874 6f6b 656e 2c20 6368 6174 5f69  to(token, chat_i
-0000b910: 642c 2070 686f 746f 293a 0a20 2020 206d  d, photo):.    m
-0000b920: 6574 686f 645f 7572 6c20 3d20 2273 6574  ethod_url = "set
-0000b930: 4368 6174 5068 6f74 6f22 0a20 2020 2070  ChatPhoto".    p
-0000b940: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
-0000b950: 6964 223a 2063 6861 745f 6964 7d0a 2020  id": chat_id}.  
-0000b960: 2020 6669 6c65 7320 3d20 4e6f 6e65 0a20    files = None. 
-0000b970: 2020 2069 6620 7574 696c 2e69 735f 7374     if util.is_st
-0000b980: 7269 6e67 2870 686f 746f 293a 0a20 2020  ring(photo):.   
-0000b990: 2020 2020 2070 6179 6c6f 6164 5b22 7068       payload["ph
-0000b9a0: 6f74 6f22 5d20 3d20 7068 6f74 6f0a 2020  oto"] = photo.  
-0000b9b0: 2020 656c 6966 2075 7469 6c2e 6973 5f70    elif util.is_p
-0000b9c0: 696c 5f69 6d61 6765 2870 686f 746f 293a  il_image(photo):
-0000b9d0: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
-0000b9e0: 207b 2270 686f 746f 223a 2075 7469 6c2e   {"photo": util.
-0000b9f0: 7069 6c5f 696d 6167 655f 746f 5f66 696c  pil_image_to_fil
-0000ba00: 6528 7068 6f74 6f29 7d0a 2020 2020 656c  e(photo)}.    el
-0000ba10: 7365 3a0a 2020 2020 2020 2020 6669 6c65  se:.        file
-0000ba20: 7320 3d20 7b22 7068 6f74 6f22 3a20 7068  s = {"photo": ph
-0000ba30: 6f74 6f7d 0a20 2020 2072 6574 7572 6e20  oto}.    return 
-0000ba40: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-0000ba50: 6571 7565 7374 280a 2020 2020 2020 2020  equest(.        
-0000ba60: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-0000ba70: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-0000ba80: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
-0000ba90: 6d65 7468 6f64 3d22 706f 7374 220a 2020  method="post".  
-0000baa0: 2020 290a 0a0a 6173 796e 6320 6465 6620    )...async def 
-0000bab0: 6465 6c65 7465 5f63 6861 745f 7068 6f74  delete_chat_phot
-0000bac0: 6f28 746f 6b65 6e2c 2063 6861 745f 6964  o(token, chat_id
-0000bad0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000bae0: 6c20 3d20 2264 656c 6574 6543 6861 7450  l = "deleteChatP
-0000baf0: 686f 746f 220a 2020 2020 7061 796c 6f61  hoto".    payloa
-0000bb00: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-0000bb10: 6368 6174 5f69 647d 0a20 2020 2072 6574  chat_id}.    ret
-0000bb20: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-0000bb30: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000bb40: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000bb50: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000bb60: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
-0000bb70: 7379 6e63 2064 6566 2073 6574 5f63 6861  sync def set_cha
-0000bb80: 745f 7469 746c 6528 746f 6b65 6e2c 2063  t_title(token, c
-0000bb90: 6861 745f 6964 2c20 7469 746c 6529 3a0a  hat_id, title):.
-0000bba0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000bbb0: 2022 7365 7443 6861 7454 6974 6c65 220a   "setChatTitle".
-0000bbc0: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
-0000bbd0: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
-0000bbe0: 642c 2022 7469 746c 6522 3a20 7469 746c  d, "title": titl
-0000bbf0: 657d 0a20 2020 2072 6574 7572 6e20 6177  e}.    return aw
-0000bc00: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-0000bc10: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000bc20: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000bc30: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
-0000bc40: 706f 7374 2229 0a0a 0a61 7379 6e63 2064  post")...async d
-0000bc50: 6566 2073 6574 5f6d 795f 6465 7363 7269  ef set_my_descri
-0000bc60: 7074 696f 6e28 746f 6b65 6e2c 2064 6573  ption(token, des
-0000bc70: 6372 6970 7469 6f6e 3d4e 6f6e 652c 206c  cription=None, l
-0000bc80: 616e 6775 6167 655f 636f 6465 3d4e 6f6e  anguage_code=Non
-0000bc90: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-0000bca0: 726c 203d 2072 2273 6574 4d79 4465 7363  rl = r"setMyDesc
-0000bcb0: 7269 7074 696f 6e22 0a20 2020 2070 6179  ription".    pay
-0000bcc0: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-0000bcd0: 2064 6573 6372 6970 7469 6f6e 2069 7320   description is 
-0000bce0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000bcf0: 2020 7061 796c 6f61 645b 2264 6573 6372    payload["descr
-0000bd00: 6970 7469 6f6e 225d 203d 2064 6573 6372  iption"] = descr
-0000bd10: 6970 7469 6f6e 0a20 2020 2069 6620 6c61  iption.    if la
-0000bd20: 6e67 7561 6765 5f63 6f64 6520 6973 206e  nguage_code is n
-0000bd30: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000bd40: 2070 6179 6c6f 6164 5b22 6c61 6e67 7561   payload["langua
-0000bd50: 6765 5f63 6f64 6522 5d20 3d20 6c61 6e67  ge_code"] = lang
-0000bd60: 7561 6765 5f63 6f64 650a 2020 2020 7265  uage_code.    re
-0000bd70: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000bd80: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000bd90: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000bda0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000bdb0: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000bdc0: 6173 796e 6320 6465 6620 6765 745f 6d79  async def get_my
-0000bdd0: 5f64 6573 6372 6970 7469 6f6e 2874 6f6b  _description(tok
-0000bde0: 656e 2c20 6c61 6e67 7561 6765 5f63 6f64  en, language_cod
-0000bdf0: 653d 4e6f 6e65 293a 0a20 2020 206d 6574  e=None):.    met
-0000be00: 686f 645f 7572 6c20 3d20 7222 6765 744d  hod_url = r"getM
-0000be10: 7944 6573 6372 6970 7469 6f6e 220a 2020  yDescription".  
-0000be20: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
-0000be30: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
-0000be40: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
-0000be50: 6c6f 6164 5b22 6c61 6e67 7561 6765 5f63  load["language_c
-0000be60: 6f64 6522 5d20 3d20 6c61 6e67 7561 6765  ode"] = language
-0000be70: 5f63 6f64 650a 2020 2020 7265 7475 726e  _code.    return
-0000be80: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-0000be90: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000bea0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000beb0: 733d 7061 796c 6f61 6429 0a0a 0a61 7379  s=payload)...asy
-0000bec0: 6e63 2064 6566 2073 6574 5f6d 795f 7368  nc def set_my_sh
-0000bed0: 6f72 745f 6465 7363 7269 7074 696f 6e28  ort_description(
-0000bee0: 746f 6b65 6e2c 2073 686f 7274 5f64 6573  token, short_des
-0000bef0: 6372 6970 7469 6f6e 3d4e 6f6e 652c 206c  cription=None, l
-0000bf00: 616e 6775 6167 655f 636f 6465 3d4e 6f6e  anguage_code=Non
-0000bf10: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-0000bf20: 726c 203d 2072 2273 6574 4d79 5368 6f72  rl = r"setMyShor
-0000bf30: 7444 6573 6372 6970 7469 6f6e 220a 2020  tDescription".  
-0000bf40: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
-0000bf50: 2020 2069 6620 7368 6f72 745f 6465 7363     if short_desc
-0000bf60: 7269 7074 696f 6e20 6973 206e 6f74 204e  ription is not N
-0000bf70: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000bf80: 6c6f 6164 5b22 7368 6f72 745f 6465 7363  load["short_desc
-0000bf90: 7269 7074 696f 6e22 5d20 3d20 7368 6f72  ription"] = shor
-0000bfa0: 745f 6465 7363 7269 7074 696f 6e0a 2020  t_description.  
-0000bfb0: 2020 6966 206c 616e 6775 6167 655f 636f    if language_co
-0000bfc0: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
-0000bfd0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000bfe0: 226c 616e 6775 6167 655f 636f 6465 225d  "language_code"]
-0000bff0: 203d 206c 616e 6775 6167 655f 636f 6465   = language_code
-0000c000: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000c010: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000c020: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000c030: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000c040: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-0000c050: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
-0000c060: 2067 6574 5f6d 795f 7368 6f72 745f 6465   get_my_short_de
-0000c070: 7363 7269 7074 696f 6e28 746f 6b65 6e2c  scription(token,
-0000c080: 206c 616e 6775 6167 655f 636f 6465 3d4e   language_code=N
-0000c090: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
-0000c0a0: 5f75 726c 203d 2072 2267 6574 4d79 5368  _url = r"getMySh
-0000c0b0: 6f72 7444 6573 6372 6970 7469 6f6e 220a  ortDescription".
-0000c0c0: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
-0000c0d0: 0a20 2020 2069 6620 6c61 6e67 7561 6765  .    if language
-0000c0e0: 5f63 6f64 653a 0a20 2020 2020 2020 2070  _code:.        p
-0000c0f0: 6179 6c6f 6164 5b22 6c61 6e67 7561 6765  ayload["language
-0000c100: 5f63 6f64 6522 5d20 3d20 6c61 6e67 7561  _code"] = langua
-0000c110: 6765 5f63 6f64 650a 2020 2020 7265 7475  ge_code.    retu
-0000c120: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-0000c130: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
-0000c140: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000c150: 616d 733d 7061 796c 6f61 6429 0a0a 0a61  ams=payload)...a
-0000c160: 7379 6e63 2064 6566 2067 6574 5f6d 795f  sync def get_my_
-0000c170: 636f 6d6d 616e 6473 2874 6f6b 656e 2c20  commands(token, 
-0000c180: 7363 6f70 653d 4e6f 6e65 2c20 6c61 6e67  scope=None, lang
-0000c190: 7561 6765 5f63 6f64 653d 4e6f 6e65 293a  uage_code=None):
-0000c1a0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000c1b0: 3d20 7222 6765 744d 7943 6f6d 6d61 6e64  = r"getMyCommand
-0000c1c0: 7322 0a20 2020 2070 6179 6c6f 6164 203d  s".    payload =
-0000c1d0: 207b 7d0a 2020 2020 6966 2073 636f 7065   {}.    if scope
-0000c1e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000c1f0: 645b 2273 636f 7065 225d 203d 2073 636f  d["scope"] = sco
-0000c200: 7065 2e74 6f5f 6a73 6f6e 2829 0a20 2020  pe.to_json().   
-0000c210: 2069 6620 6c61 6e67 7561 6765 5f63 6f64   if language_cod
-0000c220: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-0000c230: 6164 5b22 6c61 6e67 7561 6765 5f63 6f64  ad["language_cod
-0000c240: 6522 5d20 3d20 6c61 6e67 7561 6765 5f63  e"] = language_c
-0000c250: 6f64 650a 2020 2020 7265 7475 726e 2061  ode.    return a
-0000c260: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000c270: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000c280: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000c290: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-0000c2a0: 2064 6566 2073 6574 5f6d 795f 6e61 6d65   def set_my_name
-0000c2b0: 2874 6f6b 656e 2c20 6e61 6d65 3d4e 6f6e  (token, name=Non
-0000c2c0: 652c 206c 616e 6775 6167 655f 636f 6465  e, language_code
-0000c2d0: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000c2e0: 6f64 5f75 726c 203d 2072 2273 6574 4d79  od_url = r"setMy
-0000c2f0: 4e61 6d65 220a 2020 2020 7061 796c 6f61  Name".    payloa
-0000c300: 6420 3d20 7b7d 0a20 2020 2069 6620 6e61  d = {}.    if na
-0000c310: 6d65 2069 7320 6e6f 7420 4e6f 6e65 3a0a  me is not None:.
-0000c320: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000c330: 226e 616d 6522 5d20 3d20 6e61 6d65 0a20  "name"] = name. 
-0000c340: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
-0000c350: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
-0000c360: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c370: 5b22 6c61 6e67 7561 6765 5f63 6f64 6522  ["language_code"
-0000c380: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000c390: 650a 2020 2020 7265 7475 726e 2061 7761  e.    return awa
-0000c3a0: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-0000c3b0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000c3c0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000c3d0: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
-0000c3e0: 6f73 7422 290a 0a0a 6173 796e 6320 6465  ost")...async de
-0000c3f0: 6620 6765 745f 6d79 5f6e 616d 6528 746f  f get_my_name(to
-0000c400: 6b65 6e2c 206c 616e 6775 6167 655f 636f  ken, language_co
-0000c410: 6465 3d4e 6f6e 6529 3a0a 2020 2020 6d65  de=None):.    me
-0000c420: 7468 6f64 5f75 726c 203d 2072 2267 6574  thod_url = r"get
-0000c430: 4d79 4e61 6d65 220a 2020 2020 7061 796c  MyName".    payl
-0000c440: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
-0000c450: 6c61 6e67 7561 6765 5f63 6f64 6520 6973  language_code is
-0000c460: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000c470: 2020 2070 6179 6c6f 6164 5b22 6c61 6e67     payload["lang
-0000c480: 7561 6765 5f63 6f64 6522 5d20 3d20 6c61  uage_code"] = la
-0000c490: 6e67 7561 6765 5f63 6f64 650a 2020 2020  nguage_code.    
-0000c4a0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-0000c4b0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-0000c4c0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000c4d0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-0000c4e0: 0a0a 0a61 7379 6e63 2064 6566 2073 6574  ...async def set
-0000c4f0: 5f63 6861 745f 6d65 6e75 5f62 7574 746f  _chat_menu_butto
-0000c500: 6e28 746f 6b65 6e2c 2063 6861 745f 6964  n(token, chat_id
-0000c510: 3d4e 6f6e 652c 206d 656e 755f 6275 7474  =None, menu_butt
-0000c520: 6f6e 3d4e 6f6e 6529 3a0a 2020 2020 6d65  on=None):.    me
-0000c530: 7468 6f64 5f75 726c 203d 2072 2273 6574  thod_url = r"set
-0000c540: 4368 6174 4d65 6e75 4275 7474 6f6e 220a  ChatMenuButton".
-0000c550: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
-0000c560: 0a20 2020 2069 6620 6368 6174 5f69 643a  .    if chat_id:
-0000c570: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c580: 5b22 6368 6174 5f69 6422 5d20 3d20 6368  ["chat_id"] = ch
-0000c590: 6174 5f69 640a 2020 2020 6966 206d 656e  at_id.    if men
-0000c5a0: 755f 6275 7474 6f6e 3a0a 2020 2020 2020  u_button:.      
-0000c5b0: 2020 7061 796c 6f61 645b 226d 656e 755f    payload["menu_
-0000c5c0: 6275 7474 6f6e 225d 203d 206d 656e 755f  button"] = menu_
-0000c5d0: 6275 7474 6f6e 2e74 6f5f 6a73 6f6e 2829  button.to_json()
-0000c5e0: 0a0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
-0000c5f0: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-0000c600: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000c610: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000c620: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
-0000c630: 6f73 7422 290a 0a0a 6173 796e 6320 6465  ost")...async de
-0000c640: 6620 6765 745f 6368 6174 5f6d 656e 755f  f get_chat_menu_
-0000c650: 6275 7474 6f6e 2874 6f6b 656e 2c20 6368  button(token, ch
-0000c660: 6174 5f69 643d 4e6f 6e65 293a 0a20 2020  at_id=None):.   
-0000c670: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
-0000c680: 6765 7443 6861 744d 656e 7542 7574 746f  getChatMenuButto
-0000c690: 6e22 0a20 2020 2070 6179 6c6f 6164 203d  n".    payload =
-0000c6a0: 207b 7d0a 2020 2020 6966 2063 6861 745f   {}.    if chat_
-0000c6b0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-0000c6c0: 6f61 645b 2263 6861 745f 6964 225d 203d  oad["chat_id"] =
-0000c6d0: 2063 6861 745f 6964 0a0a 2020 2020 7265   chat_id..    re
-0000c6e0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000c6f0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000c700: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000c710: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000c720: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000c730: 6173 796e 6320 6465 6620 7365 745f 6d79  async def set_my
-0000c740: 5f64 6566 6175 6c74 5f61 646d 696e 6973  _default_adminis
-0000c750: 7472 6174 6f72 5f72 6967 6874 7328 746f  trator_rights(to
-0000c760: 6b65 6e2c 2072 6967 6874 733d 4e6f 6e65  ken, rights=None
-0000c770: 2c20 666f 725f 6368 616e 6e65 6c73 3d4e  , for_channels=N
-0000c780: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
-0000c790: 5f75 726c 203d 2072 2273 6574 4d79 4465  _url = r"setMyDe
-0000c7a0: 6661 756c 7441 646d 696e 6973 7472 6174  faultAdministrat
-0000c7b0: 6f72 5269 6768 7473 220a 2020 2020 7061  orRights".    pa
-0000c7c0: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-0000c7d0: 6620 7269 6768 7473 3a0a 2020 2020 2020  f rights:.      
-0000c7e0: 2020 7061 796c 6f61 645b 2272 6967 6874    payload["right
-0000c7f0: 7322 5d20 3d20 7269 6768 7473 2e74 6f5f  s"] = rights.to_
-0000c800: 6a73 6f6e 2829 0a20 2020 2069 6620 666f  json().    if fo
-0000c810: 725f 6368 616e 6e65 6c73 2069 7320 6e6f  r_channels is no
-0000c820: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000c830: 7061 796c 6f61 645b 2266 6f72 5f63 6861  payload["for_cha
-0000c840: 6e6e 656c 7322 5d20 3d20 666f 725f 6368  nnels"] = for_ch
-0000c850: 616e 6e65 6c73 0a0a 2020 2020 7265 7475  annels..    retu
-0000c860: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-0000c870: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
-0000c880: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000c890: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
-0000c8a0: 686f 643d 2270 6f73 7422 290a 0a0a 6173  hod="post")...as
-0000c8b0: 796e 6320 6465 6620 6765 745f 6d79 5f64  ync def get_my_d
-0000c8c0: 6566 6175 6c74 5f61 646d 696e 6973 7472  efault_administr
-0000c8d0: 6174 6f72 5f72 6967 6874 7328 746f 6b65  ator_rights(toke
-0000c8e0: 6e2c 2066 6f72 5f63 6861 6e6e 656c 733d  n, for_channels=
-0000c8f0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-0000c900: 645f 7572 6c20 3d20 7222 6765 744d 7944  d_url = r"getMyD
-0000c910: 6566 6175 6c74 4164 6d69 6e69 7374 7261  efaultAdministra
-0000c920: 746f 7252 6967 6874 7322 0a20 2020 2070  torRights".    p
-0000c930: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
-0000c940: 6966 2066 6f72 5f63 6861 6e6e 656c 733a  if for_channels:
-0000c950: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c960: 5b22 666f 725f 6368 616e 6e65 6c73 225d  ["for_channels"]
-0000c970: 203d 2066 6f72 5f63 6861 6e6e 656c 730a   = for_channels.
-0000c980: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000c990: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000c9a0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000c9b0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000c9c0: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-0000c9d0: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
-0000c9e0: 2073 6574 5f6d 795f 636f 6d6d 616e 6473   set_my_commands
-0000c9f0: 2874 6f6b 656e 2c20 636f 6d6d 616e 6473  (token, commands
-0000ca00: 2c20 7363 6f70 653d 4e6f 6e65 2c20 6c61  , scope=None, la
-0000ca10: 6e67 7561 6765 5f63 6f64 653d 4e6f 6e65  nguage_code=None
-0000ca20: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000ca30: 6c20 3d20 7222 7365 744d 7943 6f6d 6d61  l = r"setMyComma
-0000ca40: 6e64 7322 0a20 2020 2070 6179 6c6f 6164  nds".    payload
-0000ca50: 203d 207b 2263 6f6d 6d61 6e64 7322 3a20   = {"commands": 
-0000ca60: 6177 6169 7420 5f63 6f6e 7665 7274 5f6c  await _convert_l
-0000ca70: 6973 745f 6a73 6f6e 5f73 6572 6961 6c69  ist_json_seriali
-0000ca80: 7a61 626c 6528 636f 6d6d 616e 6473 297d  zable(commands)}
-0000ca90: 0a20 2020 2069 6620 7363 6f70 653a 0a20  .    if scope:. 
-0000caa0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000cab0: 7363 6f70 6522 5d20 3d20 7363 6f70 652e  scope"] = scope.
-0000cac0: 746f 5f6a 736f 6e28 290a 2020 2020 6966  to_json().    if
-0000cad0: 206c 616e 6775 6167 655f 636f 6465 3a0a   language_code:.
-0000cae0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000caf0: 226c 616e 6775 6167 655f 636f 6465 225d  "language_code"]
-0000cb00: 203d 206c 616e 6775 6167 655f 636f 6465   = language_code
-0000cb10: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000cb20: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000cb30: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000cb40: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000cb50: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-0000cb60: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
-0000cb70: 2067 6574 5f62 7573 696e 6573 735f 636f   get_business_co
-0000cb80: 6e6e 6563 7469 6f6e 2874 6f6b 656e 2c20  nnection(token, 
-0000cb90: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-0000cba0: 696f 6e5f 6964 293a 0a20 2020 206d 6574  ion_id):.    met
-0000cbb0: 686f 645f 7572 6c20 3d20 2267 6574 4275  hod_url = "getBu
-0000cbc0: 7369 6e65 7373 436f 6e6e 6563 7469 6f6e  sinessConnection
-0000cbd0: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-0000cbe0: 7b22 6275 7369 6e65 7373 5f63 6f6e 6e65  {"business_conne
-0000cbf0: 6374 696f 6e5f 6964 223a 2062 7573 696e  ction_id": busin
-0000cc00: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-0000cc10: 647d 0a20 2020 2072 6574 7572 6e20 6177  d}.    return aw
-0000cc20: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-0000cc30: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000cc40: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000cc50: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
-0000cc60: 706f 7374 2229 0a0a 0a61 7379 6e63 2064  post")...async d
-0000cc70: 6566 2064 656c 6574 655f 6d79 5f63 6f6d  ef delete_my_com
-0000cc80: 6d61 6e64 7328 746f 6b65 6e2c 2073 636f  mands(token, sco
-0000cc90: 7065 3d4e 6f6e 652c 206c 616e 6775 6167  pe=None, languag
-0000cca0: 655f 636f 6465 3d4e 6f6e 6529 3a0a 2020  e_code=None):.  
-0000ccb0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000ccc0: 2264 656c 6574 654d 7943 6f6d 6d61 6e64  "deleteMyCommand
-0000ccd0: 7322 0a20 2020 2070 6179 6c6f 6164 203d  s".    payload =
-0000cce0: 207b 7d0a 2020 2020 6966 2073 636f 7065   {}.    if scope
-0000ccf0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000cd00: 645b 2273 636f 7065 225d 203d 2073 636f  d["scope"] = sco
-0000cd10: 7065 2e74 6f5f 6a73 6f6e 2829 0a20 2020  pe.to_json().   
-0000cd20: 2069 6620 6c61 6e67 7561 6765 5f63 6f64   if language_cod
-0000cd30: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-0000cd40: 6164 5b22 6c61 6e67 7561 6765 5f63 6f64  ad["language_cod
-0000cd50: 6522 5d20 3d20 6c61 6e67 7561 6765 5f63  e"] = language_c
-0000cd60: 6f64 650a 2020 2020 7265 7475 726e 2061  ode.    return a
-0000cd70: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000cd80: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000cd90: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000cda0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000cdb0: 2270 6f73 7422 290a 0a0a 6173 796e 6320  "post")...async 
-0000cdc0: 6465 6620 7365 745f 6368 6174 5f64 6573  def set_chat_des
-0000cdd0: 6372 6970 7469 6f6e 2874 6f6b 656e 2c20  cription(token, 
-0000cde0: 6368 6174 5f69 642c 2064 6573 6372 6970  chat_id, descrip
-0000cdf0: 7469 6f6e 293a 0a20 2020 206d 6574 686f  tion):.    metho
-0000ce00: 645f 7572 6c20 3d20 2273 6574 4368 6174  d_url = "setChat
-0000ce10: 4465 7363 7269 7074 696f 6e22 0a20 2020  Description".   
-0000ce20: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-0000ce30: 745f 6964 223a 2063 6861 745f 6964 7d0a  t_id": chat_id}.
-0000ce40: 2020 2020 6966 2064 6573 6372 6970 7469      if descripti
-0000ce50: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a20  on is not None: 
-0000ce60: 2023 2041 6c6c 6f77 2065 6d70 7479 2073   # Allow empty s
-0000ce70: 7472 696e 6773 0a20 2020 2020 2020 2070  trings.        p
-0000ce80: 6179 6c6f 6164 5b22 6465 7363 7269 7074  ayload["descript
-0000ce90: 696f 6e22 5d20 3d20 6465 7363 7269 7074  ion"] = descript
-0000cea0: 696f 6e0a 2020 2020 7265 7475 726e 2061  ion.    return a
-0000ceb0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000cec0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000ced0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000cee0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000cef0: 2270 6f73 7422 290a 0a0a 6173 796e 6320  "post")...async 
-0000cf00: 6465 6620 7069 6e5f 6368 6174 5f6d 6573  def pin_chat_mes
-0000cf10: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
-0000cf20: 5f69 642c 206d 6573 7361 6765 5f69 642c  _id, message_id,
-0000cf30: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-0000cf40: 6174 696f 6e3d 4e6f 6e65 293a 0a20 2020  ation=None):.   
-0000cf50: 206d 6574 686f 645f 7572 6c20 3d20 2270   method_url = "p
-0000cf60: 696e 4368 6174 4d65 7373 6167 6522 0a20  inChatMessage". 
-0000cf70: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
-0000cf80: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
-0000cf90: 2c20 226d 6573 7361 6765 5f69 6422 3a20  , "message_id": 
-0000cfa0: 6d65 7373 6167 655f 6964 7d0a 2020 2020  message_id}.    
-0000cfb0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-0000cfc0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-0000cfd0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000cfe0: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
-0000cff0: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
-0000d000: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000d010: 696f 6e0a 2020 2020 7265 7475 726e 2061  ion.    return a
-0000d020: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000d030: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000d040: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000d050: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000d060: 2270 6f73 7422 290a 0a0a 6173 796e 6320  "post")...async 
-0000d070: 6465 6620 756e 7069 6e5f 6368 6174 5f6d  def unpin_chat_m
-0000d080: 6573 7361 6765 2874 6f6b 656e 2c20 6368  essage(token, ch
-0000d090: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
-0000d0a0: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000d0b0: 726c 203d 2022 756e 7069 6e43 6861 744d  rl = "unpinChatM
-0000d0c0: 6573 7361 6765 220a 2020 2020 7061 796c  essage".    payl
-0000d0d0: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
-0000d0e0: 3a20 6368 6174 5f69 647d 0a20 2020 2069  : chat_id}.    i
-0000d0f0: 6620 6d65 7373 6167 655f 6964 3a0a 2020  f message_id:.  
-0000d100: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
-0000d110: 6573 7361 6765 5f69 6422 5d20 3d20 6d65  essage_id"] = me
-0000d120: 7373 6167 655f 6964 0a20 2020 2072 6574  ssage_id.    ret
-0000d130: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-0000d140: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000d150: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000d160: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000d170: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
-0000d180: 7379 6e63 2064 6566 2075 6e70 696e 5f61  sync def unpin_a
-0000d190: 6c6c 5f63 6861 745f 6d65 7373 6167 6573  ll_chat_messages
-0000d1a0: 2874 6f6b 656e 2c20 6368 6174 5f69 6429  (token, chat_id)
-0000d1b0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000d1c0: 203d 2022 756e 7069 6e41 6c6c 4368 6174   = "unpinAllChat
-0000d1d0: 4d65 7373 6167 6573 220a 2020 2020 7061  Messages".    pa
-0000d1e0: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-0000d1f0: 6422 3a20 6368 6174 5f69 647d 0a20 2020  d": chat_id}.   
-0000d200: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-0000d210: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-0000d220: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000d230: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000d240: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
-0000d250: 0a0a 0a23 2055 7064 6174 696e 6720 6d65  ...# Updating me
-0000d260: 7373 6167 6573 0a0a 0a61 7379 6e63 2064  ssages...async d
-0000d270: 6566 2065 6469 745f 6d65 7373 6167 655f  ef edit_message_
-0000d280: 7465 7874 280a 2020 2020 746f 6b65 6e2c  text(.    token,
-0000d290: 0a20 2020 2074 6578 742c 0a20 2020 2063  .    text,.    c
-0000d2a0: 6861 745f 6964 3d4e 6f6e 652c 0a20 2020  hat_id=None,.   
-0000d2b0: 206d 6573 7361 6765 5f69 643d 4e6f 6e65   message_id=None
-0000d2c0: 2c0a 2020 2020 696e 6c69 6e65 5f6d 6573  ,.    inline_mes
-0000d2d0: 7361 6765 5f69 643d 4e6f 6e65 2c0a 2020  sage_id=None,.  
-0000d2e0: 2020 7061 7273 655f 6d6f 6465 3d4e 6f6e    parse_mode=Non
-0000d2f0: 652c 0a20 2020 2065 6e74 6974 6965 733d  e,.    entities=
-0000d300: 4e6f 6e65 2c0a 2020 2020 7265 706c 795f  None,.    reply_
-0000d310: 6d61 726b 7570 3d4e 6f6e 652c 0a20 2020  markup=None,.   
-0000d320: 206c 696e 6b5f 7072 6576 6965 775f 6f70   link_preview_op
-0000d330: 7469 6f6e 733d 4e6f 6e65 2c0a 293a 0a20  tions=None,.):. 
-0000d340: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000d350: 7222 6564 6974 4d65 7373 6167 6554 6578  r"editMessageTex
-0000d360: 7422 0a20 2020 2070 6179 6c6f 6164 203d  t".    payload =
-0000d370: 207b 2274 6578 7422 3a20 7465 7874 7d0a   {"text": text}.
-0000d380: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
-0000d390: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000d3a0: 2263 6861 745f 6964 225d 203d 2063 6861  "chat_id"] = cha
-0000d3b0: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
-0000d3c0: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000d3d0: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-0000d3e0: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
-0000d3f0: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
-0000d400: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
-0000d410: 2020 2020 2070 6179 6c6f 6164 5b22 696e       payload["in
-0000d420: 6c69 6e65 5f6d 6573 7361 6765 5f69 6422  line_message_id"
-0000d430: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
-0000d440: 6765 5f69 640a 2020 2020 6966 2070 6172  ge_id.    if par
-0000d450: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
-0000d460: 2070 6179 6c6f 6164 5b22 7061 7273 655f   payload["parse_
-0000d470: 6d6f 6465 225d 203d 2070 6172 7365 5f6d  mode"] = parse_m
-0000d480: 6f64 650a 2020 2020 6966 2065 6e74 6974  ode.    if entit
-0000d490: 6965 733a 0a20 2020 2020 2020 2070 6179  ies:.        pay
-0000d4a0: 6c6f 6164 5b22 656e 7469 7469 6573 225d  load["entities"]
-0000d4b0: 203d 206a 736f 6e2e 6475 6d70 7328 7479   = json.dumps(ty
-0000d4c0: 7065 732e 4d65 7373 6167 6545 6e74 6974  pes.MessageEntit
-0000d4d0: 792e 746f 5f6c 6973 745f 6f66 5f64 6963  y.to_list_of_dic
-0000d4e0: 7473 2865 6e74 6974 6965 7329 290a 2020  ts(entities)).  
-0000d4f0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-0000d500: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-0000d510: 6164 5b22 7265 706c 795f 6d61 726b 7570  ad["reply_markup
-0000d520: 225d 203d 2061 7761 6974 205f 636f 6e76  "] = await _conv
-0000d530: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
-0000d540: 5f6d 6172 6b75 7029 0a20 2020 2069 6620  _markup).    if 
-0000d550: 6c69 6e6b 5f70 7265 7669 6577 5f6f 7074  link_preview_opt
-0000d560: 696f 6e73 2069 7320 6e6f 7420 4e6f 6e65  ions is not None
-0000d570: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000d580: 645b 226c 696e 6b5f 7072 6576 6965 775f  d["link_preview_
-0000d590: 6f70 7469 6f6e 7322 5d20 3d20 6c69 6e6b  options"] = link
-0000d5a0: 5f70 7265 7669 6577 5f6f 7074 696f 6e73  _preview_options
-0000d5b0: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2072  .to_json().    r
-0000d5c0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-0000d5d0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-0000d5e0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000d5f0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000d600: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
-0000d610: 0a61 7379 6e63 2064 6566 2065 6469 745f  .async def edit_
-0000d620: 6d65 7373 6167 655f 6361 7074 696f 6e28  message_caption(
-0000d630: 0a20 2020 2074 6f6b 656e 2c0a 2020 2020  .    token,.    
-0000d640: 6361 7074 696f 6e2c 0a20 2020 2063 6861  caption,.    cha
-0000d650: 745f 6964 3d4e 6f6e 652c 0a20 2020 206d  t_id=None,.    m
-0000d660: 6573 7361 6765 5f69 643d 4e6f 6e65 2c0a  essage_id=None,.
-0000d670: 2020 2020 696e 6c69 6e65 5f6d 6573 7361      inline_messa
-0000d680: 6765 5f69 643d 4e6f 6e65 2c0a 2020 2020  ge_id=None,.    
-0000d690: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
-0000d6a0: 0a20 2020 2063 6170 7469 6f6e 5f65 6e74  .    caption_ent
-0000d6b0: 6974 6965 733d 4e6f 6e65 2c0a 2020 2020  ities=None,.    
-0000d6c0: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
-0000d6d0: 652c 0a29 3a0a 2020 2020 6d65 7468 6f64  e,.):.    method
-0000d6e0: 5f75 726c 203d 2072 2265 6469 744d 6573  _url = r"editMes
-0000d6f0: 7361 6765 4361 7074 696f 6e22 0a20 2020  sageCaption".   
-0000d700: 2070 6179 6c6f 6164 203d 207b 2263 6170   payload = {"cap
-0000d710: 7469 6f6e 223a 2063 6170 7469 6f6e 7d0a  tion": caption}.
-0000d720: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
-0000d730: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000d740: 2263 6861 745f 6964 225d 203d 2063 6861  "chat_id"] = cha
-0000d750: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
-0000d760: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000d770: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-0000d780: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
-0000d790: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
-0000d7a0: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
-0000d7b0: 2020 2020 2070 6179 6c6f 6164 5b22 696e       payload["in
-0000d7c0: 6c69 6e65 5f6d 6573 7361 6765 5f69 6422  line_message_id"
-0000d7d0: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
-0000d7e0: 6765 5f69 640a 2020 2020 6966 2070 6172  ge_id.    if par
-0000d7f0: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
-0000d800: 2070 6179 6c6f 6164 5b22 7061 7273 655f   payload["parse_
-0000d810: 6d6f 6465 225d 203d 2070 6172 7365 5f6d  mode"] = parse_m
-0000d820: 6f64 650a 2020 2020 6966 2063 6170 7469  ode.    if capti
-0000d830: 6f6e 5f65 6e74 6974 6965 733a 0a20 2020  on_entities:.   
-0000d840: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
-0000d850: 7074 696f 6e5f 656e 7469 7469 6573 225d  ption_entities"]
-0000d860: 203d 206a 736f 6e2e 6475 6d70 7328 0a20   = json.dumps(. 
-0000d870: 2020 2020 2020 2020 2020 2074 7970 6573             types
-0000d880: 2e4d 6573 7361 6765 456e 7469 7479 2e74  .MessageEntity.t
-0000d890: 6f5f 6c69 7374 5f6f 665f 6469 6374 7328  o_list_of_dicts(
-0000d8a0: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-0000d8b0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-0000d8c0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-0000d8d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000d8e0: 5b22 7265 706c 795f 6d61 726b 7570 225d  ["reply_markup"]
-0000d8f0: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
-0000d900: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
-0000d910: 6172 6b75 7029 0a20 2020 2072 6574 7572  arkup).    retur
-0000d920: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-0000d930: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000d940: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000d950: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000d960: 6f64 3d22 706f 7374 2229 0a0a 0a61 7379  od="post")...asy
-0000d970: 6e63 2064 6566 2065 6469 745f 6d65 7373  nc def edit_mess
-0000d980: 6167 655f 6d65 6469 6128 0a20 2020 2074  age_media(.    t
-0000d990: 6f6b 656e 2c0a 2020 2020 6d65 6469 612c  oken,.    media,
-0000d9a0: 0a20 2020 2063 6861 745f 6964 3d4e 6f6e  .    chat_id=Non
-0000d9b0: 652c 0a20 2020 206d 6573 7361 6765 5f69  e,.    message_i
-0000d9c0: 643d 4e6f 6e65 2c0a 2020 2020 696e 6c69  d=None,.    inli
-0000d9d0: 6e65 5f6d 6573 7361 6765 5f69 643d 4e6f  ne_message_id=No
-0000d9e0: 6e65 2c0a 2020 2020 7265 706c 795f 6d61  ne,.    reply_ma
-0000d9f0: 726b 7570 3d4e 6f6e 652c 0a29 3a0a 2020  rkup=None,.):.  
-0000da00: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000da10: 2265 6469 744d 6573 7361 6765 4d65 6469  "editMessageMedi
-0000da20: 6122 0a20 2020 206d 6564 6961 5f6a 736f  a".    media_jso
-0000da30: 6e2c 2066 696c 6520 3d20 6177 6169 7420  n, file = await 
-0000da40: 636f 6e76 6572 745f 696e 7075 745f 6d65  convert_input_me
-0000da50: 6469 6128 6d65 6469 6129 0a20 2020 2070  dia(media).    p
-0000da60: 6179 6c6f 6164 203d 207b 226d 6564 6961  ayload = {"media
-0000da70: 223a 206d 6564 6961 5f6a 736f 6e7d 0a20  ": media_json}. 
-0000da80: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
-0000da90: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000daa0: 6368 6174 5f69 6422 5d20 3d20 6368 6174  chat_id"] = chat
-0000dab0: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
-0000dac0: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-0000dad0: 6179 6c6f 6164 5b22 6d65 7373 6167 655f  ayload["message_
-0000dae0: 6964 225d 203d 206d 6573 7361 6765 5f69  id"] = message_i
-0000daf0: 640a 2020 2020 6966 2069 6e6c 696e 655f  d.    if inline_
-0000db00: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
-0000db10: 2020 2020 7061 796c 6f61 645b 2269 6e6c      payload["inl
-0000db20: 696e 655f 6d65 7373 6167 655f 6964 225d  ine_message_id"]
-0000db30: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
-0000db40: 655f 6964 0a20 2020 2069 6620 7265 706c  e_id.    if repl
-0000db50: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-0000db60: 2020 7061 796c 6f61 645b 2272 6570 6c79    payload["reply
-0000db70: 5f6d 6172 6b75 7022 5d20 3d20 6177 6169  _markup"] = awai
-0000db80: 7420 5f63 6f6e 7665 7274 5f6d 6172 6b75  t _convert_marku
-0000db90: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-0000dba0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0000dbb0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-0000dbc0: 7428 0a20 2020 2020 2020 2074 6f6b 656e  t(.        token
-0000dbd0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000dbe0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
-0000dbf0: 6c65 733d 6669 6c65 2c20 6d65 7468 6f64  les=file, method
-0000dc00: 3d22 706f 7374 2220 6966 2066 696c 6520  ="post" if file 
-0000dc10: 656c 7365 2022 6765 7422 0a20 2020 2029  else "get".    )
-0000dc20: 0a0a 0a61 7379 6e63 2064 6566 2065 6469  ...async def edi
-0000dc30: 745f 6d65 7373 6167 655f 7265 706c 795f  t_message_reply_
-0000dc40: 6d61 726b 7570 280a 2020 2020 746f 6b65  markup(.    toke
-0000dc50: 6e2c 2063 6861 745f 6964 3d4e 6f6e 652c  n, chat_id=None,
-0000dc60: 206d 6573 7361 6765 5f69 643d 4e6f 6e65   message_id=None
-0000dc70: 2c20 696e 6c69 6e65 5f6d 6573 7361 6765  , inline_message
-0000dc80: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
-0000dc90: 6d61 726b 7570 3d4e 6f6e 650a 293a 0a20  markup=None.):. 
-0000dca0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000dcb0: 7222 6564 6974 4d65 7373 6167 6552 6570  r"editMessageRep
-0000dcc0: 6c79 4d61 726b 7570 220a 2020 2020 7061  lyMarkup".    pa
-0000dcd0: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-0000dce0: 6620 6368 6174 5f69 643a 0a20 2020 2020  f chat_id:.     
-0000dcf0: 2020 2070 6179 6c6f 6164 5b22 6368 6174     payload["chat
-0000dd00: 5f69 6422 5d20 3d20 6368 6174 5f69 640a  _id"] = chat_id.
-0000dd10: 2020 2020 6966 206d 6573 7361 6765 5f69      if message_i
-0000dd20: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000dd30: 6164 5b22 6d65 7373 6167 655f 6964 225d  ad["message_id"]
-0000dd40: 203d 206d 6573 7361 6765 5f69 640a 2020   = message_id.  
-0000dd50: 2020 6966 2069 6e6c 696e 655f 6d65 7373    if inline_mess
-0000dd60: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000dd70: 7061 796c 6f61 645b 2269 6e6c 696e 655f  payload["inline_
-0000dd80: 6d65 7373 6167 655f 6964 225d 203d 2069  message_id"] = i
-0000dd90: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-0000dda0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-0000ddb0: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-0000ddc0: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
-0000ddd0: 6b75 7022 5d20 3d20 6177 6169 7420 5f63  kup"] = await _c
-0000dde0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-0000ddf0: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-0000de00: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-0000de10: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-0000de20: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000de30: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000de40: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-0000de50: 0a0a 6173 796e 6320 6465 6620 6465 6c65  ..async def dele
-0000de60: 7465 5f6d 6573 7361 6765 2874 6f6b 656e  te_message(token
-0000de70: 2c20 6368 6174 5f69 642c 206d 6573 7361  , chat_id, messa
-0000de80: 6765 5f69 642c 2074 696d 656f 7574 3d4e  ge_id, timeout=N
-0000de90: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
-0000dea0: 5f75 726c 203d 2072 2264 656c 6574 654d  _url = r"deleteM
-0000deb0: 6573 7361 6765 220a 2020 2020 7061 796c  essage".    payl
-0000dec0: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
-0000ded0: 3a20 6368 6174 5f69 642c 2022 6d65 7373  : chat_id, "mess
-0000dee0: 6167 655f 6964 223a 206d 6573 7361 6765  age_id": message
-0000def0: 5f69 647d 0a20 2020 2069 6620 7469 6d65  _id}.    if time
-0000df00: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-0000df10: 6c6f 6164 5b22 7469 6d65 6f75 7422 5d20  load["timeout"] 
-0000df20: 3d20 7469 6d65 6f75 740a 2020 2020 7265  = timeout.    re
-0000df30: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000df40: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000df50: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000df60: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000df70: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
-0000df80: 2320 4761 6d65 0a0a 0a61 7379 6e63 2064  # Game...async d
-0000df90: 6566 2073 656e 645f 6761 6d65 280a 2020  ef send_game(.  
-0000dfa0: 2020 746f 6b65 6e2c 0a20 2020 2063 6861    token,.    cha
-0000dfb0: 745f 6964 2c0a 2020 2020 6761 6d65 5f73  t_id,.    game_s
-0000dfc0: 686f 7274 5f6e 616d 652c 0a20 2020 2064  hort_name,.    d
-0000dfd0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000dfe0: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 7265  ion=None,.    re
-0000dff0: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-0000e000: 0a20 2020 2074 696d 656f 7574 3d4e 6f6e  .    timeout=Non
-0000e010: 652c 0a20 2020 2070 726f 7465 6374 5f63  e,.    protect_c
-0000e020: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
-0000e030: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-0000e040: 6964 3d4e 6f6e 652c 0a20 2020 2072 6570  id=None,.    rep
-0000e050: 6c79 5f70 6172 616d 6574 6572 733d 4e6f  ly_parameters=No
-0000e060: 6e65 2c0a 2020 2020 6275 7369 6e65 7373  ne,.    business
-0000e070: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
-0000e080: 6f6e 652c 0a29 3a0a 2020 2020 6d65 7468  one,.):.    meth
-0000e090: 6f64 5f75 726c 203d 2072 2273 656e 6447  od_url = r"sendG
-0000e0a0: 616d 6522 0a20 2020 2070 6179 6c6f 6164  ame".    payload
-0000e0b0: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-0000e0c0: 6861 745f 6964 2c20 2267 616d 655f 7368  hat_id, "game_sh
-0000e0d0: 6f72 745f 6e61 6d65 223a 2067 616d 655f  ort_name": game_
-0000e0e0: 7368 6f72 745f 6e61 6d65 7d0a 2020 2020  short_name}.    
-0000e0f0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-0000e100: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-0000e110: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000e120: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
-0000e130: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
-0000e140: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000e150: 696f 6e0a 2020 2020 6966 2072 6570 6c79  ion.    if reply
-0000e160: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
-0000e170: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000e180: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
-0000e190: 7061 7261 6d65 7465 7273 225d 203d 206a  parameters"] = j
-0000e1a0: 736f 6e2e 6475 6d70 7328 7265 706c 795f  son.dumps(reply_
-0000e1b0: 7061 7261 6d65 7465 7273 2e74 6f5f 6469  parameters.to_di
-0000e1c0: 6374 2829 290a 2020 2020 6966 2072 6570  ct()).    if rep
-0000e1d0: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-0000e1e0: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
-0000e1f0: 795f 6d61 726b 7570 225d 203d 2061 7761  y_markup"] = awa
-0000e200: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
-0000e210: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-0000e220: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-0000e230: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000e240: 5b22 7469 6d65 6f75 7422 5d20 3d20 7469  ["timeout"] = ti
-0000e250: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
-0000e260: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-0000e270: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000e280: 2020 7061 796c 6f61 645b 2270 726f 7465    payload["prote
-0000e290: 6374 5f63 6f6e 7465 6e74 225d 203d 2070  ct_content"] = p
-0000e2a0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-0000e2b0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-0000e2c0: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
-0000e2d0: 2070 6179 6c6f 6164 5b22 6d65 7373 6167   payload["messag
-0000e2e0: 655f 7468 7265 6164 5f69 6422 5d20 3d20  e_thread_id"] = 
-0000e2f0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-0000e300: 640a 2020 2020 6966 2062 7573 696e 6573  d.    if busines
-0000e310: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
-0000e320: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000e330: 5b22 6275 7369 6e65 7373 5f63 6f6e 6e65  ["business_conne
-0000e340: 6374 696f 6e5f 6964 225d 203d 2062 7573  ction_id"] = bus
-0000e350: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-0000e360: 5f69 640a 2020 2020 7265 7475 726e 2061  _id.    return a
-0000e370: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000e380: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000e390: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000e3a0: 7061 796c 6f61 6429 0a0a 0a23 2068 7474  payload)...# htt
-0000e3b0: 7073 3a2f 2f63 6f72 652e 7465 6c65 6772  ps://core.telegr
-0000e3c0: 616d 2e6f 7267 2f62 6f74 732f 6170 6923  am.org/bots/api#
-0000e3d0: 7365 7467 616d 6573 636f 7265 0a61 7379  setgamescore.asy
-0000e3e0: 6e63 2064 6566 2073 6574 5f67 616d 655f  nc def set_game_
-0000e3f0: 7363 6f72 6528 0a20 2020 2074 6f6b 656e  score(.    token
-0000e400: 2c0a 2020 2020 7573 6572 5f69 642c 0a20  ,.    user_id,. 
-0000e410: 2020 2073 636f 7265 2c0a 2020 2020 666f     score,.    fo
-0000e420: 7263 653d 4e6f 6e65 2c0a 2020 2020 6469  rce=None,.    di
-0000e430: 7361 626c 655f 6564 6974 5f6d 6573 7361  sable_edit_messa
-0000e440: 6765 3d4e 6f6e 652c 0a20 2020 2063 6861  ge=None,.    cha
-0000e450: 745f 6964 3d4e 6f6e 652c 0a20 2020 206d  t_id=None,.    m
-0000e460: 6573 7361 6765 5f69 643d 4e6f 6e65 2c0a  essage_id=None,.
-0000e470: 2020 2020 696e 6c69 6e65 5f6d 6573 7361      inline_messa
-0000e480: 6765 5f69 643d 4e6f 6e65 2c0a 293a 0a20  ge_id=None,.):. 
-0000e490: 2020 2022 2222 0a20 2020 2055 7365 2074     """.    Use t
-0000e4a0: 6869 7320 6d65 7468 6f64 2074 6f20 7365  his method to se
-0000e4b0: 7420 7468 6520 7363 6f72 6520 6f66 2074  t the score of t
-0000e4c0: 6865 2073 7065 6369 6669 6564 2075 7365  he specified use
-0000e4d0: 7220 696e 2061 2067 616d 652e 204f 6e20  r in a game. On 
-0000e4e0: 7375 6363 6573 732c 2069 6620 7468 6520  success, if the 
-0000e4f0: 6d65 7373 6167 6520 7761 7320 7365 6e74  message was sent
-0000e500: 2062 7920 7468 6520 626f 742c 2072 6574   by the bot, ret
-0000e510: 7572 6e73 2074 6865 2065 6469 7465 6420  urns the edited 
-0000e520: 4d65 7373 6167 652c 206f 7468 6572 7769  Message, otherwi
-0000e530: 7365 2072 6574 7572 6e73 2054 7275 652e  se returns True.
-0000e540: 2052 6574 7572 6e73 2061 6e20 6572 726f   Returns an erro
-0000e550: 722c 2069 6620 7468 6520 6e65 7720 7363  r, if the new sc
-0000e560: 6f72 6520 6973 206e 6f74 2067 7265 6174  ore is not great
-0000e570: 6572 2074 6861 6e20 7468 6520 7573 6572  er than the user
-0000e580: 2773 2063 7572 7265 6e74 2073 636f 7265  's current score
-0000e590: 2069 6e20 7468 6520 6368 6174 2e0a 2020   in the chat..  
-0000e5a0: 2020 3a70 6172 616d 2074 6f6b 656e 3a20    :param token: 
-0000e5b0: 426f 7427 7320 746f 6b65 6e20 2879 6f75  Bot's token (you
-0000e5c0: 2064 6f6e 2774 206e 6565 6420 746f 2066   don't need to f
-0000e5d0: 696c 6c20 7468 6973 290a 2020 2020 3a70  ill this).    :p
-0000e5e0: 6172 616d 2075 7365 725f 6964 3a20 5573  aram user_id: Us
-0000e5f0: 6572 2069 6465 6e74 6966 6965 720a 2020  er identifier.  
-0000e600: 2020 3a70 6172 616d 2073 636f 7265 3a20    :param score: 
-0000e610: 4e65 7720 7363 6f72 652c 206d 7573 7420  New score, must 
-0000e620: 6265 206e 6f6e 2d6e 6567 6174 6976 650a  be non-negative.
-0000e630: 2020 2020 3a70 6172 616d 2066 6f72 6365      :param force
-0000e640: 3a20 284f 7074 696f 6e61 6c29 2050 6173  : (Optional) Pas
-0000e650: 7320 5472 7565 2c20 6966 2074 6865 2068  s True, if the h
-0000e660: 6967 6820 7363 6f72 6520 6973 2061 6c6c  igh score is all
-0000e670: 6f77 6564 2074 6f20 6465 6372 6561 7365  owed to decrease
-0000e680: 2e20 5468 6973 2063 616e 2062 6520 7573  . This can be us
-0000e690: 6566 756c 2077 6865 6e20 6669 7869 6e67  eful when fixing
-0000e6a0: 206d 6973 7461 6b65 7320 6f72 2062 616e   mistakes or ban
-0000e6b0: 6e69 6e67 2063 6865 6174 6572 730a 2020  ning cheaters.  
-0000e6c0: 2020 3a70 6172 616d 2064 6973 6162 6c65    :param disable
-0000e6d0: 5f65 6469 745f 6d65 7373 6167 653a 2028  _edit_message: (
-0000e6e0: 4f70 7469 6f6e 616c 2920 5061 7373 2054  Optional) Pass T
-0000e6f0: 7275 652c 2069 6620 7468 6520 6761 6d65  rue, if the game
-0000e700: 206d 6573 7361 6765 2073 686f 756c 6420   message should 
-0000e710: 6e6f 7420 6265 2061 7574 6f6d 6174 6963  not be automatic
-0000e720: 616c 6c79 2065 6469 7465 6420 746f 2069  ally edited to i
-0000e730: 6e63 6c75 6465 2074 6865 2063 7572 7265  nclude the curre
-0000e740: 6e74 2073 636f 7265 626f 6172 640a 2020  nt scoreboard.  
-0000e750: 2020 3a70 6172 616d 2063 6861 745f 6964    :param chat_id
-0000e760: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
-0000e770: 7569 7265 6420 6966 2069 6e6c 696e 655f  uired if inline_
-0000e780: 6d65 7373 6167 655f 6964 2069 7320 6e6f  message_id is no
-0000e790: 7420 7370 6563 6966 6965 6429 2055 6e69  t specified) Uni
-0000e7a0: 7175 6520 6964 656e 7469 6669 6572 2066  que identifier f
-0000e7b0: 6f72 2074 6865 2074 6172 6765 7420 6368  or the target ch
-0000e7c0: 6174 2028 6f72 2075 7365 726e 616d 6520  at (or username 
-0000e7d0: 6f66 2074 6865 2074 6172 6765 7420 6368  of the target ch
-0000e7e0: 616e 6e65 6c20 696e 2074 6865 2066 6f72  annel in the for
-0000e7f0: 6d61 7420 4063 6861 6e6e 656c 7573 6572  mat @channeluser
-0000e800: 6e61 6d65 290a 2020 2020 3a70 6172 616d  name).    :param
-0000e810: 206d 6573 7361 6765 5f69 643a 2028 4f70   message_id: (Op
-0000e820: 7469 6f6e 616c 2c20 7265 7175 6972 6564  tional, required
-0000e830: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
-0000e840: 6765 5f69 6420 6973 206e 6f74 2073 7065  ge_id is not spe
-0000e850: 6369 6669 6564 2920 556e 6971 7565 2069  cified) Unique i
-0000e860: 6465 6e74 6966 6965 7220 6f66 2074 6865  dentifier of the
-0000e870: 2073 656e 7420 6d65 7373 6167 650a 2020   sent message.  
-0000e880: 2020 3a70 6172 616d 2069 6e6c 696e 655f    :param inline_
-0000e890: 6d65 7373 6167 655f 6964 3a20 284f 7074  message_id: (Opt
-0000e8a0: 696f 6e61 6c2c 2072 6571 7569 7265 6420  ional, required 
-0000e8b0: 6966 2063 6861 745f 6964 2061 6e64 206d  if chat_id and m
-0000e8c0: 6573 7361 6765 5f69 6420 6172 6520 6e6f  essage_id are no
-0000e8d0: 7420 7370 6563 6966 6965 6429 2049 6465  t specified) Ide
-0000e8e0: 6e74 6966 6965 7220 6f66 2074 6865 2069  ntifier of the i
-0000e8f0: 6e6c 696e 6520 6d65 7373 6167 650a 2020  nline message.  
-0000e900: 2020 3a72 6574 7572 6e3a 0a20 2020 2022    :return:.    "
-0000e910: 2222 0a20 2020 206d 6574 686f 645f 7572  "".    method_ur
-0000e920: 6c20 3d20 7222 7365 7447 616d 6553 636f  l = r"setGameSco
-0000e930: 7265 220a 2020 2020 7061 796c 6f61 6420  re".    payload 
-0000e940: 3d20 7b22 7573 6572 5f69 6422 3a20 7573  = {"user_id": us
-0000e950: 6572 5f69 642c 2022 7363 6f72 6522 3a20  er_id, "score": 
-0000e960: 7363 6f72 657d 0a20 2020 2069 6620 666f  score}.    if fo
-0000e970: 7263 6520 6973 206e 6f74 204e 6f6e 653a  rce is not None:
-0000e980: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000e990: 5b22 666f 7263 6522 5d20 3d20 666f 7263  ["force"] = forc
-0000e9a0: 650a 2020 2020 6966 2063 6861 745f 6964  e.    if chat_id
-0000e9b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000e9c0: 645b 2263 6861 745f 6964 225d 203d 2063  d["chat_id"] = c
-0000e9d0: 6861 745f 6964 0a20 2020 2069 6620 6d65  hat_id.    if me
-0000e9e0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000e9f0: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
-0000ea00: 6765 5f69 6422 5d20 3d20 6d65 7373 6167  ge_id"] = messag
-0000ea10: 655f 6964 0a20 2020 2069 6620 696e 6c69  e_id.    if inli
-0000ea20: 6e65 5f6d 6573 7361 6765 5f69 643a 0a20  ne_message_id:. 
-0000ea30: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-0000ea40: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000ea50: 6422 5d20 3d20 696e 6c69 6e65 5f6d 6573  d"] = inline_mes
-0000ea60: 7361 6765 5f69 640a 2020 2020 6966 2064  sage_id.    if d
-0000ea70: 6973 6162 6c65 5f65 6469 745f 6d65 7373  isable_edit_mess
-0000ea80: 6167 6520 6973 206e 6f74 204e 6f6e 653a  age is not None:
-0000ea90: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000eaa0: 5b22 6469 7361 626c 655f 6564 6974 5f6d  ["disable_edit_m
-0000eab0: 6573 7361 6765 225d 203d 2064 6973 6162  essage"] = disab
-0000eac0: 6c65 5f65 6469 745f 6d65 7373 6167 650a  le_edit_message.
-0000ead0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0000eae0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-0000eaf0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000eb00: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000eb10: 6f61 6429 0a0a 0a23 2068 7474 7073 3a2f  oad)...# https:/
-0000eb20: 2f63 6f72 652e 7465 6c65 6772 616d 2e6f  /core.telegram.o
-0000eb30: 7267 2f62 6f74 732f 6170 6923 6765 7467  rg/bots/api#getg
-0000eb40: 616d 6568 6967 6873 636f 7265 730a 6173  amehighscores.as
-0000eb50: 796e 6320 6465 6620 6765 745f 6761 6d65  ync def get_game
-0000eb60: 5f68 6967 685f 7363 6f72 6573 280a 2020  _high_scores(.  
-0000eb70: 2020 746f 6b65 6e2c 2075 7365 725f 6964    token, user_id
-0000eb80: 2c20 6368 6174 5f69 643d 4e6f 6e65 2c20  , chat_id=None, 
-0000eb90: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
-0000eba0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-0000ebb0: 6964 3d4e 6f6e 650a 293a 0a20 2020 2022  id=None.):.    "
-0000ebc0: 2222 0a20 2020 2055 7365 2074 6869 7320  "".    Use this 
-0000ebd0: 6d65 7468 6f64 2074 6f20 6765 7420 6461  method to get da
-0000ebe0: 7461 2066 6f72 2068 6967 6820 7363 6f72  ta for high scor
-0000ebf0: 6520 7461 626c 6573 2e20 5769 6c6c 2072  e tables. Will r
-0000ec00: 6574 7572 6e20 7468 6520 7363 6f72 6520  eturn the score 
-0000ec10: 6f66 2074 6865 2073 7065 6369 6669 6564  of the specified
-0000ec20: 2075 7365 7220 616e 6420 7365 7665 7261   user and severa
-0000ec30: 6c20 6f66 2068 6973 206e 6569 6768 626f  l of his neighbo
-0000ec40: 7273 2069 6e20 6120 6761 6d65 2e20 4f6e  rs in a game. On
-0000ec50: 2073 7563 6365 7373 2c20 7265 7475 726e   success, return
-0000ec60: 7320 616e 2041 7272 6179 206f 6620 4761  s an Array of Ga
-0000ec70: 6d65 4869 6768 5363 6f72 6520 6f62 6a65  meHighScore obje
-0000ec80: 6374 732e 0a20 2020 2054 6869 7320 6d65  cts..    This me
-0000ec90: 7468 6f64 2077 696c 6c20 6375 7272 656e  thod will curren
-0000eca0: 746c 7920 7265 7475 726e 2073 636f 7265  tly return score
-0000ecb0: 7320 666f 7220 7468 6520 7461 7267 6574  s for the target
-0000ecc0: 2075 7365 722c 2070 6c75 7320 7477 6f20   user, plus two 
-0000ecd0: 6f66 2068 6973 2063 6c6f 7365 7374 206e  of his closest n
-0000ece0: 6569 6768 626f 7273 206f 6e20 6561 6368  eighbors on each
-0000ecf0: 2073 6964 652e 2057 696c 6c20 616c 736f   side. Will also
-0000ed00: 2072 6574 7572 6e20 7468 6520 746f 7020   return the top 
-0000ed10: 7468 7265 6520 7573 6572 7320 6966 2074  three users if t
-0000ed20: 6865 2075 7365 7220 616e 6420 6869 7320  he user and his 
-0000ed30: 6e65 6967 6862 6f72 7320 6172 6520 6e6f  neighbors are no
-0000ed40: 7420 616d 6f6e 6720 7468 656d 2e20 506c  t among them. Pl
-0000ed50: 6561 7365 206e 6f74 6520 7468 6174 2074  ease note that t
-0000ed60: 6869 7320 6265 6861 7669 6f72 2069 7320  his behavior is 
-0000ed70: 7375 626a 6563 7420 746f 2063 6861 6e67  subject to chang
-0000ed80: 652e 0a20 2020 203a 7061 7261 6d20 746f  e..    :param to
-0000ed90: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
-0000eda0: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
-0000edb0: 2074 6f20 6669 6c6c 2074 6869 7329 0a20   to fill this). 
-0000edc0: 2020 203a 7061 7261 6d20 7573 6572 5f69     :param user_i
-0000edd0: 643a 2054 6172 6765 7420 7573 6572 2069  d: Target user i
-0000ede0: 640a 2020 2020 3a70 6172 616d 2063 6861  d.    :param cha
-0000edf0: 745f 6964 3a20 284f 7074 696f 6e61 6c2c  t_id: (Optional,
-0000ee00: 2072 6571 7569 7265 6420 6966 2069 6e6c   required if inl
-0000ee10: 696e 655f 6d65 7373 6167 655f 6964 2069  ine_message_id i
-0000ee20: 7320 6e6f 7420 7370 6563 6966 6965 6429  s not specified)
-0000ee30: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
-0000ee40: 6572 2066 6f72 2074 6865 2074 6172 6765  er for the targe
-0000ee50: 7420 6368 6174 2028 6f72 2075 7365 726e  t chat (or usern
-0000ee60: 616d 6520 6f66 2074 6865 2074 6172 6765  ame of the targe
-0000ee70: 7420 6368 616e 6e65 6c20 696e 2074 6865  t channel in the
-0000ee80: 2066 6f72 6d61 7420 4063 6861 6e6e 656c   format @channel
-0000ee90: 7573 6572 6e61 6d65 290a 2020 2020 3a70  username).    :p
-0000eea0: 6172 616d 206d 6573 7361 6765 5f69 643a  aram message_id:
-0000eeb0: 2028 4f70 7469 6f6e 616c 2c20 7265 7175   (Optional, requ
-0000eec0: 6972 6564 2069 6620 696e 6c69 6e65 5f6d  ired if inline_m
-0000eed0: 6573 7361 6765 5f69 6420 6973 206e 6f74  essage_id is not
-0000eee0: 2073 7065 6369 6669 6564 2920 556e 6971   specified) Uniq
-0000eef0: 7565 2069 6465 6e74 6966 6965 7220 6f66  ue identifier of
-0000ef00: 2074 6865 2073 656e 7420 6d65 7373 6167   the sent messag
-0000ef10: 650a 2020 2020 3a70 6172 616d 2069 6e6c  e.    :param inl
-0000ef20: 696e 655f 6d65 7373 6167 655f 6964 3a20  ine_message_id: 
-0000ef30: 284f 7074 696f 6e61 6c2c 2072 6571 7569  (Optional, requi
-0000ef40: 7265 6420 6966 2063 6861 745f 6964 2061  red if chat_id a
-0000ef50: 6e64 206d 6573 7361 6765 5f69 6420 6172  nd message_id ar
-0000ef60: 6520 6e6f 7420 7370 6563 6966 6965 6429  e not specified)
-0000ef70: 2049 6465 6e74 6966 6965 7220 6f66 2074   Identifier of t
-0000ef80: 6865 2069 6e6c 696e 6520 6d65 7373 6167  he inline messag
-0000ef90: 650a 2020 2020 3a72 6574 7572 6e3a 0a20  e.    :return:. 
-0000efa0: 2020 2022 2222 0a20 2020 206d 6574 686f     """.    metho
-0000efb0: 645f 7572 6c20 3d20 7222 6765 7447 616d  d_url = r"getGam
-0000efc0: 6548 6967 6853 636f 7265 7322 0a20 2020  eHighScores".   
-0000efd0: 2070 6179 6c6f 6164 203d 207b 2275 7365   payload = {"use
-0000efe0: 725f 6964 223a 2075 7365 725f 6964 7d0a  r_id": user_id}.
-0000eff0: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
-0000f000: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000f010: 2263 6861 745f 6964 225d 203d 2063 6861  "chat_id"] = cha
-0000f020: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
-0000f030: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000f040: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-0000f050: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
-0000f060: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
-0000f070: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
-0000f080: 2020 2020 2070 6179 6c6f 6164 5b22 696e       payload["in
-0000f090: 6c69 6e65 5f6d 6573 7361 6765 5f69 6422  line_message_id"
-0000f0a0: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
-0000f0b0: 6765 5f69 640a 2020 2020 7265 7475 726e  ge_id.    return
-0000f0c0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-0000f0d0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000f0e0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000f0f0: 733d 7061 796c 6f61 6429 0a0a 0a23 2050  s=payload)...# P
-0000f100: 6179 6d65 6e74 7320 2868 7474 7073 3a2f  ayments (https:/
-0000f110: 2f63 6f72 652e 7465 6c65 6772 616d 2e6f  /core.telegram.o
-0000f120: 7267 2f62 6f74 732f 6170 6923 7061 796d  rg/bots/api#paym
-0000f130: 656e 7473 290a 0a0a 6173 796e 6320 6465  ents)...async de
-0000f140: 6620 7365 6e64 5f69 6e76 6f69 6365 280a  f send_invoice(.
-0000f150: 2020 2020 746f 6b65 6e2c 0a20 2020 2063      token,.    c
-0000f160: 6861 745f 6964 2c0a 2020 2020 7469 746c  hat_id,.    titl
-0000f170: 652c 0a20 2020 2064 6573 6372 6970 7469  e,.    descripti
-0000f180: 6f6e 2c0a 2020 2020 696e 766f 6963 655f  on,.    invoice_
-0000f190: 7061 796c 6f61 642c 0a20 2020 2070 726f  payload,.    pro
-0000f1a0: 7669 6465 725f 746f 6b65 6e2c 0a20 2020  vider_token,.   
-0000f1b0: 2063 7572 7265 6e63 792c 0a20 2020 2070   currency,.    p
-0000f1c0: 7269 6365 732c 0a20 2020 2073 7461 7274  rices,.    start
-0000f1d0: 5f70 6172 616d 6574 6572 3d4e 6f6e 652c  _parameter=None,
-0000f1e0: 0a20 2020 2070 686f 746f 5f75 726c 3d4e  .    photo_url=N
-0000f1f0: 6f6e 652c 0a20 2020 2070 686f 746f 5f73  one,.    photo_s
-0000f200: 697a 653d 4e6f 6e65 2c0a 2020 2020 7068  ize=None,.    ph
-0000f210: 6f74 6f5f 7769 6474 683d 4e6f 6e65 2c0a  oto_width=None,.
-0000f220: 2020 2020 7068 6f74 6f5f 6865 6967 6874      photo_height
-0000f230: 3d4e 6f6e 652c 0a20 2020 206e 6565 645f  =None,.    need_
-0000f240: 6e61 6d65 3d4e 6f6e 652c 0a20 2020 206e  name=None,.    n
-0000f250: 6565 645f 7068 6f6e 655f 6e75 6d62 6572  eed_phone_number
-0000f260: 3d4e 6f6e 652c 0a20 2020 206e 6565 645f  =None,.    need_
-0000f270: 656d 6169 6c3d 4e6f 6e65 2c0a 2020 2020  email=None,.    
-0000f280: 6e65 6564 5f73 6869 7070 696e 675f 6164  need_shipping_ad
-0000f290: 6472 6573 733d 4e6f 6e65 2c0a 2020 2020  dress=None,.    
-0000f2a0: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
-0000f2b0: 725f 746f 5f70 726f 7669 6465 723d 4e6f  r_to_provider=No
-0000f2c0: 6e65 2c0a 2020 2020 7365 6e64 5f65 6d61  ne,.    send_ema
-0000f2d0: 696c 5f74 6f5f 7072 6f76 6964 6572 3d4e  il_to_provider=N
-0000f2e0: 6f6e 652c 0a20 2020 2069 735f 666c 6578  one,.    is_flex
-0000f2f0: 6962 6c65 3d4e 6f6e 652c 0a20 2020 2064  ible=None,.    d
-0000f300: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000f310: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 7265  ion=None,.    re
-0000f320: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-0000f330: 0a20 2020 2070 726f 7669 6465 725f 6461  .    provider_da
-0000f340: 7461 3d4e 6f6e 652c 0a20 2020 2074 696d  ta=None,.    tim
-0000f350: 656f 7574 3d4e 6f6e 652c 0a20 2020 206d  eout=None,.    m
-0000f360: 6178 5f74 6970 5f61 6d6f 756e 743d 4e6f  ax_tip_amount=No
-0000f370: 6e65 2c0a 2020 2020 7375 6767 6573 7465  ne,.    suggeste
-0000f380: 645f 7469 705f 616d 6f75 6e74 733d 4e6f  d_tip_amounts=No
-0000f390: 6e65 2c0a 2020 2020 7072 6f74 6563 745f  ne,.    protect_
-0000f3a0: 636f 6e74 656e 743d 4e6f 6e65 2c0a 2020  content=None,.  
-0000f3b0: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
-0000f3c0: 5f69 643d 4e6f 6e65 2c0a 2020 2020 7265  _id=None,.    re
-0000f3d0: 706c 795f 7061 7261 6d65 7465 7273 3d4e  ply_parameters=N
-0000f3e0: 6f6e 652c 0a29 3a0a 2020 2020 2222 220a  one,.):.    """.
-0000f3f0: 2020 2020 5573 6520 7468 6973 206d 6574      Use this met
-0000f400: 686f 6420 746f 2073 656e 6420 696e 766f  hod to send invo
-0000f410: 6963 6573 2e20 4f6e 2073 7563 6365 7373  ices. On success
-0000f420: 2c20 7468 6520 7365 6e74 204d 6573 7361  , the sent Messa
-0000f430: 6765 2069 7320 7265 7475 726e 6564 2e0a  ge is returned..
-0000f440: 2020 2020 3a70 6172 616d 2074 6f6b 656e      :param token
-0000f450: 3a20 426f 7427 7320 746f 6b65 6e20 2879  : Bot's token (y
-0000f460: 6f75 2064 6f6e 2774 206e 6565 6420 746f  ou don't need to
-0000f470: 2066 696c 6c20 7468 6973 290a 2020 2020   fill this).    
-0000f480: 3a70 6172 616d 2063 6861 745f 6964 3a20  :param chat_id: 
-0000f490: 556e 6971 7565 2069 6465 6e74 6966 6965  Unique identifie
-0000f4a0: 7220 666f 7220 7468 6520 7461 7267 6574  r for the target
-0000f4b0: 2070 7269 7661 7465 2063 6861 740a 2020   private chat.  
-0000f4c0: 2020 3a70 6172 616d 2074 6974 6c65 3a20    :param title: 
-0000f4d0: 5072 6f64 7563 7420 6e61 6d65 0a20 2020  Product name.   
-0000f4e0: 203a 7061 7261 6d20 6465 7363 7269 7074   :param descript
-0000f4f0: 696f 6e3a 2050 726f 6475 6374 2064 6573  ion: Product des
-0000f500: 6372 6970 7469 6f6e 0a20 2020 203a 7061  cription.    :pa
-0000f510: 7261 6d20 696e 766f 6963 655f 7061 796c  ram invoice_payl
-0000f520: 6f61 643a 2042 6f74 2d64 6566 696e 6564  oad: Bot-defined
-0000f530: 2069 6e76 6f69 6365 2070 6179 6c6f 6164   invoice payload
-0000f540: 2c20 312d 3132 3820 6279 7465 732e 2054  , 1-128 bytes. T
-0000f550: 6869 7320 7769 6c6c 206e 6f74 2062 6520  his will not be 
-0000f560: 6469 7370 6c61 7965 6420 746f 2074 6865  displayed to the
-0000f570: 2075 7365 722c 2075 7365 2066 6f72 2079   user, use for y
-0000f580: 6f75 7220 696e 7465 726e 616c 2070 726f  our internal pro
-0000f590: 6365 7373 6573 2e0a 2020 2020 3a70 6172  cesses..    :par
-0000f5a0: 616d 2070 726f 7669 6465 725f 746f 6b65  am provider_toke
-0000f5b0: 6e3a 2050 6179 6d65 6e74 7320 7072 6f76  n: Payments prov
-0000f5c0: 6964 6572 2074 6f6b 656e 2c20 6f62 7461  ider token, obta
-0000f5d0: 696e 6564 2076 6961 2040 426f 7466 6174  ined via @Botfat
-0000f5e0: 6865 720a 2020 2020 3a70 6172 616d 2063  her.    :param c
-0000f5f0: 7572 7265 6e63 793a 2054 6872 6565 2d6c  urrency: Three-l
-0000f600: 6574 7465 7220 4953 4f20 3432 3137 2063  etter ISO 4217 c
-0000f610: 7572 7265 6e63 7920 636f 6465 2c20 7365  urrency code, se
-0000f620: 6520 6874 7470 733a 2f2f 636f 7265 2e74  e https://core.t
-0000f630: 656c 6567 7261 6d2e 6f72 672f 626f 7473  elegram.org/bots
-0000f640: 2f70 6179 6d65 6e74 7323 7375 7070 6f72  /payments#suppor
-0000f650: 7465 642d 6375 7272 656e 6369 6573 0a20  ted-currencies. 
-0000f660: 2020 203a 7061 7261 6d20 7072 6963 6573     :param prices
-0000f670: 3a20 5072 6963 6520 6272 6561 6b64 6f77  : Price breakdow
-0000f680: 6e2c 2061 206c 6973 7420 6f66 2063 6f6d  n, a list of com
-0000f690: 706f 6e65 6e74 7320 2865 2e67 2e20 7072  ponents (e.g. pr
-0000f6a0: 6f64 7563 7420 7072 6963 652c 2074 6178  oduct price, tax
-0000f6b0: 2c20 6469 7363 6f75 6e74 2c20 6465 6c69  , discount, deli
-0000f6c0: 7665 7279 2063 6f73 742c 2064 656c 6976  very cost, deliv
-0000f6d0: 6572 7920 7461 782c 2062 6f6e 7573 2c20  ery tax, bonus, 
-0000f6e0: 6574 632e 290a 2020 2020 3a70 6172 616d  etc.).    :param
-0000f6f0: 2073 7461 7274 5f70 6172 616d 6574 6572   start_parameter
-0000f700: 3a20 556e 6971 7565 2064 6565 702d 6c69  : Unique deep-li
-0000f710: 6e6b 696e 6720 7061 7261 6d65 7465 7220  nking parameter 
-0000f720: 7468 6174 2063 616e 2062 6520 7573 6564  that can be used
-0000f730: 2074 6f20 6765 6e65 7261 7465 2074 6869   to generate thi
-0000f740: 7320 696e 766f 6963 6520 7768 656e 2075  s invoice when u
-0000f750: 7365 6420 6173 2061 2073 7461 7274 2070  sed as a start p
-0000f760: 6172 616d 6574 6572 0a20 2020 203a 7061  arameter.    :pa
-0000f770: 7261 6d20 7068 6f74 6f5f 7572 6c3a 2055  ram photo_url: U
-0000f780: 524c 206f 6620 7468 6520 7072 6f64 7563  RL of the produc
-0000f790: 7420 7068 6f74 6f20 666f 7220 7468 6520  t photo for the 
-0000f7a0: 696e 766f 6963 652e 2043 616e 2062 6520  invoice. Can be 
-0000f7b0: 6120 7068 6f74 6f20 6f66 2074 6865 2067  a photo of the g
-0000f7c0: 6f6f 6473 206f 7220 6120 6d61 726b 6574  oods or a market
-0000f7d0: 696e 6720 696d 6167 6520 666f 7220 6120  ing image for a 
-0000f7e0: 7365 7276 6963 652e 2050 656f 706c 6520  service. People 
-0000f7f0: 6c69 6b65 2069 7420 6265 7474 6572 2077  like it better w
-0000f800: 6865 6e20 7468 6579 2073 6565 2077 6861  hen they see wha
-0000f810: 7420 7468 6579 2061 7265 2070 6179 696e  t they are payin
-0000f820: 6720 666f 722e 0a20 2020 203a 7061 7261  g for..    :para
-0000f830: 6d20 7068 6f74 6f5f 7369 7a65 3a20 5068  m photo_size: Ph
-0000f840: 6f74 6f20 7369 7a65 0a20 2020 203a 7061  oto size.    :pa
-0000f850: 7261 6d20 7068 6f74 6f5f 7769 6474 683a  ram photo_width:
-0000f860: 2050 686f 746f 2077 6964 7468 0a20 2020   Photo width.   
-0000f870: 203a 7061 7261 6d20 7068 6f74 6f5f 6865   :param photo_he
-0000f880: 6967 6874 3a20 5068 6f74 6f20 6865 6967  ight: Photo heig
-0000f890: 6874 0a20 2020 203a 7061 7261 6d20 6e65  ht.    :param ne
-0000f8a0: 6564 5f6e 616d 653a 2050 6173 7320 5472  ed_name: Pass Tr
-0000f8b0: 7565 2c20 6966 2079 6f75 2072 6571 7569  ue, if you requi
-0000f8c0: 7265 2074 6865 2075 7365 7227 7320 6675  re the user's fu
-0000f8d0: 6c6c 206e 616d 6520 746f 2063 6f6d 706c  ll name to compl
-0000f8e0: 6574 6520 7468 6520 6f72 6465 720a 2020  ete the order.  
-0000f8f0: 2020 3a70 6172 616d 206e 6565 645f 7068    :param need_ph
-0000f900: 6f6e 655f 6e75 6d62 6572 3a20 5061 7373  one_number: Pass
-0000f910: 2054 7275 652c 2069 6620 796f 7520 7265   True, if you re
-0000f920: 7175 6972 6520 7468 6520 7573 6572 2773  quire the user's
-0000f930: 2070 686f 6e65 206e 756d 6265 7220 746f   phone number to
-0000f940: 2063 6f6d 706c 6574 6520 7468 6520 6f72   complete the or
-0000f950: 6465 720a 2020 2020 3a70 6172 616d 206e  der.    :param n
-0000f960: 6565 645f 656d 6169 6c3a 2050 6173 7320  eed_email: Pass 
-0000f970: 5472 7565 2c20 6966 2079 6f75 2072 6571  True, if you req
-0000f980: 7569 7265 2074 6865 2075 7365 7227 7320  uire the user's 
-0000f990: 656d 6169 6c20 746f 2063 6f6d 706c 6574  email to complet
-0000f9a0: 6520 7468 6520 6f72 6465 720a 2020 2020  e the order.    
-0000f9b0: 3a70 6172 616d 206e 6565 645f 7368 6970  :param need_ship
-0000f9c0: 7069 6e67 5f61 6464 7265 7373 3a20 5061  ping_address: Pa
-0000f9d0: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
-0000f9e0: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
-0000f9f0: 2773 2073 6869 7070 696e 6720 6164 6472  's shipping addr
-0000fa00: 6573 7320 746f 2063 6f6d 706c 6574 6520  ess to complete 
-0000fa10: 7468 6520 6f72 6465 720a 2020 2020 3a70  the order.    :p
-0000fa20: 6172 616d 2069 735f 666c 6578 6962 6c65  aram is_flexible
-0000fa30: 3a20 5061 7373 2054 7275 652c 2069 6620  : Pass True, if 
-0000fa40: 7468 6520 6669 6e61 6c20 7072 6963 6520  the final price 
-0000fa50: 6465 7065 6e64 7320 6f6e 2074 6865 2073  depends on the s
-0000fa60: 6869 7070 696e 6720 6d65 7468 6f64 0a20  hipping method. 
-0000fa70: 2020 203a 7061 7261 6d20 7365 6e64 5f70     :param send_p
-0000fa80: 686f 6e65 5f6e 756d 6265 725f 746f 5f70  hone_number_to_p
-0000fa90: 726f 7669 6465 723a 2050 6173 7320 5472  rovider: Pass Tr
-0000faa0: 7565 2c20 6966 2075 7365 7227 7320 7068  ue, if user's ph
-0000fab0: 6f6e 6520 6e75 6d62 6572 2073 686f 756c  one number shoul
-0000fac0: 6420 6265 2073 656e 7420 746f 2070 726f  d be sent to pro
-0000fad0: 7669 6465 720a 2020 2020 3a70 6172 616d  vider.    :param
-0000fae0: 2073 656e 645f 656d 6169 6c5f 746f 5f70   send_email_to_p
-0000faf0: 726f 7669 6465 723a 2050 6173 7320 5472  rovider: Pass Tr
-0000fb00: 7565 2c20 6966 2075 7365 7227 7320 656d  ue, if user's em
-0000fb10: 6169 6c20 6164 6472 6573 7320 7368 6f75  ail address shou
-0000fb20: 6c64 2062 6520 7365 6e74 2074 6f20 7072  ld be sent to pr
-0000fb30: 6f76 6964 6572 0a20 2020 203a 7061 7261  ovider.    :para
-0000fb40: 6d20 6469 7361 626c 655f 6e6f 7469 6669  m disable_notifi
-0000fb50: 6361 7469 6f6e 3a20 5365 6e64 7320 7468  cation: Sends th
-0000fb60: 6520 6d65 7373 6167 6520 7369 6c65 6e74  e message silent
-0000fb70: 6c79 2e20 5573 6572 7320 7769 6c6c 2072  ly. Users will r
-0000fb80: 6563 6569 7665 2061 206e 6f74 6966 6963  eceive a notific
-0000fb90: 6174 696f 6e20 7769 7468 206e 6f20 736f  ation with no so
-0000fba0: 756e 642e 0a20 2020 203a 7061 7261 6d20  und..    :param 
-0000fbb0: 7265 706c 795f 6d61 726b 7570 3a20 4120  reply_markup: A 
-0000fbc0: 4a53 4f4e 2d73 6572 6961 6c69 7a65 6420  JSON-serialized 
-0000fbd0: 6f62 6a65 6374 2066 6f72 2061 6e20 696e  object for an in
-0000fbe0: 6c69 6e65 206b 6579 626f 6172 642e 2049  line keyboard. I
-0000fbf0: 6620 656d 7074 792c 206f 6e65 2027 5061  f empty, one 'Pa
-0000fc00: 7920 746f 7461 6c20 7072 6963 6527 2062  y total price' b
-0000fc10: 7574 746f 6e20 7769 6c6c 2062 6520 7368  utton will be sh
-0000fc20: 6f77 6e2e 2049 6620 6e6f 7420 656d 7074  own. If not empt
-0000fc30: 792c 2074 6865 2066 6972 7374 2062 7574  y, the first but
-0000fc40: 746f 6e20 6d75 7374 2062 6520 6120 5061  ton must be a Pa
-0000fc50: 7920 6275 7474 6f6e 0a20 2020 203a 7061  y button.    :pa
-0000fc60: 7261 6d20 7072 6f76 6964 6572 5f64 6174  ram provider_dat
-0000fc70: 613a 2041 204a 534f 4e2d 7365 7269 616c  a: A JSON-serial
-0000fc80: 697a 6564 2064 6174 6120 6162 6f75 7420  ized data about 
-0000fc90: 7468 6520 696e 766f 6963 652c 2077 6869  the invoice, whi
-0000fca0: 6368 2077 696c 6c20 6265 2073 6861 7265  ch will be share
-0000fcb0: 6420 7769 7468 2074 6865 2070 6179 6d65  d with the payme
-0000fcc0: 6e74 2070 726f 7669 6465 722e 2041 2064  nt provider. A d
-0000fcd0: 6574 6169 6c65 6420 6465 7363 7269 7074  etailed descript
-0000fce0: 696f 6e20 6f66 2072 6571 7569 7265 6420  ion of required 
-0000fcf0: 6669 656c 6473 2073 686f 756c 6420 6265  fields should be
-0000fd00: 2070 726f 7669 6465 6420 6279 2074 6865   provided by the
-0000fd10: 2070 6179 6d65 6e74 2070 726f 7669 6465   payment provide
-0000fd20: 722e 0a20 2020 203a 7061 7261 6d20 7469  r..    :param ti
-0000fd30: 6d65 6f75 743a 0a20 2020 203a 7061 7261  meout:.    :para
-0000fd40: 6d20 6d61 785f 7469 705f 616d 6f75 6e74  m max_tip_amount
-0000fd50: 3a20 5468 6520 6d61 7869 6d75 6d20 6163  : The maximum ac
-0000fd60: 6365 7074 6564 2061 6d6f 756e 7420 666f  cepted amount fo
-0000fd70: 7220 7469 7073 2069 6e20 7468 6520 736d  r tips in the sm
-0000fd80: 616c 6c65 7374 2075 6e69 7473 206f 6620  allest units of 
-0000fd90: 7468 6520 6375 7272 656e 6379 0a20 2020  the currency.   
-0000fda0: 203a 7061 7261 6d20 7375 6767 6573 7465   :param suggeste
-0000fdb0: 645f 7469 705f 616d 6f75 6e74 733a 2041  d_tip_amounts: A
-0000fdc0: 204a 534f 4e2d 7365 7269 616c 697a 6564   JSON-serialized
-0000fdd0: 2061 7272 6179 206f 6620 7375 6767 6573   array of sugges
-0000fde0: 7465 6420 616d 6f75 6e74 7320 6f66 2074  ted amounts of t
-0000fdf0: 6970 7320 696e 2074 6865 2073 6d61 6c6c  ips in the small
-0000fe00: 6573 7420 756e 6974 7320 6f66 2074 6865  est units of the
-0000fe10: 2063 7572 7265 6e63 792e 0a20 2020 2020   currency..     
-0000fe20: 2020 2041 7420 6d6f 7374 2034 2073 7567     At most 4 sug
-0000fe30: 6765 7374 6564 2074 6970 2061 6d6f 756e  gested tip amoun
-0000fe40: 7473 2063 616e 2062 6520 7370 6563 6966  ts can be specif
-0000fe50: 6965 642e 2054 6865 2073 7567 6765 7374  ied. The suggest
-0000fe60: 6564 2074 6970 2061 6d6f 756e 7473 206d  ed tip amounts m
-0000fe70: 7573 7420 6265 2070 6f73 6974 6976 652c  ust be positive,
-0000fe80: 2070 6173 7365 6420 696e 2061 2073 7472   passed in a str
-0000fe90: 6963 746c 7920 696e 6372 6561 7365 6420  ictly increased 
-0000fea0: 6f72 6465 7220 616e 6420 6d75 7374 206e  order and must n
-0000feb0: 6f74 2065 7863 6565 6420 6d61 785f 7469  ot exceed max_ti
-0000fec0: 705f 616d 6f75 6e74 2e0a 2020 2020 3a70  p_amount..    :p
-0000fed0: 6172 616d 2070 726f 7465 6374 5f63 6f6e  aram protect_con
-0000fee0: 7465 6e74 3a20 5072 6f74 6563 7473 2074  tent: Protects t
-0000fef0: 6865 2063 6f6e 7465 6e74 7320 6f66 2074  he contents of t
-0000ff00: 6865 2073 656e 7420 6d65 7373 6167 6520  he sent message 
-0000ff10: 6672 6f6d 2066 6f72 7761 7264 696e 6720  from forwarding 
-0000ff20: 616e 6420 7361 7669 6e67 0a20 2020 203a  and saving.    :
-0000ff30: 7061 7261 6d20 6d65 7373 6167 655f 7468  param message_th
-0000ff40: 7265 6164 5f69 643a 2055 6e69 7175 6520  read_id: Unique 
-0000ff50: 6964 656e 7469 6669 6572 2066 6f72 2074  identifier for t
-0000ff60: 6865 2074 6172 6765 7420 6d65 7373 6167  he target messag
-0000ff70: 6520 7468 7265 6164 2028 746f 7069 6329  e thread (topic)
-0000ff80: 206f 6620 7468 6520 666f 7275 6d3b 2066   of the forum; f
-0000ff90: 6f72 2066 6f72 756d 2073 7570 6572 6772  or forum supergr
-0000ffa0: 6f75 7073 206f 6e6c 790a 2020 2020 3a70  oups only.    :p
-0000ffb0: 6172 616d 2072 6570 6c79 5f70 6172 616d  aram reply_param
-0000ffc0: 6574 6572 733a 2041 204a 534f 4e2d 7365  eters: A JSON-se
-0000ffd0: 7269 616c 697a 6564 206f 626a 6563 7420  rialized object 
-0000ffe0: 666f 7220 616e 2069 6e6c 696e 6520 6b65  for an inline ke
-0000fff0: 7962 6f61 7264 2e20 4966 2065 6d70 7479  yboard. If empty
-00010000: 2c20 6f6e 6520 2750 6179 2074 6f74 616c  , one 'Pay total
-00010010: 2070 7269 6365 2720 6275 7474 6f6e 2077   price' button w
-00010020: 696c 6c20 6265 2073 686f 776e 2e20 4966  ill be shown. If
-00010030: 206e 6f74 2065 6d70 7479 2c20 7468 6520   not empty, the 
-00010040: 6669 7273 7420 6275 7474 6f6e 206d 7573  first button mus
-00010050: 7420 6265 2061 2050 6179 2062 7574 746f  t be a Pay butto
-00010060: 6e2e 0a20 2020 203a 7265 7475 726e 3a0a  n..    :return:.
-00010070: 2020 2020 2222 220a 2020 2020 6d65 7468      """.    meth
-00010080: 6f64 5f75 726c 203d 2072 2273 656e 6449  od_url = r"sendI
-00010090: 6e76 6f69 6365 220a 2020 2020 7061 796c  nvoice".    payl
-000100a0: 6f61 6420 3d20 7b0a 2020 2020 2020 2020  oad = {.        
-000100b0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-000100c0: 6964 2c0a 2020 2020 2020 2020 2274 6974  id,.        "tit
-000100d0: 6c65 223a 2074 6974 6c65 2c0a 2020 2020  le": title,.    
-000100e0: 2020 2020 2264 6573 6372 6970 7469 6f6e      "description
-000100f0: 223a 2064 6573 6372 6970 7469 6f6e 2c0a  ": description,.
-00010100: 2020 2020 2020 2020 2270 6179 6c6f 6164          "payload
-00010110: 223a 2069 6e76 6f69 6365 5f70 6179 6c6f  ": invoice_paylo
-00010120: 6164 2c0a 2020 2020 2020 2020 2270 726f  ad,.        "pro
-00010130: 7669 6465 725f 746f 6b65 6e22 3a20 7072  vider_token": pr
-00010140: 6f76 6964 6572 5f74 6f6b 656e 2c0a 2020  ovider_token,.  
-00010150: 2020 2020 2020 2263 7572 7265 6e63 7922        "currency"
-00010160: 3a20 6375 7272 656e 6379 2c0a 2020 2020  : currency,.    
-00010170: 2020 2020 2270 7269 6365 7322 3a20 6177      "prices": aw
-00010180: 6169 7420 5f63 6f6e 7665 7274 5f6c 6973  ait _convert_lis
-00010190: 745f 6a73 6f6e 5f73 6572 6961 6c69 7a61  t_json_serializa
-000101a0: 626c 6528 7072 6963 6573 292c 0a20 2020  ble(prices),.   
-000101b0: 207d 0a20 2020 2069 6620 7374 6172 745f   }.    if start_
-000101c0: 7061 7261 6d65 7465 723a 0a20 2020 2020  parameter:.     
-000101d0: 2020 2070 6179 6c6f 6164 5b22 7374 6172     payload["star
-000101e0: 745f 7061 7261 6d65 7465 7222 5d20 3d20  t_parameter"] = 
-000101f0: 7374 6172 745f 7061 7261 6d65 7465 720a  start_parameter.
-00010200: 2020 2020 6966 2070 686f 746f 5f75 726c      if photo_url
-00010210: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00010220: 645b 2270 686f 746f 5f75 726c 225d 203d  d["photo_url"] =
-00010230: 2070 686f 746f 5f75 726c 0a20 2020 2069   photo_url.    i
-00010240: 6620 7068 6f74 6f5f 7369 7a65 3a0a 2020  f photo_size:.  
-00010250: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-00010260: 686f 746f 5f73 697a 6522 5d20 3d20 7068  hoto_size"] = ph
-00010270: 6f74 6f5f 7369 7a65 0a20 2020 2069 6620  oto_size.    if 
-00010280: 7068 6f74 6f5f 7769 6474 683a 0a20 2020  photo_width:.   
-00010290: 2020 2020 2070 6179 6c6f 6164 5b22 7068       payload["ph
-000102a0: 6f74 6f5f 7769 6474 6822 5d20 3d20 7068  oto_width"] = ph
-000102b0: 6f74 6f5f 7769 6474 680a 2020 2020 6966  oto_width.    if
-000102c0: 2070 686f 746f 5f68 6569 6768 743a 0a20   photo_height:. 
-000102d0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-000102e0: 7068 6f74 6f5f 6865 6967 6874 225d 203d  photo_height"] =
-000102f0: 2070 686f 746f 5f68 6569 6768 740a 2020   photo_height.  
-00010300: 2020 6966 206e 6565 645f 6e61 6d65 2069    if need_name i
-00010310: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00010320: 2020 2020 7061 796c 6f61 645b 226e 6565      payload["nee
-00010330: 645f 6e61 6d65 225d 203d 206e 6565 645f  d_name"] = need_
-00010340: 6e61 6d65 0a20 2020 2069 6620 6e65 6564  name.    if need
-00010350: 5f70 686f 6e65 5f6e 756d 6265 7220 6973  _phone_number is
-00010360: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00010370: 2020 2070 6179 6c6f 6164 5b22 6e65 6564     payload["need
-00010380: 5f70 686f 6e65 5f6e 756d 6265 7222 5d20  _phone_number"] 
-00010390: 3d20 6e65 6564 5f70 686f 6e65 5f6e 756d  = need_phone_num
-000103a0: 6265 720a 2020 2020 6966 206e 6565 645f  ber.    if need_
-000103b0: 656d 6169 6c20 6973 206e 6f74 204e 6f6e  email is not Non
-000103c0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000103d0: 6164 5b22 6e65 6564 5f65 6d61 696c 225d  ad["need_email"]
-000103e0: 203d 206e 6565 645f 656d 6169 6c0a 2020   = need_email.  
-000103f0: 2020 6966 206e 6565 645f 7368 6970 7069    if need_shippi
-00010400: 6e67 5f61 6464 7265 7373 2069 7320 6e6f  ng_address is no
-00010410: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00010420: 7061 796c 6f61 645b 226e 6565 645f 7368  payload["need_sh
-00010430: 6970 7069 6e67 5f61 6464 7265 7373 225d  ipping_address"]
-00010440: 203d 206e 6565 645f 7368 6970 7069 6e67   = need_shipping
-00010450: 5f61 6464 7265 7373 0a20 2020 2069 6620  _address.    if 
-00010460: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
-00010470: 725f 746f 5f70 726f 7669 6465 7220 6973  r_to_provider is
-00010480: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00010490: 2020 2070 6179 6c6f 6164 5b22 7365 6e64     payload["send
-000104a0: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-000104b0: 5f70 726f 7669 6465 7222 5d20 3d20 7365  _provider"] = se
-000104c0: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
-000104d0: 746f 5f70 726f 7669 6465 720a 2020 2020  to_provider.    
-000104e0: 6966 2073 656e 645f 656d 6169 6c5f 746f  if send_email_to
-000104f0: 5f70 726f 7669 6465 7220 6973 206e 6f74  _provider is not
-00010500: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00010510: 6179 6c6f 6164 5b22 7365 6e64 5f65 6d61  ayload["send_ema
-00010520: 696c 5f74 6f5f 7072 6f76 6964 6572 225d  il_to_provider"]
-00010530: 203d 2073 656e 645f 656d 6169 6c5f 746f   = send_email_to
-00010540: 5f70 726f 7669 6465 720a 2020 2020 6966  _provider.    if
-00010550: 2069 735f 666c 6578 6962 6c65 2069 7320   is_flexible is 
-00010560: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00010570: 2020 7061 796c 6f61 645b 2269 735f 666c    payload["is_fl
-00010580: 6578 6962 6c65 225d 203d 2069 735f 666c  exible"] = is_fl
-00010590: 6578 6962 6c65 0a20 2020 2069 6620 6469  exible.    if di
-000105a0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-000105b0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
-000105c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000105d0: 2264 6973 6162 6c65 5f6e 6f74 6966 6963  "disable_notific
-000105e0: 6174 696f 6e22 5d20 3d20 6469 7361 626c  ation"] = disabl
-000105f0: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
-00010600: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
-00010610: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
-00010620: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00010630: 6f61 645b 2272 6570 6c79 5f70 6172 616d  oad["reply_param
-00010640: 6574 6572 7322 5d20 3d20 6a73 6f6e 2e64  eters"] = json.d
-00010650: 756d 7073 2872 6570 6c79 5f70 6172 616d  umps(reply_param
-00010660: 6574 6572 732e 746f 5f64 6963 7428 2929  eters.to_dict())
-00010670: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-00010680: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-00010690: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
-000106a0: 6b75 7022 5d20 3d20 6177 6169 7420 5f63  kup"] = await _c
-000106b0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-000106c0: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-000106d0: 6966 2070 726f 7669 6465 725f 6461 7461  if provider_data
-000106e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000106f0: 645b 2270 726f 7669 6465 725f 6461 7461  d["provider_data
-00010700: 225d 203d 2070 726f 7669 6465 725f 6461  "] = provider_da
-00010710: 7461 0a20 2020 2069 6620 7469 6d65 6f75  ta.    if timeou
-00010720: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00010730: 6164 5b22 7469 6d65 6f75 7422 5d20 3d20  ad["timeout"] = 
-00010740: 7469 6d65 6f75 740a 2020 2020 6966 206d  timeout.    if m
-00010750: 6178 5f74 6970 5f61 6d6f 756e 7420 6973  ax_tip_amount is
-00010760: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00010770: 2020 2070 6179 6c6f 6164 5b22 6d61 785f     payload["max_
-00010780: 7469 705f 616d 6f75 6e74 225d 203d 206d  tip_amount"] = m
-00010790: 6178 5f74 6970 5f61 6d6f 756e 740a 2020  ax_tip_amount.  
-000107a0: 2020 6966 2073 7567 6765 7374 6564 5f74    if suggested_t
-000107b0: 6970 5f61 6d6f 756e 7473 2069 7320 6e6f  ip_amounts is no
-000107c0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000107d0: 7061 796c 6f61 645b 2273 7567 6765 7374  payload["suggest
-000107e0: 6564 5f74 6970 5f61 6d6f 756e 7473 225d  ed_tip_amounts"]
-000107f0: 203d 206a 736f 6e2e 6475 6d70 7328 7375   = json.dumps(su
-00010800: 6767 6573 7465 645f 7469 705f 616d 6f75  ggested_tip_amou
-00010810: 6e74 7329 0a20 2020 2069 6620 7072 6f74  nts).    if prot
-00010820: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
-00010830: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00010840: 2070 6179 6c6f 6164 5b22 7072 6f74 6563   payload["protec
-00010850: 745f 636f 6e74 656e 7422 5d20 3d20 7072  t_content"] = pr
-00010860: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
-00010870: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-00010880: 6561 645f 6964 3a0a 2020 2020 2020 2020  ead_id:.        
-00010890: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-000108a0: 5f74 6872 6561 645f 6964 225d 203d 206d  _thread_id"] = m
-000108b0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000108c0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-000108d0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-000108e0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-000108f0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00010900: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
-00010910: 6620 616e 7377 6572 5f73 6869 7070 696e  f answer_shippin
-00010920: 675f 7175 6572 7928 0a20 2020 2074 6f6b  g_query(.    tok
-00010930: 656e 2c20 7368 6970 7069 6e67 5f71 7565  en, shipping_que
-00010940: 7279 5f69 642c 206f 6b2c 2073 6869 7070  ry_id, ok, shipp
-00010950: 696e 675f 6f70 7469 6f6e 733d 4e6f 6e65  ing_options=None
-00010960: 2c20 6572 726f 725f 6d65 7373 6167 653d  , error_message=
-00010970: 4e6f 6e65 0a29 3a0a 2020 2020 2222 220a  None.):.    """.
-00010980: 2020 2020 4966 2079 6f75 2073 656e 7420      If you sent 
-00010990: 616e 2069 6e76 6f69 6365 2072 6571 7565  an invoice reque
-000109a0: 7374 696e 6720 6120 7368 6970 7069 6e67  sting a shipping
-000109b0: 2061 6464 7265 7373 2061 6e64 2074 6865   address and the
-000109c0: 2070 6172 616d 6574 6572 2069 735f 666c   parameter is_fl
-000109d0: 6578 6962 6c65 2077 6173 2073 7065 6369  exible was speci
-000109e0: 6669 6564 2c20 7468 6520 426f 7420 4150  fied, the Bot AP
-000109f0: 4920 7769 6c6c 2073 656e 6420 616e 2055  I will send an U
-00010a00: 7064 6174 6520 7769 7468 2061 2073 6869  pdate with a shi
-00010a10: 7070 696e 675f 7175 6572 7920 6669 656c  pping_query fiel
-00010a20: 6420 746f 2074 6865 2062 6f74 2e20 5573  d to the bot. Us
-00010a30: 6520 7468 6973 206d 6574 686f 6420 746f  e this method to
-00010a40: 2072 6570 6c79 2074 6f20 7368 6970 7069   reply to shippi
-00010a50: 6e67 2071 7565 7269 6573 2e20 4f6e 2073  ng queries. On s
-00010a60: 7563 6365 7373 2c20 5472 7565 2069 7320  uccess, True is 
-00010a70: 7265 7475 726e 6564 2e0a 2020 2020 3a70  returned..    :p
-00010a80: 6172 616d 2074 6f6b 656e 3a20 426f 7427  aram token: Bot'
-00010a90: 7320 746f 6b65 6e20 2879 6f75 2064 6f6e  s token (you don
-00010aa0: 2774 206e 6565 6420 746f 2066 696c 6c20  't need to fill 
-00010ab0: 7468 6973 290a 2020 2020 3a70 6172 616d  this).    :param
-00010ac0: 2073 6869 7070 696e 675f 7175 6572 795f   shipping_query_
-00010ad0: 6964 3a20 556e 6971 7565 2069 6465 6e74  id: Unique ident
-00010ae0: 6966 6965 7220 666f 7220 7468 6520 7175  ifier for the qu
-00010af0: 6572 7920 746f 2062 6520 616e 7377 6572  ery to be answer
-00010b00: 6564 0a20 2020 203a 7061 7261 6d20 6f6b  ed.    :param ok
-00010b10: 3a20 5370 6563 6966 7920 5472 7565 2069  : Specify True i
-00010b20: 6620 6465 6c69 7665 7279 2074 6f20 7468  f delivery to th
-00010b30: 6520 7370 6563 6966 6965 6420 6164 6472  e specified addr
-00010b40: 6573 7320 6973 2070 6f73 7369 626c 6520  ess is possible 
-00010b50: 616e 6420 4661 6c73 6520 6966 2074 6865  and False if the
-00010b60: 7265 2061 7265 2061 6e79 2070 726f 626c  re are any probl
-00010b70: 656d 7320 2866 6f72 2065 7861 6d70 6c65  ems (for example
-00010b80: 2c20 6966 2064 656c 6976 6572 7920 746f  , if delivery to
-00010b90: 2074 6865 2073 7065 6369 6669 6564 2061   the specified a
-00010ba0: 6464 7265 7373 2069 7320 6e6f 7420 706f  ddress is not po
-00010bb0: 7373 6962 6c65 290a 2020 2020 3a70 6172  ssible).    :par
-00010bc0: 616d 2073 6869 7070 696e 675f 6f70 7469  am shipping_opti
-00010bd0: 6f6e 733a 2052 6571 7569 7265 6420 6966  ons: Required if
-00010be0: 206f 6b20 6973 2054 7275 652e 2041 204a   ok is True. A J
-00010bf0: 534f 4e2d 7365 7269 616c 697a 6564 2061  SON-serialized a
-00010c00: 7272 6179 206f 6620 6176 6169 6c61 626c  rray of availabl
-00010c10: 6520 7368 6970 7069 6e67 206f 7074 696f  e shipping optio
-00010c20: 6e73 2e0a 2020 2020 3a70 6172 616d 2065  ns..    :param e
-00010c30: 7272 6f72 5f6d 6573 7361 6765 3a20 5265  rror_message: Re
-00010c40: 7175 6972 6564 2069 6620 6f6b 2069 7320  quired if ok is 
-00010c50: 4661 6c73 652e 2045 7272 6f72 206d 6573  False. Error mes
-00010c60: 7361 6765 2069 6e20 6875 6d61 6e20 7265  sage in human re
-00010c70: 6164 6162 6c65 2066 6f72 6d20 7468 6174  adable form that
-00010c80: 2065 7870 6c61 696e 7320 7768 7920 6974   explains why it
-00010c90: 2069 7320 696d 706f 7373 6962 6c65 2074   is impossible t
-00010ca0: 6f20 636f 6d70 6c65 7465 2074 6865 206f  o complete the o
-00010cb0: 7264 6572 2028 652e 672e 2022 536f 7272  rder (e.g. "Sorr
-00010cc0: 792c 2064 656c 6976 6572 7920 746f 2079  y, delivery to y
-00010cd0: 6f75 7220 6465 7369 7265 6420 6164 6472  our desired addr
-00010ce0: 6573 7320 6973 2075 6e61 7661 696c 6162  ess is unavailab
-00010cf0: 6c65 2729 2e20 5465 6c65 6772 616d 2077  le'). Telegram w
-00010d00: 696c 6c20 6469 7370 6c61 7920 7468 6973  ill display this
-00010d10: 206d 6573 7361 6765 2074 6f20 7468 6520   message to the 
-00010d20: 7573 6572 2e0a 2020 2020 3a72 6574 7572  user..    :retur
-00010d30: 6e3a 0a20 2020 2022 2222 0a20 2020 206d  n:.    """.    m
-00010d40: 6574 686f 645f 7572 6c20 3d20 2261 6e73  ethod_url = "ans
-00010d50: 7765 7253 6869 7070 696e 6751 7565 7279  werShippingQuery
-00010d60: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00010d70: 7b22 7368 6970 7069 6e67 5f71 7565 7279  {"shipping_query
-00010d80: 5f69 6422 3a20 7368 6970 7069 6e67 5f71  _id": shipping_q
-00010d90: 7565 7279 5f69 642c 2022 6f6b 223a 206f  uery_id, "ok": o
-00010da0: 6b7d 0a20 2020 2069 6620 7368 6970 7069  k}.    if shippi
-00010db0: 6e67 5f6f 7074 696f 6e73 3a0a 2020 2020  ng_options:.    
-00010dc0: 2020 2020 7061 796c 6f61 645b 2273 6869      payload["shi
-00010dd0: 7070 696e 675f 6f70 7469 6f6e 7322 5d20  pping_options"] 
-00010de0: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
-00010df0: 5f6c 6973 745f 6a73 6f6e 5f73 6572 6961  _list_json_seria
-00010e00: 6c69 7a61 626c 6528 0a20 2020 2020 2020  lizable(.       
-00010e10: 2020 2020 2073 6869 7070 696e 675f 6f70       shipping_op
-00010e20: 7469 6f6e 730a 2020 2020 2020 2020 290a  tions.        ).
-00010e30: 2020 2020 6966 2065 7272 6f72 5f6d 6573      if error_mes
-00010e40: 7361 6765 3a0a 2020 2020 2020 2020 7061  sage:.        pa
-00010e50: 796c 6f61 645b 2265 7272 6f72 5f6d 6573  yload["error_mes
-00010e60: 7361 6765 225d 203d 2065 7272 6f72 5f6d  sage"] = error_m
-00010e70: 6573 7361 6765 0a20 2020 2072 6574 7572  essage.    retur
-00010e80: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-00010e90: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00010ea0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00010eb0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6173  ms=payload)...as
-00010ec0: 796e 6320 6465 6620 616e 7377 6572 5f70  ync def answer_p
-00010ed0: 7265 5f63 6865 636b 6f75 745f 7175 6572  re_checkout_quer
-00010ee0: 7928 0a20 2020 2074 6f6b 656e 2c20 7072  y(.    token, pr
-00010ef0: 655f 6368 6563 6b6f 7574 5f71 7565 7279  e_checkout_query
-00010f00: 5f69 642c 206f 6b2c 2065 7272 6f72 5f6d  _id, ok, error_m
-00010f10: 6573 7361 6765 3d4e 6f6e 650a 293a 0a20  essage=None.):. 
-00010f20: 2020 2022 2222 0a20 2020 204f 6e63 6520     """.    Once 
-00010f30: 7468 6520 7573 6572 2068 6173 2063 6f6e  the user has con
-00010f40: 6669 726d 6564 2074 6865 6972 2070 6179  firmed their pay
-00010f50: 6d65 6e74 2061 6e64 2073 6869 7070 696e  ment and shippin
-00010f60: 6720 6465 7461 696c 732c 2074 6865 2042  g details, the B
-00010f70: 6f74 2041 5049 2073 656e 6473 2074 6865  ot API sends the
-00010f80: 2066 696e 616c 2063 6f6e 6669 726d 6174   final confirmat
-00010f90: 696f 6e20 696e 2074 6865 2066 6f72 6d20  ion in the form 
-00010fa0: 6f66 2061 6e20 5570 6461 7465 2077 6974  of an Update wit
-00010fb0: 6820 7468 6520 6669 656c 6420 7072 655f  h the field pre_
-00010fc0: 6368 6563 6b6f 7574 5f71 7565 7279 2e20  checkout_query. 
-00010fd0: 5573 6520 7468 6973 206d 6574 686f 6420  Use this method 
-00010fe0: 746f 2072 6573 706f 6e64 2074 6f20 7375  to respond to su
-00010ff0: 6368 2070 7265 2d63 6865 636b 6f75 7420  ch pre-checkout 
-00011000: 7175 6572 6965 732e 204f 6e20 7375 6363  queries. On succ
-00011010: 6573 732c 2054 7275 6520 6973 2072 6574  ess, True is ret
-00011020: 7572 6e65 642e 204e 6f74 653a 2054 6865  urned. Note: The
-00011030: 2042 6f74 2041 5049 206d 7573 7420 7265   Bot API must re
-00011040: 6365 6976 6520 616e 2061 6e73 7765 7220  ceive an answer 
-00011050: 7769 7468 696e 2031 3020 7365 636f 6e64  within 10 second
-00011060: 7320 6166 7465 7220 7468 6520 7072 652d  s after the pre-
-00011070: 6368 6563 6b6f 7574 2071 7565 7279 2077  checkout query w
-00011080: 6173 2073 656e 742e 0a20 2020 203a 7061  as sent..    :pa
-00011090: 7261 6d20 746f 6b65 6e3a 2042 6f74 2773  ram token: Bot's
-000110a0: 2074 6f6b 656e 2028 796f 7520 646f 6e27   token (you don'
-000110b0: 7420 6e65 6564 2074 6f20 6669 6c6c 2074  t need to fill t
-000110c0: 6869 7329 0a20 2020 203a 7061 7261 6d20  his).    :param 
-000110d0: 7072 655f 6368 6563 6b6f 7574 5f71 7565  pre_checkout_que
-000110e0: 7279 5f69 643a 2055 6e69 7175 6520 6964  ry_id: Unique id
-000110f0: 656e 7469 6669 6572 2066 6f72 2074 6865  entifier for the
-00011100: 2071 7565 7279 2074 6f20 6265 2061 6e73   query to be ans
-00011110: 7765 7265 640a 2020 2020 3a70 6172 616d  wered.    :param
-00011120: 206f 6b3a 2053 7065 6369 6679 2054 7275   ok: Specify Tru
-00011130: 6520 6966 2065 7665 7279 7468 696e 6720  e if everything 
-00011140: 6973 2061 6c72 6967 6874 2028 676f 6f64  is alright (good
-00011150: 7320 6172 6520 6176 6169 6c61 626c 652c  s are available,
-00011160: 2065 7463 2e29 2061 6e64 2074 6865 2062   etc.) and the b
-00011170: 6f74 2069 7320 7265 6164 7920 746f 2070  ot is ready to p
-00011180: 726f 6365 6564 2077 6974 6820 7468 6520  roceed with the 
-00011190: 6f72 6465 722e 2055 7365 2046 616c 7365  order. Use False
-000111a0: 2069 6620 7468 6572 6520 6172 6520 616e   if there are an
-000111b0: 7920 7072 6f62 6c65 6d73 2e0a 2020 2020  y problems..    
-000111c0: 3a70 6172 616d 2065 7272 6f72 5f6d 6573  :param error_mes
-000111d0: 7361 6765 3a20 5265 7175 6972 6564 2069  sage: Required i
-000111e0: 6620 6f6b 2069 7320 4661 6c73 652e 2045  f ok is False. E
-000111f0: 7272 6f72 206d 6573 7361 6765 2069 6e20  rror message in 
-00011200: 6875 6d61 6e20 7265 6164 6162 6c65 2066  human readable f
-00011210: 6f72 6d20 7468 6174 2065 7870 6c61 696e  orm that explain
-00011220: 7320 7468 6520 7265 6173 6f6e 2066 6f72  s the reason for
-00011230: 2066 6169 6c75 7265 2074 6f20 7072 6f63   failure to proc
-00011240: 6565 6420 7769 7468 2074 6865 2063 6865  eed with the che
-00011250: 636b 6f75 7420 2865 2e67 2e20 2253 6f72  ckout (e.g. "Sor
-00011260: 7279 2c20 736f 6d65 626f 6479 206a 7573  ry, somebody jus
-00011270: 7420 626f 7567 6874 2074 6865 206c 6173  t bought the las
-00011280: 7420 6f66 206f 7572 2061 6d61 7a69 6e67  t of our amazing
-00011290: 2062 6c61 636b 2054 2d73 6869 7274 7320   black T-shirts 
-000112a0: 7768 696c 6520 796f 7520 7765 7265 2062  while you were b
-000112b0: 7573 7920 6669 6c6c 696e 6720 6f75 7420  usy filling out 
-000112c0: 796f 7572 2070 6179 6d65 6e74 2064 6574  your payment det
-000112d0: 6169 6c73 2e20 506c 6561 7365 2063 686f  ails. Please cho
-000112e0: 6f73 6520 6120 6469 6666 6572 656e 7420  ose a different 
-000112f0: 636f 6c6f 7220 6f72 2067 6172 6d65 6e74  color or garment
-00011300: 2122 292e 2054 656c 6567 7261 6d20 7769  !"). Telegram wi
-00011310: 6c6c 2064 6973 706c 6179 2074 6869 7320  ll display this 
-00011320: 6d65 7373 6167 6520 746f 2074 6865 2075  message to the u
-00011330: 7365 722e 0a20 2020 203a 7265 7475 726e  ser..    :return
-00011340: 3a0a 2020 2020 2222 220a 2020 2020 6d65  :.    """.    me
-00011350: 7468 6f64 5f75 726c 203d 2022 616e 7377  thod_url = "answ
-00011360: 6572 5072 6543 6865 636b 6f75 7451 7565  erPreCheckoutQue
-00011370: 7279 220a 2020 2020 7061 796c 6f61 6420  ry".    payload 
-00011380: 3d20 7b22 7072 655f 6368 6563 6b6f 7574  = {"pre_checkout
-00011390: 5f71 7565 7279 5f69 6422 3a20 7072 655f  _query_id": pre_
-000113a0: 6368 6563 6b6f 7574 5f71 7565 7279 5f69  checkout_query_i
-000113b0: 642c 2022 6f6b 223a 206f 6b7d 0a20 2020  d, "ok": ok}.   
-000113c0: 2069 6620 6572 726f 725f 6d65 7373 6167   if error_messag
-000113d0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000113e0: 6164 5b22 6572 726f 725f 6d65 7373 6167  ad["error_messag
-000113f0: 6522 5d20 3d20 6572 726f 725f 6d65 7373  e"] = error_mess
-00011400: 6167 650a 2020 2020 7265 7475 726e 2061  age.    return a
-00011410: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00011420: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00011430: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00011440: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-00011450: 2064 6566 2075 6e70 696e 5f61 6c6c 5f67   def unpin_all_g
-00011460: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
-00011470: 6963 5f6d 6573 7361 6765 7328 746f 6b65  ic_messages(toke
-00011480: 6e2c 2063 6861 745f 6964 293a 0a20 2020  n, chat_id):.   
-00011490: 206d 6574 686f 645f 7572 6c20 3d20 2275   method_url = "u
-000114a0: 6e70 696e 416c 6c47 656e 6572 616c 466f  npinAllGeneralFo
-000114b0: 7275 6d54 6f70 6963 4d65 7373 6167 6573  rumTopicMessages
-000114c0: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-000114d0: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-000114e0: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
-000114f0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-00011500: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00011510: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00011520: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-00011530: 3d22 706f 7374 2229 0a0a 0a23 2049 6e6c  ="post")...# Inl
-00011540: 696e 6551 7565 7279 0a0a 0a61 7379 6e63  ineQuery...async
-00011550: 2064 6566 2061 6e73 7765 725f 6361 6c6c   def answer_call
-00011560: 6261 636b 5f71 7565 7279 280a 2020 2020  back_query(.    
-00011570: 746f 6b65 6e2c 2063 616c 6c62 6163 6b5f  token, callback_
-00011580: 7175 6572 795f 6964 2c20 7465 7874 3d4e  query_id, text=N
-00011590: 6f6e 652c 2073 686f 775f 616c 6572 743d  one, show_alert=
-000115a0: 4e6f 6e65 2c20 7572 6c3d 4e6f 6e65 2c20  None, url=None, 
-000115b0: 6361 6368 655f 7469 6d65 3d4e 6f6e 650a  cache_time=None.
-000115c0: 293a 0a20 2020 2022 2222 0a20 2020 2055  ):.    """.    U
-000115d0: 7365 2074 6869 7320 6d65 7468 6f64 2074  se this method t
-000115e0: 6f20 7365 6e64 2061 6e73 7765 7273 2074  o send answers t
-000115f0: 6f20 6361 6c6c 6261 636b 2071 7565 7269  o callback queri
-00011600: 6573 2073 656e 7420 6672 6f6d 2069 6e6c  es sent from inl
-00011610: 696e 6520 6b65 7962 6f61 7264 732e 2054  ine keyboards. T
-00011620: 6865 2061 6e73 7765 7220 7769 6c6c 2062  he answer will b
-00011630: 6520 6469 7370 6c61 7965 6420 746f 2074  e displayed to t
-00011640: 6865 2075 7365 7220 6173 2061 206e 6f74  he user as a not
-00011650: 6966 6963 6174 696f 6e20 6174 2074 6865  ification at the
-00011660: 2074 6f70 206f 6620 7468 6520 6368 6174   top of the chat
-00011670: 2073 6372 6565 6e20 6f72 2061 7320 616e   screen or as an
-00011680: 2061 6c65 7274 2e20 4f6e 2073 7563 6365   alert. On succe
-00011690: 7373 2c20 5472 7565 2069 7320 7265 7475  ss, True is retu
-000116a0: 726e 6564 2e0a 2020 2020 416c 7465 726e  rned..    Altern
-000116b0: 6174 6976 656c 792c 2074 6865 2075 7365  atively, the use
-000116c0: 7220 6361 6e20 6265 2072 6564 6972 6563  r can be redirec
-000116d0: 7465 6420 746f 2074 6865 2073 7065 6369  ted to the speci
-000116e0: 6669 6564 2047 616d 6520 5552 4c2e 2046  fied Game URL. F
-000116f0: 6f72 2074 6869 7320 6f70 7469 6f6e 2074  or this option t
-00011700: 6f20 776f 726b 2c20 796f 7520 6d75 7374  o work, you must
-00011710: 2066 6972 7374 2063 7265 6174 6520 6120   first create a 
-00011720: 6761 6d65 2066 6f72 2079 6f75 7220 626f  game for your bo
-00011730: 7420 7669 6120 426f 7446 6174 6865 7220  t via BotFather 
-00011740: 616e 6420 6163 6365 7074 2074 6865 2074  and accept the t
-00011750: 6572 6d73 2e20 4f74 6865 7277 6973 652c  erms. Otherwise,
-00011760: 2079 6f75 206d 6179 2075 7365 206c 696e   you may use lin
-00011770: 6b73 206c 696b 6520 7465 6c65 6772 616d  ks like telegram
-00011780: 2e6d 652f 796f 7572 5f62 6f74 3f73 7461  .me/your_bot?sta
-00011790: 7274 3d58 5858 5820 7468 6174 206f 7065  rt=XXXX that ope
-000117a0: 6e20 796f 7572 2062 6f74 2077 6974 6820  n your bot with 
-000117b0: 6120 7061 7261 6d65 7465 722e 0a20 2020  a parameter..   
-000117c0: 203a 7061 7261 6d20 746f 6b65 6e3a 2042   :param token: B
-000117d0: 6f74 2773 2074 6f6b 656e 2028 796f 7520  ot's token (you 
-000117e0: 646f 6e27 7420 6e65 6564 2074 6f20 6669  don't need to fi
-000117f0: 6c6c 2074 6869 7329 0a20 2020 203a 7061  ll this).    :pa
-00011800: 7261 6d20 6361 6c6c 6261 636b 5f71 7565  ram callback_que
-00011810: 7279 5f69 643a 2055 6e69 7175 6520 6964  ry_id: Unique id
-00011820: 656e 7469 6669 6572 2066 6f72 2074 6865  entifier for the
-00011830: 2071 7565 7279 2074 6f20 6265 2061 6e73   query to be ans
-00011840: 7765 7265 640a 2020 2020 3a70 6172 616d  wered.    :param
-00011850: 2074 6578 743a 2028 4f70 7469 6f6e 616c   text: (Optional
-00011860: 2920 5465 7874 206f 6620 7468 6520 6e6f  ) Text of the no
-00011870: 7469 6669 6361 7469 6f6e 2e20 4966 206e  tification. If n
-00011880: 6f74 2073 7065 6369 6669 6564 2c20 6e6f  ot specified, no
-00011890: 7468 696e 6720 7769 6c6c 2062 6520 7368  thing will be sh
-000118a0: 6f77 6e20 746f 2074 6865 2075 7365 722c  own to the user,
-000118b0: 2030 2d32 3030 2063 6861 7261 6374 6572   0-200 character
-000118c0: 730a 2020 2020 3a70 6172 616d 2073 686f  s.    :param sho
-000118d0: 775f 616c 6572 743a 2028 4f70 7469 6f6e  w_alert: (Option
-000118e0: 616c 2920 4966 2074 7275 652c 2061 6e20  al) If true, an 
-000118f0: 616c 6572 7420 7769 6c6c 2062 6520 7368  alert will be sh
-00011900: 6f77 6e20 6279 2074 6865 2063 6c69 656e  own by the clien
-00011910: 7420 696e 7374 6561 6420 6f66 2061 206e  t instead of a n
-00011920: 6f74 6966 6963 6174 696f 6e20 6174 2074  otification at t
-00011930: 6865 2074 6f70 206f 6620 7468 6520 6368  he top of the ch
-00011940: 6174 2073 6372 6565 6e2e 2044 6566 6175  at screen. Defau
-00011950: 6c74 7320 746f 2066 616c 7365 2e0a 2020  lts to false..  
-00011960: 2020 3a70 6172 616d 2075 726c 3a20 284f    :param url: (O
-00011970: 7074 696f 6e61 6c29 2055 524c 2074 6861  ptional) URL tha
-00011980: 7420 7769 6c6c 2062 6520 6f70 656e 6564  t will be opened
-00011990: 2062 7920 7468 6520 7573 6572 2773 2063   by the user's c
-000119a0: 6c69 656e 742e 2049 6620 796f 7520 6861  lient. If you ha
-000119b0: 7665 2063 7265 6174 6564 2061 2047 616d  ve created a Gam
-000119c0: 6520 616e 6420 6163 6365 7074 6564 2074  e and accepted t
-000119d0: 6865 2063 6f6e 6469 7469 6f6e 7320 7669  he conditions vi
-000119e0: 6120 4042 6f74 6661 7468 6572 2c20 7370  a @Botfather, sp
-000119f0: 6563 6966 7920 7468 6520 5552 4c20 7468  ecify the URL th
-00011a00: 6174 206f 7065 6e73 2079 6f75 7220 6761  at opens your ga
-00011a10: 6d65 20e2 8093 206e 6f74 6520 7468 6174  me ... note that
-00011a20: 2074 6869 7320 7769 6c6c 206f 6e6c 7920   this will only 
-00011a30: 776f 726b 2069 6620 7468 6520 7175 6572  work if the quer
-00011a40: 7920 636f 6d65 7320 6672 6f6d 2061 2063  y comes from a c
-00011a50: 616c 6c62 6163 6b5f 6761 6d65 2062 7574  allback_game but
-00011a60: 746f 6e2e 0a20 2020 204f 7468 6572 7769  ton..    Otherwi
-00011a70: 7365 2c20 796f 7520 6d61 7920 7573 6520  se, you may use 
-00011a80: 6c69 6e6b 7320 6c69 6b65 2074 656c 6567  links like teleg
-00011a90: 7261 6d2e 6d65 2f79 6f75 725f 626f 743f  ram.me/your_bot?
-00011aa0: 7374 6172 743d 5858 5858 2074 6861 7420  start=XXXX that 
-00011ab0: 6f70 656e 2079 6f75 7220 626f 7420 7769  open your bot wi
-00011ac0: 7468 2061 2070 6172 616d 6574 6572 2e0a  th a parameter..
-00011ad0: 2020 2020 3a70 6172 616d 2063 6163 6865      :param cache
-00011ae0: 5f74 696d 653a 2028 4f70 7469 6f6e 616c  _time: (Optional
-00011af0: 2920 5468 6520 6d61 7869 6d75 6d20 616d  ) The maximum am
-00011b00: 6f75 6e74 206f 6620 7469 6d65 2069 6e20  ount of time in 
-00011b10: 7365 636f 6e64 7320 7468 6174 2074 6865  seconds that the
-00011b20: 2072 6573 756c 7420 6f66 2074 6865 2063   result of the c
-00011b30: 616c 6c62 6163 6b20 7175 6572 7920 6d61  allback query ma
-00011b40: 7920 6265 2063 6163 6865 6420 636c 6965  y be cached clie
-00011b50: 6e74 2d73 6964 652e 2054 656c 6567 7261  nt-side. Telegra
-00011b60: 6d20 6170 7073 2077 696c 6c20 7375 7070  m apps will supp
-00011b70: 6f72 7420 6361 6368 696e 6720 7374 6172  ort caching star
-00011b80: 7469 6e67 2069 6e20 7665 7273 696f 6e20  ting in version 
-00011b90: 332e 3134 2e20 4465 6661 756c 7473 2074  3.14. Defaults t
-00011ba0: 6f20 302e 0a20 2020 203a 7265 7475 726e  o 0..    :return
-00011bb0: 3a0a 2020 2020 2222 220a 2020 2020 6d65  :.    """.    me
-00011bc0: 7468 6f64 5f75 726c 203d 2022 616e 7377  thod_url = "answ
-00011bd0: 6572 4361 6c6c 6261 636b 5175 6572 7922  erCallbackQuery"
-00011be0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00011bf0: 2263 616c 6c62 6163 6b5f 7175 6572 795f  "callback_query_
-00011c00: 6964 223a 2063 616c 6c62 6163 6b5f 7175  id": callback_qu
-00011c10: 6572 795f 6964 7d0a 2020 2020 6966 2074  ery_id}.    if t
-00011c20: 6578 743a 0a20 2020 2020 2020 2070 6179  ext:.        pay
-00011c30: 6c6f 6164 5b22 7465 7874 225d 203d 2074  load["text"] = t
-00011c40: 6578 740a 2020 2020 6966 2073 686f 775f  ext.    if show_
-00011c50: 616c 6572 7420 6973 206e 6f74 204e 6f6e  alert is not Non
-00011c60: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00011c70: 6164 5b22 7368 6f77 5f61 6c65 7274 225d  ad["show_alert"]
-00011c80: 203d 2073 686f 775f 616c 6572 740a 2020   = show_alert.  
-00011c90: 2020 6966 2075 726c 3a0a 2020 2020 2020    if url:.      
-00011ca0: 2020 7061 796c 6f61 645b 2275 726c 225d    payload["url"]
-00011cb0: 203d 2075 726c 0a20 2020 2069 6620 6361   = url.    if ca
-00011cc0: 6368 655f 7469 6d65 2069 7320 6e6f 7420  che_time is not 
-00011cd0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00011ce0: 796c 6f61 645b 2263 6163 6865 5f74 696d  yload["cache_tim
-00011cf0: 6522 5d20 3d20 6361 6368 655f 7469 6d65  e"] = cache_time
-00011d00: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00011d10: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00011d20: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00011d30: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00011d40: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
-00011d50: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
-00011d60: 2067 6574 5f75 7365 725f 6368 6174 5f62   get_user_chat_b
-00011d70: 6f6f 7374 7328 746f 6b65 6e2c 2063 6861  oosts(token, cha
-00011d80: 745f 6964 2c20 7573 6572 5f69 6429 3a0a  t_id, user_id):.
-00011d90: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00011da0: 2022 6765 7455 7365 7243 6861 7442 6f6f   "getUserChatBoo
-00011db0: 7374 7322 0a20 2020 2070 6179 6c6f 6164  sts".    payload
-00011dc0: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
-00011dd0: 6861 745f 6964 2c20 2275 7365 725f 6964  hat_id, "user_id
-00011de0: 223a 2075 7365 725f 6964 7d0a 2020 2020  ": user_id}.    
-00011df0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-00011e00: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-00011e10: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00011e20: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00011e30: 0a0a 0a61 7379 6e63 2064 6566 2061 6e73  ...async def ans
-00011e40: 7765 725f 696e 6c69 6e65 5f71 7565 7279  wer_inline_query
-00011e50: 280a 2020 2020 746f 6b65 6e2c 0a20 2020  (.    token,.   
-00011e60: 2069 6e6c 696e 655f 7175 6572 795f 6964   inline_query_id
-00011e70: 2c0a 2020 2020 7265 7375 6c74 732c 0a20  ,.    results,. 
-00011e80: 2020 2063 6163 6865 5f74 696d 653d 4e6f     cache_time=No
-00011e90: 6e65 2c0a 2020 2020 6973 5f70 6572 736f  ne,.    is_perso
-00011ea0: 6e61 6c3d 4e6f 6e65 2c0a 2020 2020 6e65  nal=None,.    ne
-00011eb0: 7874 5f6f 6666 7365 743d 4e6f 6e65 2c0a  xt_offset=None,.
-00011ec0: 2020 2020 6275 7474 6f6e 3d4e 6f6e 652c      button=None,
-00011ed0: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
-00011ee0: 726c 203d 2022 616e 7377 6572 496e 6c69  rl = "answerInli
-00011ef0: 6e65 5175 6572 7922 0a20 2020 2070 6179  neQuery".    pay
-00011f00: 6c6f 6164 203d 207b 0a20 2020 2020 2020  load = {.       
-00011f10: 2022 696e 6c69 6e65 5f71 7565 7279 5f69   "inline_query_i
-00011f20: 6422 3a20 696e 6c69 6e65 5f71 7565 7279  d": inline_query
-00011f30: 5f69 642c 0a20 2020 2020 2020 2022 7265  _id,.        "re
-00011f40: 7375 6c74 7322 3a20 6177 6169 7420 5f63  sults": await _c
-00011f50: 6f6e 7665 7274 5f6c 6973 745f 6a73 6f6e  onvert_list_json
-00011f60: 5f73 6572 6961 6c69 7a61 626c 6528 7265  _serializable(re
-00011f70: 7375 6c74 7329 2c0a 2020 2020 7d0a 2020  sults),.    }.  
-00011f80: 2020 6966 2063 6163 6865 5f74 696d 6520    if cache_time 
-00011f90: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00011fa0: 2020 2020 2070 6179 6c6f 6164 5b22 6361       payload["ca
-00011fb0: 6368 655f 7469 6d65 225d 203d 2063 6163  che_time"] = cac
-00011fc0: 6865 5f74 696d 650a 2020 2020 6966 2069  he_time.    if i
-00011fd0: 735f 7065 7273 6f6e 616c 2069 7320 6e6f  s_personal is no
-00011fe0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00011ff0: 7061 796c 6f61 645b 2269 735f 7065 7273  payload["is_pers
-00012000: 6f6e 616c 225d 203d 2069 735f 7065 7273  onal"] = is_pers
-00012010: 6f6e 616c 0a20 2020 2069 6620 6e65 7874  onal.    if next
-00012020: 5f6f 6666 7365 7420 6973 206e 6f74 204e  _offset is not N
-00012030: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00012040: 6c6f 6164 5b22 6e65 7874 5f6f 6666 7365  load["next_offse
-00012050: 7422 5d20 3d20 6e65 7874 5f6f 6666 7365  t"] = next_offse
-00012060: 740a 2020 2020 6966 2062 7574 746f 6e20  t.    if button 
-00012070: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00012080: 2020 2020 2070 6179 6c6f 6164 5b22 6275       payload["bu
-00012090: 7474 6f6e 225d 203d 2062 7574 746f 6e2e  tton"] = button.
-000120a0: 746f 5f6a 736f 6e28 290a 0a20 2020 2072  to_json()..    r
-000120b0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-000120c0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-000120d0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-000120e0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-000120f0: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
-00012100: 0a61 7379 6e63 2064 6566 2067 6574 5f73  .async def get_s
-00012110: 7469 636b 6572 5f73 6574 2874 6f6b 656e  ticker_set(token
-00012120: 2c20 6e61 6d65 293a 0a20 2020 206d 6574  , name):.    met
-00012130: 686f 645f 7572 6c20 3d20 2267 6574 5374  hod_url = "getSt
-00012140: 6963 6b65 7253 6574 220a 2020 2020 7265  ickerSet".    re
-00012150: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-00012160: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-00012170: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012180: 6172 616d 733d 7b22 6e61 6d65 223a 206e  arams={"name": n
-00012190: 616d 657d 290a 0a0a 6173 796e 6320 6465  ame})...async de
-000121a0: 6620 6765 745f 6375 7374 6f6d 5f65 6d6f  f get_custom_emo
-000121b0: 6a69 5f73 7469 636b 6572 7328 746f 6b65  ji_stickers(toke
-000121c0: 6e2c 2063 7573 746f 6d5f 656d 6f6a 695f  n, custom_emoji_
-000121d0: 6964 7329 3a0a 2020 2020 6d65 7468 6f64  ids):.    method
-000121e0: 5f75 726c 203d 2072 2267 6574 4375 7374  _url = r"getCust
-000121f0: 6f6d 456d 6f6a 6953 7469 636b 6572 7322  omEmojiStickers"
-00012200: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00012210: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00012220: 7374 280a 2020 2020 2020 2020 746f 6b65  st(.        toke
-00012230: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012240: 6172 616d 733d 7b22 6375 7374 6f6d 5f65  arams={"custom_e
-00012250: 6d6f 6a69 5f69 6473 223a 206a 736f 6e2e  moji_ids": json.
-00012260: 6475 6d70 7328 6375 7374 6f6d 5f65 6d6f  dumps(custom_emo
-00012270: 6a69 5f69 6473 297d 0a20 2020 2029 0a0a  ji_ids)}.    )..
-00012280: 0a61 7379 6e63 2064 6566 2073 6574 5f73  .async def set_s
-00012290: 7469 636b 6572 5f6b 6579 776f 7264 7328  ticker_keywords(
-000122a0: 746f 6b65 6e2c 2073 7469 636b 6572 2c20  token, sticker, 
-000122b0: 6b65 7977 6f72 6473 3d4e 6f6e 6529 3a0a  keywords=None):.
-000122c0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000122d0: 2022 7365 7453 7469 636b 6572 4b65 7977   "setStickerKeyw
-000122e0: 6f72 6473 220a 2020 2020 7061 796c 6f61  ords".    payloa
-000122f0: 6420 3d20 7b22 7374 6963 6b65 7222 3a20  d = {"sticker": 
-00012300: 7374 6963 6b65 727d 0a20 2020 2069 6620  sticker}.    if 
-00012310: 6b65 7977 6f72 6473 3a0a 2020 2020 2020  keywords:.      
-00012320: 2020 7061 796c 6f61 645b 226b 6579 776f    payload["keywo
-00012330: 7264 7322 5d20 3d20 6a73 6f6e 2e64 756d  rds"] = json.dum
-00012340: 7073 286b 6579 776f 7264 7329 0a0a 2020  ps(keywords)..  
-00012350: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00012360: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00012370: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00012380: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00012390: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
-000123a0: 290a 0a0a 6173 796e 6320 6465 6620 7365  )...async def se
-000123b0: 745f 7374 6963 6b65 725f 6d61 736b 5f70  t_sticker_mask_p
-000123c0: 6f73 6974 696f 6e28 746f 6b65 6e2c 2073  osition(token, s
-000123d0: 7469 636b 6572 2c20 6d61 736b 5f70 6f73  ticker, mask_pos
-000123e0: 6974 696f 6e3d 4e6f 6e65 293a 0a20 2020  ition=None):.   
-000123f0: 206d 6574 686f 645f 7572 6c20 3d20 2273   method_url = "s
-00012400: 6574 5374 6963 6b65 724d 6173 6b50 6f73  etStickerMaskPos
-00012410: 6974 696f 6e22 0a20 2020 2070 6179 6c6f  ition".    paylo
-00012420: 6164 203d 207b 2273 7469 636b 6572 223a  ad = {"sticker":
-00012430: 2073 7469 636b 6572 7d0a 2020 2020 6966   sticker}.    if
-00012440: 206d 6173 6b5f 706f 7369 7469 6f6e 3a0a   mask_position:.
-00012450: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00012460: 226d 6173 6b5f 706f 7369 7469 6f6e 225d  "mask_position"]
-00012470: 203d 206d 6173 6b5f 706f 7369 7469 6f6e   = mask_position
-00012480: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2072  .to_json().    r
-00012490: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-000124a0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-000124b0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-000124c0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-000124d0: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
-000124e0: 0a61 7379 6e63 2064 6566 2075 706c 6f61  .async def uploa
-000124f0: 645f 7374 6963 6b65 725f 6669 6c65 2874  d_sticker_file(t
-00012500: 6f6b 656e 2c20 7573 6572 5f69 642c 2073  oken, user_id, s
-00012510: 7469 636b 6572 2c20 7374 6963 6b65 725f  ticker, sticker_
-00012520: 666f 726d 6174 293a 0a20 2020 206d 6574  format):.    met
-00012530: 686f 645f 7572 6c20 3d20 2275 706c 6f61  hod_url = "uploa
-00012540: 6453 7469 636b 6572 4669 6c65 220a 2020  dStickerFile".  
-00012550: 2020 7061 796c 6f61 6420 3d20 7b22 7573    payload = {"us
-00012560: 6572 5f69 6422 3a20 7573 6572 5f69 642c  er_id": user_id,
-00012570: 2022 7374 6963 6b65 725f 666f 726d 6174   "sticker_format
-00012580: 223a 2073 7469 636b 6572 5f66 6f72 6d61  ": sticker_forma
-00012590: 747d 0a20 2020 2066 696c 6573 203d 207b  t}.    files = {
-000125a0: 2273 7469 636b 6572 223a 2073 7469 636b  "sticker": stick
-000125b0: 6572 7d0a 2020 2020 7265 7475 726e 2061  er}.    return a
-000125c0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-000125d0: 7175 6573 7428 0a20 2020 2020 2020 2074  quest(.        t
-000125e0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000125f0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00012600: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
-00012610: 6574 686f 643d 2270 6f73 7422 0a20 2020  ethod="post".   
-00012620: 2029 0a0a 0a61 7379 6e63 2064 6566 2073   )...async def s
-00012630: 6574 5f73 7469 636b 6572 5f65 6d6f 6a69  et_sticker_emoji
-00012640: 5f6c 6973 7428 746f 6b65 6e2c 2073 7469  _list(token, sti
-00012650: 636b 6572 2c20 656d 6f6a 695f 6c69 7374  cker, emoji_list
-00012660: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00012670: 6c20 3d20 2273 6574 5374 6963 6b65 7245  l = "setStickerE
-00012680: 6d6f 6a69 4c69 7374 220a 2020 2020 7061  mojiList".    pa
-00012690: 796c 6f61 6420 3d20 7b22 7374 6963 6b65  yload = {"sticke
-000126a0: 7222 3a20 7374 6963 6b65 722c 2022 656d  r": sticker, "em
-000126b0: 6f6a 695f 6c69 7374 223a 206a 736f 6e2e  oji_list": json.
-000126c0: 6475 6d70 7328 656d 6f6a 695f 6c69 7374  dumps(emoji_list
-000126d0: 297d 0a20 2020 2072 6574 7572 6e20 6177  )}.    return aw
-000126e0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-000126f0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00012700: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00012710: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
-00012720: 706f 7374 2229 0a0a 0a61 7379 6e63 2064  post")...async d
-00012730: 6566 2064 656c 6574 655f 7374 6963 6b65  ef delete_sticke
-00012740: 725f 7365 7428 746f 6b65 6e2c 206e 616d  r_set(token, nam
-00012750: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00012760: 726c 203d 2022 6465 6c65 7465 5374 6963  rl = "deleteStic
-00012770: 6b65 7253 6574 220a 2020 2020 7061 796c  kerSet".    payl
-00012780: 6f61 6420 3d20 7b22 6e61 6d65 223a 206e  oad = {"name": n
-00012790: 616d 657d 0a20 2020 2072 6574 7572 6e20  ame}.    return 
-000127a0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-000127b0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-000127c0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-000127d0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-000127e0: 3d22 706f 7374 2229 0a0a 0a61 7379 6e63  ="post")...async
-000127f0: 2064 6566 2073 6574 5f63 7573 746f 6d5f   def set_custom_
-00012800: 656d 6f6a 695f 7374 6963 6b65 725f 7365  emoji_sticker_se
-00012810: 745f 7468 756d 626e 6169 6c28 746f 6b65  t_thumbnail(toke
-00012820: 6e2c 206e 616d 652c 2063 7573 746f 6d5f  n, name, custom_
-00012830: 656d 6f6a 695f 6964 3d4e 6f6e 6529 3a0a  emoji_id=None):.
-00012840: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00012850: 2022 7365 7443 7573 746f 6d45 6d6f 6a69   "setCustomEmoji
-00012860: 5374 6963 6b65 7253 6574 5468 756d 626e  StickerSetThumbn
-00012870: 6169 6c22 0a20 2020 2070 6179 6c6f 6164  ail".    payload
-00012880: 203d 207b 226e 616d 6522 3a20 6e61 6d65   = {"name": name
-00012890: 7d0a 2020 2020 6966 2063 7573 746f 6d5f  }.    if custom_
-000128a0: 656d 6f6a 695f 6964 2069 7320 6e6f 7420  emoji_id is not 
-000128b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000128c0: 796c 6f61 645b 2263 7573 746f 6d5f 656d  yload["custom_em
-000128d0: 6f6a 695f 6964 225d 203d 2063 7573 746f  oji_id"] = custo
-000128e0: 6d5f 656d 6f6a 695f 6964 0a20 2020 2072  m_emoji_id.    r
-000128f0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-00012900: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00012910: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00012920: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00012930: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
-00012940: 0a61 7379 6e63 2064 6566 2073 6574 5f73  .async def set_s
-00012950: 7469 636b 6572 5f73 6574 5f74 6974 6c65  ticker_set_title
-00012960: 2874 6f6b 656e 2c20 6e61 6d65 2c20 7469  (token, name, ti
-00012970: 746c 6529 3a0a 2020 2020 6d65 7468 6f64  tle):.    method
-00012980: 5f75 726c 203d 2022 7365 7453 7469 636b  _url = "setStick
-00012990: 6572 5365 7454 6974 6c65 220a 2020 2020  erSetTitle".    
-000129a0: 7061 796c 6f61 6420 3d20 7b22 6e61 6d65  payload = {"name
-000129b0: 223a 206e 616d 652c 2022 7469 746c 6522  ": name, "title"
-000129c0: 3a20 7469 746c 657d 0a20 2020 2072 6574  : title}.    ret
-000129d0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-000129e0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-000129f0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00012a00: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-00012a10: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
-00012a20: 7379 6e63 2064 6566 2063 7265 6174 655f  sync def create_
-00012a30: 6e65 775f 7374 6963 6b65 725f 7365 7428  new_sticker_set(
-00012a40: 0a20 2020 2074 6f6b 656e 2c20 7573 6572  .    token, user
-00012a50: 5f69 642c 206e 616d 652c 2074 6974 6c65  _id, name, title
-00012a60: 2c20 7374 6963 6b65 7273 2c20 7374 6963  , stickers, stic
-00012a70: 6b65 725f 7479 7065 3d4e 6f6e 652c 206e  ker_type=None, n
-00012a80: 6565 6473 5f72 6570 6169 6e74 696e 673d  eeds_repainting=
-00012a90: 4e6f 6e65 0a29 3a0a 2020 2020 6d65 7468  None.):.    meth
-00012aa0: 6f64 5f75 726c 203d 2022 6372 6561 7465  od_url = "create
-00012ab0: 4e65 7753 7469 636b 6572 5365 7422 0a20  NewStickerSet". 
-00012ac0: 2020 2070 6179 6c6f 6164 203d 207b 2275     payload = {"u
-00012ad0: 7365 725f 6964 223a 2075 7365 725f 6964  ser_id": user_id
-00012ae0: 2c20 226e 616d 6522 3a20 6e61 6d65 2c20  , "name": name, 
-00012af0: 2274 6974 6c65 223a 2074 6974 6c65 7d0a  "title": title}.
-00012b00: 2020 2020 6966 2073 7469 636b 6572 5f74      if sticker_t
-00012b10: 7970 653a 0a20 2020 2020 2020 2070 6179  ype:.        pay
-00012b20: 6c6f 6164 5b22 7374 6963 6b65 725f 7479  load["sticker_ty
-00012b30: 7065 225d 203d 2073 7469 636b 6572 5f74  pe"] = sticker_t
-00012b40: 7970 650a 2020 2020 6966 206e 6565 6473  ype.    if needs
-00012b50: 5f72 6570 6169 6e74 696e 6720 6973 206e  _repainting is n
-00012b60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00012b70: 2070 6179 6c6f 6164 5b22 6e65 6564 735f   payload["needs_
-00012b80: 7265 7061 696e 7469 6e67 225d 203d 206e  repainting"] = n
-00012b90: 6565 6473 5f72 6570 6169 6e74 696e 670a  eeds_repainting.
-00012ba0: 0a20 2020 2066 696c 6573 203d 207b 7d0a  .    files = {}.
-00012bb0: 2020 2020 6c73 7420 3d20 5b5d 0a0a 2020      lst = []..  
-00012bc0: 2020 666f 7220 7374 6963 6b65 7220 696e    for sticker in
-00012bd0: 2073 7469 636b 6572 733a 0a20 2020 2020   stickers:.     
-00012be0: 2020 206a 736f 6e5f 6469 6374 2c20 6669     json_dict, fi
-00012bf0: 6c65 203d 2073 7469 636b 6572 2e63 6f6e  le = sticker.con
-00012c00: 7665 7274 5f69 6e70 7574 5f73 7469 636b  vert_input_stick
-00012c10: 6572 2829 0a20 2020 2020 2020 206a 736f  er().        jso
-00012c20: 6e5f 6469 6374 203d 2073 7469 636b 6572  n_dict = sticker
-00012c30: 2e74 6f5f 6469 6374 2829 0a0a 2020 2020  .to_dict()..    
-00012c40: 2020 2020 6966 2066 696c 653a 0a20 2020      if file:.   
-00012c50: 2020 2020 2020 2020 206c 6973 745f 6b65           list_ke
-00012c60: 7973 203d 206c 6973 7428 6669 6c65 2e6b  ys = list(file.k
-00012c70: 6579 7328 2929 0a20 2020 2020 2020 2020  eys()).         
-00012c80: 2020 2066 696c 6573 5b6c 6973 745f 6b65     files[list_ke
-00012c90: 7973 5b30 5d5d 203d 2066 696c 655b 6c69  ys[0]] = file[li
-00012ca0: 7374 5f6b 6579 735b 305d 5d0a 2020 2020  st_keys[0]].    
-00012cb0: 2020 2020 6c73 742e 6170 7065 6e64 286a      lst.append(j
-00012cc0: 736f 6e5f 6469 6374 290a 0a20 2020 2070  son_dict)..    p
-00012cd0: 6179 6c6f 6164 5b22 7374 6963 6b65 7273  ayload["stickers
-00012ce0: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
-00012cf0: 6c73 7429 0a0a 2020 2020 7265 7475 726e  lst)..    return
-00012d00: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-00012d10: 7265 7175 6573 7428 0a20 2020 2020 2020  request(.       
-00012d20: 2074 6f6b 656e 2c20 6d65 7468 6f64 5f75   token, method_u
-00012d30: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00012d40: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00012d50: 206d 6574 686f 643d 2270 6f73 7422 0a20   method="post". 
-00012d60: 2020 2029 0a0a 0a61 7379 6e63 2064 6566     )...async def
-00012d70: 2061 6464 5f73 7469 636b 6572 5f74 6f5f   add_sticker_to_
-00012d80: 7365 7428 746f 6b65 6e2c 2075 7365 725f  set(token, user_
-00012d90: 6964 2c20 6e61 6d65 2c20 7374 6963 6b65  id, name, sticke
-00012da0: 7229 3a0a 2020 2020 6d65 7468 6f64 5f75  r):.    method_u
-00012db0: 726c 203d 2022 6164 6453 7469 636b 6572  rl = "addSticker
-00012dc0: 546f 5365 7422 0a20 2020 206a 736f 6e5f  ToSet".    json_
-00012dd0: 6469 6374 2c20 6669 6c65 7320 3d20 7374  dict, files = st
-00012de0: 6963 6b65 722e 636f 6e76 6572 745f 696e  icker.convert_in
-00012df0: 7075 745f 7374 6963 6b65 7228 290a 2020  put_sticker().  
-00012e00: 2020 7061 796c 6f61 6420 3d20 7b22 7573    payload = {"us
-00012e10: 6572 5f69 6422 3a20 7573 6572 5f69 642c  er_id": user_id,
-00012e20: 2022 6e61 6d65 223a 206e 616d 652c 2022   "name": name, "
-00012e30: 7374 6963 6b65 7222 3a20 6a73 6f6e 5f64  sticker": json_d
-00012e40: 6963 747d 0a0a 2020 2020 7265 7475 726e  ict}..    return
-00012e50: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-00012e60: 7265 7175 6573 7428 0a20 2020 2020 2020  request(.       
-00012e70: 2074 6f6b 656e 2c20 6d65 7468 6f64 5f75   token, method_u
-00012e80: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00012e90: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00012ea0: 206d 6574 686f 643d 2270 6f73 7422 0a20   method="post". 
-00012eb0: 2020 2029 0a0a 0a61 7379 6e63 2064 6566     )...async def
-00012ec0: 2073 6574 5f73 7469 636b 6572 5f70 6f73   set_sticker_pos
-00012ed0: 6974 696f 6e5f 696e 5f73 6574 2874 6f6b  ition_in_set(tok
-00012ee0: 656e 2c20 7374 6963 6b65 722c 2070 6f73  en, sticker, pos
-00012ef0: 6974 696f 6e29 3a0a 2020 2020 6d65 7468  ition):.    meth
-00012f00: 6f64 5f75 726c 203d 2022 7365 7453 7469  od_url = "setSti
-00012f10: 636b 6572 506f 7369 7469 6f6e 496e 5365  ckerPositionInSe
-00012f20: 7422 0a20 2020 2070 6179 6c6f 6164 203d  t".    payload =
-00012f30: 207b 2273 7469 636b 6572 223a 2073 7469   {"sticker": sti
-00012f40: 636b 6572 2c20 2270 6f73 6974 696f 6e22  cker, "position"
-00012f50: 3a20 706f 7369 7469 6f6e 7d0a 2020 2020  : position}.    
-00012f60: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-00012f70: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-00012f80: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00012f90: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-00012fa0: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
-00012fb0: 0a0a 6173 796e 6320 6465 6620 6465 6c65  ..async def dele
-00012fc0: 7465 5f73 7469 636b 6572 5f66 726f 6d5f  te_sticker_from_
-00012fd0: 7365 7428 746f 6b65 6e2c 2073 7469 636b  set(token, stick
-00012fe0: 6572 293a 0a20 2020 206d 6574 686f 645f  er):.    method_
-00012ff0: 7572 6c20 3d20 2264 656c 6574 6553 7469  url = "deleteSti
-00013000: 636b 6572 4672 6f6d 5365 7422 0a20 2020  ckerFromSet".   
-00013010: 2070 6179 6c6f 6164 203d 207b 2273 7469   payload = {"sti
-00013020: 636b 6572 223a 2073 7469 636b 6572 7d0a  cker": sticker}.
-00013030: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00013040: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-00013050: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00013060: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00013070: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
-00013080: 7422 290a 0a0a 6173 796e 6320 6465 6620  t")...async def 
-00013090: 6372 6561 7465 5f69 6e76 6f69 6365 5f6c  create_invoice_l
-000130a0: 696e 6b28 0a20 2020 2074 6f6b 656e 2c0a  ink(.    token,.
-000130b0: 2020 2020 7469 746c 652c 0a20 2020 2064      title,.    d
-000130c0: 6573 6372 6970 7469 6f6e 2c0a 2020 2020  escription,.    
-000130d0: 7061 796c 6f61 642c 0a20 2020 2070 726f  payload,.    pro
-000130e0: 7669 6465 725f 746f 6b65 6e2c 0a20 2020  vider_token,.   
-000130f0: 2063 7572 7265 6e63 792c 0a20 2020 2070   currency,.    p
-00013100: 7269 6365 732c 0a20 2020 206d 6178 5f74  rices,.    max_t
-00013110: 6970 5f61 6d6f 756e 743d 4e6f 6e65 2c0a  ip_amount=None,.
-00013120: 2020 2020 7375 6767 6573 7465 645f 7469      suggested_ti
-00013130: 705f 616d 6f75 6e74 733d 4e6f 6e65 2c0a  p_amounts=None,.
-00013140: 2020 2020 7072 6f76 6964 6572 5f64 6174      provider_dat
-00013150: 613d 4e6f 6e65 2c0a 2020 2020 7068 6f74  a=None,.    phot
-00013160: 6f5f 7572 6c3d 4e6f 6e65 2c0a 2020 2020  o_url=None,.    
-00013170: 7068 6f74 6f5f 7369 7a65 3d4e 6f6e 652c  photo_size=None,
-00013180: 0a20 2020 2070 686f 746f 5f77 6964 7468  .    photo_width
-00013190: 3d4e 6f6e 652c 0a20 2020 2070 686f 746f  =None,.    photo
-000131a0: 5f68 6569 6768 743d 4e6f 6e65 2c0a 2020  _height=None,.  
-000131b0: 2020 6e65 6564 5f6e 616d 653d 4e6f 6e65    need_name=None
-000131c0: 2c0a 2020 2020 6e65 6564 5f70 686f 6e65  ,.    need_phone
-000131d0: 5f6e 756d 6265 723d 4e6f 6e65 2c0a 2020  _number=None,.  
-000131e0: 2020 6e65 6564 5f65 6d61 696c 3d4e 6f6e    need_email=Non
-000131f0: 652c 0a20 2020 206e 6565 645f 7368 6970  e,.    need_ship
-00013200: 7069 6e67 5f61 6464 7265 7373 3d4e 6f6e  ping_address=Non
-00013210: 652c 0a20 2020 2073 656e 645f 7068 6f6e  e,.    send_phon
-00013220: 655f 6e75 6d62 6572 5f74 6f5f 7072 6f76  e_number_to_prov
-00013230: 6964 6572 3d4e 6f6e 652c 0a20 2020 2073  ider=None,.    s
-00013240: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
-00013250: 7669 6465 723d 4e6f 6e65 2c0a 2020 2020  vider=None,.    
-00013260: 6973 5f66 6c65 7869 626c 653d 4e6f 6e65  is_flexible=None
-00013270: 2c0a 293a 0a20 2020 206d 6574 686f 645f  ,.):.    method_
-00013280: 7572 6c20 3d20 7222 6372 6561 7465 496e  url = r"createIn
-00013290: 766f 6963 654c 696e 6b22 0a20 2020 2070  voiceLink".    p
-000132a0: 6179 6c6f 6164 203d 207b 0a20 2020 2020  ayload = {.     
-000132b0: 2020 2022 7469 746c 6522 3a20 7469 746c     "title": titl
-000132c0: 652c 0a20 2020 2020 2020 2022 6465 7363  e,.        "desc
-000132d0: 7269 7074 696f 6e22 3a20 6465 7363 7269  ription": descri
-000132e0: 7074 696f 6e2c 0a20 2020 2020 2020 2022  ption,.        "
-000132f0: 7061 796c 6f61 6422 3a20 7061 796c 6f61  payload": payloa
-00013300: 642c 0a20 2020 2020 2020 2022 7072 6f76  d,.        "prov
-00013310: 6964 6572 5f74 6f6b 656e 223a 2070 726f  ider_token": pro
-00013320: 7669 6465 725f 746f 6b65 6e2c 0a20 2020  vider_token,.   
-00013330: 2020 2020 2022 6375 7272 656e 6379 223a       "currency":
-00013340: 2063 7572 7265 6e63 792c 0a20 2020 2020   currency,.     
-00013350: 2020 2022 7072 6963 6573 223a 2061 7761     "prices": awa
-00013360: 6974 205f 636f 6e76 6572 745f 6c69 7374  it _convert_list
-00013370: 5f6a 736f 6e5f 7365 7269 616c 697a 6162  _json_serializab
-00013380: 6c65 2870 7269 6365 7329 2c0a 2020 2020  le(prices),.    
-00013390: 7d0a 2020 2020 6966 206d 6178 5f74 6970  }.    if max_tip
-000133a0: 5f61 6d6f 756e 743a 0a20 2020 2020 2020  _amount:.       
-000133b0: 2070 6179 6c6f 6164 5b22 6d61 785f 7469   payload["max_ti
-000133c0: 705f 616d 6f75 6e74 225d 203d 206d 6178  p_amount"] = max
-000133d0: 5f74 6970 5f61 6d6f 756e 740a 2020 2020  _tip_amount.    
-000133e0: 6966 2073 7567 6765 7374 6564 5f74 6970  if suggested_tip
-000133f0: 5f61 6d6f 756e 7473 3a0a 2020 2020 2020  _amounts:.      
-00013400: 2020 7061 796c 6f61 645b 2273 7567 6765    payload["sugge
-00013410: 7374 6564 5f74 6970 5f61 6d6f 756e 7473  sted_tip_amounts
-00013420: 225d 203d 206a 736f 6e2e 6475 6d70 7328  "] = json.dumps(
-00013430: 7375 6767 6573 7465 645f 7469 705f 616d  suggested_tip_am
-00013440: 6f75 6e74 7329 0a20 2020 2069 6620 7072  ounts).    if pr
-00013450: 6f76 6964 6572 5f64 6174 613a 0a20 2020  ovider_data:.   
-00013460: 2020 2020 2070 6179 6c6f 6164 5b22 7072       payload["pr
-00013470: 6f76 6964 6572 5f64 6174 6122 5d20 3d20  ovider_data"] = 
-00013480: 7072 6f76 6964 6572 5f64 6174 610a 2020  provider_data.  
-00013490: 2020 6966 2070 686f 746f 5f75 726c 3a0a    if photo_url:.
-000134a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000134b0: 2270 686f 746f 5f75 726c 225d 203d 2070  "photo_url"] = p
-000134c0: 686f 746f 5f75 726c 0a20 2020 2069 6620  hoto_url.    if 
-000134d0: 7068 6f74 6f5f 7369 7a65 3a0a 2020 2020  photo_size:.    
-000134e0: 2020 2020 7061 796c 6f61 645b 2270 686f      payload["pho
-000134f0: 746f 5f73 697a 6522 5d20 3d20 7068 6f74  to_size"] = phot
-00013500: 6f5f 7369 7a65 0a20 2020 2069 6620 7068  o_size.    if ph
-00013510: 6f74 6f5f 7769 6474 683a 0a20 2020 2020  oto_width:.     
-00013520: 2020 2070 6179 6c6f 6164 5b22 7068 6f74     payload["phot
-00013530: 6f5f 7769 6474 6822 5d20 3d20 7068 6f74  o_width"] = phot
-00013540: 6f5f 7769 6474 680a 2020 2020 6966 2070  o_width.    if p
-00013550: 686f 746f 5f68 6569 6768 743a 0a20 2020  hoto_height:.   
-00013560: 2020 2020 2070 6179 6c6f 6164 5b22 7068       payload["ph
-00013570: 6f74 6f5f 6865 6967 6874 225d 203d 2070  oto_height"] = p
-00013580: 686f 746f 5f68 6569 6768 740a 2020 2020  hoto_height.    
-00013590: 6966 206e 6565 645f 6e61 6d65 2069 7320  if need_name is 
-000135a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000135b0: 2020 7061 796c 6f61 645b 226e 6565 645f    payload["need_
-000135c0: 6e61 6d65 225d 203d 206e 6565 645f 6e61  name"] = need_na
-000135d0: 6d65 0a20 2020 2069 6620 6e65 6564 5f70  me.    if need_p
-000135e0: 686f 6e65 5f6e 756d 6265 7220 6973 206e  hone_number is n
-000135f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00013600: 2070 6179 6c6f 6164 5b22 6e65 6564 5f70   payload["need_p
-00013610: 686f 6e65 5f6e 756d 6265 7222 5d20 3d20  hone_number"] = 
-00013620: 6e65 6564 5f70 686f 6e65 5f6e 756d 6265  need_phone_numbe
-00013630: 720a 2020 2020 6966 206e 6565 645f 656d  r.    if need_em
-00013640: 6169 6c20 6973 206e 6f74 204e 6f6e 653a  ail is not None:
-00013650: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00013660: 5b22 6e65 6564 5f65 6d61 696c 225d 203d  ["need_email"] =
-00013670: 206e 6565 645f 656d 6169 6c0a 2020 2020   need_email.    
-00013680: 6966 206e 6565 645f 7368 6970 7069 6e67  if need_shipping
-00013690: 5f61 6464 7265 7373 2069 7320 6e6f 7420  _address is not 
-000136a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000136b0: 796c 6f61 645b 226e 6565 645f 7368 6970  yload["need_ship
-000136c0: 7069 6e67 5f61 6464 7265 7373 225d 203d  ping_address"] =
-000136d0: 206e 6565 645f 7368 6970 7069 6e67 5f61   need_shipping_a
-000136e0: 6464 7265 7373 0a20 2020 2069 6620 7365  ddress.    if se
-000136f0: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
-00013700: 746f 5f70 726f 7669 6465 7220 6973 206e  to_provider is n
-00013710: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00013720: 2070 6179 6c6f 6164 5b22 7365 6e64 5f70   payload["send_p
-00013730: 686f 6e65 5f6e 756d 6265 725f 746f 5f70  hone_number_to_p
-00013740: 726f 7669 6465 7222 5d20 3d20 7365 6e64  rovider"] = send
-00013750: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-00013760: 5f70 726f 7669 6465 720a 2020 2020 6966  _provider.    if
-00013770: 2073 656e 645f 656d 6169 6c5f 746f 5f70   send_email_to_p
-00013780: 726f 7669 6465 7220 6973 206e 6f74 204e  rovider is not N
-00013790: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-000137a0: 6c6f 6164 5b22 7365 6e64 5f65 6d61 696c  load["send_email
-000137b0: 5f74 6f5f 7072 6f76 6964 6572 225d 203d  _to_provider"] =
-000137c0: 2073 656e 645f 656d 6169 6c5f 746f 5f70   send_email_to_p
-000137d0: 726f 7669 6465 720a 2020 2020 6966 2069  rovider.    if i
-000137e0: 735f 666c 6578 6962 6c65 2069 7320 6e6f  s_flexible is no
-000137f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00013800: 7061 796c 6f61 645b 2269 735f 666c 6578  payload["is_flex
-00013810: 6962 6c65 225d 203d 2069 735f 666c 6578  ible"] = is_flex
-00013820: 6962 6c65 0a20 2020 2072 6574 7572 6e20  ible.    return 
-00013830: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-00013840: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00013850: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00013860: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-00013870: 3d22 706f 7374 2229 0a0a 0a23 206e 6f69  ="post")...# noi
-00013880: 6e73 7065 6374 696f 6e20 5079 5368 6164  nspection PyShad
-00013890: 6f77 696e 6742 7569 6c74 696e 730a 6173  owingBuiltins.as
-000138a0: 796e 6320 6465 6620 7365 6e64 5f70 6f6c  ync def send_pol
-000138b0: 6c28 0a20 2020 2074 6f6b 656e 2c0a 2020  l(.    token,.  
-000138c0: 2020 6368 6174 5f69 642c 0a20 2020 2071    chat_id,.    q
-000138d0: 7565 7374 696f 6e2c 0a20 2020 206f 7074  uestion,.    opt
-000138e0: 696f 6e73 2c0a 2020 2020 6973 5f61 6e6f  ions,.    is_ano
-000138f0: 6e79 6d6f 7573 3d4e 6f6e 652c 0a20 2020  nymous=None,.   
-00013900: 2074 7970 653d 4e6f 6e65 2c0a 2020 2020   type=None,.    
-00013910: 616c 6c6f 7773 5f6d 756c 7469 706c 655f  allows_multiple_
-00013920: 616e 7377 6572 733d 4e6f 6e65 2c0a 2020  answers=None,.  
-00013930: 2020 636f 7272 6563 745f 6f70 7469 6f6e    correct_option
-00013940: 5f69 643d 4e6f 6e65 2c0a 2020 2020 6578  _id=None,.    ex
-00013950: 706c 616e 6174 696f 6e3d 4e6f 6e65 2c0a  planation=None,.
-00013960: 2020 2020 6578 706c 616e 6174 696f 6e5f      explanation_
-00013970: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
-00013980: 0a20 2020 206f 7065 6e5f 7065 7269 6f64  .    open_period
-00013990: 3d4e 6f6e 652c 0a20 2020 2063 6c6f 7365  =None,.    close
-000139a0: 5f64 6174 653d 4e6f 6e65 2c0a 2020 2020  _date=None,.    
-000139b0: 6973 5f63 6c6f 7365 643d 4e6f 6e65 2c0a  is_closed=None,.
-000139c0: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
-000139d0: 6669 6361 7469 6f6e 3d46 616c 7365 2c0a  fication=False,.
-000139e0: 2020 2020 7265 706c 795f 6d61 726b 7570      reply_markup
-000139f0: 3d4e 6f6e 652c 0a20 2020 2074 696d 656f  =None,.    timeo
-00013a00: 7574 3d4e 6f6e 652c 0a20 2020 2065 7870  ut=None,.    exp
-00013a10: 6c61 6e61 7469 6f6e 5f65 6e74 6974 6965  lanation_entitie
-00013a20: 733d 4e6f 6e65 2c0a 2020 2020 7072 6f74  s=None,.    prot
-00013a30: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
-00013a40: 2c0a 2020 2020 6d65 7373 6167 655f 7468  ,.    message_th
-00013a50: 7265 6164 5f69 643d 4e6f 6e65 2c0a 2020  read_id=None,.  
-00013a60: 2020 7265 706c 795f 7061 7261 6d65 7465    reply_paramete
-00013a70: 7273 3d4e 6f6e 652c 0a20 2020 2062 7573  rs=None,.    bus
-00013a80: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00013a90: 5f69 643d 4e6f 6e65 2c0a 293a 0a20 2020  _id=None,.):.   
-00013aa0: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
-00013ab0: 7365 6e64 506f 6c6c 220a 2020 2020 7061  sendPoll".    pa
-00013ac0: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
-00013ad0: 2020 2263 6861 745f 6964 223a 2073 7472    "chat_id": str
-00013ae0: 2863 6861 745f 6964 292c 0a20 2020 2020  (chat_id),.     
-00013af0: 2020 2022 7175 6573 7469 6f6e 223a 2071     "question": q
-00013b00: 7565 7374 696f 6e2c 0a20 2020 2020 2020  uestion,.       
-00013b10: 2022 6f70 7469 6f6e 7322 3a20 6a73 6f6e   "options": json
-00013b20: 2e64 756d 7073 2861 7761 6974 205f 636f  .dumps(await _co
-00013b30: 6e76 6572 745f 706f 6c6c 5f6f 7074 696f  nvert_poll_optio
-00013b40: 6e73 286f 7074 696f 6e73 2929 2c0a 2020  ns(options)),.  
-00013b50: 2020 7d0a 0a20 2020 2069 6620 6973 5f61    }..    if is_a
-00013b60: 6e6f 6e79 6d6f 7573 2069 7320 6e6f 7420  nonymous is not 
-00013b70: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00013b80: 796c 6f61 645b 2269 735f 616e 6f6e 796d  yload["is_anonym
-00013b90: 6f75 7322 5d20 3d20 6973 5f61 6e6f 6e79  ous"] = is_anony
-00013ba0: 6d6f 7573 0a20 2020 2069 6620 7479 7065  mous.    if type
-00013bb0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00013bc0: 2020 2020 2020 7061 796c 6f61 645b 2274        payload["t
-00013bd0: 7970 6522 5d20 3d20 7479 7065 0a20 2020  ype"] = type.   
-00013be0: 2069 6620 616c 6c6f 7773 5f6d 756c 7469   if allows_multi
-00013bf0: 706c 655f 616e 7377 6572 7320 6973 206e  ple_answers is n
-00013c00: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00013c10: 2070 6179 6c6f 6164 5b22 616c 6c6f 7773   payload["allows
-00013c20: 5f6d 756c 7469 706c 655f 616e 7377 6572  _multiple_answer
-00013c30: 7322 5d20 3d20 616c 6c6f 7773 5f6d 756c  s"] = allows_mul
-00013c40: 7469 706c 655f 616e 7377 6572 730a 2020  tiple_answers.  
-00013c50: 2020 6966 2063 6f72 7265 6374 5f6f 7074    if correct_opt
-00013c60: 696f 6e5f 6964 2069 7320 6e6f 7420 4e6f  ion_id is not No
-00013c70: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00013c80: 6f61 645b 2263 6f72 7265 6374 5f6f 7074  oad["correct_opt
-00013c90: 696f 6e5f 6964 225d 203d 2063 6f72 7265  ion_id"] = corre
-00013ca0: 6374 5f6f 7074 696f 6e5f 6964 0a20 2020  ct_option_id.   
-00013cb0: 2069 6620 6578 706c 616e 6174 696f 6e20   if explanation 
-00013cc0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00013cd0: 2020 2020 2070 6179 6c6f 6164 5b22 6578       payload["ex
-00013ce0: 706c 616e 6174 696f 6e22 5d20 3d20 6578  planation"] = ex
-00013cf0: 706c 616e 6174 696f 6e0a 2020 2020 6966  planation.    if
-00013d00: 2065 7870 6c61 6e61 7469 6f6e 5f70 6172   explanation_par
-00013d10: 7365 5f6d 6f64 6520 6973 206e 6f74 204e  se_mode is not N
-00013d20: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00013d30: 6c6f 6164 5b22 6578 706c 616e 6174 696f  load["explanatio
-00013d40: 6e5f 7061 7273 655f 6d6f 6465 225d 203d  n_parse_mode"] =
-00013d50: 2065 7870 6c61 6e61 7469 6f6e 5f70 6172   explanation_par
-00013d60: 7365 5f6d 6f64 650a 2020 2020 6966 206f  se_mode.    if o
-00013d70: 7065 6e5f 7065 7269 6f64 2069 7320 6e6f  pen_period is no
-00013d80: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00013d90: 7061 796c 6f61 645b 226f 7065 6e5f 7065  payload["open_pe
-00013da0: 7269 6f64 225d 203d 206f 7065 6e5f 7065  riod"] = open_pe
-00013db0: 7269 6f64 0a20 2020 2069 6620 636c 6f73  riod.    if clos
-00013dc0: 655f 6461 7465 2069 7320 6e6f 7420 4e6f  e_date is not No
-00013dd0: 6e65 3a0a 2020 2020 2020 2020 6966 2069  ne:.        if i
-00013de0: 7369 6e73 7461 6e63 6528 636c 6f73 655f  sinstance(close_
-00013df0: 6461 7465 2c20 6461 7465 7469 6d65 293a  date, datetime):
-00013e00: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
-00013e10: 6c6f 6164 5b22 636c 6f73 655f 6461 7465  load["close_date
-00013e20: 225d 203d 2063 6c6f 7365 5f64 6174 652e  "] = close_date.
-00013e30: 7469 6d65 7374 616d 7028 290a 2020 2020  timestamp().    
-00013e40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00013e50: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
-00013e60: 6c6f 7365 5f64 6174 6522 5d20 3d20 636c  lose_date"] = cl
-00013e70: 6f73 655f 6461 7465 0a20 2020 2069 6620  ose_date.    if 
-00013e80: 6973 5f63 6c6f 7365 6420 6973 206e 6f74  is_closed is not
-00013e90: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00013ea0: 6179 6c6f 6164 5b22 6973 5f63 6c6f 7365  ayload["is_close
-00013eb0: 6422 5d20 3d20 6973 5f63 6c6f 7365 640a  d"] = is_closed.
-00013ec0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
-00013ed0: 6e6f 7469 6669 6361 7469 6f6e 3a0a 2020  notification:.  
-00013ee0: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
-00013ef0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00013f00: 696f 6e22 5d20 3d20 6469 7361 626c 655f  ion"] = disable_
-00013f10: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
-00013f20: 2069 6620 7265 706c 795f 7061 7261 6d65   if reply_parame
-00013f30: 7465 7273 2069 7320 6e6f 7420 4e6f 6e65  ters is not None
-00013f40: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00013f50: 645b 2272 6570 6c79 5f70 6172 616d 6574  d["reply_paramet
-00013f60: 6572 7322 5d20 3d20 6a73 6f6e 2e64 756d  ers"] = json.dum
-00013f70: 7073 2872 6570 6c79 5f70 6172 616d 6574  ps(reply_paramet
-00013f80: 6572 732e 746f 5f64 6963 7428 2929 0a20  ers.to_dict()). 
-00013f90: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-00013fa0: 7570 2069 7320 6e6f 7420 4e6f 6e65 3a0a  up is not None:.
-00013fb0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00013fc0: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
-00013fd0: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
-00013fe0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-00013ff0: 726b 7570 290a 2020 2020 6966 2074 696d  rkup).    if tim
-00014000: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
-00014010: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
-00014020: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
-00014030: 6620 6578 706c 616e 6174 696f 6e5f 656e  f explanation_en
-00014040: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-00014050: 7061 796c 6f61 645b 2265 7870 6c61 6e61  payload["explana
-00014060: 7469 6f6e 5f65 6e74 6974 6965 7322 5d20  tion_entities"] 
-00014070: 3d20 6a73 6f6e 2e64 756d 7073 280a 2020  = json.dumps(.  
-00014080: 2020 2020 2020 2020 2020 7479 7065 732e            types.
-00014090: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
-000140a0: 5f6c 6973 745f 6f66 5f64 6963 7473 2865  _list_of_dicts(e
-000140b0: 7870 6c61 6e61 7469 6f6e 5f65 6e74 6974  xplanation_entit
-000140c0: 6965 7329 0a20 2020 2020 2020 2029 0a20  ies).        ). 
-000140d0: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
-000140e0: 6e74 656e 743a 0a20 2020 2020 2020 2070  ntent:.        p
-000140f0: 6179 6c6f 6164 5b22 7072 6f74 6563 745f  ayload["protect_
-00014100: 636f 6e74 656e 7422 5d20 3d20 7072 6f74  content"] = prot
-00014110: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
-00014120: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
-00014130: 645f 6964 3a0a 2020 2020 2020 2020 7061  d_id:.        pa
-00014140: 796c 6f61 645b 226d 6573 7361 6765 5f74  yload["message_t
-00014150: 6872 6561 645f 6964 225d 203d 206d 6573  hread_id"] = mes
-00014160: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
-00014170: 2020 2069 6620 6275 7369 6e65 7373 5f63     if business_c
-00014180: 6f6e 6e65 6374 696f 6e5f 6964 3a0a 2020  onnection_id:.  
-00014190: 2020 2020 2020 7061 796c 6f61 645b 2262        payload["b
-000141a0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-000141b0: 6f6e 5f69 6422 5d20 3d20 6275 7369 6e65  on_id"] = busine
-000141c0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
-000141d0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-000141e0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-000141f0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00014200: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00014210: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
-00014220: 6620 6372 6561 7465 5f66 6f72 756d 5f74  f create_forum_t
-00014230: 6f70 6963 280a 2020 2020 746f 6b65 6e2c  opic(.    token,
-00014240: 2063 6861 745f 6964 2c20 6e61 6d65 2c20   chat_id, name, 
-00014250: 6963 6f6e 5f63 6f6c 6f72 3d4e 6f6e 652c  icon_color=None,
-00014260: 2069 636f 6e5f 6375 7374 6f6d 5f65 6d6f   icon_custom_emo
-00014270: 6a69 5f69 643d 4e6f 6e65 0a29 3a0a 2020  ji_id=None.):.  
-00014280: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00014290: 2263 7265 6174 6546 6f72 756d 546f 7069  "createForumTopi
-000142a0: 6322 0a20 2020 2070 6179 6c6f 6164 203d  c".    payload =
-000142b0: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
-000142c0: 745f 6964 2c20 226e 616d 6522 3a20 6e61  t_id, "name": na
-000142d0: 6d65 7d0a 2020 2020 6966 2069 636f 6e5f  me}.    if icon_
-000142e0: 636f 6c6f 723a 0a20 2020 2020 2020 2070  color:.        p
-000142f0: 6179 6c6f 6164 5b22 6963 6f6e 5f63 6f6c  ayload["icon_col
-00014300: 6f72 225d 203d 2069 636f 6e5f 636f 6c6f  or"] = icon_colo
-00014310: 720a 2020 2020 6966 2069 636f 6e5f 6375  r.    if icon_cu
-00014320: 7374 6f6d 5f65 6d6f 6a69 5f69 643a 0a20  stom_emoji_id:. 
-00014330: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00014340: 6963 6f6e 5f63 7573 746f 6d5f 656d 6f6a  icon_custom_emoj
-00014350: 695f 6964 225d 203d 2069 636f 6e5f 6375  i_id"] = icon_cu
-00014360: 7374 6f6d 5f65 6d6f 6a69 5f69 640a 2020  stom_emoji_id.  
-00014370: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00014380: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00014390: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-000143a0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-000143b0: 6429 0a0a 0a61 7379 6e63 2064 6566 2065  d)...async def e
-000143c0: 6469 745f 666f 7275 6d5f 746f 7069 6328  dit_forum_topic(
-000143d0: 0a20 2020 2074 6f6b 656e 2c20 6368 6174  .    token, chat
-000143e0: 5f69 642c 206d 6573 7361 6765 5f74 6872  _id, message_thr
-000143f0: 6561 645f 6964 2c20 6e61 6d65 3d4e 6f6e  ead_id, name=Non
-00014400: 652c 2069 636f 6e5f 6375 7374 6f6d 5f65  e, icon_custom_e
-00014410: 6d6f 6a69 5f69 643d 4e6f 6e65 0a29 3a0a  moji_id=None.):.
-00014420: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00014430: 2072 2265 6469 7446 6f72 756d 546f 7069   r"editForumTopi
-00014440: 6322 0a20 2020 2070 6179 6c6f 6164 203d  c".    payload =
-00014450: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
-00014460: 745f 6964 2c20 226d 6573 7361 6765 5f74  t_id, "message_t
-00014470: 6872 6561 645f 6964 223a 206d 6573 7361  hread_id": messa
-00014480: 6765 5f74 6872 6561 645f 6964 7d0a 2020  ge_thread_id}.  
-00014490: 2020 6966 206e 616d 6520 6973 206e 6f74    if name is not
-000144a0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000144b0: 6179 6c6f 6164 5b22 6e61 6d65 225d 203d  ayload["name"] =
-000144c0: 206e 616d 650a 2020 2020 6966 2069 636f   name.    if ico
-000144d0: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
-000144e0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-000144f0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
-00014500: 6963 6f6e 5f63 7573 746f 6d5f 656d 6f6a  icon_custom_emoj
-00014510: 695f 6964 225d 203d 2069 636f 6e5f 6375  i_id"] = icon_cu
-00014520: 7374 6f6d 5f65 6d6f 6a69 5f69 640a 2020  stom_emoji_id.  
-00014530: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00014540: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00014550: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00014560: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00014570: 6429 0a0a 0a61 7379 6e63 2064 6566 2063  d)...async def c
-00014580: 6c6f 7365 5f66 6f72 756d 5f74 6f70 6963  lose_forum_topic
-00014590: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-000145a0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-000145b0: 6964 293a 0a20 2020 206d 6574 686f 645f  id):.    method_
-000145c0: 7572 6c20 3d20 7222 636c 6f73 6546 6f72  url = r"closeFor
-000145d0: 756d 546f 7069 6322 0a20 2020 2070 6179  umTopic".    pay
-000145e0: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-000145f0: 223a 2063 6861 745f 6964 2c20 226d 6573  ": chat_id, "mes
-00014600: 7361 6765 5f74 6872 6561 645f 6964 223a  sage_thread_id":
-00014610: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00014620: 6964 7d0a 2020 2020 7265 7475 726e 2061  id}.    return a
-00014630: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00014640: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00014650: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00014660: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-00014670: 2064 6566 2072 656f 7065 6e5f 666f 7275   def reopen_foru
-00014680: 6d5f 746f 7069 6328 746f 6b65 6e2c 2063  m_topic(token, c
-00014690: 6861 745f 6964 2c20 6d65 7373 6167 655f  hat_id, message_
-000146a0: 7468 7265 6164 5f69 6429 3a0a 2020 2020  thread_id):.    
-000146b0: 6d65 7468 6f64 5f75 726c 203d 2072 2272  method_url = r"r
-000146c0: 656f 7065 6e46 6f72 756d 546f 7069 6322  eopenForumTopic"
-000146d0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-000146e0: 2263 6861 745f 6964 223a 2063 6861 745f  "chat_id": chat_
-000146f0: 6964 2c20 226d 6573 7361 6765 5f74 6872  id, "message_thr
-00014700: 6561 645f 6964 223a 206d 6573 7361 6765  ead_id": message
-00014710: 5f74 6872 6561 645f 6964 7d0a 2020 2020  _thread_id}.    
-00014720: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-00014730: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-00014740: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00014750: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00014760: 0a0a 0a61 7379 6e63 2064 6566 2064 656c  ...async def del
-00014770: 6574 655f 666f 7275 6d5f 746f 7069 6328  ete_forum_topic(
-00014780: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00014790: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-000147a0: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-000147b0: 726c 203d 2072 2264 656c 6574 6546 6f72  rl = r"deleteFor
-000147c0: 756d 546f 7069 6322 0a20 2020 2070 6179  umTopic".    pay
-000147d0: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
-000147e0: 223a 2063 6861 745f 6964 2c20 226d 6573  ": chat_id, "mes
-000147f0: 7361 6765 5f74 6872 6561 645f 6964 223a  sage_thread_id":
-00014800: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00014810: 6964 7d0a 2020 2020 7265 7475 726e 2061  id}.    return a
-00014820: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00014830: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00014840: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00014850: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-00014860: 2064 6566 2075 6e70 696e 5f61 6c6c 5f66   def unpin_all_f
-00014870: 6f72 756d 5f74 6f70 6963 5f6d 6573 7361  orum_topic_messa
-00014880: 6765 7328 746f 6b65 6e2c 2063 6861 745f  ges(token, chat_
-00014890: 6964 2c20 6d65 7373 6167 655f 7468 7265  id, message_thre
-000148a0: 6164 5f69 6429 3a0a 2020 2020 6d65 7468  ad_id):.    meth
-000148b0: 6f64 5f75 726c 203d 2072 2275 6e70 696e  od_url = r"unpin
-000148c0: 416c 6c46 6f72 756d 546f 7069 634d 6573  AllForumTopicMes
-000148d0: 7361 6765 7322 0a20 2020 2070 6179 6c6f  sages".    paylo
-000148e0: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
-000148f0: 2063 6861 745f 6964 2c20 226d 6573 7361   chat_id, "messa
-00014900: 6765 5f74 6872 6561 645f 6964 223a 206d  ge_thread_id": m
-00014910: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00014920: 7d0a 2020 2020 7265 7475 726e 2061 7761  }.    return awa
-00014930: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-00014940: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00014950: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00014960: 796c 6f61 6429 0a0a 0a61 7379 6e63 2064  yload)...async d
-00014970: 6566 2067 6574 5f66 6f72 756d 5f74 6f70  ef get_forum_top
-00014980: 6963 5f69 636f 6e5f 7374 6963 6b65 7273  ic_icon_stickers
-00014990: 2874 6f6b 656e 293a 0a20 2020 206d 6574  (token):.    met
-000149a0: 686f 645f 7572 6c20 3d20 7222 6765 7446  hod_url = r"getF
-000149b0: 6f72 756d 546f 7069 6349 636f 6e53 7469  orumTopicIconSti
-000149c0: 636b 6572 7322 0a20 2020 2072 6574 7572  ckers".    retur
-000149d0: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-000149e0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-000149f0: 6d65 7468 6f64 5f75 726c 290a 0a0a 6173  method_url)...as
-00014a00: 796e 6320 6465 6620 6564 6974 5f67 656e  ync def edit_gen
-00014a10: 6572 616c 5f66 6f72 756d 5f74 6f70 6963  eral_forum_topic
-00014a20: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-00014a30: 206e 616d 6529 3a0a 2020 2020 6d65 7468   name):.    meth
-00014a40: 6f64 5f75 726c 203d 2072 2265 6469 7447  od_url = r"editG
-00014a50: 656e 6572 616c 466f 7275 6d54 6f70 6963  eneralForumTopic
-00014a60: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00014a70: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
-00014a80: 5f69 642c 2022 6e61 6d65 223a 206e 616d  _id, "name": nam
-00014a90: 657d 0a20 2020 2072 6574 7572 6e20 6177  e}.    return aw
-00014aa0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-00014ab0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00014ac0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00014ad0: 6179 6c6f 6164 290a 0a0a 6173 796e 6320  ayload)...async 
-00014ae0: 6465 6620 636c 6f73 655f 6765 6e65 7261  def close_genera
-00014af0: 6c5f 666f 7275 6d5f 746f 7069 6328 746f  l_forum_topic(to
-00014b00: 6b65 6e2c 2063 6861 745f 6964 293a 0a20  ken, chat_id):. 
-00014b10: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00014b20: 7222 636c 6f73 6547 656e 6572 616c 466f  r"closeGeneralFo
-00014b30: 7275 6d54 6f70 6963 220a 2020 2020 7061  rumTopic".    pa
-00014b40: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-00014b50: 6422 3a20 6368 6174 5f69 647d 0a20 2020  d": chat_id}.   
-00014b60: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00014b70: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00014b80: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00014b90: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00014ba0: 290a 0a0a 6173 796e 6320 6465 6620 7265  )...async def re
-00014bb0: 6f70 656e 5f67 656e 6572 616c 5f66 6f72  open_general_for
-00014bc0: 756d 5f74 6f70 6963 2874 6f6b 656e 2c20  um_topic(token, 
-00014bd0: 6368 6174 5f69 6429 3a0a 2020 2020 6d65  chat_id):.    me
-00014be0: 7468 6f64 5f75 726c 203d 2072 2272 656f  thod_url = r"reo
-00014bf0: 7065 6e47 656e 6572 616c 466f 7275 6d54  penGeneralForumT
-00014c00: 6f70 6963 220a 2020 2020 7061 796c 6f61  opic".    payloa
-00014c10: 6420 3d20 7b22 6368 6174 5f69 6422 3a20  d = {"chat_id": 
-00014c20: 6368 6174 5f69 647d 0a20 2020 2072 6574  chat_id}.    ret
-00014c30: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-00014c40: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-00014c50: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00014c60: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00014c70: 6173 796e 6320 6465 6620 6869 6465 5f67  async def hide_g
-00014c80: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
-00014c90: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
-00014ca0: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-00014cb0: 726c 203d 2072 2268 6964 6547 656e 6572  rl = r"hideGener
-00014cc0: 616c 466f 7275 6d54 6f70 6963 220a 2020  alForumTopic".  
-00014cd0: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
-00014ce0: 6174 5f69 6422 3a20 6368 6174 5f69 647d  at_id": chat_id}
-00014cf0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00014d00: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00014d10: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00014d20: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00014d30: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
-00014d40: 6620 756e 6869 6465 5f67 656e 6572 616c  f unhide_general
-00014d50: 5f66 6f72 756d 5f74 6f70 6963 2874 6f6b  _forum_topic(tok
-00014d60: 656e 2c20 6368 6174 5f69 6429 3a0a 2020  en, chat_id):.  
-00014d70: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00014d80: 2275 6e68 6964 6547 656e 6572 616c 466f  "unhideGeneralFo
-00014d90: 7275 6d54 6f70 6963 220a 2020 2020 7061  rumTopic".    pa
-00014da0: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
-00014db0: 6422 3a20 6368 6174 5f69 647d 0a20 2020  d": chat_id}.   
-00014dc0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00014dd0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00014de0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00014df0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00014e00: 290a 0a0a 6173 796e 6320 6465 6620 6465  )...async def de
-00014e10: 6c65 7465 5f6d 6573 7361 6765 7328 746f  lete_messages(to
-00014e20: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
-00014e30: 7373 6167 655f 6964 7329 3a0a 2020 2020  ssage_ids):.    
-00014e40: 6d65 7468 6f64 5f75 726c 203d 2022 6465  method_url = "de
-00014e50: 6c65 7465 4d65 7373 6167 6573 220a 2020  leteMessages".  
-00014e60: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
-00014e70: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
-00014e80: 2022 6d65 7373 6167 655f 6964 7322 3a20   "message_ids": 
-00014e90: 6a73 6f6e 2e64 756d 7073 286d 6573 7361  json.dumps(messa
-00014ea0: 6765 5f69 6473 297d 0a20 2020 2072 6574  ge_ids)}.    ret
-00014eb0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-00014ec0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-00014ed0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00014ee0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00014ef0: 6173 796e 6320 6465 6620 666f 7277 6172  async def forwar
-00014f00: 645f 6d65 7373 6167 6573 280a 2020 2020  d_messages(.    
-00014f10: 746f 6b65 6e2c 0a20 2020 2063 6861 745f  token,.    chat_
-00014f20: 6964 2c0a 2020 2020 6672 6f6d 5f63 6861  id,.    from_cha
-00014f30: 745f 6964 2c0a 2020 2020 6d65 7373 6167  t_id,.    messag
-00014f40: 655f 6964 732c 0a20 2020 2064 6973 6162  e_ids,.    disab
-00014f50: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00014f60: 4e6f 6e65 2c0a 2020 2020 6d65 7373 6167  None,.    messag
-00014f70: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
-00014f80: 2c0a 2020 2020 7072 6f74 6563 745f 636f  ,.    protect_co
-00014f90: 6e74 656e 743d 4e6f 6e65 2c0a 293a 0a20  ntent=None,.):. 
-00014fa0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00014fb0: 2266 6f72 7761 7264 4d65 7373 6167 6573  "forwardMessages
-00014fc0: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
-00014fd0: 7b0a 2020 2020 2020 2020 2263 6861 745f  {.        "chat_
-00014fe0: 6964 223a 2063 6861 745f 6964 2c0a 2020  id": chat_id,.  
-00014ff0: 2020 2020 2020 2266 726f 6d5f 6368 6174        "from_chat
-00015000: 5f69 6422 3a20 6672 6f6d 5f63 6861 745f  _id": from_chat_
-00015010: 6964 2c0a 2020 2020 2020 2020 226d 6573  id,.        "mes
-00015020: 7361 6765 5f69 6473 223a 206a 736f 6e2e  sage_ids": json.
-00015030: 6475 6d70 7328 6d65 7373 6167 655f 6964  dumps(message_id
-00015040: 7329 2c0a 2020 2020 7d0a 2020 2020 6966  s),.    }.    if
-00015050: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00015060: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00015070: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00015080: 6164 5b22 6469 7361 626c 655f 6e6f 7469  ad["disable_noti
-00015090: 6669 6361 7469 6f6e 225d 203d 2064 6973  fication"] = dis
-000150a0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-000150b0: 6e0a 2020 2020 6966 206d 6573 7361 6765  n.    if message
-000150c0: 5f74 6872 6561 645f 6964 2069 7320 6e6f  _thread_id is no
-000150d0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000150e0: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
-000150f0: 5f74 6872 6561 645f 6964 225d 203d 206d  _thread_id"] = m
-00015100: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00015110: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
-00015120: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
-00015130: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00015140: 6c6f 6164 5b22 7072 6f74 6563 745f 636f  load["protect_co
-00015150: 6e74 656e 7422 5d20 3d20 7072 6f74 6563  ntent"] = protec
-00015160: 745f 636f 6e74 656e 740a 0a20 2020 2072  t_content..    r
-00015170: 6573 756c 7420 3d20 6177 6169 7420 5f70  esult = await _p
-00015180: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00015190: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000151a0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000151b0: 290a 2020 2020 7265 7475 726e 2072 6573  ).    return res
-000151c0: 756c 740a 0a0a 6173 796e 6320 6465 6620  ult...async def 
-000151d0: 636f 7079 5f6d 6573 7361 6765 7328 0a20  copy_messages(. 
-000151e0: 2020 2074 6f6b 656e 2c0a 2020 2020 6368     token,.    ch
-000151f0: 6174 5f69 642c 0a20 2020 2066 726f 6d5f  at_id,.    from_
-00015200: 6368 6174 5f69 642c 0a20 2020 206d 6573  chat_id,.    mes
-00015210: 7361 6765 5f69 6473 2c0a 2020 2020 6469  sage_ids,.    di
-00015220: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00015230: 6f6e 3d4e 6f6e 652c 0a20 2020 206d 6573  on=None,.    mes
-00015240: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
-00015250: 6f6e 652c 0a20 2020 2070 726f 7465 6374  one,.    protect
-00015260: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 0a20  _content=None,. 
-00015270: 2020 2072 656d 6f76 655f 6361 7074 696f     remove_captio
-00015280: 6e3d 4e6f 6e65 2c0a 293a 0a20 2020 206d  n=None,.):.    m
-00015290: 6574 686f 645f 7572 6c20 3d20 2263 6f70  ethod_url = "cop
-000152a0: 794d 6573 7361 6765 7322 0a20 2020 2070  yMessages".    p
-000152b0: 6179 6c6f 6164 203d 207b 0a20 2020 2020  ayload = {.     
-000152c0: 2020 2022 6368 6174 5f69 6422 3a20 6368     "chat_id": ch
-000152d0: 6174 5f69 642c 0a20 2020 2020 2020 2022  at_id,.        "
-000152e0: 6672 6f6d 5f63 6861 745f 6964 223a 2066  from_chat_id": f
-000152f0: 726f 6d5f 6368 6174 5f69 642c 0a20 2020  rom_chat_id,.   
-00015300: 2020 2020 2022 6d65 7373 6167 655f 6964       "message_id
-00015310: 7322 3a20 6a73 6f6e 2e64 756d 7073 286d  s": json.dumps(m
-00015320: 6573 7361 6765 5f69 6473 292c 0a20 2020  essage_ids),.   
-00015330: 207d 0a20 2020 2069 6620 6469 7361 626c   }.    if disabl
-00015340: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-00015350: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00015360: 2020 2020 7061 796c 6f61 645b 2264 6973      payload["dis
-00015370: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00015380: 6e22 5d20 3d20 6469 7361 626c 655f 6e6f  n"] = disable_no
-00015390: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-000153a0: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
-000153b0: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
-000153c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000153d0: 5b22 6d65 7373 6167 655f 7468 7265 6164  ["message_thread
-000153e0: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
-000153f0: 7468 7265 6164 5f69 640a 2020 2020 6966  thread_id.    if
-00015400: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00015410: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00015420: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
-00015430: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
-00015440: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00015450: 6e74 0a20 2020 2069 6620 7265 6d6f 7665  nt.    if remove
-00015460: 5f63 6170 7469 6f6e 2069 7320 6e6f 7420  _caption is not 
-00015470: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00015480: 796c 6f61 645b 2272 656d 6f76 655f 6361  yload["remove_ca
-00015490: 7074 696f 6e22 5d20 3d20 7265 6d6f 7665  ption"] = remove
-000154a0: 5f63 6170 7469 6f6e 0a0a 2020 2020 7265  _caption..    re
-000154b0: 7375 6c74 203d 2061 7761 6974 205f 7072  sult = await _pr
-000154c0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-000154d0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-000154e0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-000154f0: 0a20 2020 2072 6574 7572 6e20 7265 7375  .    return resu
-00015500: 6c74 0a0a 0a61 7379 6e63 2064 6566 205f  lt...async def _
-00015510: 636f 6e76 6572 745f 6c69 7374 5f6a 736f  convert_list_jso
-00015520: 6e5f 7365 7269 616c 697a 6162 6c65 2872  n_serializable(r
-00015530: 6573 756c 7473 293a 0a20 2020 2072 6574  esults):.    ret
-00015540: 203d 2022 220a 2020 2020 666f 7220 7220   = "".    for r 
-00015550: 696e 2072 6573 756c 7473 3a0a 2020 2020  in results:.    
-00015560: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00015570: 6528 722c 2074 7970 6573 2e4a 736f 6e53  e(r, types.JsonS
-00015580: 6572 6961 6c69 7a61 626c 6529 3a0a 2020  erializable):.  
-00015590: 2020 2020 2020 2020 2020 7265 7420 3d20            ret = 
-000155a0: 7265 7420 2b20 722e 746f 5f6a 736f 6e28  ret + r.to_json(
-000155b0: 2920 2b20 222c 220a 2020 2020 6966 206c  ) + ",".    if l
-000155c0: 656e 2872 6574 2920 3e20 303a 0a20 2020  en(ret) > 0:.   
-000155d0: 2020 2020 2072 6574 203d 2072 6574 5b3a       ret = ret[:
-000155e0: 2d31 5d0a 2020 2020 7265 7475 726e 2022  -1].    return "
-000155f0: 5b22 202b 2072 6574 202b 2022 5d22 0a0a  [" + ret + "]"..
-00015600: 0a61 7379 6e63 2064 6566 205f 636f 6e76  .async def _conv
-00015610: 6572 745f 706f 6c6c 5f6f 7074 696f 6e73  ert_poll_options
-00015620: 2870 6f6c 6c5f 6f70 7469 6f6e 7329 3a0a  (poll_options):.
-00015630: 2020 2020 6966 2070 6f6c 6c5f 6f70 7469      if poll_opti
-00015640: 6f6e 7320 6973 204e 6f6e 653a 0a20 2020  ons is None:.   
-00015650: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00015660: 0a20 2020 2065 6c69 6620 6c65 6e28 706f  .    elif len(po
-00015670: 6c6c 5f6f 7074 696f 6e73 2920 3d3d 2030  ll_options) == 0
-00015680: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00015690: 205b 5d0a 2020 2020 656c 6966 2069 7369   [].    elif isi
-000156a0: 6e73 7461 6e63 6528 706f 6c6c 5f6f 7074  nstance(poll_opt
-000156b0: 696f 6e73 5b30 5d2c 2073 7472 293a 0a20  ions[0], str):. 
-000156c0: 2020 2020 2020 2023 2043 6f6d 7061 7469         # Compati
-000156d0: 6269 6c69 7479 206d 6f64 6520 7769 7468  bility mode with
-000156e0: 2070 7265 7669 6f75 7320 6275 6720 7768   previous bug wh
-000156f0: 656e 206f 6e6c 7920 6c69 7374 206f 6620  en only list of 
-00015700: 7374 7269 6e67 2077 6173 2061 6363 6570  string was accep
-00015710: 7465 6420 6173 2070 6f6c 6c5f 6f70 7469  ted as poll_opti
-00015720: 6f6e 730a 2020 2020 2020 2020 7265 7475  ons.        retu
-00015730: 726e 2070 6f6c 6c5f 6f70 7469 6f6e 730a  rn poll_options.
-00015740: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00015750: 6e63 6528 706f 6c6c 5f6f 7074 696f 6e73  nce(poll_options
-00015760: 5b30 5d2c 2074 7970 6573 2e50 6f6c 6c4f  [0], types.PollO
-00015770: 7074 696f 6e29 3a0a 2020 2020 2020 2020  ption):.        
-00015780: 7265 7475 726e 205b 6f70 7469 6f6e 2e74  return [option.t
-00015790: 6578 7420 666f 7220 6f70 7469 6f6e 2069  ext for option i
-000157a0: 6e20 706f 6c6c 5f6f 7074 696f 6e73 5d0a  n poll_options].
-000157b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000157c0: 2020 7265 7475 726e 2070 6f6c 6c5f 6f70    return poll_op
-000157d0: 7469 6f6e 730a 0a0a 6173 796e 6320 6465  tions...async de
-000157e0: 6620 636f 6e76 6572 745f 696e 7075 745f  f convert_input_
-000157f0: 6d65 6469 6128 6d65 6469 6129 3a0a 2020  media(media):.  
-00015800: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00015810: 6d65 6469 612c 2074 7970 6573 2e49 6e70  media, types.Inp
-00015820: 7574 4d65 6469 6129 3a0a 2020 2020 2020  utMedia):.      
-00015830: 2020 7265 7475 726e 206d 6564 6961 2e63    return media.c
-00015840: 6f6e 7665 7274 5f69 6e70 7574 5f6d 6564  onvert_input_med
-00015850: 6961 2829 0a20 2020 2072 6574 7572 6e20  ia().    return 
-00015860: 4e6f 6e65 2c20 4e6f 6e65 0a0a 0a61 7379  None, None...asy
-00015870: 6e63 2064 6566 2063 6f6e 7665 7274 5f69  nc def convert_i
-00015880: 6e70 7574 5f6d 6564 6961 5f61 7272 6179  nput_media_array
-00015890: 2861 7272 6179 293a 0a20 2020 206d 6564  (array):.    med
-000158a0: 6961 203d 205b 5d0a 2020 2020 6669 6c65  ia = [].    file
-000158b0: 7320 3d20 7b7d 0a20 2020 2066 6f72 2069  s = {}.    for i
-000158c0: 6e70 7574 5f6d 6564 6961 2069 6e20 6172  nput_media in ar
-000158d0: 7261 793a 0a20 2020 2020 2020 2069 6620  ray:.        if 
-000158e0: 6973 696e 7374 616e 6365 2869 6e70 7574  isinstance(input
-000158f0: 5f6d 6564 6961 2c20 7479 7065 732e 496e  _media, types.In
-00015900: 7075 744d 6564 6961 293a 0a20 2020 2020  putMedia):.     
-00015910: 2020 2020 2020 206d 6564 6961 5f64 6963         media_dic
-00015920: 7420 3d20 696e 7075 745f 6d65 6469 612e  t = input_media.
-00015930: 746f 5f64 6963 7428 290a 2020 2020 2020  to_dict().      
-00015940: 2020 2020 2020 6966 206d 6564 6961 5f64        if media_d
-00015950: 6963 745b 226d 6564 6961 225d 2e73 7461  ict["media"].sta
-00015960: 7274 7377 6974 6828 2261 7474 6163 683a  rtswith("attach:
-00015970: 2f2f 2229 3a0a 2020 2020 2020 2020 2020  //"):.          
-00015980: 2020 2020 2020 6b65 7920 3d20 6d65 6469        key = medi
-00015990: 615f 6469 6374 5b22 6d65 6469 6122 5d2e  a_dict["media"].
-000159a0: 7265 706c 6163 6528 2261 7474 6163 683a  replace("attach:
-000159b0: 2f2f 222c 2022 2229 0a20 2020 2020 2020  //", "").       
-000159c0: 2020 2020 2020 2020 2066 696c 6573 5b6b           files[k
-000159d0: 6579 5d20 3d20 696e 7075 745f 6d65 6469  ey] = input_medi
-000159e0: 612e 6d65 6469 610a 2020 2020 2020 2020  a.media.        
-000159f0: 2020 2020 6d65 6469 612e 6170 7065 6e64      media.append
-00015a00: 286d 6564 6961 5f64 6963 7429 0a20 2020  (media_dict).   
-00015a10: 2072 6574 7572 6e20 6a73 6f6e 2e64 756d   return json.dum
-00015a20: 7073 286d 6564 6961 292c 2066 696c 6573  ps(media), files
-00015a30: 0a0a 0a61 7379 6e63 2064 6566 205f 6e6f  ...async def _no
-00015a40: 5f65 6e63 6f64 6528 6675 6e63 293a 0a20  _encode(func):. 
-00015a50: 2020 2064 6566 2077 7261 7070 6572 286b     def wrapper(k
-00015a60: 6579 2c20 7661 6c29 3a0a 2020 2020 2020  ey, val):.      
-00015a70: 2020 6966 206b 6579 203d 3d20 2266 696c    if key == "fil
-00015a80: 656e 616d 6522 3a0a 2020 2020 2020 2020  ename":.        
-00015a90: 2020 2020 7265 7475 726e 2022 7b30 7d3d      return "{0}=
-00015aa0: 7b31 7d22 2e66 6f72 6d61 7428 6b65 792c  {1}".format(key,
-00015ab0: 2076 616c 290a 2020 2020 2020 2020 656c   val).        el
-00015ac0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00015ad0: 7265 7475 726e 2066 756e 6328 6b65 792c  return func(key,
-00015ae0: 2076 616c 290a 0a20 2020 2072 6574 7572   val)..    retur
-00015af0: 6e20 7772 6170 7065 720a 0a0a 6173 796e  n wrapper...asyn
-00015b00: 6320 6465 6620 7374 6f70 5f70 6f6c 6c28  c def stop_poll(
-00015b10: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00015b20: 6d65 7373 6167 655f 6964 2c20 7265 706c  message_id, repl
-00015b30: 795f 6d61 726b 7570 3d4e 6f6e 6529 3a0a  y_markup=None):.
-00015b40: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00015b50: 2072 2273 746f 7050 6f6c 6c22 0a20 2020   r"stopPoll".   
-00015b60: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
-00015b70: 745f 6964 223a 2073 7472 2863 6861 745f  t_id": str(chat_
-00015b80: 6964 292c 2022 6d65 7373 6167 655f 6964  id), "message_id
-00015b90: 223a 206d 6573 7361 6765 5f69 647d 0a20  ": message_id}. 
-00015ba0: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-00015bb0: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
-00015bc0: 6f61 645b 2272 6570 6c79 5f6d 6172 6b75  oad["reply_marku
-00015bd0: 7022 5d20 3d20 6177 6169 7420 5f63 6f6e  p"] = await _con
-00015be0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
-00015bf0: 795f 6d61 726b 7570 290a 2020 2020 7265  y_markup).    re
-00015c00: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-00015c10: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-00015c20: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00015c30: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-00015c40: 0a23 2065 7863 6570 7469 6f6e 730a 636c  .# exceptions.cl
-00015c50: 6173 7320 4170 6945 7863 6570 7469 6f6e  ass ApiException
-00015c60: 2845 7863 6570 7469 6f6e 293a 0a20 2020  (Exception):.   
-00015c70: 2022 2222 0a20 2020 2054 6869 7320 636c   """.    This cl
-00015c80: 6173 7320 7265 7072 6573 656e 7473 2061  ass represents a
-00015c90: 2062 6173 6520 4578 6365 7074 696f 6e20   base Exception 
-00015ca0: 7468 726f 776e 2077 6865 6e20 6120 6361  thrown when a ca
-00015cb0: 6c6c 2074 6f20 7468 6520 5465 6c65 6772  ll to the Telegr
-00015cc0: 616d 2041 5049 2066 6169 6c73 2e0a 2020  am API fails..  
-00015cd0: 2020 496e 2061 6464 6974 696f 6e20 746f    In addition to
-00015ce0: 2061 6e20 696e 666f 726d 6174 6976 6520   an informative 
-00015cf0: 6d65 7373 6167 652c 2069 7420 6861 7320  message, it has 
-00015d00: 6120 6066 756e 6374 696f 6e5f 6e61 6d65  a `function_name
-00015d10: 6020 616e 6420 6120 6072 6573 756c 7460  ` and a `result`
-00015d20: 2061 7474 7269 6275 7465 2c20 7768 6963   attribute, whic
-00015d30: 6820 7265 7370 6563 7469 7665 6c79 0a20  h respectively. 
-00015d40: 2020 2063 6f6e 7461 696e 2074 6865 206e     contain the n
-00015d50: 616d 6520 6f66 2074 6865 2066 6169 6c65  ame of the faile
-00015d60: 6420 6675 6e63 7469 6f6e 2061 6e64 2074  d function and t
-00015d70: 6865 2072 6574 7572 6e65 6420 7265 7375  he returned resu
-00015d80: 6c74 2074 6861 7420 6d61 6465 2074 6865  lt that made the
-00015d90: 2066 756e 6374 696f 6e20 746f 2062 6520   function to be 
-00015da0: 636f 6e73 6964 6572 6564 2020 6173 0a20  considered  as. 
-00015db0: 2020 2066 6169 6c65 642e 0a20 2020 2022     failed..    "
-00015dc0: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
-00015dd0: 6974 5f5f 2873 656c 662c 206d 7367 2c20  it__(self, msg, 
-00015de0: 6675 6e63 7469 6f6e 5f6e 616d 652c 2072  function_name, r
-00015df0: 6573 756c 7429 3a0a 2020 2020 2020 2020  esult):.        
-00015e00: 7375 7065 7228 4170 6945 7863 6570 7469  super(ApiExcepti
-00015e10: 6f6e 2c20 7365 6c66 292e 5f5f 696e 6974  on, self).__init
-00015e20: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
-00015e30: 2241 2072 6571 7565 7374 2074 6f20 7468  "A request to th
-00015e40: 6520 5465 6c65 6772 616d 2041 5049 2077  e Telegram API w
-00015e50: 6173 2075 6e73 7563 6365 7373 6675 6c2e  as unsuccessful.
-00015e60: 207b 307d 222e 666f 726d 6174 286d 7367   {0}".format(msg
-00015e70: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00015e80: 2020 2020 7365 6c66 2e66 756e 6374 696f      self.functio
-00015e90: 6e5f 6e61 6d65 203d 2066 756e 6374 696f  n_name = functio
-00015ea0: 6e5f 6e61 6d65 0a20 2020 2020 2020 2073  n_name.        s
-00015eb0: 656c 662e 7265 7375 6c74 203d 2072 6573  elf.result = res
-00015ec0: 756c 740a 0a0a 636c 6173 7320 4170 6948  ult...class ApiH
-00015ed0: 5454 5045 7863 6570 7469 6f6e 2841 7069  TTPException(Api
-00015ee0: 4578 6365 7074 696f 6e29 3a0a 2020 2020  Exception):.    
-00015ef0: 2222 220a 2020 2020 5468 6973 2063 6c61  """.    This cla
-00015f00: 7373 2072 6570 7265 7365 6e74 7320 616e  ss represents an
-00015f10: 2045 7863 6570 7469 6f6e 2074 6872 6f77   Exception throw
-00015f20: 6e20 7768 656e 2061 2063 616c 6c20 746f  n when a call to
-00015f30: 2074 6865 0a20 2020 2054 656c 6567 7261   the.    Telegra
-00015f40: 6d20 4150 4920 7365 7276 6572 2072 6574  m API server ret
-00015f50: 7572 6e73 2048 5454 5020 636f 6465 2074  urns HTTP code t
-00015f60: 6861 7420 6973 206e 6f74 2032 3030 2e0a  hat is not 200..
-00015f70: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
-00015f80: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00015f90: 6675 6e63 7469 6f6e 5f6e 616d 652c 2072  function_name, r
-00015fa0: 6573 756c 743a 2061 696f 6874 7470 2e43  esult: aiohttp.C
-00015fb0: 6c69 656e 7452 6573 706f 6e73 6529 3a0a  lientResponse):.
-00015fc0: 2020 2020 2020 2020 7375 7065 7228 4170          super(Ap
-00015fd0: 6948 5454 5045 7863 6570 7469 6f6e 2c20  iHTTPException, 
-00015fe0: 7365 6c66 292e 5f5f 696e 6974 5f5f 280a  self).__init__(.
-00015ff0: 2020 2020 2020 2020 2020 2020 2254 6865              "The
-00016000: 2073 6572 7665 7220 7265 7475 726e 6564   server returned
-00016010: 2048 5454 5020 7b30 7d20 7b31 7d2e 2052   HTTP {0} {1}. R
-00016020: 6573 706f 6e73 6520 626f 6479 3a5c 6e5b  esponse body:\n[
-00016030: 7b32 7d5d 222e 666f 726d 6174 280a 2020  {2}]".format(.  
-00016040: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00016050: 7375 6c74 2e73 7461 7475 732c 2072 6573  sult.status, res
-00016060: 756c 742e 7265 6173 6f6e 2c20 7265 7375  ult.reason, resu
-00016070: 6c74 2e72 6571 7565 7374 5f69 6e66 6f0a  lt.request_info.
-00016080: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-00016090: 2020 2020 2020 2020 2020 2066 756e 6374             funct
-000160a0: 696f 6e5f 6e61 6d65 2c0a 2020 2020 2020  ion_name,.      
-000160b0: 2020 2020 2020 7265 7375 6c74 2c0a 2020        result,.  
-000160c0: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
-000160d0: 4170 6949 6e76 616c 6964 4a53 4f4e 4578  ApiInvalidJSONEx
-000160e0: 6365 7074 696f 6e28 4170 6945 7863 6570  ception(ApiExcep
-000160f0: 7469 6f6e 293a 0a20 2020 2022 2222 0a20  tion):.    """. 
-00016100: 2020 2054 6869 7320 636c 6173 7320 7265     This class re
-00016110: 7072 6573 656e 7473 2061 6e20 4578 6365  presents an Exce
-00016120: 7074 696f 6e20 7468 726f 776e 2077 6865  ption thrown whe
-00016130: 6e20 6120 6361 6c6c 2074 6f20 7468 650a  n a call to the.
-00016140: 2020 2020 5465 6c65 6772 616d 2041 5049      Telegram API
-00016150: 2073 6572 7665 7220 7265 7475 726e 7320   server returns 
-00016160: 696e 7661 6c69 6420 6a73 6f6e 2e0a 2020  invalid json..  
-00016170: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
-00016180: 5f69 6e69 745f 5f28 7365 6c66 2c20 6675  _init__(self, fu
-00016190: 6e63 7469 6f6e 5f6e 616d 652c 2072 6573  nction_name, res
-000161a0: 756c 7429 3a0a 2020 2020 2020 2020 7375  ult):.        su
-000161b0: 7065 7228 4170 6949 6e76 616c 6964 4a53  per(ApiInvalidJS
-000161c0: 4f4e 4578 6365 7074 696f 6e2c 2073 656c  ONException, sel
-000161d0: 6629 2e5f 5f69 6e69 745f 5f28 0a20 2020  f).__init__(.   
-000161e0: 2020 2020 2020 2020 2022 5468 6520 7365           "The se
-000161f0: 7276 6572 2072 6574 7572 6e65 6420 616e  rver returned an
-00016200: 2069 6e76 616c 6964 204a 534f 4e20 7265   invalid JSON re
-00016210: 7370 6f6e 7365 2e20 5265 7370 6f6e 7365  sponse. Response
-00016220: 2062 6f64 793a 5c6e 5b7b 307d 5d22 2e66   body:\n[{0}]".f
-00016230: 6f72 6d61 7428 0a20 2020 2020 2020 2020  ormat(.         
-00016240: 2020 2020 2020 2072 6573 756c 740a 2020         result.  
-00016250: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
-00016260: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-00016270: 6e5f 6e61 6d65 2c0a 2020 2020 2020 2020  n_name,.        
-00016280: 2020 2020 7265 7375 6c74 2c0a 2020 2020      result,.    
-00016290: 2020 2020 290a 0a0a 636c 6173 7320 4170      )...class Ap
-000162a0: 6954 656c 6567 7261 6d45 7863 6570 7469  iTelegramExcepti
-000162b0: 6f6e 2841 7069 4578 6365 7074 696f 6e29  on(ApiException)
-000162c0: 3a0a 2020 2020 2222 220a 2020 2020 5468  :.    """.    Th
-000162d0: 6973 2063 6c61 7373 2072 6570 7265 7365  is class represe
-000162e0: 6e74 7320 616e 2045 7863 6570 7469 6f6e  nts an Exception
-000162f0: 2074 6872 6f77 6e20 7768 656e 2061 2054   thrown when a T
-00016300: 656c 6567 7261 6d20 4150 4920 7265 7475  elegram API retu
-00016310: 726e 7320 6572 726f 7220 636f 6465 2e0a  rns error code..
-00016320: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
-00016330: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00016340: 6675 6e63 7469 6f6e 5f6e 616d 652c 2072  function_name, r
-00016350: 6573 756c 742c 2072 6573 756c 745f 6a73  esult, result_js
-00016360: 6f6e 293a 0a20 2020 2020 2020 2073 7570  on):.        sup
-00016370: 6572 2841 7069 5465 6c65 6772 616d 4578  er(ApiTelegramEx
-00016380: 6365 7074 696f 6e2c 2073 656c 6629 2e5f  ception, self)._
-00016390: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-000163a0: 2020 2020 2022 4572 726f 7220 636f 6465       "Error code
-000163b0: 3a20 7b30 7d2e 2044 6573 6372 6970 7469  : {0}. Descripti
-000163c0: 6f6e 3a20 7b31 7d22 2e66 6f72 6d61 7428  on: {1}".format(
-000163d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000163e0: 2072 6573 756c 745f 6a73 6f6e 5b22 6572   result_json["er
-000163f0: 726f 725f 636f 6465 225d 2c20 7265 7375  ror_code"], resu
-00016400: 6c74 5f6a 736f 6e5b 2264 6573 6372 6970  lt_json["descrip
-00016410: 7469 6f6e 225d 0a20 2020 2020 2020 2020  tion"].         
-00016420: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
-00016430: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
-00016440: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00016450: 756c 742c 0a20 2020 2020 2020 2029 0a20  ult,.        ). 
-00016460: 2020 2020 2020 2073 656c 662e 7265 7375         self.resu
-00016470: 6c74 5f6a 736f 6e20 3d20 7265 7375 6c74  lt_json = result
-00016480: 5f6a 736f 6e0a 2020 2020 2020 2020 7365  _json.        se
-00016490: 6c66 2e65 7272 6f72 5f63 6f64 6520 3d20  lf.error_code = 
-000164a0: 7265 7375 6c74 5f6a 736f 6e5b 2265 7272  result_json["err
-000164b0: 6f72 5f63 6f64 6522 5d0a 2020 2020 2020  or_code"].      
-000164c0: 2020 7365 6c66 2e64 6573 6372 6970 7469    self.descripti
-000164d0: 6f6e 203d 2072 6573 756c 745f 6a73 6f6e  on = result_json
-000164e0: 5b22 6465 7363 7269 7074 696f 6e22 5d0a  ["description"].
-000164f0: 0a0a 636c 6173 7320 5265 7175 6573 7454  ..class RequestT
-00016500: 696d 656f 7574 2845 7863 6570 7469 6f6e  imeout(Exception
-00016510: 293a 0a20 2020 2022 2222 0a20 2020 2054  ):.    """.    T
-00016520: 6869 7320 636c 6173 7320 7265 7072 6573  his class repres
-00016530: 656e 7473 2061 2072 6571 7565 7374 2074  ents a request t
-00016540: 696d 656f 7574 2e0a 2020 2020 2222 220a  imeout..    """.
-00016550: 0a20 2020 2070 6173 730a                 .    pass.
+0000a8b0: 6368 6174 7320 6973 206e 6f74 204e 6f6e  chats is not Non
+0000a8c0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000a8d0: 6164 5b22 6361 6e5f 6d61 6e61 6765 5f76  ad["can_manage_v
+0000a8e0: 6964 656f 5f63 6861 7473 225d 203d 2063  ideo_chats"] = c
+0000a8f0: 616e 5f6d 616e 6167 655f 7669 6465 6f5f  an_manage_video_
+0000a900: 6368 6174 730a 2020 2020 6966 2063 616e  chats.    if can
+0000a910: 5f6d 616e 6167 655f 746f 7069 6373 2069  _manage_topics i
+0000a920: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a930: 2020 2020 7061 796c 6f61 645b 2263 616e      payload["can
+0000a940: 5f6d 616e 6167 655f 746f 7069 6373 225d  _manage_topics"]
+0000a950: 203d 2063 616e 5f6d 616e 6167 655f 746f   = can_manage_to
+0000a960: 7069 6373 0a20 2020 2069 6620 6361 6e5f  pics.    if can_
+0000a970: 706f 7374 5f73 746f 7269 6573 2069 7320  post_stories is 
+0000a980: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000a990: 2020 7061 796c 6f61 645b 2263 616e 5f70    payload["can_p
+0000a9a0: 6f73 745f 7374 6f72 6965 7322 5d20 3d20  ost_stories"] = 
+0000a9b0: 6361 6e5f 706f 7374 5f73 746f 7269 6573  can_post_stories
+0000a9c0: 0a20 2020 2069 6620 6361 6e5f 6564 6974  .    if can_edit
+0000a9d0: 5f73 746f 7269 6573 2069 7320 6e6f 7420  _stories is not 
+0000a9e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000a9f0: 796c 6f61 645b 2263 616e 5f65 6469 745f  yload["can_edit_
+0000aa00: 7374 6f72 6965 7322 5d20 3d20 6361 6e5f  stories"] = can_
+0000aa10: 6564 6974 5f73 746f 7269 6573 0a20 2020  edit_stories.   
+0000aa20: 2069 6620 6361 6e5f 6465 6c65 7465 5f73   if can_delete_s
+0000aa30: 746f 7269 6573 2069 7320 6e6f 7420 4e6f  tories is not No
+0000aa40: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000aa50: 6f61 645b 2263 616e 5f64 656c 6574 655f  oad["can_delete_
+0000aa60: 7374 6f72 6965 7322 5d20 3d20 6361 6e5f  stories"] = can_
+0000aa70: 6465 6c65 7465 5f73 746f 7269 6573 0a20  delete_stories. 
+0000aa80: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000aa90: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000aaa0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000aab0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000aac0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+0000aad0: 2229 0a0a 0a61 7379 6e63 2064 6566 2073  ")...async def s
+0000aae0: 6574 5f63 6861 745f 6164 6d69 6e69 7374  et_chat_administ
+0000aaf0: 7261 746f 725f 6375 7374 6f6d 5f74 6974  rator_custom_tit
+0000ab00: 6c65 2874 6f6b 656e 2c20 6368 6174 5f69  le(token, chat_i
+0000ab10: 642c 2075 7365 725f 6964 2c20 6375 7374  d, user_id, cust
+0000ab20: 6f6d 5f74 6974 6c65 293a 0a20 2020 206d  om_title):.    m
+0000ab30: 6574 686f 645f 7572 6c20 3d20 2273 6574  ethod_url = "set
+0000ab40: 4368 6174 4164 6d69 6e69 7374 7261 746f  ChatAdministrato
+0000ab50: 7243 7573 746f 6d54 6974 6c65 220a 2020  rCustomTitle".  
+0000ab60: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+0000ab70: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
+0000ab80: 2022 7573 6572 5f69 6422 3a20 7573 6572   "user_id": user
+0000ab90: 5f69 642c 2022 6375 7374 6f6d 5f74 6974  _id, "custom_tit
+0000aba0: 6c65 223a 2063 7573 746f 6d5f 7469 746c  le": custom_titl
+0000abb0: 657d 0a20 2020 2072 6574 7572 6e20 6177  e}.    return aw
+0000abc0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+0000abd0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000abe0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000abf0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
+0000ac00: 706f 7374 2229 0a0a 0a61 7379 6e63 2064  post")...async d
+0000ac10: 6566 2062 616e 5f63 6861 745f 7365 6e64  ef ban_chat_send
+0000ac20: 6572 5f63 6861 7428 746f 6b65 6e2c 2063  er_chat(token, c
+0000ac30: 6861 745f 6964 2c20 7365 6e64 6572 5f63  hat_id, sender_c
+0000ac40: 6861 745f 6964 293a 0a20 2020 206d 6574  hat_id):.    met
+0000ac50: 686f 645f 7572 6c20 3d20 2262 616e 4368  hod_url = "banCh
+0000ac60: 6174 5365 6e64 6572 4368 6174 220a 2020  atSenderChat".  
+0000ac70: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+0000ac80: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
+0000ac90: 2022 7365 6e64 6572 5f63 6861 745f 6964   "sender_chat_id
+0000aca0: 223a 2073 656e 6465 725f 6368 6174 5f69  ": sender_chat_i
+0000acb0: 647d 0a20 2020 2072 6574 7572 6e20 6177  d}.    return aw
+0000acc0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+0000acd0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000ace0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000acf0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
+0000ad00: 706f 7374 2229 0a0a 0a61 7379 6e63 2064  post")...async d
+0000ad10: 6566 2075 6e62 616e 5f63 6861 745f 7365  ef unban_chat_se
+0000ad20: 6e64 6572 5f63 6861 7428 746f 6b65 6e2c  nder_chat(token,
+0000ad30: 2063 6861 745f 6964 2c20 7365 6e64 6572   chat_id, sender
+0000ad40: 5f63 6861 745f 6964 293a 0a20 2020 206d  _chat_id):.    m
+0000ad50: 6574 686f 645f 7572 6c20 3d20 2275 6e62  ethod_url = "unb
+0000ad60: 616e 4368 6174 5365 6e64 6572 4368 6174  anChatSenderChat
+0000ad70: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+0000ad80: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
+0000ad90: 5f69 642c 2022 7365 6e64 6572 5f63 6861  _id, "sender_cha
+0000ada0: 745f 6964 223a 2073 656e 6465 725f 6368  t_id": sender_ch
+0000adb0: 6174 5f69 647d 0a20 2020 2072 6574 7572  at_id}.    retur
+0000adc0: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+0000add0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000ade0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000adf0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000ae00: 6f64 3d22 706f 7374 2229 0a0a 0a61 7379  od="post")...asy
+0000ae10: 6e63 2064 6566 2073 6574 5f63 6861 745f  nc def set_chat_
+0000ae20: 7065 726d 6973 7369 6f6e 7328 0a20 2020  permissions(.   
+0000ae30: 2074 6f6b 656e 2c20 6368 6174 5f69 642c   token, chat_id,
+0000ae40: 2070 6572 6d69 7373 696f 6e73 2c20 7573   permissions, us
+0000ae50: 655f 696e 6465 7065 6e64 656e 745f 6368  e_independent_ch
+0000ae60: 6174 5f70 6572 6d69 7373 696f 6e73 3d4e  at_permissions=N
+0000ae70: 6f6e 650a 293a 0a20 2020 206d 6574 686f  one.):.    metho
+0000ae80: 645f 7572 6c20 3d20 2273 6574 4368 6174  d_url = "setChat
+0000ae90: 5065 726d 6973 7369 6f6e 7322 0a20 2020  Permissions".   
+0000aea0: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+0000aeb0: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
+0000aec0: 2270 6572 6d69 7373 696f 6e73 223a 2070  "permissions": p
+0000aed0: 6572 6d69 7373 696f 6e73 2e74 6f5f 6a73  ermissions.to_js
+0000aee0: 6f6e 2829 7d0a 2020 2020 6966 2075 7365  on()}.    if use
+0000aef0: 5f69 6e64 6570 656e 6465 6e74 5f63 6861  _independent_cha
+0000af00: 745f 7065 726d 6973 7369 6f6e 7320 6973  t_permissions is
+0000af10: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000af20: 2020 2070 6179 6c6f 6164 5b22 7573 655f     payload["use_
+0000af30: 696e 6465 7065 6e64 656e 745f 6368 6174  independent_chat
+0000af40: 5f70 6572 6d69 7373 696f 6e73 225d 203d  _permissions"] =
+0000af50: 2075 7365 5f69 6e64 6570 656e 6465 6e74   use_independent
+0000af60: 5f63 6861 745f 7065 726d 6973 7369 6f6e  _chat_permission
+0000af70: 730a 2020 2020 7265 7475 726e 2061 7761  s.    return awa
+0000af80: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+0000af90: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000afa0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000afb0: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
+0000afc0: 6f73 7422 290a 0a0a 6173 796e 6320 6465  ost")...async de
+0000afd0: 6620 6372 6561 7465 5f63 6861 745f 696e  f create_chat_in
+0000afe0: 7669 7465 5f6c 696e 6b28 0a20 2020 2074  vite_link(.    t
+0000aff0: 6f6b 656e 2c20 6368 6174 5f69 642c 206e  oken, chat_id, n
+0000b000: 616d 652c 2065 7870 6972 655f 6461 7465  ame, expire_date
+0000b010: 2c20 6d65 6d62 6572 5f6c 696d 6974 2c20  , member_limit, 
+0000b020: 6372 6561 7465 735f 6a6f 696e 5f72 6571  creates_join_req
+0000b030: 7565 7374 0a29 3a0a 2020 2020 6d65 7468  uest.):.    meth
+0000b040: 6f64 5f75 726c 203d 2022 6372 6561 7465  od_url = "create
+0000b050: 4368 6174 496e 7669 7465 4c69 6e6b 220a  ChatInviteLink".
+0000b060: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+0000b070: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+0000b080: 647d 0a0a 2020 2020 6966 2065 7870 6972  d}..    if expir
+0000b090: 655f 6461 7465 2069 7320 6e6f 7420 4e6f  e_date is not No
+0000b0a0: 6e65 3a0a 2020 2020 2020 2020 6966 2069  ne:.        if i
+0000b0b0: 7369 6e73 7461 6e63 6528 6578 7069 7265  sinstance(expire
+0000b0c0: 5f64 6174 652c 2064 6174 6574 696d 6529  _date, datetime)
+0000b0d0: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
+0000b0e0: 796c 6f61 645b 2265 7870 6972 655f 6461  yload["expire_da
+0000b0f0: 7465 225d 203d 2065 7870 6972 655f 6461  te"] = expire_da
+0000b100: 7465 2e74 696d 6573 7461 6d70 2829 0a20  te.timestamp(). 
+0000b110: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000b120: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
+0000b130: 5b22 6578 7069 7265 5f64 6174 6522 5d20  ["expire_date"] 
+0000b140: 3d20 6578 7069 7265 5f64 6174 650a 2020  = expire_date.  
+0000b150: 2020 6966 206d 656d 6265 725f 6c69 6d69    if member_limi
+0000b160: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
+0000b170: 6164 5b22 6d65 6d62 6572 5f6c 696d 6974  ad["member_limit
+0000b180: 225d 203d 206d 656d 6265 725f 6c69 6d69  "] = member_limi
+0000b190: 740a 2020 2020 6966 2063 7265 6174 6573  t.    if creates
+0000b1a0: 5f6a 6f69 6e5f 7265 7175 6573 7420 6973  _join_request is
+0000b1b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000b1c0: 2020 2070 6179 6c6f 6164 5b22 6372 6561     payload["crea
+0000b1d0: 7465 735f 6a6f 696e 5f72 6571 7565 7374  tes_join_request
+0000b1e0: 225d 203d 2063 7265 6174 6573 5f6a 6f69  "] = creates_joi
+0000b1f0: 6e5f 7265 7175 6573 740a 2020 2020 6966  n_request.    if
+0000b200: 206e 616d 653a 0a20 2020 2020 2020 2070   name:.        p
+0000b210: 6179 6c6f 6164 5b22 6e61 6d65 225d 203d  ayload["name"] =
+0000b220: 206e 616d 650a 0a20 2020 2072 6574 7572   name..    retur
+0000b230: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+0000b240: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000b250: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000b260: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000b270: 6f64 3d22 706f 7374 2229 0a0a 0a61 7379  od="post")...asy
+0000b280: 6e63 2064 6566 2065 6469 745f 6368 6174  nc def edit_chat
+0000b290: 5f69 6e76 6974 655f 6c69 6e6b 280a 2020  _invite_link(.  
+0000b2a0: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
+0000b2b0: 2c20 696e 7669 7465 5f6c 696e 6b2c 206e  , invite_link, n
+0000b2c0: 616d 652c 2065 7870 6972 655f 6461 7465  ame, expire_date
+0000b2d0: 2c20 6d65 6d62 6572 5f6c 696d 6974 2c20  , member_limit, 
+0000b2e0: 6372 6561 7465 735f 6a6f 696e 5f72 6571  creates_join_req
+0000b2f0: 7565 7374 0a29 3a0a 2020 2020 6d65 7468  uest.):.    meth
+0000b300: 6f64 5f75 726c 203d 2022 6564 6974 4368  od_url = "editCh
+0000b310: 6174 496e 7669 7465 4c69 6e6b 220a 2020  atInviteLink".  
+0000b320: 2020 7061 796c 6f61 6420 3d20 7b22 6368    payload = {"ch
+0000b330: 6174 5f69 6422 3a20 6368 6174 5f69 642c  at_id": chat_id,
+0000b340: 2022 696e 7669 7465 5f6c 696e 6b22 3a20   "invite_link": 
+0000b350: 696e 7669 7465 5f6c 696e 6b7d 0a0a 2020  invite_link}..  
+0000b360: 2020 6966 2065 7870 6972 655f 6461 7465    if expire_date
+0000b370: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000b380: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000b390: 6e63 6528 6578 7069 7265 5f64 6174 652c  nce(expire_date,
+0000b3a0: 2064 6174 6574 696d 6529 3a0a 2020 2020   datetime):.    
+0000b3b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000b3c0: 2265 7870 6972 655f 6461 7465 225d 203d  "expire_date"] =
+0000b3d0: 2065 7870 6972 655f 6461 7465 2e74 696d   expire_date.tim
+0000b3e0: 6573 7461 6d70 2829 0a20 2020 2020 2020  estamp().       
+0000b3f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000b400: 2020 2070 6179 6c6f 6164 5b22 6578 7069     payload["expi
+0000b410: 7265 5f64 6174 6522 5d20 3d20 6578 7069  re_date"] = expi
+0000b420: 7265 5f64 6174 650a 0a20 2020 2069 6620  re_date..    if 
+0000b430: 6d65 6d62 6572 5f6c 696d 6974 2069 7320  member_limit is 
+0000b440: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000b450: 2020 7061 796c 6f61 645b 226d 656d 6265    payload["membe
+0000b460: 725f 6c69 6d69 7422 5d20 3d20 6d65 6d62  r_limit"] = memb
+0000b470: 6572 5f6c 696d 6974 0a20 2020 2069 6620  er_limit.    if 
+0000b480: 6e61 6d65 3a0a 2020 2020 2020 2020 7061  name:.        pa
+0000b490: 796c 6f61 645b 226e 616d 6522 5d20 3d20  yload["name"] = 
+0000b4a0: 6e61 6d65 0a20 2020 2069 6620 6372 6561  name.    if crea
+0000b4b0: 7465 735f 6a6f 696e 5f72 6571 7565 7374  tes_join_request
+0000b4c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000b4d0: 2020 2020 2020 7061 796c 6f61 645b 2263        payload["c
+0000b4e0: 7265 6174 6573 5f6a 6f69 6e5f 7265 7175  reates_join_requ
+0000b4f0: 6573 7422 5d20 3d20 6372 6561 7465 735f  est"] = creates_
+0000b500: 6a6f 696e 5f72 6571 7565 7374 0a0a 2020  join_request..  
+0000b510: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000b520: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000b530: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000b540: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000b550: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+0000b560: 290a 0a0a 6173 796e 6320 6465 6620 7265  )...async def re
+0000b570: 766f 6b65 5f63 6861 745f 696e 7669 7465  voke_chat_invite
+0000b580: 5f6c 696e 6b28 746f 6b65 6e2c 2063 6861  _link(token, cha
+0000b590: 745f 6964 2c20 696e 7669 7465 5f6c 696e  t_id, invite_lin
+0000b5a0: 6b29 3a0a 2020 2020 6d65 7468 6f64 5f75  k):.    method_u
+0000b5b0: 726c 203d 2022 7265 766f 6b65 4368 6174  rl = "revokeChat
+0000b5c0: 496e 7669 7465 4c69 6e6b 220a 2020 2020  InviteLink".    
+0000b5d0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+0000b5e0: 5f69 6422 3a20 6368 6174 5f69 642c 2022  _id": chat_id, "
+0000b5f0: 696e 7669 7465 5f6c 696e 6b22 3a20 696e  invite_link": in
+0000b600: 7669 7465 5f6c 696e 6b7d 0a20 2020 2072  vite_link}.    r
+0000b610: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+0000b620: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+0000b630: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000b640: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000b650: 6d65 7468 6f64 3d22 706f 7374 2229 0a0a  method="post")..
+0000b660: 0a61 7379 6e63 2064 6566 2065 7870 6f72  .async def expor
+0000b670: 745f 6368 6174 5f69 6e76 6974 655f 6c69  t_chat_invite_li
+0000b680: 6e6b 2874 6f6b 656e 2c20 6368 6174 5f69  nk(token, chat_i
+0000b690: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
+0000b6a0: 726c 203d 2022 6578 706f 7274 4368 6174  rl = "exportChat
+0000b6b0: 496e 7669 7465 4c69 6e6b 220a 2020 2020  InviteLink".    
+0000b6c0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+0000b6d0: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
+0000b6e0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000b6f0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000b700: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000b710: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000b720: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+0000b730: 2229 0a0a 0a61 7379 6e63 2064 6566 2061  ")...async def a
+0000b740: 7070 726f 7665 5f63 6861 745f 6a6f 696e  pprove_chat_join
+0000b750: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000b760: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
+0000b770: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000b780: 6c20 3d20 2261 7070 726f 7665 4368 6174  l = "approveChat
+0000b790: 4a6f 696e 5265 7175 6573 7422 0a20 2020  JoinRequest".   
+0000b7a0: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+0000b7b0: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
+0000b7c0: 2275 7365 725f 6964 223a 2075 7365 725f  "user_id": user_
+0000b7d0: 6964 7d0a 2020 2020 7265 7475 726e 2061  id}.    return a
+0000b7e0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+0000b7f0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000b800: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000b810: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+0000b820: 2270 6f73 7422 290a 0a0a 6173 796e 6320  "post")...async 
+0000b830: 6465 6620 6465 636c 696e 655f 6368 6174  def decline_chat
+0000b840: 5f6a 6f69 6e5f 7265 7175 6573 7428 746f  _join_request(to
+0000b850: 6b65 6e2c 2063 6861 745f 6964 2c20 7573  ken, chat_id, us
+0000b860: 6572 5f69 6429 3a0a 2020 2020 6d65 7468  er_id):.    meth
+0000b870: 6f64 5f75 726c 203d 2022 6465 636c 696e  od_url = "declin
+0000b880: 6543 6861 744a 6f69 6e52 6571 7565 7374  eChatJoinRequest
+0000b890: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+0000b8a0: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
+0000b8b0: 5f69 642c 2022 7573 6572 5f69 6422 3a20  _id, "user_id": 
+0000b8c0: 7573 6572 5f69 647d 0a20 2020 2072 6574  user_id}.    ret
+0000b8d0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000b8e0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000b8f0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000b900: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000b910: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
+0000b920: 7379 6e63 2064 6566 2073 6574 5f63 6861  sync def set_cha
+0000b930: 745f 7068 6f74 6f28 746f 6b65 6e2c 2063  t_photo(token, c
+0000b940: 6861 745f 6964 2c20 7068 6f74 6f29 3a0a  hat_id, photo):.
+0000b950: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000b960: 2022 7365 7443 6861 7450 686f 746f 220a   "setChatPhoto".
+0000b970: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+0000b980: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+0000b990: 647d 0a20 2020 2066 696c 6573 203d 204e  d}.    files = N
+0000b9a0: 6f6e 650a 2020 2020 6966 2075 7469 6c2e  one.    if util.
+0000b9b0: 6973 5f73 7472 696e 6728 7068 6f74 6f29  is_string(photo)
+0000b9c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000b9d0: 645b 2270 686f 746f 225d 203d 2070 686f  d["photo"] = pho
+0000b9e0: 746f 0a20 2020 2065 6c69 6620 7574 696c  to.    elif util
+0000b9f0: 2e69 735f 7069 6c5f 696d 6167 6528 7068  .is_pil_image(ph
+0000ba00: 6f74 6f29 3a0a 2020 2020 2020 2020 6669  oto):.        fi
+0000ba10: 6c65 7320 3d20 7b22 7068 6f74 6f22 3a20  les = {"photo": 
+0000ba20: 7574 696c 2e70 696c 5f69 6d61 6765 5f74  util.pil_image_t
+0000ba30: 6f5f 6669 6c65 2870 686f 746f 297d 0a20  o_file(photo)}. 
+0000ba40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000ba50: 2066 696c 6573 203d 207b 2270 686f 746f   files = {"photo
+0000ba60: 223a 2070 686f 746f 7d0a 2020 2020 7265  ": photo}.    re
+0000ba70: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+0000ba80: 6573 735f 7265 7175 6573 7428 0a20 2020  ess_request(.   
+0000ba90: 2020 2020 2074 6f6b 656e 2c20 6d65 7468       token, meth
+0000baa0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000bab0: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
+0000bac0: 6c65 732c 206d 6574 686f 643d 2270 6f73  les, method="pos
+0000bad0: 7422 0a20 2020 2029 0a0a 0a61 7379 6e63  t".    )...async
+0000bae0: 2064 6566 2064 656c 6574 655f 6368 6174   def delete_chat
+0000baf0: 5f70 686f 746f 2874 6f6b 656e 2c20 6368  _photo(token, ch
+0000bb00: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
+0000bb10: 6f64 5f75 726c 203d 2022 6465 6c65 7465  od_url = "delete
+0000bb20: 4368 6174 5068 6f74 6f22 0a20 2020 2070  ChatPhoto".    p
+0000bb30: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+0000bb40: 6964 223a 2063 6861 745f 6964 7d0a 2020  id": chat_id}.  
+0000bb50: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000bb60: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000bb70: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000bb80: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000bb90: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+0000bba0: 290a 0a0a 6173 796e 6320 6465 6620 7365  )...async def se
+0000bbb0: 745f 6368 6174 5f74 6974 6c65 2874 6f6b  t_chat_title(tok
+0000bbc0: 656e 2c20 6368 6174 5f69 642c 2074 6974  en, chat_id, tit
+0000bbd0: 6c65 293a 0a20 2020 206d 6574 686f 645f  le):.    method_
+0000bbe0: 7572 6c20 3d20 2273 6574 4368 6174 5469  url = "setChatTi
+0000bbf0: 746c 6522 0a20 2020 2070 6179 6c6f 6164  tle".    payload
+0000bc00: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
+0000bc10: 6861 745f 6964 2c20 2274 6974 6c65 223a  hat_id, "title":
+0000bc20: 2074 6974 6c65 7d0a 2020 2020 7265 7475   title}.    retu
+0000bc30: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+0000bc40: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+0000bc50: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000bc60: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000bc70: 686f 643d 2270 6f73 7422 290a 0a0a 6173  hod="post")...as
+0000bc80: 796e 6320 6465 6620 7365 745f 6d79 5f64  ync def set_my_d
+0000bc90: 6573 6372 6970 7469 6f6e 2874 6f6b 656e  escription(token
+0000bca0: 2c20 6465 7363 7269 7074 696f 6e3d 4e6f  , description=No
+0000bcb0: 6e65 2c20 6c61 6e67 7561 6765 5f63 6f64  ne, language_cod
+0000bcc0: 653d 4e6f 6e65 293a 0a20 2020 206d 6574  e=None):.    met
+0000bcd0: 686f 645f 7572 6c20 3d20 7222 7365 744d  hod_url = r"setM
+0000bce0: 7944 6573 6372 6970 7469 6f6e 220a 2020  yDescription".  
+0000bcf0: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
+0000bd00: 2020 2069 6620 6465 7363 7269 7074 696f     if descriptio
+0000bd10: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
+0000bd20: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000bd30: 6465 7363 7269 7074 696f 6e22 5d20 3d20  description"] = 
+0000bd40: 6465 7363 7269 7074 696f 6e0a 2020 2020  description.    
+0000bd50: 6966 206c 616e 6775 6167 655f 636f 6465  if language_code
+0000bd60: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000bd70: 2020 2020 2020 7061 796c 6f61 645b 226c        payload["l
+0000bd80: 616e 6775 6167 655f 636f 6465 225d 203d  anguage_code"] =
+0000bd90: 206c 616e 6775 6167 655f 636f 6465 0a20   language_code. 
+0000bda0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000bdb0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000bdc0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000bdd0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000bde0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+0000bdf0: 2229 0a0a 0a61 7379 6e63 2064 6566 2067  ")...async def g
+0000be00: 6574 5f6d 795f 6465 7363 7269 7074 696f  et_my_descriptio
+0000be10: 6e28 746f 6b65 6e2c 206c 616e 6775 6167  n(token, languag
+0000be20: 655f 636f 6465 3d4e 6f6e 6529 3a0a 2020  e_code=None):.  
+0000be30: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+0000be40: 2267 6574 4d79 4465 7363 7269 7074 696f  "getMyDescriptio
+0000be50: 6e22 0a20 2020 2070 6179 6c6f 6164 203d  n".    payload =
+0000be60: 207b 7d0a 2020 2020 6966 206c 616e 6775   {}.    if langu
+0000be70: 6167 655f 636f 6465 3a0a 2020 2020 2020  age_code:.      
+0000be80: 2020 7061 796c 6f61 645b 226c 616e 6775    payload["langu
+0000be90: 6167 655f 636f 6465 225d 203d 206c 616e  age_code"] = lan
+0000bea0: 6775 6167 655f 636f 6465 0a20 2020 2072  guage_code.    r
+0000beb0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+0000bec0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+0000bed0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000bee0: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
+0000bef0: 0a0a 6173 796e 6320 6465 6620 7365 745f  ..async def set_
+0000bf00: 6d79 5f73 686f 7274 5f64 6573 6372 6970  my_short_descrip
+0000bf10: 7469 6f6e 2874 6f6b 656e 2c20 7368 6f72  tion(token, shor
+0000bf20: 745f 6465 7363 7269 7074 696f 6e3d 4e6f  t_description=No
+0000bf30: 6e65 2c20 6c61 6e67 7561 6765 5f63 6f64  ne, language_cod
+0000bf40: 653d 4e6f 6e65 293a 0a20 2020 206d 6574  e=None):.    met
+0000bf50: 686f 645f 7572 6c20 3d20 7222 7365 744d  hod_url = r"setM
+0000bf60: 7953 686f 7274 4465 7363 7269 7074 696f  yShortDescriptio
+0000bf70: 6e22 0a20 2020 2070 6179 6c6f 6164 203d  n".    payload =
+0000bf80: 207b 7d0a 2020 2020 6966 2073 686f 7274   {}.    if short
+0000bf90: 5f64 6573 6372 6970 7469 6f6e 2069 7320  _description is 
+0000bfa0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000bfb0: 2020 7061 796c 6f61 645b 2273 686f 7274    payload["short
+0000bfc0: 5f64 6573 6372 6970 7469 6f6e 225d 203d  _description"] =
+0000bfd0: 2073 686f 7274 5f64 6573 6372 6970 7469   short_descripti
+0000bfe0: 6f6e 0a20 2020 2069 6620 6c61 6e67 7561  on.    if langua
+0000bff0: 6765 5f63 6f64 6520 6973 206e 6f74 204e  ge_code is not N
+0000c000: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+0000c010: 6c6f 6164 5b22 6c61 6e67 7561 6765 5f63  load["language_c
+0000c020: 6f64 6522 5d20 3d20 6c61 6e67 7561 6765  ode"] = language
+0000c030: 5f63 6f64 650a 2020 2020 7265 7475 726e  _code.    return
+0000c040: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000c050: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000c060: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000c070: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000c080: 643d 2270 6f73 7422 290a 0a0a 6173 796e  d="post")...asyn
+0000c090: 6320 6465 6620 6765 745f 6d79 5f73 686f  c def get_my_sho
+0000c0a0: 7274 5f64 6573 6372 6970 7469 6f6e 2874  rt_description(t
+0000c0b0: 6f6b 656e 2c20 6c61 6e67 7561 6765 5f63  oken, language_c
+0000c0c0: 6f64 653d 4e6f 6e65 293a 0a20 2020 206d  ode=None):.    m
+0000c0d0: 6574 686f 645f 7572 6c20 3d20 7222 6765  ethod_url = r"ge
+0000c0e0: 744d 7953 686f 7274 4465 7363 7269 7074  tMyShortDescript
+0000c0f0: 696f 6e22 0a20 2020 2070 6179 6c6f 6164  ion".    payload
+0000c100: 203d 207b 7d0a 2020 2020 6966 206c 616e   = {}.    if lan
+0000c110: 6775 6167 655f 636f 6465 3a0a 2020 2020  guage_code:.    
+0000c120: 2020 2020 7061 796c 6f61 645b 226c 616e      payload["lan
+0000c130: 6775 6167 655f 636f 6465 225d 203d 206c  guage_code"] = l
+0000c140: 616e 6775 6167 655f 636f 6465 0a20 2020  anguage_code.   
+0000c150: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+0000c160: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+0000c170: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000c180: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000c190: 290a 0a0a 6173 796e 6320 6465 6620 6765  )...async def ge
+0000c1a0: 745f 6d79 5f63 6f6d 6d61 6e64 7328 746f  t_my_commands(to
+0000c1b0: 6b65 6e2c 2073 636f 7065 3d4e 6f6e 652c  ken, scope=None,
+0000c1c0: 206c 616e 6775 6167 655f 636f 6465 3d4e   language_code=N
+0000c1d0: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
+0000c1e0: 5f75 726c 203d 2072 2267 6574 4d79 436f  _url = r"getMyCo
+0000c1f0: 6d6d 616e 6473 220a 2020 2020 7061 796c  mmands".    payl
+0000c200: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
+0000c210: 7363 6f70 653a 0a20 2020 2020 2020 2070  scope:.        p
+0000c220: 6179 6c6f 6164 5b22 7363 6f70 6522 5d20  ayload["scope"] 
+0000c230: 3d20 7363 6f70 652e 746f 5f6a 736f 6e28  = scope.to_json(
+0000c240: 290a 2020 2020 6966 206c 616e 6775 6167  ).    if languag
+0000c250: 655f 636f 6465 3a0a 2020 2020 2020 2020  e_code:.        
+0000c260: 7061 796c 6f61 645b 226c 616e 6775 6167  payload["languag
+0000c270: 655f 636f 6465 225d 203d 206c 616e 6775  e_code"] = langu
+0000c280: 6167 655f 636f 6465 0a20 2020 2072 6574  age_code.    ret
+0000c290: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000c2a0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000c2b0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000c2c0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+0000c2d0: 6173 796e 6320 6465 6620 7365 745f 6d79  async def set_my
+0000c2e0: 5f6e 616d 6528 746f 6b65 6e2c 206e 616d  _name(token, nam
+0000c2f0: 653d 4e6f 6e65 2c20 6c61 6e67 7561 6765  e=None, language
+0000c300: 5f63 6f64 653d 4e6f 6e65 293a 0a20 2020  _code=None):.   
+0000c310: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
+0000c320: 7365 744d 794e 616d 6522 0a20 2020 2070  setMyName".    p
+0000c330: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
+0000c340: 6966 206e 616d 6520 6973 206e 6f74 204e  if name is not N
+0000c350: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+0000c360: 6c6f 6164 5b22 6e61 6d65 225d 203d 206e  load["name"] = n
+0000c370: 616d 650a 2020 2020 6966 206c 616e 6775  ame.    if langu
+0000c380: 6167 655f 636f 6465 2069 7320 6e6f 7420  age_code is not 
+0000c390: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000c3a0: 796c 6f61 645b 226c 616e 6775 6167 655f  yload["language_
+0000c3b0: 636f 6465 225d 203d 206c 616e 6775 6167  code"] = languag
+0000c3c0: 655f 636f 6465 0a20 2020 2072 6574 7572  e_code.    retur
+0000c3d0: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+0000c3e0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000c3f0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000c400: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000c410: 6f64 3d22 706f 7374 2229 0a0a 0a61 7379  od="post")...asy
+0000c420: 6e63 2064 6566 2067 6574 5f6d 795f 6e61  nc def get_my_na
+0000c430: 6d65 2874 6f6b 656e 2c20 6c61 6e67 7561  me(token, langua
+0000c440: 6765 5f63 6f64 653d 4e6f 6e65 293a 0a20  ge_code=None):. 
+0000c450: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000c460: 7222 6765 744d 794e 616d 6522 0a20 2020  r"getMyName".   
+0000c470: 2070 6179 6c6f 6164 203d 207b 7d0a 2020   payload = {}.  
+0000c480: 2020 6966 206c 616e 6775 6167 655f 636f    if language_co
+0000c490: 6465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  de is not None:.
+0000c4a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000c4b0: 226c 616e 6775 6167 655f 636f 6465 225d  "language_code"]
+0000c4c0: 203d 206c 616e 6775 6167 655f 636f 6465   = language_code
+0000c4d0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+0000c4e0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+0000c4f0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000c500: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000c510: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
+0000c520: 6620 7365 745f 6368 6174 5f6d 656e 755f  f set_chat_menu_
+0000c530: 6275 7474 6f6e 2874 6f6b 656e 2c20 6368  button(token, ch
+0000c540: 6174 5f69 643d 4e6f 6e65 2c20 6d65 6e75  at_id=None, menu
+0000c550: 5f62 7574 746f 6e3d 4e6f 6e65 293a 0a20  _button=None):. 
+0000c560: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000c570: 7222 7365 7443 6861 744d 656e 7542 7574  r"setChatMenuBut
+0000c580: 746f 6e22 0a20 2020 2070 6179 6c6f 6164  ton".    payload
+0000c590: 203d 207b 7d0a 2020 2020 6966 2063 6861   = {}.    if cha
+0000c5a0: 745f 6964 3a0a 2020 2020 2020 2020 7061  t_id:.        pa
+0000c5b0: 796c 6f61 645b 2263 6861 745f 6964 225d  yload["chat_id"]
+0000c5c0: 203d 2063 6861 745f 6964 0a20 2020 2069   = chat_id.    i
+0000c5d0: 6620 6d65 6e75 5f62 7574 746f 6e3a 0a20  f menu_button:. 
+0000c5e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000c5f0: 6d65 6e75 5f62 7574 746f 6e22 5d20 3d20  menu_button"] = 
+0000c600: 6d65 6e75 5f62 7574 746f 6e2e 746f 5f6a  menu_button.to_j
+0000c610: 736f 6e28 290a 0a20 2020 2072 6574 7572  son()..    retur
+0000c620: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+0000c630: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000c640: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000c650: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000c660: 6f64 3d22 706f 7374 2229 0a0a 0a61 7379  od="post")...asy
+0000c670: 6e63 2064 6566 2067 6574 5f63 6861 745f  nc def get_chat_
+0000c680: 6d65 6e75 5f62 7574 746f 6e28 746f 6b65  menu_button(toke
+0000c690: 6e2c 2063 6861 745f 6964 3d4e 6f6e 6529  n, chat_id=None)
+0000c6a0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+0000c6b0: 203d 2072 2267 6574 4368 6174 4d65 6e75   = r"getChatMenu
+0000c6c0: 4275 7474 6f6e 220a 2020 2020 7061 796c  Button".    payl
+0000c6d0: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
+0000c6e0: 6368 6174 5f69 643a 0a20 2020 2020 2020  chat_id:.       
+0000c6f0: 2070 6179 6c6f 6164 5b22 6368 6174 5f69   payload["chat_i
+0000c700: 6422 5d20 3d20 6368 6174 5f69 640a 0a20  d"] = chat_id.. 
+0000c710: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000c720: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000c730: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000c740: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000c750: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+0000c760: 2229 0a0a 0a61 7379 6e63 2064 6566 2073  ")...async def s
+0000c770: 6574 5f6d 795f 6465 6661 756c 745f 6164  et_my_default_ad
+0000c780: 6d69 6e69 7374 7261 746f 725f 7269 6768  ministrator_righ
+0000c790: 7473 2874 6f6b 656e 2c20 7269 6768 7473  ts(token, rights
+0000c7a0: 3d4e 6f6e 652c 2066 6f72 5f63 6861 6e6e  =None, for_chann
+0000c7b0: 656c 733d 4e6f 6e65 293a 0a20 2020 206d  els=None):.    m
+0000c7c0: 6574 686f 645f 7572 6c20 3d20 7222 7365  ethod_url = r"se
+0000c7d0: 744d 7944 6566 6175 6c74 4164 6d69 6e69  tMyDefaultAdmini
+0000c7e0: 7374 7261 746f 7252 6967 6874 7322 0a20  stratorRights". 
+0000c7f0: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
+0000c800: 2020 2020 6966 2072 6967 6874 733a 0a20      if rights:. 
+0000c810: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000c820: 7269 6768 7473 225d 203d 2072 6967 6874  rights"] = right
+0000c830: 732e 746f 5f6a 736f 6e28 290a 2020 2020  s.to_json().    
+0000c840: 6966 2066 6f72 5f63 6861 6e6e 656c 7320  if for_channels 
+0000c850: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000c860: 2020 2020 2070 6179 6c6f 6164 5b22 666f       payload["fo
+0000c870: 725f 6368 616e 6e65 6c73 225d 203d 2066  r_channels"] = f
+0000c880: 6f72 5f63 6861 6e6e 656c 730a 0a20 2020  or_channels..   
+0000c890: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+0000c8a0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+0000c8b0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000c8c0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000c8d0: 2c20 6d65 7468 6f64 3d22 706f 7374 2229  , method="post")
+0000c8e0: 0a0a 0a61 7379 6e63 2064 6566 2067 6574  ...async def get
+0000c8f0: 5f6d 795f 6465 6661 756c 745f 6164 6d69  _my_default_admi
+0000c900: 6e69 7374 7261 746f 725f 7269 6768 7473  nistrator_rights
+0000c910: 2874 6f6b 656e 2c20 666f 725f 6368 616e  (token, for_chan
+0000c920: 6e65 6c73 3d4e 6f6e 6529 3a0a 2020 2020  nels=None):.    
+0000c930: 6d65 7468 6f64 5f75 726c 203d 2072 2267  method_url = r"g
+0000c940: 6574 4d79 4465 6661 756c 7441 646d 696e  etMyDefaultAdmin
+0000c950: 6973 7472 6174 6f72 5269 6768 7473 220a  istratorRights".
+0000c960: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
+0000c970: 0a20 2020 2069 6620 666f 725f 6368 616e  .    if for_chan
+0000c980: 6e65 6c73 3a0a 2020 2020 2020 2020 7061  nels:.        pa
+0000c990: 796c 6f61 645b 2266 6f72 5f63 6861 6e6e  yload["for_chann
+0000c9a0: 656c 7322 5d20 3d20 666f 725f 6368 616e  els"] = for_chan
+0000c9b0: 6e65 6c73 0a0a 2020 2020 7265 7475 726e  nels..    return
+0000c9c0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000c9d0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000c9e0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000c9f0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000ca00: 643d 2270 6f73 7422 290a 0a0a 6173 796e  d="post")...asyn
+0000ca10: 6320 6465 6620 7365 745f 6d79 5f63 6f6d  c def set_my_com
+0000ca20: 6d61 6e64 7328 746f 6b65 6e2c 2063 6f6d  mands(token, com
+0000ca30: 6d61 6e64 732c 2073 636f 7065 3d4e 6f6e  mands, scope=Non
+0000ca40: 652c 206c 616e 6775 6167 655f 636f 6465  e, language_code
+0000ca50: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
+0000ca60: 6f64 5f75 726c 203d 2072 2273 6574 4d79  od_url = r"setMy
+0000ca70: 436f 6d6d 616e 6473 220a 2020 2020 7061  Commands".    pa
+0000ca80: 796c 6f61 6420 3d20 7b22 636f 6d6d 616e  yload = {"comman
+0000ca90: 6473 223a 2061 7761 6974 205f 636f 6e76  ds": await _conv
+0000caa0: 6572 745f 6c69 7374 5f6a 736f 6e5f 7365  ert_list_json_se
+0000cab0: 7269 616c 697a 6162 6c65 2863 6f6d 6d61  rializable(comma
+0000cac0: 6e64 7329 7d0a 2020 2020 6966 2073 636f  nds)}.    if sco
+0000cad0: 7065 3a0a 2020 2020 2020 2020 7061 796c  pe:.        payl
+0000cae0: 6f61 645b 2273 636f 7065 225d 203d 2073  oad["scope"] = s
+0000caf0: 636f 7065 2e74 6f5f 6a73 6f6e 2829 0a20  cope.to_json(). 
+0000cb00: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
+0000cb10: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
+0000cb20: 6c6f 6164 5b22 6c61 6e67 7561 6765 5f63  load["language_c
+0000cb30: 6f64 6522 5d20 3d20 6c61 6e67 7561 6765  ode"] = language
+0000cb40: 5f63 6f64 650a 2020 2020 7265 7475 726e  _code.    return
+0000cb50: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000cb60: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000cb70: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000cb80: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000cb90: 643d 2270 6f73 7422 290a 0a0a 6173 796e  d="post")...asyn
+0000cba0: 6320 6465 6620 6765 745f 6275 7369 6e65  c def get_busine
+0000cbb0: 7373 5f63 6f6e 6e65 6374 696f 6e28 746f  ss_connection(to
+0000cbc0: 6b65 6e2c 2062 7573 696e 6573 735f 636f  ken, business_co
+0000cbd0: 6e6e 6563 7469 6f6e 5f69 6429 3a0a 2020  nnection_id):.  
+0000cbe0: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
+0000cbf0: 6765 7442 7573 696e 6573 7343 6f6e 6e65  getBusinessConne
+0000cc00: 6374 696f 6e22 0a20 2020 2070 6179 6c6f  ction".    paylo
+0000cc10: 6164 203d 207b 2262 7573 696e 6573 735f  ad = {"business_
+0000cc20: 636f 6e6e 6563 7469 6f6e 5f69 6422 3a20  connection_id": 
+0000cc30: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+0000cc40: 696f 6e5f 6964 7d0a 2020 2020 7265 7475  ion_id}.    retu
+0000cc50: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+0000cc60: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+0000cc70: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000cc80: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000cc90: 686f 643d 2270 6f73 7422 290a 0a0a 6173  hod="post")...as
+0000cca0: 796e 6320 6465 6620 6465 6c65 7465 5f6d  ync def delete_m
+0000ccb0: 795f 636f 6d6d 616e 6473 2874 6f6b 656e  y_commands(token
+0000ccc0: 2c20 7363 6f70 653d 4e6f 6e65 2c20 6c61  , scope=None, la
+0000ccd0: 6e67 7561 6765 5f63 6f64 653d 4e6f 6e65  nguage_code=None
+0000cce0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000ccf0: 6c20 3d20 7222 6465 6c65 7465 4d79 436f  l = r"deleteMyCo
+0000cd00: 6d6d 616e 6473 220a 2020 2020 7061 796c  mmands".    payl
+0000cd10: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
+0000cd20: 7363 6f70 653a 0a20 2020 2020 2020 2070  scope:.        p
+0000cd30: 6179 6c6f 6164 5b22 7363 6f70 6522 5d20  ayload["scope"] 
+0000cd40: 3d20 7363 6f70 652e 746f 5f6a 736f 6e28  = scope.to_json(
+0000cd50: 290a 2020 2020 6966 206c 616e 6775 6167  ).    if languag
+0000cd60: 655f 636f 6465 3a0a 2020 2020 2020 2020  e_code:.        
+0000cd70: 7061 796c 6f61 645b 226c 616e 6775 6167  payload["languag
+0000cd80: 655f 636f 6465 225d 203d 206c 616e 6775  e_code"] = langu
+0000cd90: 6167 655f 636f 6465 0a20 2020 2072 6574  age_code.    ret
+0000cda0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000cdb0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000cdc0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000cdd0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000cde0: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
+0000cdf0: 7379 6e63 2064 6566 2073 6574 5f63 6861  sync def set_cha
+0000ce00: 745f 6465 7363 7269 7074 696f 6e28 746f  t_description(to
+0000ce10: 6b65 6e2c 2063 6861 745f 6964 2c20 6465  ken, chat_id, de
+0000ce20: 7363 7269 7074 696f 6e29 3a0a 2020 2020  scription):.    
+0000ce30: 6d65 7468 6f64 5f75 726c 203d 2022 7365  method_url = "se
+0000ce40: 7443 6861 7444 6573 6372 6970 7469 6f6e  tChatDescription
+0000ce50: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+0000ce60: 7b22 6368 6174 5f69 6422 3a20 6368 6174  {"chat_id": chat
+0000ce70: 5f69 647d 0a20 2020 2069 6620 6465 7363  _id}.    if desc
+0000ce80: 7269 7074 696f 6e20 6973 206e 6f74 204e  ription is not N
+0000ce90: 6f6e 653a 2020 2320 416c 6c6f 7720 656d  one:  # Allow em
+0000cea0: 7074 7920 7374 7269 6e67 730a 2020 2020  pty strings.    
+0000ceb0: 2020 2020 7061 796c 6f61 645b 2264 6573      payload["des
+0000cec0: 6372 6970 7469 6f6e 225d 203d 2064 6573  cription"] = des
+0000ced0: 6372 6970 7469 6f6e 0a20 2020 2072 6574  cription.    ret
+0000cee0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000cef0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000cf00: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000cf10: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000cf20: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
+0000cf30: 7379 6e63 2064 6566 2070 696e 5f63 6861  sync def pin_cha
+0000cf40: 745f 6d65 7373 6167 6528 746f 6b65 6e2c  t_message(token,
+0000cf50: 2063 6861 745f 6964 2c20 6d65 7373 6167   chat_id, messag
+0000cf60: 655f 6964 2c20 6469 7361 626c 655f 6e6f  e_id, disable_no
+0000cf70: 7469 6669 6361 7469 6f6e 3d4e 6f6e 6529  tification=None)
+0000cf80: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+0000cf90: 203d 2022 7069 6e43 6861 744d 6573 7361   = "pinChatMessa
+0000cfa0: 6765 220a 2020 2020 7061 796c 6f61 6420  ge".    payload 
+0000cfb0: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
+0000cfc0: 6174 5f69 642c 2022 6d65 7373 6167 655f  at_id, "message_
+0000cfd0: 6964 223a 206d 6573 7361 6765 5f69 647d  id": message_id}
+0000cfe0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+0000cff0: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+0000d000: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000d010: 2020 7061 796c 6f61 645b 2264 6973 6162    payload["disab
+0000d020: 6c65 5f6e 6f74 6966 6963 6174 696f 6e22  le_notification"
+0000d030: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+0000d040: 6669 6361 7469 6f6e 0a20 2020 2072 6574  fication.    ret
+0000d050: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000d060: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000d070: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000d080: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000d090: 7468 6f64 3d22 706f 7374 2229 0a0a 0a61  thod="post")...a
+0000d0a0: 7379 6e63 2064 6566 2075 6e70 696e 5f63  sync def unpin_c
+0000d0b0: 6861 745f 6d65 7373 6167 6528 746f 6b65  hat_message(toke
+0000d0c0: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
+0000d0d0: 6167 655f 6964 293a 0a20 2020 206d 6574  age_id):.    met
+0000d0e0: 686f 645f 7572 6c20 3d20 2275 6e70 696e  hod_url = "unpin
+0000d0f0: 4368 6174 4d65 7373 6167 6522 0a20 2020  ChatMessage".   
+0000d100: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+0000d110: 745f 6964 223a 2063 6861 745f 6964 7d0a  t_id": chat_id}.
+0000d120: 2020 2020 6966 206d 6573 7361 6765 5f69      if message_i
+0000d130: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+0000d140: 6164 5b22 6d65 7373 6167 655f 6964 225d  ad["message_id"]
+0000d150: 203d 206d 6573 7361 6765 5f69 640a 2020   = message_id.  
+0000d160: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000d170: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000d180: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000d190: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000d1a0: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+0000d1b0: 290a 0a0a 6173 796e 6320 6465 6620 756e  )...async def un
+0000d1c0: 7069 6e5f 616c 6c5f 6368 6174 5f6d 6573  pin_all_chat_mes
+0000d1d0: 7361 6765 7328 746f 6b65 6e2c 2063 6861  sages(token, cha
+0000d1e0: 745f 6964 293a 0a20 2020 206d 6574 686f  t_id):.    metho
+0000d1f0: 645f 7572 6c20 3d20 2275 6e70 696e 416c  d_url = "unpinAl
+0000d200: 6c43 6861 744d 6573 7361 6765 7322 0a20  lChatMessages". 
+0000d210: 2020 2070 6179 6c6f 6164 203d 207b 2263     payload = {"c
+0000d220: 6861 745f 6964 223a 2063 6861 745f 6964  hat_id": chat_id
+0000d230: 7d0a 2020 2020 7265 7475 726e 2061 7761  }.    return awa
+0000d240: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+0000d250: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000d260: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000d270: 796c 6f61 642c 206d 6574 686f 643d 2270  yload, method="p
+0000d280: 6f73 7422 290a 0a0a 2320 5570 6461 7469  ost")...# Updati
+0000d290: 6e67 206d 6573 7361 6765 730a 0a0a 6173  ng messages...as
+0000d2a0: 796e 6320 6465 6620 6564 6974 5f6d 6573  ync def edit_mes
+0000d2b0: 7361 6765 5f74 6578 7428 0a20 2020 2074  sage_text(.    t
+0000d2c0: 6f6b 656e 2c0a 2020 2020 7465 7874 2c0a  oken,.    text,.
+0000d2d0: 2020 2020 6368 6174 5f69 643d 4e6f 6e65      chat_id=None
+0000d2e0: 2c0a 2020 2020 6d65 7373 6167 655f 6964  ,.    message_id
+0000d2f0: 3d4e 6f6e 652c 0a20 2020 2069 6e6c 696e  =None,.    inlin
+0000d300: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+0000d310: 652c 0a20 2020 2070 6172 7365 5f6d 6f64  e,.    parse_mod
+0000d320: 653d 4e6f 6e65 2c0a 2020 2020 656e 7469  e=None,.    enti
+0000d330: 7469 6573 3d4e 6f6e 652c 0a20 2020 2072  ties=None,.    r
+0000d340: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+0000d350: 2c0a 2020 2020 6c69 6e6b 5f70 7265 7669  ,.    link_previ
+0000d360: 6577 5f6f 7074 696f 6e73 3d4e 6f6e 652c  ew_options=None,
+0000d370: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+0000d380: 726c 203d 2072 2265 6469 744d 6573 7361  rl = r"editMessa
+0000d390: 6765 5465 7874 220a 2020 2020 7061 796c  geText".    payl
+0000d3a0: 6f61 6420 3d20 7b22 7465 7874 223a 2074  oad = {"text": t
+0000d3b0: 6578 747d 0a20 2020 2069 6620 6368 6174  ext}.    if chat
+0000d3c0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000d3d0: 6c6f 6164 5b22 6368 6174 5f69 6422 5d20  load["chat_id"] 
+0000d3e0: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
+0000d3f0: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
+0000d400: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+0000d410: 7373 6167 655f 6964 225d 203d 206d 6573  ssage_id"] = mes
+0000d420: 7361 6765 5f69 640a 2020 2020 6966 2069  sage_id.    if i
+0000d430: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000d440: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000d450: 645b 2269 6e6c 696e 655f 6d65 7373 6167  d["inline_messag
+0000d460: 655f 6964 225d 203d 2069 6e6c 696e 655f  e_id"] = inline_
+0000d470: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
+0000d480: 6620 7061 7273 655f 6d6f 6465 3a0a 2020  f parse_mode:.  
+0000d490: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+0000d4a0: 6172 7365 5f6d 6f64 6522 5d20 3d20 7061  arse_mode"] = pa
+0000d4b0: 7273 655f 6d6f 6465 0a20 2020 2069 6620  rse_mode.    if 
+0000d4c0: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
+0000d4d0: 2020 7061 796c 6f61 645b 2265 6e74 6974    payload["entit
+0000d4e0: 6965 7322 5d20 3d20 6a73 6f6e 2e64 756d  ies"] = json.dum
+0000d4f0: 7073 2874 7970 6573 2e4d 6573 7361 6765  ps(types.Message
+0000d500: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
+0000d510: 665f 6469 6374 7328 656e 7469 7469 6573  f_dicts(entities
+0000d520: 2929 0a20 2020 2069 6620 7265 706c 795f  )).    if reply_
+0000d530: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
+0000d540: 7061 796c 6f61 645b 2272 6570 6c79 5f6d  payload["reply_m
+0000d550: 6172 6b75 7022 5d20 3d20 6177 6169 7420  arkup"] = await 
+0000d560: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
+0000d570: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
+0000d580: 2020 6966 206c 696e 6b5f 7072 6576 6965    if link_previe
+0000d590: 775f 6f70 7469 6f6e 7320 6973 206e 6f74  w_options is not
+0000d5a0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000d5b0: 6179 6c6f 6164 5b22 6c69 6e6b 5f70 7265  ayload["link_pre
+0000d5c0: 7669 6577 5f6f 7074 696f 6e73 225d 203d  view_options"] =
+0000d5d0: 206c 696e 6b5f 7072 6576 6965 775f 6f70   link_preview_op
+0000d5e0: 7469 6f6e 732e 746f 5f6a 736f 6e28 290a  tions.to_json().
+0000d5f0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+0000d600: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+0000d610: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000d620: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000d630: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
+0000d640: 7422 290a 0a0a 6173 796e 6320 6465 6620  t")...async def 
+0000d650: 6564 6974 5f6d 6573 7361 6765 5f63 6170  edit_message_cap
+0000d660: 7469 6f6e 280a 2020 2020 746f 6b65 6e2c  tion(.    token,
+0000d670: 0a20 2020 2063 6170 7469 6f6e 2c0a 2020  .    caption,.  
+0000d680: 2020 6368 6174 5f69 643d 4e6f 6e65 2c0a    chat_id=None,.
+0000d690: 2020 2020 6d65 7373 6167 655f 6964 3d4e      message_id=N
+0000d6a0: 6f6e 652c 0a20 2020 2069 6e6c 696e 655f  one,.    inline_
+0000d6b0: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+0000d6c0: 0a20 2020 2070 6172 7365 5f6d 6f64 653d  .    parse_mode=
+0000d6d0: 4e6f 6e65 2c0a 2020 2020 6361 7074 696f  None,.    captio
+0000d6e0: 6e5f 656e 7469 7469 6573 3d4e 6f6e 652c  n_entities=None,
+0000d6f0: 0a20 2020 2072 6570 6c79 5f6d 6172 6b75  .    reply_marku
+0000d700: 703d 4e6f 6e65 2c0a 293a 0a20 2020 206d  p=None,.):.    m
+0000d710: 6574 686f 645f 7572 6c20 3d20 7222 6564  ethod_url = r"ed
+0000d720: 6974 4d65 7373 6167 6543 6170 7469 6f6e  itMessageCaption
+0000d730: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+0000d740: 7b22 6361 7074 696f 6e22 3a20 6361 7074  {"caption": capt
+0000d750: 696f 6e7d 0a20 2020 2069 6620 6368 6174  ion}.    if chat
+0000d760: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000d770: 6c6f 6164 5b22 6368 6174 5f69 6422 5d20  load["chat_id"] 
+0000d780: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
+0000d790: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
+0000d7a0: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+0000d7b0: 7373 6167 655f 6964 225d 203d 206d 6573  ssage_id"] = mes
+0000d7c0: 7361 6765 5f69 640a 2020 2020 6966 2069  sage_id.    if i
+0000d7d0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000d7e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000d7f0: 645b 2269 6e6c 696e 655f 6d65 7373 6167  d["inline_messag
+0000d800: 655f 6964 225d 203d 2069 6e6c 696e 655f  e_id"] = inline_
+0000d810: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
+0000d820: 6620 7061 7273 655f 6d6f 6465 3a0a 2020  f parse_mode:.  
+0000d830: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+0000d840: 6172 7365 5f6d 6f64 6522 5d20 3d20 7061  arse_mode"] = pa
+0000d850: 7273 655f 6d6f 6465 0a20 2020 2069 6620  rse_mode.    if 
+0000d860: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
+0000d870: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000d880: 645b 2263 6170 7469 6f6e 5f65 6e74 6974  d["caption_entit
+0000d890: 6965 7322 5d20 3d20 6a73 6f6e 2e64 756d  ies"] = json.dum
+0000d8a0: 7073 280a 2020 2020 2020 2020 2020 2020  ps(.            
+0000d8b0: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
+0000d8c0: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
+0000d8d0: 6963 7473 2863 6170 7469 6f6e 5f65 6e74  icts(caption_ent
+0000d8e0: 6974 6965 7329 0a20 2020 2020 2020 2029  ities).        )
+0000d8f0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+0000d900: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
+0000d910: 796c 6f61 645b 2272 6570 6c79 5f6d 6172  yload["reply_mar
+0000d920: 6b75 7022 5d20 3d20 6177 6169 7420 5f63  kup"] = await _c
+0000d930: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
+0000d940: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
+0000d950: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+0000d960: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+0000d970: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000d980: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+0000d990: 206d 6574 686f 643d 2270 6f73 7422 290a   method="post").
+0000d9a0: 0a0a 6173 796e 6320 6465 6620 6564 6974  ..async def edit
+0000d9b0: 5f6d 6573 7361 6765 5f6d 6564 6961 280a  _message_media(.
+0000d9c0: 2020 2020 746f 6b65 6e2c 0a20 2020 206d      token,.    m
+0000d9d0: 6564 6961 2c0a 2020 2020 6368 6174 5f69  edia,.    chat_i
+0000d9e0: 643d 4e6f 6e65 2c0a 2020 2020 6d65 7373  d=None,.    mess
+0000d9f0: 6167 655f 6964 3d4e 6f6e 652c 0a20 2020  age_id=None,.   
+0000da00: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000da10: 6964 3d4e 6f6e 652c 0a20 2020 2072 6570  id=None,.    rep
+0000da20: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
+0000da30: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000da40: 6c20 3d20 7222 6564 6974 4d65 7373 6167  l = r"editMessag
+0000da50: 654d 6564 6961 220a 2020 2020 6d65 6469  eMedia".    medi
+0000da60: 615f 6a73 6f6e 2c20 6669 6c65 203d 2061  a_json, file = a
+0000da70: 7761 6974 2063 6f6e 7665 7274 5f69 6e70  wait convert_inp
+0000da80: 7574 5f6d 6564 6961 286d 6564 6961 290a  ut_media(media).
+0000da90: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+0000daa0: 6d65 6469 6122 3a20 6d65 6469 615f 6a73  media": media_js
+0000dab0: 6f6e 7d0a 2020 2020 6966 2063 6861 745f  on}.    if chat_
+0000dac0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+0000dad0: 6f61 645b 2263 6861 745f 6964 225d 203d  oad["chat_id"] =
+0000dae0: 2063 6861 745f 6964 0a20 2020 2069 6620   chat_id.    if 
+0000daf0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+0000db00: 2020 2020 7061 796c 6f61 645b 226d 6573      payload["mes
+0000db10: 7361 6765 5f69 6422 5d20 3d20 6d65 7373  sage_id"] = mess
+0000db20: 6167 655f 6964 0a20 2020 2069 6620 696e  age_id.    if in
+0000db30: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+0000db40: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000db50: 5b22 696e 6c69 6e65 5f6d 6573 7361 6765  ["inline_message
+0000db60: 5f69 6422 5d20 3d20 696e 6c69 6e65 5f6d  _id"] = inline_m
+0000db70: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
+0000db80: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
+0000db90: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000dba0: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
+0000dbb0: 2061 7761 6974 205f 636f 6e76 6572 745f   await _convert_
+0000dbc0: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+0000dbd0: 6b75 7029 0a20 2020 2072 6574 7572 6e20  kup).    return 
+0000dbe0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+0000dbf0: 6571 7565 7374 280a 2020 2020 2020 2020  equest(.        
+0000dc00: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000dc10: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000dc20: 642c 2066 696c 6573 3d66 696c 652c 206d  d, files=file, m
+0000dc30: 6574 686f 643d 2270 6f73 7422 2069 6620  ethod="post" if 
+0000dc40: 6669 6c65 2065 6c73 6520 2267 6574 220a  file else "get".
+0000dc50: 2020 2020 290a 0a0a 6173 796e 6320 6465      )...async de
+0000dc60: 6620 6564 6974 5f6d 6573 7361 6765 5f72  f edit_message_r
+0000dc70: 6570 6c79 5f6d 6172 6b75 7028 0a20 2020  eply_markup(.   
+0000dc80: 2074 6f6b 656e 2c20 6368 6174 5f69 643d   token, chat_id=
+0000dc90: 4e6f 6e65 2c20 6d65 7373 6167 655f 6964  None, message_id
+0000dca0: 3d4e 6f6e 652c 2069 6e6c 696e 655f 6d65  =None, inline_me
+0000dcb0: 7373 6167 655f 6964 3d4e 6f6e 652c 2072  ssage_id=None, r
+0000dcc0: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+0000dcd0: 0a29 3a0a 2020 2020 6d65 7468 6f64 5f75  .):.    method_u
+0000dce0: 726c 203d 2072 2265 6469 744d 6573 7361  rl = r"editMessa
+0000dcf0: 6765 5265 706c 794d 6172 6b75 7022 0a20  geReplyMarkup". 
+0000dd00: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
+0000dd10: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
+0000dd20: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000dd30: 2263 6861 745f 6964 225d 203d 2063 6861  "chat_id"] = cha
+0000dd40: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
+0000dd50: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
+0000dd60: 7061 796c 6f61 645b 226d 6573 7361 6765  payload["message
+0000dd70: 5f69 6422 5d20 3d20 6d65 7373 6167 655f  _id"] = message_
+0000dd80: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
+0000dd90: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
+0000dda0: 2020 2020 2070 6179 6c6f 6164 5b22 696e       payload["in
+0000ddb0: 6c69 6e65 5f6d 6573 7361 6765 5f69 6422  line_message_id"
+0000ddc0: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
+0000ddd0: 6765 5f69 640a 2020 2020 6966 2072 6570  ge_id.    if rep
+0000dde0: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
+0000ddf0: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
+0000de00: 795f 6d61 726b 7570 225d 203d 2061 7761  y_markup"] = awa
+0000de10: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
+0000de20: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+0000de30: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+0000de40: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+0000de50: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000de60: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000de70: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
+0000de80: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
+0000de90: 2064 656c 6574 655f 6d65 7373 6167 6528   delete_message(
+0000dea0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000deb0: 6d65 7373 6167 655f 6964 2c20 7469 6d65  message_id, time
+0000dec0: 6f75 743d 4e6f 6e65 293a 0a20 2020 206d  out=None):.    m
+0000ded0: 6574 686f 645f 7572 6c20 3d20 7222 6465  ethod_url = r"de
+0000dee0: 6c65 7465 4d65 7373 6167 6522 0a20 2020  leteMessage".   
+0000def0: 2070 6179 6c6f 6164 203d 207b 2263 6861   payload = {"cha
+0000df00: 745f 6964 223a 2063 6861 745f 6964 2c20  t_id": chat_id, 
+0000df10: 226d 6573 7361 6765 5f69 6422 3a20 6d65  "message_id": me
+0000df20: 7373 6167 655f 6964 7d0a 2020 2020 6966  ssage_id}.    if
+0000df30: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+0000df40: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
+0000df50: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
+0000df60: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000df70: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000df80: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000df90: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000dfa0: 6164 2c20 6d65 7468 6f64 3d22 706f 7374  ad, method="post
+0000dfb0: 2229 0a0a 0a23 2047 616d 650a 0a0a 6173  ")...# Game...as
+0000dfc0: 796e 6320 6465 6620 7365 6e64 5f67 616d  ync def send_gam
+0000dfd0: 6528 0a20 2020 2074 6f6b 656e 2c0a 2020  e(.    token,.  
+0000dfe0: 2020 6368 6174 5f69 642c 0a20 2020 2067    chat_id,.    g
+0000dff0: 616d 655f 7368 6f72 745f 6e61 6d65 2c0a  ame_short_name,.
+0000e000: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
+0000e010: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
+0000e020: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
+0000e030: 4e6f 6e65 2c0a 2020 2020 7469 6d65 6f75  None,.    timeou
+0000e040: 743d 4e6f 6e65 2c0a 2020 2020 7072 6f74  t=None,.    prot
+0000e050: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
+0000e060: 2c0a 2020 2020 6d65 7373 6167 655f 7468  ,.    message_th
+0000e070: 7265 6164 5f69 643d 4e6f 6e65 2c0a 2020  read_id=None,.  
+0000e080: 2020 7265 706c 795f 7061 7261 6d65 7465    reply_paramete
+0000e090: 7273 3d4e 6f6e 652c 0a20 2020 2062 7573  rs=None,.    bus
+0000e0a0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+0000e0b0: 5f69 643d 4e6f 6e65 2c0a 293a 0a20 2020  _id=None,.):.   
+0000e0c0: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
+0000e0d0: 7365 6e64 4761 6d65 220a 2020 2020 7061  sendGame".    pa
+0000e0e0: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
+0000e0f0: 6422 3a20 6368 6174 5f69 642c 2022 6761  d": chat_id, "ga
+0000e100: 6d65 5f73 686f 7274 5f6e 616d 6522 3a20  me_short_name": 
+0000e110: 6761 6d65 5f73 686f 7274 5f6e 616d 657d  game_short_name}
+0000e120: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+0000e130: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+0000e140: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000e150: 2020 7061 796c 6f61 645b 2264 6973 6162    payload["disab
+0000e160: 6c65 5f6e 6f74 6966 6963 6174 696f 6e22  le_notification"
+0000e170: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+0000e180: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
+0000e190: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+0000e1a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000e1b0: 2020 2020 2020 7061 796c 6f61 645b 2272        payload["r
+0000e1c0: 6570 6c79 5f70 6172 616d 6574 6572 7322  eply_parameters"
+0000e1d0: 5d20 3d20 6a73 6f6e 2e64 756d 7073 2872  ] = json.dumps(r
+0000e1e0: 6570 6c79 5f70 6172 616d 6574 6572 732e  eply_parameters.
+0000e1f0: 746f 5f64 6963 7428 2929 0a20 2020 2069  to_dict()).    i
+0000e200: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+0000e210: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000e220: 2272 6570 6c79 5f6d 6172 6b75 7022 5d20  "reply_markup"] 
+0000e230: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
+0000e240: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+0000e250: 726b 7570 290a 2020 2020 6966 2074 696d  rkup).    if tim
+0000e260: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+0000e270: 796c 6f61 645b 2274 696d 656f 7574 225d  yload["timeout"]
+0000e280: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+0000e290: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
+0000e2a0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
+0000e2b0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000e2c0: 7072 6f74 6563 745f 636f 6e74 656e 7422  protect_content"
+0000e2d0: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
+0000e2e0: 656e 740a 2020 2020 6966 206d 6573 7361  ent.    if messa
+0000e2f0: 6765 5f74 6872 6561 645f 6964 3a0a 2020  ge_thread_id:.  
+0000e300: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+0000e310: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+0000e320: 225d 203d 206d 6573 7361 6765 5f74 6872  "] = message_thr
+0000e330: 6561 645f 6964 0a20 2020 2069 6620 6275  ead_id.    if bu
+0000e340: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+0000e350: 6e5f 6964 3a0a 2020 2020 2020 2020 7061  n_id:.        pa
+0000e360: 796c 6f61 645b 2262 7573 696e 6573 735f  yload["business_
+0000e370: 636f 6e6e 6563 7469 6f6e 5f69 6422 5d20  connection_id"] 
+0000e380: 3d20 6275 7369 6e65 7373 5f63 6f6e 6e65  = business_conne
+0000e390: 6374 696f 6e5f 6964 0a20 2020 2072 6574  ction_id.    ret
+0000e3a0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000e3b0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000e3c0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000e3d0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+0000e3e0: 2320 6874 7470 733a 2f2f 636f 7265 2e74  # https://core.t
+0000e3f0: 656c 6567 7261 6d2e 6f72 672f 626f 7473  elegram.org/bots
+0000e400: 2f61 7069 2373 6574 6761 6d65 7363 6f72  /api#setgamescor
+0000e410: 650a 6173 796e 6320 6465 6620 7365 745f  e.async def set_
+0000e420: 6761 6d65 5f73 636f 7265 280a 2020 2020  game_score(.    
+0000e430: 746f 6b65 6e2c 0a20 2020 2075 7365 725f  token,.    user_
+0000e440: 6964 2c0a 2020 2020 7363 6f72 652c 0a20  id,.    score,. 
+0000e450: 2020 2066 6f72 6365 3d4e 6f6e 652c 0a20     force=None,. 
+0000e460: 2020 2064 6973 6162 6c65 5f65 6469 745f     disable_edit_
+0000e470: 6d65 7373 6167 653d 4e6f 6e65 2c0a 2020  message=None,.  
+0000e480: 2020 6368 6174 5f69 643d 4e6f 6e65 2c0a    chat_id=None,.
+0000e490: 2020 2020 6d65 7373 6167 655f 6964 3d4e      message_id=N
+0000e4a0: 6f6e 652c 0a20 2020 2069 6e6c 696e 655f  one,.    inline_
+0000e4b0: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+0000e4c0: 0a29 3a0a 2020 2020 2222 220a 2020 2020  .):.    """.    
+0000e4d0: 5573 6520 7468 6973 206d 6574 686f 6420  Use this method 
+0000e4e0: 746f 2073 6574 2074 6865 2073 636f 7265  to set the score
+0000e4f0: 206f 6620 7468 6520 7370 6563 6966 6965   of the specifie
+0000e500: 6420 7573 6572 2069 6e20 6120 6761 6d65  d user in a game
+0000e510: 2e20 4f6e 2073 7563 6365 7373 2c20 6966  . On success, if
+0000e520: 2074 6865 206d 6573 7361 6765 2077 6173   the message was
+0000e530: 2073 656e 7420 6279 2074 6865 2062 6f74   sent by the bot
+0000e540: 2c20 7265 7475 726e 7320 7468 6520 6564  , returns the ed
+0000e550: 6974 6564 204d 6573 7361 6765 2c20 6f74  ited Message, ot
+0000e560: 6865 7277 6973 6520 7265 7475 726e 7320  herwise returns 
+0000e570: 5472 7565 2e20 5265 7475 726e 7320 616e  True. Returns an
+0000e580: 2065 7272 6f72 2c20 6966 2074 6865 206e   error, if the n
+0000e590: 6577 2073 636f 7265 2069 7320 6e6f 7420  ew score is not 
+0000e5a0: 6772 6561 7465 7220 7468 616e 2074 6865  greater than the
+0000e5b0: 2075 7365 7227 7320 6375 7272 656e 7420   user's current 
+0000e5c0: 7363 6f72 6520 696e 2074 6865 2063 6861  score in the cha
+0000e5d0: 742e 0a20 2020 203a 7061 7261 6d20 746f  t..    :param to
+0000e5e0: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
+0000e5f0: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
+0000e600: 2074 6f20 6669 6c6c 2074 6869 7329 0a20   to fill this). 
+0000e610: 2020 203a 7061 7261 6d20 7573 6572 5f69     :param user_i
+0000e620: 643a 2055 7365 7220 6964 656e 7469 6669  d: User identifi
+0000e630: 6572 0a20 2020 203a 7061 7261 6d20 7363  er.    :param sc
+0000e640: 6f72 653a 204e 6577 2073 636f 7265 2c20  ore: New score, 
+0000e650: 6d75 7374 2062 6520 6e6f 6e2d 6e65 6761  must be non-nega
+0000e660: 7469 7665 0a20 2020 203a 7061 7261 6d20  tive.    :param 
+0000e670: 666f 7263 653a 2028 4f70 7469 6f6e 616c  force: (Optional
+0000e680: 2920 5061 7373 2054 7275 652c 2069 6620  ) Pass True, if 
+0000e690: 7468 6520 6869 6768 2073 636f 7265 2069  the high score i
+0000e6a0: 7320 616c 6c6f 7765 6420 746f 2064 6563  s allowed to dec
+0000e6b0: 7265 6173 652e 2054 6869 7320 6361 6e20  rease. This can 
+0000e6c0: 6265 2075 7365 6675 6c20 7768 656e 2066  be useful when f
+0000e6d0: 6978 696e 6720 6d69 7374 616b 6573 206f  ixing mistakes o
+0000e6e0: 7220 6261 6e6e 696e 6720 6368 6561 7465  r banning cheate
+0000e6f0: 7273 0a20 2020 203a 7061 7261 6d20 6469  rs.    :param di
+0000e700: 7361 626c 655f 6564 6974 5f6d 6573 7361  sable_edit_messa
+0000e710: 6765 3a20 284f 7074 696f 6e61 6c29 2050  ge: (Optional) P
+0000e720: 6173 7320 5472 7565 2c20 6966 2074 6865  ass True, if the
+0000e730: 2067 616d 6520 6d65 7373 6167 6520 7368   game message sh
+0000e740: 6f75 6c64 206e 6f74 2062 6520 6175 746f  ould not be auto
+0000e750: 6d61 7469 6361 6c6c 7920 6564 6974 6564  matically edited
+0000e760: 2074 6f20 696e 636c 7564 6520 7468 6520   to include the 
+0000e770: 6375 7272 656e 7420 7363 6f72 6562 6f61  current scoreboa
+0000e780: 7264 0a20 2020 203a 7061 7261 6d20 6368  rd.    :param ch
+0000e790: 6174 5f69 643a 2028 4f70 7469 6f6e 616c  at_id: (Optional
+0000e7a0: 2c20 7265 7175 6972 6564 2069 6620 696e  , required if in
+0000e7b0: 6c69 6e65 5f6d 6573 7361 6765 5f69 6420  line_message_id 
+0000e7c0: 6973 206e 6f74 2073 7065 6369 6669 6564  is not specified
+0000e7d0: 2920 556e 6971 7565 2069 6465 6e74 6966  ) Unique identif
+0000e7e0: 6965 7220 666f 7220 7468 6520 7461 7267  ier for the targ
+0000e7f0: 6574 2063 6861 7420 286f 7220 7573 6572  et chat (or user
+0000e800: 6e61 6d65 206f 6620 7468 6520 7461 7267  name of the targ
+0000e810: 6574 2063 6861 6e6e 656c 2069 6e20 7468  et channel in th
+0000e820: 6520 666f 726d 6174 2040 6368 616e 6e65  e format @channe
+0000e830: 6c75 7365 726e 616d 6529 0a20 2020 203a  lusername).    :
+0000e840: 7061 7261 6d20 6d65 7373 6167 655f 6964  param message_id
+0000e850: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
+0000e860: 7569 7265 6420 6966 2069 6e6c 696e 655f  uired if inline_
+0000e870: 6d65 7373 6167 655f 6964 2069 7320 6e6f  message_id is no
+0000e880: 7420 7370 6563 6966 6965 6429 2055 6e69  t specified) Uni
+0000e890: 7175 6520 6964 656e 7469 6669 6572 206f  que identifier o
+0000e8a0: 6620 7468 6520 7365 6e74 206d 6573 7361  f the sent messa
+0000e8b0: 6765 0a20 2020 203a 7061 7261 6d20 696e  ge.    :param in
+0000e8c0: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+0000e8d0: 2028 4f70 7469 6f6e 616c 2c20 7265 7175   (Optional, requ
+0000e8e0: 6972 6564 2069 6620 6368 6174 5f69 6420  ired if chat_id 
+0000e8f0: 616e 6420 6d65 7373 6167 655f 6964 2061  and message_id a
+0000e900: 7265 206e 6f74 2073 7065 6369 6669 6564  re not specified
+0000e910: 2920 4964 656e 7469 6669 6572 206f 6620  ) Identifier of 
+0000e920: 7468 6520 696e 6c69 6e65 206d 6573 7361  the inline messa
+0000e930: 6765 0a20 2020 203a 7265 7475 726e 3a0a  ge.    :return:.
+0000e940: 2020 2020 2222 220a 2020 2020 6d65 7468      """.    meth
+0000e950: 6f64 5f75 726c 203d 2072 2273 6574 4761  od_url = r"setGa
+0000e960: 6d65 5363 6f72 6522 0a20 2020 2070 6179  meScore".    pay
+0000e970: 6c6f 6164 203d 207b 2275 7365 725f 6964  load = {"user_id
+0000e980: 223a 2075 7365 725f 6964 2c20 2273 636f  ": user_id, "sco
+0000e990: 7265 223a 2073 636f 7265 7d0a 2020 2020  re": score}.    
+0000e9a0: 6966 2066 6f72 6365 2069 7320 6e6f 7420  if force is not 
+0000e9b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000e9c0: 796c 6f61 645b 2266 6f72 6365 225d 203d  yload["force"] =
+0000e9d0: 2066 6f72 6365 0a20 2020 2069 6620 6368   force.    if ch
+0000e9e0: 6174 5f69 643a 0a20 2020 2020 2020 2070  at_id:.        p
+0000e9f0: 6179 6c6f 6164 5b22 6368 6174 5f69 6422  ayload["chat_id"
+0000ea00: 5d20 3d20 6368 6174 5f69 640a 2020 2020  ] = chat_id.    
+0000ea10: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
+0000ea20: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+0000ea30: 6d65 7373 6167 655f 6964 225d 203d 206d  message_id"] = m
+0000ea40: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
+0000ea50: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000ea60: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+0000ea70: 6f61 645b 2269 6e6c 696e 655f 6d65 7373  oad["inline_mess
+0000ea80: 6167 655f 6964 225d 203d 2069 6e6c 696e  age_id"] = inlin
+0000ea90: 655f 6d65 7373 6167 655f 6964 0a20 2020  e_message_id.   
+0000eaa0: 2069 6620 6469 7361 626c 655f 6564 6974   if disable_edit
+0000eab0: 5f6d 6573 7361 6765 2069 7320 6e6f 7420  _message is not 
+0000eac0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000ead0: 796c 6f61 645b 2264 6973 6162 6c65 5f65  yload["disable_e
+0000eae0: 6469 745f 6d65 7373 6167 6522 5d20 3d20  dit_message"] = 
+0000eaf0: 6469 7361 626c 655f 6564 6974 5f6d 6573  disable_edit_mes
+0000eb00: 7361 6765 0a20 2020 2072 6574 7572 6e20  sage.    return 
+0000eb10: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+0000eb20: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+0000eb30: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+0000eb40: 3d70 6179 6c6f 6164 290a 0a0a 2320 6874  =payload)...# ht
+0000eb50: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+0000eb60: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+0000eb70: 2367 6574 6761 6d65 6869 6768 7363 6f72  #getgamehighscor
+0000eb80: 6573 0a61 7379 6e63 2064 6566 2067 6574  es.async def get
+0000eb90: 5f67 616d 655f 6869 6768 5f73 636f 7265  _game_high_score
+0000eba0: 7328 0a20 2020 2074 6f6b 656e 2c20 7573  s(.    token, us
+0000ebb0: 6572 5f69 642c 2063 6861 745f 6964 3d4e  er_id, chat_id=N
+0000ebc0: 6f6e 652c 206d 6573 7361 6765 5f69 643d  one, message_id=
+0000ebd0: 4e6f 6e65 2c20 696e 6c69 6e65 5f6d 6573  None, inline_mes
+0000ebe0: 7361 6765 5f69 643d 4e6f 6e65 0a29 3a0a  sage_id=None.):.
+0000ebf0: 2020 2020 2222 220a 2020 2020 5573 6520      """.    Use 
+0000ec00: 7468 6973 206d 6574 686f 6420 746f 2067  this method to g
+0000ec10: 6574 2064 6174 6120 666f 7220 6869 6768  et data for high
+0000ec20: 2073 636f 7265 2074 6162 6c65 732e 2057   score tables. W
+0000ec30: 696c 6c20 7265 7475 726e 2074 6865 2073  ill return the s
+0000ec40: 636f 7265 206f 6620 7468 6520 7370 6563  core of the spec
+0000ec50: 6966 6965 6420 7573 6572 2061 6e64 2073  ified user and s
+0000ec60: 6576 6572 616c 206f 6620 6869 7320 6e65  everal of his ne
+0000ec70: 6967 6862 6f72 7320 696e 2061 2067 616d  ighbors in a gam
+0000ec80: 652e 204f 6e20 7375 6363 6573 732c 2072  e. On success, r
+0000ec90: 6574 7572 6e73 2061 6e20 4172 7261 7920  eturns an Array 
+0000eca0: 6f66 2047 616d 6548 6967 6853 636f 7265  of GameHighScore
+0000ecb0: 206f 626a 6563 7473 2e0a 2020 2020 5468   objects..    Th
+0000ecc0: 6973 206d 6574 686f 6420 7769 6c6c 2063  is method will c
+0000ecd0: 7572 7265 6e74 6c79 2072 6574 7572 6e20  urrently return 
+0000ece0: 7363 6f72 6573 2066 6f72 2074 6865 2074  scores for the t
+0000ecf0: 6172 6765 7420 7573 6572 2c20 706c 7573  arget user, plus
+0000ed00: 2074 776f 206f 6620 6869 7320 636c 6f73   two of his clos
+0000ed10: 6573 7420 6e65 6967 6862 6f72 7320 6f6e  est neighbors on
+0000ed20: 2065 6163 6820 7369 6465 2e20 5769 6c6c   each side. Will
+0000ed30: 2061 6c73 6f20 7265 7475 726e 2074 6865   also return the
+0000ed40: 2074 6f70 2074 6872 6565 2075 7365 7273   top three users
+0000ed50: 2069 6620 7468 6520 7573 6572 2061 6e64   if the user and
+0000ed60: 2068 6973 206e 6569 6768 626f 7273 2061   his neighbors a
+0000ed70: 7265 206e 6f74 2061 6d6f 6e67 2074 6865  re not among the
+0000ed80: 6d2e 2050 6c65 6173 6520 6e6f 7465 2074  m. Please note t
+0000ed90: 6861 7420 7468 6973 2062 6568 6176 696f  hat this behavio
+0000eda0: 7220 6973 2073 7562 6a65 6374 2074 6f20  r is subject to 
+0000edb0: 6368 616e 6765 2e0a 2020 2020 3a70 6172  change..    :par
+0000edc0: 616d 2074 6f6b 656e 3a20 426f 7427 7320  am token: Bot's 
+0000edd0: 746f 6b65 6e20 2879 6f75 2064 6f6e 2774  token (you don't
+0000ede0: 206e 6565 6420 746f 2066 696c 6c20 7468   need to fill th
+0000edf0: 6973 290a 2020 2020 3a70 6172 616d 2075  is).    :param u
+0000ee00: 7365 725f 6964 3a20 5461 7267 6574 2075  ser_id: Target u
+0000ee10: 7365 7220 6964 0a20 2020 203a 7061 7261  ser id.    :para
+0000ee20: 6d20 6368 6174 5f69 643a 2028 4f70 7469  m chat_id: (Opti
+0000ee30: 6f6e 616c 2c20 7265 7175 6972 6564 2069  onal, required i
+0000ee40: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
+0000ee50: 5f69 6420 6973 206e 6f74 2073 7065 6369  _id is not speci
+0000ee60: 6669 6564 2920 556e 6971 7565 2069 6465  fied) Unique ide
+0000ee70: 6e74 6966 6965 7220 666f 7220 7468 6520  ntifier for the 
+0000ee80: 7461 7267 6574 2063 6861 7420 286f 7220  target chat (or 
+0000ee90: 7573 6572 6e61 6d65 206f 6620 7468 6520  username of the 
+0000eea0: 7461 7267 6574 2063 6861 6e6e 656c 2069  target channel i
+0000eeb0: 6e20 7468 6520 666f 726d 6174 2040 6368  n the format @ch
+0000eec0: 616e 6e65 6c75 7365 726e 616d 6529 0a20  annelusername). 
+0000eed0: 2020 203a 7061 7261 6d20 6d65 7373 6167     :param messag
+0000eee0: 655f 6964 3a20 284f 7074 696f 6e61 6c2c  e_id: (Optional,
+0000eef0: 2072 6571 7569 7265 6420 6966 2069 6e6c   required if inl
+0000ef00: 696e 655f 6d65 7373 6167 655f 6964 2069  ine_message_id i
+0000ef10: 7320 6e6f 7420 7370 6563 6966 6965 6429  s not specified)
+0000ef20: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
+0000ef30: 6572 206f 6620 7468 6520 7365 6e74 206d  er of the sent m
+0000ef40: 6573 7361 6765 0a20 2020 203a 7061 7261  essage.    :para
+0000ef50: 6d20 696e 6c69 6e65 5f6d 6573 7361 6765  m inline_message
+0000ef60: 5f69 643a 2028 4f70 7469 6f6e 616c 2c20  _id: (Optional, 
+0000ef70: 7265 7175 6972 6564 2069 6620 6368 6174  required if chat
+0000ef80: 5f69 6420 616e 6420 6d65 7373 6167 655f  _id and message_
+0000ef90: 6964 2061 7265 206e 6f74 2073 7065 6369  id are not speci
+0000efa0: 6669 6564 2920 4964 656e 7469 6669 6572  fied) Identifier
+0000efb0: 206f 6620 7468 6520 696e 6c69 6e65 206d   of the inline m
+0000efc0: 6573 7361 6765 0a20 2020 203a 7265 7475  essage.    :retu
+0000efd0: 726e 3a0a 2020 2020 2222 220a 2020 2020  rn:.    """.    
+0000efe0: 6d65 7468 6f64 5f75 726c 203d 2072 2267  method_url = r"g
+0000eff0: 6574 4761 6d65 4869 6768 5363 6f72 6573  etGameHighScores
+0000f000: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+0000f010: 7b22 7573 6572 5f69 6422 3a20 7573 6572  {"user_id": user
+0000f020: 5f69 647d 0a20 2020 2069 6620 6368 6174  _id}.    if chat
+0000f030: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000f040: 6c6f 6164 5b22 6368 6174 5f69 6422 5d20  load["chat_id"] 
+0000f050: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
+0000f060: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
+0000f070: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+0000f080: 7373 6167 655f 6964 225d 203d 206d 6573  ssage_id"] = mes
+0000f090: 7361 6765 5f69 640a 2020 2020 6966 2069  sage_id.    if i
+0000f0a0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000f0b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000f0c0: 645b 2269 6e6c 696e 655f 6d65 7373 6167  d["inline_messag
+0000f0d0: 655f 6964 225d 203d 2069 6e6c 696e 655f  e_id"] = inline_
+0000f0e0: 6d65 7373 6167 655f 6964 0a20 2020 2072  message_id.    r
+0000f0f0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+0000f100: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+0000f110: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000f120: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
+0000f130: 0a0a 2320 5061 796d 656e 7473 2028 6874  ..# Payments (ht
+0000f140: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+0000f150: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+0000f160: 2370 6179 6d65 6e74 7329 0a0a 0a61 7379  #payments)...asy
+0000f170: 6e63 2064 6566 2073 656e 645f 696e 766f  nc def send_invo
+0000f180: 6963 6528 0a20 2020 2074 6f6b 656e 2c0a  ice(.    token,.
+0000f190: 2020 2020 6368 6174 5f69 642c 0a20 2020      chat_id,.   
+0000f1a0: 2074 6974 6c65 2c0a 2020 2020 6465 7363   title,.    desc
+0000f1b0: 7269 7074 696f 6e2c 0a20 2020 2069 6e76  ription,.    inv
+0000f1c0: 6f69 6365 5f70 6179 6c6f 6164 2c0a 2020  oice_payload,.  
+0000f1d0: 2020 7072 6f76 6964 6572 5f74 6f6b 656e    provider_token
+0000f1e0: 2c0a 2020 2020 6375 7272 656e 6379 2c0a  ,.    currency,.
+0000f1f0: 2020 2020 7072 6963 6573 2c0a 2020 2020      prices,.    
+0000f200: 7374 6172 745f 7061 7261 6d65 7465 723d  start_parameter=
+0000f210: 4e6f 6e65 2c0a 2020 2020 7068 6f74 6f5f  None,.    photo_
+0000f220: 7572 6c3d 4e6f 6e65 2c0a 2020 2020 7068  url=None,.    ph
+0000f230: 6f74 6f5f 7369 7a65 3d4e 6f6e 652c 0a20  oto_size=None,. 
+0000f240: 2020 2070 686f 746f 5f77 6964 7468 3d4e     photo_width=N
+0000f250: 6f6e 652c 0a20 2020 2070 686f 746f 5f68  one,.    photo_h
+0000f260: 6569 6768 743d 4e6f 6e65 2c0a 2020 2020  eight=None,.    
+0000f270: 6e65 6564 5f6e 616d 653d 4e6f 6e65 2c0a  need_name=None,.
+0000f280: 2020 2020 6e65 6564 5f70 686f 6e65 5f6e      need_phone_n
+0000f290: 756d 6265 723d 4e6f 6e65 2c0a 2020 2020  umber=None,.    
+0000f2a0: 6e65 6564 5f65 6d61 696c 3d4e 6f6e 652c  need_email=None,
+0000f2b0: 0a20 2020 206e 6565 645f 7368 6970 7069  .    need_shippi
+0000f2c0: 6e67 5f61 6464 7265 7373 3d4e 6f6e 652c  ng_address=None,
+0000f2d0: 0a20 2020 2073 656e 645f 7068 6f6e 655f  .    send_phone_
+0000f2e0: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
+0000f2f0: 6572 3d4e 6f6e 652c 0a20 2020 2073 656e  er=None,.    sen
+0000f300: 645f 656d 6169 6c5f 746f 5f70 726f 7669  d_email_to_provi
+0000f310: 6465 723d 4e6f 6e65 2c0a 2020 2020 6973  der=None,.    is
+0000f320: 5f66 6c65 7869 626c 653d 4e6f 6e65 2c0a  _flexible=None,.
+0000f330: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
+0000f340: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
+0000f350: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
+0000f360: 4e6f 6e65 2c0a 2020 2020 7072 6f76 6964  None,.    provid
+0000f370: 6572 5f64 6174 613d 4e6f 6e65 2c0a 2020  er_data=None,.  
+0000f380: 2020 7469 6d65 6f75 743d 4e6f 6e65 2c0a    timeout=None,.
+0000f390: 2020 2020 6d61 785f 7469 705f 616d 6f75      max_tip_amou
+0000f3a0: 6e74 3d4e 6f6e 652c 0a20 2020 2073 7567  nt=None,.    sug
+0000f3b0: 6765 7374 6564 5f74 6970 5f61 6d6f 756e  gested_tip_amoun
+0000f3c0: 7473 3d4e 6f6e 652c 0a20 2020 2070 726f  ts=None,.    pro
+0000f3d0: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
+0000f3e0: 652c 0a20 2020 206d 6573 7361 6765 5f74  e,.    message_t
+0000f3f0: 6872 6561 645f 6964 3d4e 6f6e 652c 0a20  hread_id=None,. 
+0000f400: 2020 2072 6570 6c79 5f70 6172 616d 6574     reply_paramet
+0000f410: 6572 733d 4e6f 6e65 2c0a 293a 0a20 2020  ers=None,.):.   
+0000f420: 2022 2222 0a20 2020 2055 7365 2074 6869   """.    Use thi
+0000f430: 7320 6d65 7468 6f64 2074 6f20 7365 6e64  s method to send
+0000f440: 2069 6e76 6f69 6365 732e 204f 6e20 7375   invoices. On su
+0000f450: 6363 6573 732c 2074 6865 2073 656e 7420  ccess, the sent 
+0000f460: 4d65 7373 6167 6520 6973 2072 6574 7572  Message is retur
+0000f470: 6e65 642e 0a20 2020 203a 7061 7261 6d20  ned..    :param 
+0000f480: 746f 6b65 6e3a 2042 6f74 2773 2074 6f6b  token: Bot's tok
+0000f490: 656e 2028 796f 7520 646f 6e27 7420 6e65  en (you don't ne
+0000f4a0: 6564 2074 6f20 6669 6c6c 2074 6869 7329  ed to fill this)
+0000f4b0: 0a20 2020 203a 7061 7261 6d20 6368 6174  .    :param chat
+0000f4c0: 5f69 643a 2055 6e69 7175 6520 6964 656e  _id: Unique iden
+0000f4d0: 7469 6669 6572 2066 6f72 2074 6865 2074  tifier for the t
+0000f4e0: 6172 6765 7420 7072 6976 6174 6520 6368  arget private ch
+0000f4f0: 6174 0a20 2020 203a 7061 7261 6d20 7469  at.    :param ti
+0000f500: 746c 653a 2050 726f 6475 6374 206e 616d  tle: Product nam
+0000f510: 650a 2020 2020 3a70 6172 616d 2064 6573  e.    :param des
+0000f520: 6372 6970 7469 6f6e 3a20 5072 6f64 7563  cription: Produc
+0000f530: 7420 6465 7363 7269 7074 696f 6e0a 2020  t description.  
+0000f540: 2020 3a70 6172 616d 2069 6e76 6f69 6365    :param invoice
+0000f550: 5f70 6179 6c6f 6164 3a20 426f 742d 6465  _payload: Bot-de
+0000f560: 6669 6e65 6420 696e 766f 6963 6520 7061  fined invoice pa
+0000f570: 796c 6f61 642c 2031 2d31 3238 2062 7974  yload, 1-128 byt
+0000f580: 6573 2e20 5468 6973 2077 696c 6c20 6e6f  es. This will no
+0000f590: 7420 6265 2064 6973 706c 6179 6564 2074  t be displayed t
+0000f5a0: 6f20 7468 6520 7573 6572 2c20 7573 6520  o the user, use 
+0000f5b0: 666f 7220 796f 7572 2069 6e74 6572 6e61  for your interna
+0000f5c0: 6c20 7072 6f63 6573 7365 732e 0a20 2020  l processes..   
+0000f5d0: 203a 7061 7261 6d20 7072 6f76 6964 6572   :param provider
+0000f5e0: 5f74 6f6b 656e 3a20 5061 796d 656e 7473  _token: Payments
+0000f5f0: 2070 726f 7669 6465 7220 746f 6b65 6e2c   provider token,
+0000f600: 206f 6274 6169 6e65 6420 7669 6120 4042   obtained via @B
+0000f610: 6f74 6661 7468 6572 0a20 2020 203a 7061  otfather.    :pa
+0000f620: 7261 6d20 6375 7272 656e 6379 3a20 5468  ram currency: Th
+0000f630: 7265 652d 6c65 7474 6572 2049 534f 2034  ree-letter ISO 4
+0000f640: 3231 3720 6375 7272 656e 6379 2063 6f64  217 currency cod
+0000f650: 652c 2073 6565 2068 7474 7073 3a2f 2f63  e, see https://c
+0000f660: 6f72 652e 7465 6c65 6772 616d 2e6f 7267  ore.telegram.org
+0000f670: 2f62 6f74 732f 7061 796d 656e 7473 2373  /bots/payments#s
+0000f680: 7570 706f 7274 6564 2d63 7572 7265 6e63  upported-currenc
+0000f690: 6965 730a 2020 2020 3a70 6172 616d 2070  ies.    :param p
+0000f6a0: 7269 6365 733a 2050 7269 6365 2062 7265  rices: Price bre
+0000f6b0: 616b 646f 776e 2c20 6120 6c69 7374 206f  akdown, a list o
+0000f6c0: 6620 636f 6d70 6f6e 656e 7473 2028 652e  f components (e.
+0000f6d0: 672e 2070 726f 6475 6374 2070 7269 6365  g. product price
+0000f6e0: 2c20 7461 782c 2064 6973 636f 756e 742c  , tax, discount,
+0000f6f0: 2064 656c 6976 6572 7920 636f 7374 2c20   delivery cost, 
+0000f700: 6465 6c69 7665 7279 2074 6178 2c20 626f  delivery tax, bo
+0000f710: 6e75 732c 2065 7463 2e29 0a20 2020 203a  nus, etc.).    :
+0000f720: 7061 7261 6d20 7374 6172 745f 7061 7261  param start_para
+0000f730: 6d65 7465 723a 2055 6e69 7175 6520 6465  meter: Unique de
+0000f740: 6570 2d6c 696e 6b69 6e67 2070 6172 616d  ep-linking param
+0000f750: 6574 6572 2074 6861 7420 6361 6e20 6265  eter that can be
+0000f760: 2075 7365 6420 746f 2067 656e 6572 6174   used to generat
+0000f770: 6520 7468 6973 2069 6e76 6f69 6365 2077  e this invoice w
+0000f780: 6865 6e20 7573 6564 2061 7320 6120 7374  hen used as a st
+0000f790: 6172 7420 7061 7261 6d65 7465 720a 2020  art parameter.  
+0000f7a0: 2020 3a70 6172 616d 2070 686f 746f 5f75    :param photo_u
+0000f7b0: 726c 3a20 5552 4c20 6f66 2074 6865 2070  rl: URL of the p
+0000f7c0: 726f 6475 6374 2070 686f 746f 2066 6f72  roduct photo for
+0000f7d0: 2074 6865 2069 6e76 6f69 6365 2e20 4361   the invoice. Ca
+0000f7e0: 6e20 6265 2061 2070 686f 746f 206f 6620  n be a photo of 
+0000f7f0: 7468 6520 676f 6f64 7320 6f72 2061 206d  the goods or a m
+0000f800: 6172 6b65 7469 6e67 2069 6d61 6765 2066  arketing image f
+0000f810: 6f72 2061 2073 6572 7669 6365 2e20 5065  or a service. Pe
+0000f820: 6f70 6c65 206c 696b 6520 6974 2062 6574  ople like it bet
+0000f830: 7465 7220 7768 656e 2074 6865 7920 7365  ter when they se
+0000f840: 6520 7768 6174 2074 6865 7920 6172 6520  e what they are 
+0000f850: 7061 7969 6e67 2066 6f72 2e0a 2020 2020  paying for..    
+0000f860: 3a70 6172 616d 2070 686f 746f 5f73 697a  :param photo_siz
+0000f870: 653a 2050 686f 746f 2073 697a 650a 2020  e: Photo size.  
+0000f880: 2020 3a70 6172 616d 2070 686f 746f 5f77    :param photo_w
+0000f890: 6964 7468 3a20 5068 6f74 6f20 7769 6474  idth: Photo widt
+0000f8a0: 680a 2020 2020 3a70 6172 616d 2070 686f  h.    :param pho
+0000f8b0: 746f 5f68 6569 6768 743a 2050 686f 746f  to_height: Photo
+0000f8c0: 2068 6569 6768 740a 2020 2020 3a70 6172   height.    :par
+0000f8d0: 616d 206e 6565 645f 6e61 6d65 3a20 5061  am need_name: Pa
+0000f8e0: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
+0000f8f0: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
+0000f900: 2773 2066 756c 6c20 6e61 6d65 2074 6f20  's full name to 
+0000f910: 636f 6d70 6c65 7465 2074 6865 206f 7264  complete the ord
+0000f920: 6572 0a20 2020 203a 7061 7261 6d20 6e65  er.    :param ne
+0000f930: 6564 5f70 686f 6e65 5f6e 756d 6265 723a  ed_phone_number:
+0000f940: 2050 6173 7320 5472 7565 2c20 6966 2079   Pass True, if y
+0000f950: 6f75 2072 6571 7569 7265 2074 6865 2075  ou require the u
+0000f960: 7365 7227 7320 7068 6f6e 6520 6e75 6d62  ser's phone numb
+0000f970: 6572 2074 6f20 636f 6d70 6c65 7465 2074  er to complete t
+0000f980: 6865 206f 7264 6572 0a20 2020 203a 7061  he order.    :pa
+0000f990: 7261 6d20 6e65 6564 5f65 6d61 696c 3a20  ram need_email: 
+0000f9a0: 5061 7373 2054 7275 652c 2069 6620 796f  Pass True, if yo
+0000f9b0: 7520 7265 7175 6972 6520 7468 6520 7573  u require the us
+0000f9c0: 6572 2773 2065 6d61 696c 2074 6f20 636f  er's email to co
+0000f9d0: 6d70 6c65 7465 2074 6865 206f 7264 6572  mplete the order
+0000f9e0: 0a20 2020 203a 7061 7261 6d20 6e65 6564  .    :param need
+0000f9f0: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
+0000fa00: 733a 2050 6173 7320 5472 7565 2c20 6966  s: Pass True, if
+0000fa10: 2079 6f75 2072 6571 7569 7265 2074 6865   you require the
+0000fa20: 2075 7365 7227 7320 7368 6970 7069 6e67   user's shipping
+0000fa30: 2061 6464 7265 7373 2074 6f20 636f 6d70   address to comp
+0000fa40: 6c65 7465 2074 6865 206f 7264 6572 0a20  lete the order. 
+0000fa50: 2020 203a 7061 7261 6d20 6973 5f66 6c65     :param is_fle
+0000fa60: 7869 626c 653a 2050 6173 7320 5472 7565  xible: Pass True
+0000fa70: 2c20 6966 2074 6865 2066 696e 616c 2070  , if the final p
+0000fa80: 7269 6365 2064 6570 656e 6473 206f 6e20  rice depends on 
+0000fa90: 7468 6520 7368 6970 7069 6e67 206d 6574  the shipping met
+0000faa0: 686f 640a 2020 2020 3a70 6172 616d 2073  hod.    :param s
+0000fab0: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
+0000fac0: 5f74 6f5f 7072 6f76 6964 6572 3a20 5061  _to_provider: Pa
+0000fad0: 7373 2054 7275 652c 2069 6620 7573 6572  ss True, if user
+0000fae0: 2773 2070 686f 6e65 206e 756d 6265 7220  's phone number 
+0000faf0: 7368 6f75 6c64 2062 6520 7365 6e74 2074  should be sent t
+0000fb00: 6f20 7072 6f76 6964 6572 0a20 2020 203a  o provider.    :
+0000fb10: 7061 7261 6d20 7365 6e64 5f65 6d61 696c  param send_email
+0000fb20: 5f74 6f5f 7072 6f76 6964 6572 3a20 5061  _to_provider: Pa
+0000fb30: 7373 2054 7275 652c 2069 6620 7573 6572  ss True, if user
+0000fb40: 2773 2065 6d61 696c 2061 6464 7265 7373  's email address
+0000fb50: 2073 686f 756c 6420 6265 2073 656e 7420   should be sent 
+0000fb60: 746f 2070 726f 7669 6465 720a 2020 2020  to provider.    
+0000fb70: 3a70 6172 616d 2064 6973 6162 6c65 5f6e  :param disable_n
+0000fb80: 6f74 6966 6963 6174 696f 6e3a 2053 656e  otification: Sen
+0000fb90: 6473 2074 6865 206d 6573 7361 6765 2073  ds the message s
+0000fba0: 696c 656e 746c 792e 2055 7365 7273 2077  ilently. Users w
+0000fbb0: 696c 6c20 7265 6365 6976 6520 6120 6e6f  ill receive a no
+0000fbc0: 7469 6669 6361 7469 6f6e 2077 6974 6820  tification with 
+0000fbd0: 6e6f 2073 6f75 6e64 2e0a 2020 2020 3a70  no sound..    :p
+0000fbe0: 6172 616d 2072 6570 6c79 5f6d 6172 6b75  aram reply_marku
+0000fbf0: 703a 2041 204a 534f 4e2d 7365 7269 616c  p: A JSON-serial
+0000fc00: 697a 6564 206f 626a 6563 7420 666f 7220  ized object for 
+0000fc10: 616e 2069 6e6c 696e 6520 6b65 7962 6f61  an inline keyboa
+0000fc20: 7264 2e20 4966 2065 6d70 7479 2c20 6f6e  rd. If empty, on
+0000fc30: 6520 2750 6179 2074 6f74 616c 2070 7269  e 'Pay total pri
+0000fc40: 6365 2720 6275 7474 6f6e 2077 696c 6c20  ce' button will 
+0000fc50: 6265 2073 686f 776e 2e20 4966 206e 6f74  be shown. If not
+0000fc60: 2065 6d70 7479 2c20 7468 6520 6669 7273   empty, the firs
+0000fc70: 7420 6275 7474 6f6e 206d 7573 7420 6265  t button must be
+0000fc80: 2061 2050 6179 2062 7574 746f 6e0a 2020   a Pay button.  
+0000fc90: 2020 3a70 6172 616d 2070 726f 7669 6465    :param provide
+0000fca0: 725f 6461 7461 3a20 4120 4a53 4f4e 2d73  r_data: A JSON-s
+0000fcb0: 6572 6961 6c69 7a65 6420 6461 7461 2061  erialized data a
+0000fcc0: 626f 7574 2074 6865 2069 6e76 6f69 6365  bout the invoice
+0000fcd0: 2c20 7768 6963 6820 7769 6c6c 2062 6520  , which will be 
+0000fce0: 7368 6172 6564 2077 6974 6820 7468 6520  shared with the 
+0000fcf0: 7061 796d 656e 7420 7072 6f76 6964 6572  payment provider
+0000fd00: 2e20 4120 6465 7461 696c 6564 2064 6573  . A detailed des
+0000fd10: 6372 6970 7469 6f6e 206f 6620 7265 7175  cription of requ
+0000fd20: 6972 6564 2066 6965 6c64 7320 7368 6f75  ired fields shou
+0000fd30: 6c64 2062 6520 7072 6f76 6964 6564 2062  ld be provided b
+0000fd40: 7920 7468 6520 7061 796d 656e 7420 7072  y the payment pr
+0000fd50: 6f76 6964 6572 2e0a 2020 2020 3a70 6172  ovider..    :par
+0000fd60: 616d 2074 696d 656f 7574 3a0a 2020 2020  am timeout:.    
+0000fd70: 3a70 6172 616d 206d 6178 5f74 6970 5f61  :param max_tip_a
+0000fd80: 6d6f 756e 743a 2054 6865 206d 6178 696d  mount: The maxim
+0000fd90: 756d 2061 6363 6570 7465 6420 616d 6f75  um accepted amou
+0000fda0: 6e74 2066 6f72 2074 6970 7320 696e 2074  nt for tips in t
+0000fdb0: 6865 2073 6d61 6c6c 6573 7420 756e 6974  he smallest unit
+0000fdc0: 7320 6f66 2074 6865 2063 7572 7265 6e63  s of the currenc
+0000fdd0: 790a 2020 2020 3a70 6172 616d 2073 7567  y.    :param sug
+0000fde0: 6765 7374 6564 5f74 6970 5f61 6d6f 756e  gested_tip_amoun
+0000fdf0: 7473 3a20 4120 4a53 4f4e 2d73 6572 6961  ts: A JSON-seria
+0000fe00: 6c69 7a65 6420 6172 7261 7920 6f66 2073  lized array of s
+0000fe10: 7567 6765 7374 6564 2061 6d6f 756e 7473  uggested amounts
+0000fe20: 206f 6620 7469 7073 2069 6e20 7468 6520   of tips in the 
+0000fe30: 736d 616c 6c65 7374 2075 6e69 7473 206f  smallest units o
+0000fe40: 6620 7468 6520 6375 7272 656e 6379 2e0a  f the currency..
+0000fe50: 2020 2020 2020 2020 4174 206d 6f73 7420          At most 
+0000fe60: 3420 7375 6767 6573 7465 6420 7469 7020  4 suggested tip 
+0000fe70: 616d 6f75 6e74 7320 6361 6e20 6265 2073  amounts can be s
+0000fe80: 7065 6369 6669 6564 2e20 5468 6520 7375  pecified. The su
+0000fe90: 6767 6573 7465 6420 7469 7020 616d 6f75  ggested tip amou
+0000fea0: 6e74 7320 6d75 7374 2062 6520 706f 7369  nts must be posi
+0000feb0: 7469 7665 2c20 7061 7373 6564 2069 6e20  tive, passed in 
+0000fec0: 6120 7374 7269 6374 6c79 2069 6e63 7265  a strictly incre
+0000fed0: 6173 6564 206f 7264 6572 2061 6e64 206d  ased order and m
+0000fee0: 7573 7420 6e6f 7420 6578 6365 6564 206d  ust not exceed m
+0000fef0: 6178 5f74 6970 5f61 6d6f 756e 742e 0a20  ax_tip_amount.. 
+0000ff00: 2020 203a 7061 7261 6d20 7072 6f74 6563     :param protec
+0000ff10: 745f 636f 6e74 656e 743a 2050 726f 7465  t_content: Prote
+0000ff20: 6374 7320 7468 6520 636f 6e74 656e 7473  cts the contents
+0000ff30: 206f 6620 7468 6520 7365 6e74 206d 6573   of the sent mes
+0000ff40: 7361 6765 2066 726f 6d20 666f 7277 6172  sage from forwar
+0000ff50: 6469 6e67 2061 6e64 2073 6176 696e 670a  ding and saving.
+0000ff60: 2020 2020 3a70 6172 616d 206d 6573 7361      :param messa
+0000ff70: 6765 5f74 6872 6561 645f 6964 3a20 556e  ge_thread_id: Un
+0000ff80: 6971 7565 2069 6465 6e74 6966 6965 7220  ique identifier 
+0000ff90: 666f 7220 7468 6520 7461 7267 6574 206d  for the target m
+0000ffa0: 6573 7361 6765 2074 6872 6561 6420 2874  essage thread (t
+0000ffb0: 6f70 6963 2920 6f66 2074 6865 2066 6f72  opic) of the for
+0000ffc0: 756d 3b20 666f 7220 666f 7275 6d20 7375  um; for forum su
+0000ffd0: 7065 7267 726f 7570 7320 6f6e 6c79 0a20  pergroups only. 
+0000ffe0: 2020 203a 7061 7261 6d20 7265 706c 795f     :param reply_
+0000fff0: 7061 7261 6d65 7465 7273 3a20 4120 4a53  parameters: A JS
+00010000: 4f4e 2d73 6572 6961 6c69 7a65 6420 6f62  ON-serialized ob
+00010010: 6a65 6374 2066 6f72 2061 6e20 696e 6c69  ject for an inli
+00010020: 6e65 206b 6579 626f 6172 642e 2049 6620  ne keyboard. If 
+00010030: 656d 7074 792c 206f 6e65 2027 5061 7920  empty, one 'Pay 
+00010040: 746f 7461 6c20 7072 6963 6527 2062 7574  total price' but
+00010050: 746f 6e20 7769 6c6c 2062 6520 7368 6f77  ton will be show
+00010060: 6e2e 2049 6620 6e6f 7420 656d 7074 792c  n. If not empty,
+00010070: 2074 6865 2066 6972 7374 2062 7574 746f   the first butto
+00010080: 6e20 6d75 7374 2062 6520 6120 5061 7920  n must be a Pay 
+00010090: 6275 7474 6f6e 2e0a 2020 2020 3a72 6574  button..    :ret
+000100a0: 7572 6e3a 0a20 2020 2022 2222 0a20 2020  urn:.    """.   
+000100b0: 206d 6574 686f 645f 7572 6c20 3d20 7222   method_url = r"
+000100c0: 7365 6e64 496e 766f 6963 6522 0a20 2020  sendInvoice".   
+000100d0: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
+000100e0: 2020 2020 2022 6368 6174 5f69 6422 3a20       "chat_id": 
+000100f0: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
+00010100: 2022 7469 746c 6522 3a20 7469 746c 652c   "title": title,
+00010110: 0a20 2020 2020 2020 2022 6465 7363 7269  .        "descri
+00010120: 7074 696f 6e22 3a20 6465 7363 7269 7074  ption": descript
+00010130: 696f 6e2c 0a20 2020 2020 2020 2022 7061  ion,.        "pa
+00010140: 796c 6f61 6422 3a20 696e 766f 6963 655f  yload": invoice_
+00010150: 7061 796c 6f61 642c 0a20 2020 2020 2020  payload,.       
+00010160: 2022 7072 6f76 6964 6572 5f74 6f6b 656e   "provider_token
+00010170: 223a 2070 726f 7669 6465 725f 746f 6b65  ": provider_toke
+00010180: 6e2c 0a20 2020 2020 2020 2022 6375 7272  n,.        "curr
+00010190: 656e 6379 223a 2063 7572 7265 6e63 792c  ency": currency,
+000101a0: 0a20 2020 2020 2020 2022 7072 6963 6573  .        "prices
+000101b0: 223a 2061 7761 6974 205f 636f 6e76 6572  ": await _conver
+000101c0: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
+000101d0: 616c 697a 6162 6c65 2870 7269 6365 7329  alizable(prices)
+000101e0: 2c0a 2020 2020 7d0a 2020 2020 6966 2073  ,.    }.    if s
+000101f0: 7461 7274 5f70 6172 616d 6574 6572 3a0a  tart_parameter:.
+00010200: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00010210: 2273 7461 7274 5f70 6172 616d 6574 6572  "start_parameter
+00010220: 225d 203d 2073 7461 7274 5f70 6172 616d  "] = start_param
+00010230: 6574 6572 0a20 2020 2069 6620 7068 6f74  eter.    if phot
+00010240: 6f5f 7572 6c3a 0a20 2020 2020 2020 2070  o_url:.        p
+00010250: 6179 6c6f 6164 5b22 7068 6f74 6f5f 7572  ayload["photo_ur
+00010260: 6c22 5d20 3d20 7068 6f74 6f5f 7572 6c0a  l"] = photo_url.
+00010270: 2020 2020 6966 2070 686f 746f 5f73 697a      if photo_siz
+00010280: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00010290: 6164 5b22 7068 6f74 6f5f 7369 7a65 225d  ad["photo_size"]
+000102a0: 203d 2070 686f 746f 5f73 697a 650a 2020   = photo_size.  
+000102b0: 2020 6966 2070 686f 746f 5f77 6964 7468    if photo_width
+000102c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000102d0: 645b 2270 686f 746f 5f77 6964 7468 225d  d["photo_width"]
+000102e0: 203d 2070 686f 746f 5f77 6964 7468 0a20   = photo_width. 
+000102f0: 2020 2069 6620 7068 6f74 6f5f 6865 6967     if photo_heig
+00010300: 6874 3a0a 2020 2020 2020 2020 7061 796c  ht:.        payl
+00010310: 6f61 645b 2270 686f 746f 5f68 6569 6768  oad["photo_heigh
+00010320: 7422 5d20 3d20 7068 6f74 6f5f 6865 6967  t"] = photo_heig
+00010330: 6874 0a20 2020 2069 6620 6e65 6564 5f6e  ht.    if need_n
+00010340: 616d 6520 6973 206e 6f74 204e 6f6e 653a  ame is not None:
+00010350: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00010360: 5b22 6e65 6564 5f6e 616d 6522 5d20 3d20  ["need_name"] = 
+00010370: 6e65 6564 5f6e 616d 650a 2020 2020 6966  need_name.    if
+00010380: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
+00010390: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
+000103a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000103b0: 226e 6565 645f 7068 6f6e 655f 6e75 6d62  "need_phone_numb
+000103c0: 6572 225d 203d 206e 6565 645f 7068 6f6e  er"] = need_phon
+000103d0: 655f 6e75 6d62 6572 0a20 2020 2069 6620  e_number.    if 
+000103e0: 6e65 6564 5f65 6d61 696c 2069 7320 6e6f  need_email is no
+000103f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00010400: 7061 796c 6f61 645b 226e 6565 645f 656d  payload["need_em
+00010410: 6169 6c22 5d20 3d20 6e65 6564 5f65 6d61  ail"] = need_ema
+00010420: 696c 0a20 2020 2069 6620 6e65 6564 5f73  il.    if need_s
+00010430: 6869 7070 696e 675f 6164 6472 6573 7320  hipping_address 
+00010440: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00010450: 2020 2020 2070 6179 6c6f 6164 5b22 6e65       payload["ne
+00010460: 6564 5f73 6869 7070 696e 675f 6164 6472  ed_shipping_addr
+00010470: 6573 7322 5d20 3d20 6e65 6564 5f73 6869  ess"] = need_shi
+00010480: 7070 696e 675f 6164 6472 6573 730a 2020  pping_address.  
+00010490: 2020 6966 2073 656e 645f 7068 6f6e 655f    if send_phone_
+000104a0: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
+000104b0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
+000104c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000104d0: 2273 656e 645f 7068 6f6e 655f 6e75 6d62  "send_phone_numb
+000104e0: 6572 5f74 6f5f 7072 6f76 6964 6572 225d  er_to_provider"]
+000104f0: 203d 2073 656e 645f 7068 6f6e 655f 6e75   = send_phone_nu
+00010500: 6d62 6572 5f74 6f5f 7072 6f76 6964 6572  mber_to_provider
+00010510: 0a20 2020 2069 6620 7365 6e64 5f65 6d61  .    if send_ema
+00010520: 696c 5f74 6f5f 7072 6f76 6964 6572 2069  il_to_provider i
+00010530: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00010540: 2020 2020 7061 796c 6f61 645b 2273 656e      payload["sen
+00010550: 645f 656d 6169 6c5f 746f 5f70 726f 7669  d_email_to_provi
+00010560: 6465 7222 5d20 3d20 7365 6e64 5f65 6d61  der"] = send_ema
+00010570: 696c 5f74 6f5f 7072 6f76 6964 6572 0a20  il_to_provider. 
+00010580: 2020 2069 6620 6973 5f66 6c65 7869 626c     if is_flexibl
+00010590: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+000105a0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000105b0: 6973 5f66 6c65 7869 626c 6522 5d20 3d20  is_flexible"] = 
+000105c0: 6973 5f66 6c65 7869 626c 650a 2020 2020  is_flexible.    
+000105d0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+000105e0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+000105f0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00010600: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
+00010610: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
+00010620: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00010630: 696f 6e0a 2020 2020 6966 2072 6570 6c79  ion.    if reply
+00010640: 5f70 6172 616d 6574 6572 7320 6973 206e  _parameters is n
+00010650: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00010660: 2070 6179 6c6f 6164 5b22 7265 706c 795f   payload["reply_
+00010670: 7061 7261 6d65 7465 7273 225d 203d 206a  parameters"] = j
+00010680: 736f 6e2e 6475 6d70 7328 7265 706c 795f  son.dumps(reply_
+00010690: 7061 7261 6d65 7465 7273 2e74 6f5f 6469  parameters.to_di
+000106a0: 6374 2829 290a 2020 2020 6966 2072 6570  ct()).    if rep
+000106b0: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
+000106c0: 2020 2070 6179 6c6f 6164 5b22 7265 706c     payload["repl
+000106d0: 795f 6d61 726b 7570 225d 203d 2061 7761  y_markup"] = awa
+000106e0: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
+000106f0: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+00010700: 0a20 2020 2069 6620 7072 6f76 6964 6572  .    if provider
+00010710: 5f64 6174 613a 0a20 2020 2020 2020 2070  _data:.        p
+00010720: 6179 6c6f 6164 5b22 7072 6f76 6964 6572  ayload["provider
+00010730: 5f64 6174 6122 5d20 3d20 7072 6f76 6964  _data"] = provid
+00010740: 6572 5f64 6174 610a 2020 2020 6966 2074  er_data.    if t
+00010750: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00010760: 7061 796c 6f61 645b 2274 696d 656f 7574  payload["timeout
+00010770: 225d 203d 2074 696d 656f 7574 0a20 2020  "] = timeout.   
+00010780: 2069 6620 6d61 785f 7469 705f 616d 6f75   if max_tip_amou
+00010790: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
+000107a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000107b0: 226d 6178 5f74 6970 5f61 6d6f 756e 7422  "max_tip_amount"
+000107c0: 5d20 3d20 6d61 785f 7469 705f 616d 6f75  ] = max_tip_amou
+000107d0: 6e74 0a20 2020 2069 6620 7375 6767 6573  nt.    if sugges
+000107e0: 7465 645f 7469 705f 616d 6f75 6e74 7320  ted_tip_amounts 
+000107f0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00010800: 2020 2020 2070 6179 6c6f 6164 5b22 7375       payload["su
+00010810: 6767 6573 7465 645f 7469 705f 616d 6f75  ggested_tip_amou
+00010820: 6e74 7322 5d20 3d20 6a73 6f6e 2e64 756d  nts"] = json.dum
+00010830: 7073 2873 7567 6765 7374 6564 5f74 6970  ps(suggested_tip
+00010840: 5f61 6d6f 756e 7473 290a 2020 2020 6966  _amounts).    if
+00010850: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00010860: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00010870: 2020 2020 2020 7061 796c 6f61 645b 2270        payload["p
+00010880: 726f 7465 6374 5f63 6f6e 7465 6e74 225d  rotect_content"]
+00010890: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+000108a0: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
+000108b0: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
+000108c0: 2020 2020 2070 6179 6c6f 6164 5b22 6d65       payload["me
+000108d0: 7373 6167 655f 7468 7265 6164 5f69 6422  ssage_thread_id"
+000108e0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+000108f0: 6164 5f69 640a 2020 2020 7265 7475 726e  ad_id.    return
+00010900: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00010910: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00010920: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00010930: 733d 7061 796c 6f61 6429 0a0a 0a61 7379  s=payload)...asy
+00010940: 6e63 2064 6566 2061 6e73 7765 725f 7368  nc def answer_sh
+00010950: 6970 7069 6e67 5f71 7565 7279 280a 2020  ipping_query(.  
+00010960: 2020 746f 6b65 6e2c 2073 6869 7070 696e    token, shippin
+00010970: 675f 7175 6572 795f 6964 2c20 6f6b 2c20  g_query_id, ok, 
+00010980: 7368 6970 7069 6e67 5f6f 7074 696f 6e73  shipping_options
+00010990: 3d4e 6f6e 652c 2065 7272 6f72 5f6d 6573  =None, error_mes
+000109a0: 7361 6765 3d4e 6f6e 650a 293a 0a20 2020  sage=None.):.   
+000109b0: 2022 2222 0a20 2020 2049 6620 796f 7520   """.    If you 
+000109c0: 7365 6e74 2061 6e20 696e 766f 6963 6520  sent an invoice 
+000109d0: 7265 7175 6573 7469 6e67 2061 2073 6869  requesting a shi
+000109e0: 7070 696e 6720 6164 6472 6573 7320 616e  pping address an
+000109f0: 6420 7468 6520 7061 7261 6d65 7465 7220  d the parameter 
+00010a00: 6973 5f66 6c65 7869 626c 6520 7761 7320  is_flexible was 
+00010a10: 7370 6563 6966 6965 642c 2074 6865 2042  specified, the B
+00010a20: 6f74 2041 5049 2077 696c 6c20 7365 6e64  ot API will send
+00010a30: 2061 6e20 5570 6461 7465 2077 6974 6820   an Update with 
+00010a40: 6120 7368 6970 7069 6e67 5f71 7565 7279  a shipping_query
+00010a50: 2066 6965 6c64 2074 6f20 7468 6520 626f   field to the bo
+00010a60: 742e 2055 7365 2074 6869 7320 6d65 7468  t. Use this meth
+00010a70: 6f64 2074 6f20 7265 706c 7920 746f 2073  od to reply to s
+00010a80: 6869 7070 696e 6720 7175 6572 6965 732e  hipping queries.
+00010a90: 204f 6e20 7375 6363 6573 732c 2054 7275   On success, Tru
+00010aa0: 6520 6973 2072 6574 7572 6e65 642e 0a20  e is returned.. 
+00010ab0: 2020 203a 7061 7261 6d20 746f 6b65 6e3a     :param token:
+00010ac0: 2042 6f74 2773 2074 6f6b 656e 2028 796f   Bot's token (yo
+00010ad0: 7520 646f 6e27 7420 6e65 6564 2074 6f20  u don't need to 
+00010ae0: 6669 6c6c 2074 6869 7329 0a20 2020 203a  fill this).    :
+00010af0: 7061 7261 6d20 7368 6970 7069 6e67 5f71  param shipping_q
+00010b00: 7565 7279 5f69 643a 2055 6e69 7175 6520  uery_id: Unique 
+00010b10: 6964 656e 7469 6669 6572 2066 6f72 2074  identifier for t
+00010b20: 6865 2071 7565 7279 2074 6f20 6265 2061  he query to be a
+00010b30: 6e73 7765 7265 640a 2020 2020 3a70 6172  nswered.    :par
+00010b40: 616d 206f 6b3a 2053 7065 6369 6679 2054  am ok: Specify T
+00010b50: 7275 6520 6966 2064 656c 6976 6572 7920  rue if delivery 
+00010b60: 746f 2074 6865 2073 7065 6369 6669 6564  to the specified
+00010b70: 2061 6464 7265 7373 2069 7320 706f 7373   address is poss
+00010b80: 6962 6c65 2061 6e64 2046 616c 7365 2069  ible and False i
+00010b90: 6620 7468 6572 6520 6172 6520 616e 7920  f there are any 
+00010ba0: 7072 6f62 6c65 6d73 2028 666f 7220 6578  problems (for ex
+00010bb0: 616d 706c 652c 2069 6620 6465 6c69 7665  ample, if delive
+00010bc0: 7279 2074 6f20 7468 6520 7370 6563 6966  ry to the specif
+00010bd0: 6965 6420 6164 6472 6573 7320 6973 206e  ied address is n
+00010be0: 6f74 2070 6f73 7369 626c 6529 0a20 2020  ot possible).   
+00010bf0: 203a 7061 7261 6d20 7368 6970 7069 6e67   :param shipping
+00010c00: 5f6f 7074 696f 6e73 3a20 5265 7175 6972  _options: Requir
+00010c10: 6564 2069 6620 6f6b 2069 7320 5472 7565  ed if ok is True
+00010c20: 2e20 4120 4a53 4f4e 2d73 6572 6961 6c69  . A JSON-seriali
+00010c30: 7a65 6420 6172 7261 7920 6f66 2061 7661  zed array of ava
+00010c40: 696c 6162 6c65 2073 6869 7070 696e 6720  ilable shipping 
+00010c50: 6f70 7469 6f6e 732e 0a20 2020 203a 7061  options..    :pa
+00010c60: 7261 6d20 6572 726f 725f 6d65 7373 6167  ram error_messag
+00010c70: 653a 2052 6571 7569 7265 6420 6966 206f  e: Required if o
+00010c80: 6b20 6973 2046 616c 7365 2e20 4572 726f  k is False. Erro
+00010c90: 7220 6d65 7373 6167 6520 696e 2068 756d  r message in hum
+00010ca0: 616e 2072 6561 6461 626c 6520 666f 726d  an readable form
+00010cb0: 2074 6861 7420 6578 706c 6169 6e73 2077   that explains w
+00010cc0: 6879 2069 7420 6973 2069 6d70 6f73 7369  hy it is impossi
+00010cd0: 626c 6520 746f 2063 6f6d 706c 6574 6520  ble to complete 
+00010ce0: 7468 6520 6f72 6465 7220 2865 2e67 2e20  the order (e.g. 
+00010cf0: 2253 6f72 7279 2c20 6465 6c69 7665 7279  "Sorry, delivery
+00010d00: 2074 6f20 796f 7572 2064 6573 6972 6564   to your desired
+00010d10: 2061 6464 7265 7373 2069 7320 756e 6176   address is unav
+00010d20: 6169 6c61 626c 6527 292e 2054 656c 6567  ailable'). Teleg
+00010d30: 7261 6d20 7769 6c6c 2064 6973 706c 6179  ram will display
+00010d40: 2074 6869 7320 6d65 7373 6167 6520 746f   this message to
+00010d50: 2074 6865 2075 7365 722e 0a20 2020 203a   the user..    :
+00010d60: 7265 7475 726e 3a0a 2020 2020 2222 220a  return:.    """.
+00010d70: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00010d80: 2022 616e 7377 6572 5368 6970 7069 6e67   "answerShipping
+00010d90: 5175 6572 7922 0a20 2020 2070 6179 6c6f  Query".    paylo
+00010da0: 6164 203d 207b 2273 6869 7070 696e 675f  ad = {"shipping_
+00010db0: 7175 6572 795f 6964 223a 2073 6869 7070  query_id": shipp
+00010dc0: 696e 675f 7175 6572 795f 6964 2c20 226f  ing_query_id, "o
+00010dd0: 6b22 3a20 6f6b 7d0a 2020 2020 6966 2073  k": ok}.    if s
+00010de0: 6869 7070 696e 675f 6f70 7469 6f6e 733a  hipping_options:
+00010df0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00010e00: 5b22 7368 6970 7069 6e67 5f6f 7074 696f  ["shipping_optio
+00010e10: 6e73 225d 203d 2061 7761 6974 205f 636f  ns"] = await _co
+00010e20: 6e76 6572 745f 6c69 7374 5f6a 736f 6e5f  nvert_list_json_
+00010e30: 7365 7269 616c 697a 6162 6c65 280a 2020  serializable(.  
+00010e40: 2020 2020 2020 2020 2020 7368 6970 7069            shippi
+00010e50: 6e67 5f6f 7074 696f 6e73 0a20 2020 2020  ng_options.     
+00010e60: 2020 2029 0a20 2020 2069 6620 6572 726f     ).    if erro
+00010e70: 725f 6d65 7373 6167 653a 0a20 2020 2020  r_message:.     
+00010e80: 2020 2070 6179 6c6f 6164 5b22 6572 726f     payload["erro
+00010e90: 725f 6d65 7373 6167 6522 5d20 3d20 6572  r_message"] = er
+00010ea0: 726f 725f 6d65 7373 6167 650a 2020 2020  ror_message.    
+00010eb0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+00010ec0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+00010ed0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00010ee0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00010ef0: 0a0a 0a61 7379 6e63 2064 6566 2061 6e73  ...async def ans
+00010f00: 7765 725f 7072 655f 6368 6563 6b6f 7574  wer_pre_checkout
+00010f10: 5f71 7565 7279 280a 2020 2020 746f 6b65  _query(.    toke
+00010f20: 6e2c 2070 7265 5f63 6865 636b 6f75 745f  n, pre_checkout_
+00010f30: 7175 6572 795f 6964 2c20 6f6b 2c20 6572  query_id, ok, er
+00010f40: 726f 725f 6d65 7373 6167 653d 4e6f 6e65  ror_message=None
+00010f50: 0a29 3a0a 2020 2020 2222 220a 2020 2020  .):.    """.    
+00010f60: 4f6e 6365 2074 6865 2075 7365 7220 6861  Once the user ha
+00010f70: 7320 636f 6e66 6972 6d65 6420 7468 6569  s confirmed thei
+00010f80: 7220 7061 796d 656e 7420 616e 6420 7368  r payment and sh
+00010f90: 6970 7069 6e67 2064 6574 6169 6c73 2c20  ipping details, 
+00010fa0: 7468 6520 426f 7420 4150 4920 7365 6e64  the Bot API send
+00010fb0: 7320 7468 6520 6669 6e61 6c20 636f 6e66  s the final conf
+00010fc0: 6972 6d61 7469 6f6e 2069 6e20 7468 6520  irmation in the 
+00010fd0: 666f 726d 206f 6620 616e 2055 7064 6174  form of an Updat
+00010fe0: 6520 7769 7468 2074 6865 2066 6965 6c64  e with the field
+00010ff0: 2070 7265 5f63 6865 636b 6f75 745f 7175   pre_checkout_qu
+00011000: 6572 792e 2055 7365 2074 6869 7320 6d65  ery. Use this me
+00011010: 7468 6f64 2074 6f20 7265 7370 6f6e 6420  thod to respond 
+00011020: 746f 2073 7563 6820 7072 652d 6368 6563  to such pre-chec
+00011030: 6b6f 7574 2071 7565 7269 6573 2e20 4f6e  kout queries. On
+00011040: 2073 7563 6365 7373 2c20 5472 7565 2069   success, True i
+00011050: 7320 7265 7475 726e 6564 2e20 4e6f 7465  s returned. Note
+00011060: 3a20 5468 6520 426f 7420 4150 4920 6d75  : The Bot API mu
+00011070: 7374 2072 6563 6569 7665 2061 6e20 616e  st receive an an
+00011080: 7377 6572 2077 6974 6869 6e20 3130 2073  swer within 10 s
+00011090: 6563 6f6e 6473 2061 6674 6572 2074 6865  econds after the
+000110a0: 2070 7265 2d63 6865 636b 6f75 7420 7175   pre-checkout qu
+000110b0: 6572 7920 7761 7320 7365 6e74 2e0a 2020  ery was sent..  
+000110c0: 2020 3a70 6172 616d 2074 6f6b 656e 3a20    :param token: 
+000110d0: 426f 7427 7320 746f 6b65 6e20 2879 6f75  Bot's token (you
+000110e0: 2064 6f6e 2774 206e 6565 6420 746f 2066   don't need to f
+000110f0: 696c 6c20 7468 6973 290a 2020 2020 3a70  ill this).    :p
+00011100: 6172 616d 2070 7265 5f63 6865 636b 6f75  aram pre_checkou
+00011110: 745f 7175 6572 795f 6964 3a20 556e 6971  t_query_id: Uniq
+00011120: 7565 2069 6465 6e74 6966 6965 7220 666f  ue identifier fo
+00011130: 7220 7468 6520 7175 6572 7920 746f 2062  r the query to b
+00011140: 6520 616e 7377 6572 6564 0a20 2020 203a  e answered.    :
+00011150: 7061 7261 6d20 6f6b 3a20 5370 6563 6966  param ok: Specif
+00011160: 7920 5472 7565 2069 6620 6576 6572 7974  y True if everyt
+00011170: 6869 6e67 2069 7320 616c 7269 6768 7420  hing is alright 
+00011180: 2867 6f6f 6473 2061 7265 2061 7661 696c  (goods are avail
+00011190: 6162 6c65 2c20 6574 632e 2920 616e 6420  able, etc.) and 
+000111a0: 7468 6520 626f 7420 6973 2072 6561 6479  the bot is ready
+000111b0: 2074 6f20 7072 6f63 6565 6420 7769 7468   to proceed with
+000111c0: 2074 6865 206f 7264 6572 2e20 5573 6520   the order. Use 
+000111d0: 4661 6c73 6520 6966 2074 6865 7265 2061  False if there a
+000111e0: 7265 2061 6e79 2070 726f 626c 656d 732e  re any problems.
+000111f0: 0a20 2020 203a 7061 7261 6d20 6572 726f  .    :param erro
+00011200: 725f 6d65 7373 6167 653a 2052 6571 7569  r_message: Requi
+00011210: 7265 6420 6966 206f 6b20 6973 2046 616c  red if ok is Fal
+00011220: 7365 2e20 4572 726f 7220 6d65 7373 6167  se. Error messag
+00011230: 6520 696e 2068 756d 616e 2072 6561 6461  e in human reada
+00011240: 626c 6520 666f 726d 2074 6861 7420 6578  ble form that ex
+00011250: 706c 6169 6e73 2074 6865 2072 6561 736f  plains the reaso
+00011260: 6e20 666f 7220 6661 696c 7572 6520 746f  n for failure to
+00011270: 2070 726f 6365 6564 2077 6974 6820 7468   proceed with th
+00011280: 6520 6368 6563 6b6f 7574 2028 652e 672e  e checkout (e.g.
+00011290: 2022 536f 7272 792c 2073 6f6d 6562 6f64   "Sorry, somebod
+000112a0: 7920 6a75 7374 2062 6f75 6768 7420 7468  y just bought th
+000112b0: 6520 6c61 7374 206f 6620 6f75 7220 616d  e last of our am
+000112c0: 617a 696e 6720 626c 6163 6b20 542d 7368  azing black T-sh
+000112d0: 6972 7473 2077 6869 6c65 2079 6f75 2077  irts while you w
+000112e0: 6572 6520 6275 7379 2066 696c 6c69 6e67  ere busy filling
+000112f0: 206f 7574 2079 6f75 7220 7061 796d 656e   out your paymen
+00011300: 7420 6465 7461 696c 732e 2050 6c65 6173  t details. Pleas
+00011310: 6520 6368 6f6f 7365 2061 2064 6966 6665  e choose a diffe
+00011320: 7265 6e74 2063 6f6c 6f72 206f 7220 6761  rent color or ga
+00011330: 726d 656e 7421 2229 2e20 5465 6c65 6772  rment!"). Telegr
+00011340: 616d 2077 696c 6c20 6469 7370 6c61 7920  am will display 
+00011350: 7468 6973 206d 6573 7361 6765 2074 6f20  this message to 
+00011360: 7468 6520 7573 6572 2e0a 2020 2020 3a72  the user..    :r
+00011370: 6574 7572 6e3a 0a20 2020 2022 2222 0a20  eturn:.    """. 
+00011380: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00011390: 2261 6e73 7765 7250 7265 4368 6563 6b6f  "answerPreChecko
+000113a0: 7574 5175 6572 7922 0a20 2020 2070 6179  utQuery".    pay
+000113b0: 6c6f 6164 203d 207b 2270 7265 5f63 6865  load = {"pre_che
+000113c0: 636b 6f75 745f 7175 6572 795f 6964 223a  ckout_query_id":
+000113d0: 2070 7265 5f63 6865 636b 6f75 745f 7175   pre_checkout_qu
+000113e0: 6572 795f 6964 2c20 226f 6b22 3a20 6f6b  ery_id, "ok": ok
+000113f0: 7d0a 2020 2020 6966 2065 7272 6f72 5f6d  }.    if error_m
+00011400: 6573 7361 6765 3a0a 2020 2020 2020 2020  essage:.        
+00011410: 7061 796c 6f61 645b 2265 7272 6f72 5f6d  payload["error_m
+00011420: 6573 7361 6765 225d 203d 2065 7272 6f72  essage"] = error
+00011430: 5f6d 6573 7361 6765 0a20 2020 2072 6574  _message.    ret
+00011440: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+00011450: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+00011460: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00011470: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
+00011480: 6173 796e 6320 6465 6620 756e 7069 6e5f  async def unpin_
+00011490: 616c 6c5f 6765 6e65 7261 6c5f 666f 7275  all_general_foru
+000114a0: 6d5f 746f 7069 635f 6d65 7373 6167 6573  m_topic_messages
+000114b0: 2874 6f6b 656e 2c20 6368 6174 5f69 6429  (token, chat_id)
+000114c0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+000114d0: 203d 2022 756e 7069 6e41 6c6c 4765 6e65   = "unpinAllGene
+000114e0: 7261 6c46 6f72 756d 546f 7069 634d 6573  ralForumTopicMes
+000114f0: 7361 6765 7322 0a20 2020 2070 6179 6c6f  sages".    paylo
+00011500: 6164 203d 207b 2263 6861 745f 6964 223a  ad = {"chat_id":
+00011510: 2063 6861 745f 6964 7d0a 2020 2020 7265   chat_id}.    re
+00011520: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+00011530: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+00011540: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00011550: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+00011560: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
+00011570: 2320 496e 6c69 6e65 5175 6572 790a 0a0a  # InlineQuery...
+00011580: 6173 796e 6320 6465 6620 616e 7377 6572  async def answer
+00011590: 5f63 616c 6c62 6163 6b5f 7175 6572 7928  _callback_query(
+000115a0: 0a20 2020 2074 6f6b 656e 2c20 6361 6c6c  .    token, call
+000115b0: 6261 636b 5f71 7565 7279 5f69 642c 2074  back_query_id, t
+000115c0: 6578 743d 4e6f 6e65 2c20 7368 6f77 5f61  ext=None, show_a
+000115d0: 6c65 7274 3d4e 6f6e 652c 2075 726c 3d4e  lert=None, url=N
+000115e0: 6f6e 652c 2063 6163 6865 5f74 696d 653d  one, cache_time=
+000115f0: 4e6f 6e65 0a29 3a0a 2020 2020 2222 220a  None.):.    """.
+00011600: 2020 2020 5573 6520 7468 6973 206d 6574      Use this met
+00011610: 686f 6420 746f 2073 656e 6420 616e 7377  hod to send answ
+00011620: 6572 7320 746f 2063 616c 6c62 6163 6b20  ers to callback 
+00011630: 7175 6572 6965 7320 7365 6e74 2066 726f  queries sent fro
+00011640: 6d20 696e 6c69 6e65 206b 6579 626f 6172  m inline keyboar
+00011650: 6473 2e20 5468 6520 616e 7377 6572 2077  ds. The answer w
+00011660: 696c 6c20 6265 2064 6973 706c 6179 6564  ill be displayed
+00011670: 2074 6f20 7468 6520 7573 6572 2061 7320   to the user as 
+00011680: 6120 6e6f 7469 6669 6361 7469 6f6e 2061  a notification a
+00011690: 7420 7468 6520 746f 7020 6f66 2074 6865  t the top of the
+000116a0: 2063 6861 7420 7363 7265 656e 206f 7220   chat screen or 
+000116b0: 6173 2061 6e20 616c 6572 742e 204f 6e20  as an alert. On 
+000116c0: 7375 6363 6573 732c 2054 7275 6520 6973  success, True is
+000116d0: 2072 6574 7572 6e65 642e 0a20 2020 2041   returned..    A
+000116e0: 6c74 6572 6e61 7469 7665 6c79 2c20 7468  lternatively, th
+000116f0: 6520 7573 6572 2063 616e 2062 6520 7265  e user can be re
+00011700: 6469 7265 6374 6564 2074 6f20 7468 6520  directed to the 
+00011710: 7370 6563 6966 6965 6420 4761 6d65 2055  specified Game U
+00011720: 524c 2e20 466f 7220 7468 6973 206f 7074  RL. For this opt
+00011730: 696f 6e20 746f 2077 6f72 6b2c 2079 6f75  ion to work, you
+00011740: 206d 7573 7420 6669 7273 7420 6372 6561   must first crea
+00011750: 7465 2061 2067 616d 6520 666f 7220 796f  te a game for yo
+00011760: 7572 2062 6f74 2076 6961 2042 6f74 4661  ur bot via BotFa
+00011770: 7468 6572 2061 6e64 2061 6363 6570 7420  ther and accept 
+00011780: 7468 6520 7465 726d 732e 204f 7468 6572  the terms. Other
+00011790: 7769 7365 2c20 796f 7520 6d61 7920 7573  wise, you may us
+000117a0: 6520 6c69 6e6b 7320 6c69 6b65 2074 656c  e links like tel
+000117b0: 6567 7261 6d2e 6d65 2f79 6f75 725f 626f  egram.me/your_bo
+000117c0: 743f 7374 6172 743d 5858 5858 2074 6861  t?start=XXXX tha
+000117d0: 7420 6f70 656e 2079 6f75 7220 626f 7420  t open your bot 
+000117e0: 7769 7468 2061 2070 6172 616d 6574 6572  with a parameter
+000117f0: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
+00011800: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
+00011810: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
+00011820: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
+00011830: 2020 3a70 6172 616d 2063 616c 6c62 6163    :param callbac
+00011840: 6b5f 7175 6572 795f 6964 3a20 556e 6971  k_query_id: Uniq
+00011850: 7565 2069 6465 6e74 6966 6965 7220 666f  ue identifier fo
+00011860: 7220 7468 6520 7175 6572 7920 746f 2062  r the query to b
+00011870: 6520 616e 7377 6572 6564 0a20 2020 203a  e answered.    :
+00011880: 7061 7261 6d20 7465 7874 3a20 284f 7074  param text: (Opt
+00011890: 696f 6e61 6c29 2054 6578 7420 6f66 2074  ional) Text of t
+000118a0: 6865 206e 6f74 6966 6963 6174 696f 6e2e  he notification.
+000118b0: 2049 6620 6e6f 7420 7370 6563 6966 6965   If not specifie
+000118c0: 642c 206e 6f74 6869 6e67 2077 696c 6c20  d, nothing will 
+000118d0: 6265 2073 686f 776e 2074 6f20 7468 6520  be shown to the 
+000118e0: 7573 6572 2c20 302d 3230 3020 6368 6172  user, 0-200 char
+000118f0: 6163 7465 7273 0a20 2020 203a 7061 7261  acters.    :para
+00011900: 6d20 7368 6f77 5f61 6c65 7274 3a20 284f  m show_alert: (O
+00011910: 7074 696f 6e61 6c29 2049 6620 7472 7565  ptional) If true
+00011920: 2c20 616e 2061 6c65 7274 2077 696c 6c20  , an alert will 
+00011930: 6265 2073 686f 776e 2062 7920 7468 6520  be shown by the 
+00011940: 636c 6965 6e74 2069 6e73 7465 6164 206f  client instead o
+00011950: 6620 6120 6e6f 7469 6669 6361 7469 6f6e  f a notification
+00011960: 2061 7420 7468 6520 746f 7020 6f66 2074   at the top of t
+00011970: 6865 2063 6861 7420 7363 7265 656e 2e20  he chat screen. 
+00011980: 4465 6661 756c 7473 2074 6f20 6661 6c73  Defaults to fals
+00011990: 652e 0a20 2020 203a 7061 7261 6d20 7572  e..    :param ur
+000119a0: 6c3a 2028 4f70 7469 6f6e 616c 2920 5552  l: (Optional) UR
+000119b0: 4c20 7468 6174 2077 696c 6c20 6265 206f  L that will be o
+000119c0: 7065 6e65 6420 6279 2074 6865 2075 7365  pened by the use
+000119d0: 7227 7320 636c 6965 6e74 2e20 4966 2079  r's client. If y
+000119e0: 6f75 2068 6176 6520 6372 6561 7465 6420  ou have created 
+000119f0: 6120 4761 6d65 2061 6e64 2061 6363 6570  a Game and accep
+00011a00: 7465 6420 7468 6520 636f 6e64 6974 696f  ted the conditio
+00011a10: 6e73 2076 6961 2040 426f 7466 6174 6865  ns via @Botfathe
+00011a20: 722c 2073 7065 6369 6679 2074 6865 2055  r, specify the U
+00011a30: 524c 2074 6861 7420 6f70 656e 7320 796f  RL that opens yo
+00011a40: 7572 2067 616d 6520 e280 9320 6e6f 7465  ur game ... note
+00011a50: 2074 6861 7420 7468 6973 2077 696c 6c20   that this will 
+00011a60: 6f6e 6c79 2077 6f72 6b20 6966 2074 6865  only work if the
+00011a70: 2071 7565 7279 2063 6f6d 6573 2066 726f   query comes fro
+00011a80: 6d20 6120 6361 6c6c 6261 636b 5f67 616d  m a callback_gam
+00011a90: 6520 6275 7474 6f6e 2e0a 2020 2020 4f74  e button..    Ot
+00011aa0: 6865 7277 6973 652c 2079 6f75 206d 6179  herwise, you may
+00011ab0: 2075 7365 206c 696e 6b73 206c 696b 6520   use links like 
+00011ac0: 7465 6c65 6772 616d 2e6d 652f 796f 7572  telegram.me/your
+00011ad0: 5f62 6f74 3f73 7461 7274 3d58 5858 5820  _bot?start=XXXX 
+00011ae0: 7468 6174 206f 7065 6e20 796f 7572 2062  that open your b
+00011af0: 6f74 2077 6974 6820 6120 7061 7261 6d65  ot with a parame
+00011b00: 7465 722e 0a20 2020 203a 7061 7261 6d20  ter..    :param 
+00011b10: 6361 6368 655f 7469 6d65 3a20 284f 7074  cache_time: (Opt
+00011b20: 696f 6e61 6c29 2054 6865 206d 6178 696d  ional) The maxim
+00011b30: 756d 2061 6d6f 756e 7420 6f66 2074 696d  um amount of tim
+00011b40: 6520 696e 2073 6563 6f6e 6473 2074 6861  e in seconds tha
+00011b50: 7420 7468 6520 7265 7375 6c74 206f 6620  t the result of 
+00011b60: 7468 6520 6361 6c6c 6261 636b 2071 7565  the callback que
+00011b70: 7279 206d 6179 2062 6520 6361 6368 6564  ry may be cached
+00011b80: 2063 6c69 656e 742d 7369 6465 2e20 5465   client-side. Te
+00011b90: 6c65 6772 616d 2061 7070 7320 7769 6c6c  legram apps will
+00011ba0: 2073 7570 706f 7274 2063 6163 6869 6e67   support caching
+00011bb0: 2073 7461 7274 696e 6720 696e 2076 6572   starting in ver
+00011bc0: 7369 6f6e 2033 2e31 342e 2044 6566 6175  sion 3.14. Defau
+00011bd0: 6c74 7320 746f 2030 2e0a 2020 2020 3a72  lts to 0..    :r
+00011be0: 6574 7572 6e3a 0a20 2020 2022 2222 0a20  eturn:.    """. 
+00011bf0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00011c00: 2261 6e73 7765 7243 616c 6c62 6163 6b51  "answerCallbackQ
+00011c10: 7565 7279 220a 2020 2020 7061 796c 6f61  uery".    payloa
+00011c20: 6420 3d20 7b22 6361 6c6c 6261 636b 5f71  d = {"callback_q
+00011c30: 7565 7279 5f69 6422 3a20 6361 6c6c 6261  uery_id": callba
+00011c40: 636b 5f71 7565 7279 5f69 647d 0a20 2020  ck_query_id}.   
+00011c50: 2069 6620 7465 7874 3a0a 2020 2020 2020   if text:.      
+00011c60: 2020 7061 796c 6f61 645b 2274 6578 7422    payload["text"
+00011c70: 5d20 3d20 7465 7874 0a20 2020 2069 6620  ] = text.    if 
+00011c80: 7368 6f77 5f61 6c65 7274 2069 7320 6e6f  show_alert is no
+00011c90: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00011ca0: 7061 796c 6f61 645b 2273 686f 775f 616c  payload["show_al
+00011cb0: 6572 7422 5d20 3d20 7368 6f77 5f61 6c65  ert"] = show_ale
+00011cc0: 7274 0a20 2020 2069 6620 7572 6c3a 0a20  rt.    if url:. 
+00011cd0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00011ce0: 7572 6c22 5d20 3d20 7572 6c0a 2020 2020  url"] = url.    
+00011cf0: 6966 2063 6163 6865 5f74 696d 6520 6973  if cache_time is
+00011d00: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00011d10: 2020 2070 6179 6c6f 6164 5b22 6361 6368     payload["cach
+00011d20: 655f 7469 6d65 225d 203d 2063 6163 6865  e_time"] = cache
+00011d30: 5f74 696d 650a 2020 2020 7265 7475 726e  _time.    return
+00011d40: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00011d50: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00011d60: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00011d70: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+00011d80: 643d 2270 6f73 7422 290a 0a0a 6173 796e  d="post")...asyn
+00011d90: 6320 6465 6620 6765 745f 7573 6572 5f63  c def get_user_c
+00011da0: 6861 745f 626f 6f73 7473 2874 6f6b 656e  hat_boosts(token
+00011db0: 2c20 6368 6174 5f69 642c 2075 7365 725f  , chat_id, user_
+00011dc0: 6964 293a 0a20 2020 206d 6574 686f 645f  id):.    method_
+00011dd0: 7572 6c20 3d20 2267 6574 5573 6572 4368  url = "getUserCh
+00011de0: 6174 426f 6f73 7473 220a 2020 2020 7061  atBoosts".    pa
+00011df0: 796c 6f61 6420 3d20 7b22 6368 6174 5f69  yload = {"chat_i
+00011e00: 6422 3a20 6368 6174 5f69 642c 2022 7573  d": chat_id, "us
+00011e10: 6572 5f69 6422 3a20 7573 6572 5f69 647d  er_id": user_id}
+00011e20: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+00011e30: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+00011e40: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00011e50: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00011e60: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
+00011e70: 6620 616e 7377 6572 5f69 6e6c 696e 655f  f answer_inline_
+00011e80: 7175 6572 7928 0a20 2020 2074 6f6b 656e  query(.    token
+00011e90: 2c0a 2020 2020 696e 6c69 6e65 5f71 7565  ,.    inline_que
+00011ea0: 7279 5f69 642c 0a20 2020 2072 6573 756c  ry_id,.    resul
+00011eb0: 7473 2c0a 2020 2020 6361 6368 655f 7469  ts,.    cache_ti
+00011ec0: 6d65 3d4e 6f6e 652c 0a20 2020 2069 735f  me=None,.    is_
+00011ed0: 7065 7273 6f6e 616c 3d4e 6f6e 652c 0a20  personal=None,. 
+00011ee0: 2020 206e 6578 745f 6f66 6673 6574 3d4e     next_offset=N
+00011ef0: 6f6e 652c 0a20 2020 2062 7574 746f 6e3d  one,.    button=
+00011f00: 4e6f 6e65 2c0a 293a 0a20 2020 206d 6574  None,.):.    met
+00011f10: 686f 645f 7572 6c20 3d20 2261 6e73 7765  hod_url = "answe
+00011f20: 7249 6e6c 696e 6551 7565 7279 220a 2020  rInlineQuery".  
+00011f30: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
+00011f40: 2020 2020 2020 2269 6e6c 696e 655f 7175        "inline_qu
+00011f50: 6572 795f 6964 223a 2069 6e6c 696e 655f  ery_id": inline_
+00011f60: 7175 6572 795f 6964 2c0a 2020 2020 2020  query_id,.      
+00011f70: 2020 2272 6573 756c 7473 223a 2061 7761    "results": awa
+00011f80: 6974 205f 636f 6e76 6572 745f 6c69 7374  it _convert_list
+00011f90: 5f6a 736f 6e5f 7365 7269 616c 697a 6162  _json_serializab
+00011fa0: 6c65 2872 6573 756c 7473 292c 0a20 2020  le(results),.   
+00011fb0: 207d 0a20 2020 2069 6620 6361 6368 655f   }.    if cache_
+00011fc0: 7469 6d65 2069 7320 6e6f 7420 4e6f 6e65  time is not None
+00011fd0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00011fe0: 645b 2263 6163 6865 5f74 696d 6522 5d20  d["cache_time"] 
+00011ff0: 3d20 6361 6368 655f 7469 6d65 0a20 2020  = cache_time.   
+00012000: 2069 6620 6973 5f70 6572 736f 6e61 6c20   if is_personal 
+00012010: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00012020: 2020 2020 2070 6179 6c6f 6164 5b22 6973       payload["is
+00012030: 5f70 6572 736f 6e61 6c22 5d20 3d20 6973  _personal"] = is
+00012040: 5f70 6572 736f 6e61 6c0a 2020 2020 6966  _personal.    if
+00012050: 206e 6578 745f 6f66 6673 6574 2069 7320   next_offset is 
+00012060: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00012070: 2020 7061 796c 6f61 645b 226e 6578 745f    payload["next_
+00012080: 6f66 6673 6574 225d 203d 206e 6578 745f  offset"] = next_
+00012090: 6f66 6673 6574 0a20 2020 2069 6620 6275  offset.    if bu
+000120a0: 7474 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tton is not None
+000120b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000120c0: 645b 2262 7574 746f 6e22 5d20 3d20 6275  d["button"] = bu
+000120d0: 7474 6f6e 2e74 6f5f 6a73 6f6e 2829 0a0a  tton.to_json()..
+000120e0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+000120f0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+00012100: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00012110: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00012120: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
+00012130: 7422 290a 0a0a 6173 796e 6320 6465 6620  t")...async def 
+00012140: 6765 745f 7374 6963 6b65 725f 7365 7428  get_sticker_set(
+00012150: 746f 6b65 6e2c 206e 616d 6529 3a0a 2020  token, name):.  
+00012160: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
+00012170: 6765 7453 7469 636b 6572 5365 7422 0a20  getStickerSet". 
+00012180: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00012190: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+000121a0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+000121b0: 726c 2c20 7061 7261 6d73 3d7b 226e 616d  rl, params={"nam
+000121c0: 6522 3a20 6e61 6d65 7d29 0a0a 0a61 7379  e": name})...asy
+000121d0: 6e63 2064 6566 2067 6574 5f63 7573 746f  nc def get_custo
+000121e0: 6d5f 656d 6f6a 695f 7374 6963 6b65 7273  m_emoji_stickers
+000121f0: 2874 6f6b 656e 2c20 6375 7374 6f6d 5f65  (token, custom_e
+00012200: 6d6f 6a69 5f69 6473 293a 0a20 2020 206d  moji_ids):.    m
+00012210: 6574 686f 645f 7572 6c20 3d20 7222 6765  ethod_url = r"ge
+00012220: 7443 7573 746f 6d45 6d6f 6a69 5374 6963  tCustomEmojiStic
+00012230: 6b65 7273 220a 2020 2020 7265 7475 726e  kers".    return
+00012240: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00012250: 7265 7175 6573 7428 0a20 2020 2020 2020  request(.       
+00012260: 2074 6f6b 656e 2c20 6d65 7468 6f64 5f75   token, method_u
+00012270: 726c 2c20 7061 7261 6d73 3d7b 2263 7573  rl, params={"cus
+00012280: 746f 6d5f 656d 6f6a 695f 6964 7322 3a20  tom_emoji_ids": 
+00012290: 6a73 6f6e 2e64 756d 7073 2863 7573 746f  json.dumps(custo
+000122a0: 6d5f 656d 6f6a 695f 6964 7329 7d0a 2020  m_emoji_ids)}.  
+000122b0: 2020 290a 0a0a 6173 796e 6320 6465 6620    )...async def 
+000122c0: 7365 745f 7374 6963 6b65 725f 6b65 7977  set_sticker_keyw
+000122d0: 6f72 6473 2874 6f6b 656e 2c20 7374 6963  ords(token, stic
+000122e0: 6b65 722c 206b 6579 776f 7264 733d 4e6f  ker, keywords=No
+000122f0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
+00012300: 7572 6c20 3d20 2273 6574 5374 6963 6b65  url = "setSticke
+00012310: 724b 6579 776f 7264 7322 0a20 2020 2070  rKeywords".    p
+00012320: 6179 6c6f 6164 203d 207b 2273 7469 636b  ayload = {"stick
+00012330: 6572 223a 2073 7469 636b 6572 7d0a 2020  er": sticker}.  
+00012340: 2020 6966 206b 6579 776f 7264 733a 0a20    if keywords:. 
+00012350: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00012360: 6b65 7977 6f72 6473 225d 203d 206a 736f  keywords"] = jso
+00012370: 6e2e 6475 6d70 7328 6b65 7977 6f72 6473  n.dumps(keywords
+00012380: 290a 0a20 2020 2072 6574 7572 6e20 6177  )..    return aw
+00012390: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+000123a0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+000123b0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+000123c0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d22  ayload, method="
+000123d0: 706f 7374 2229 0a0a 0a61 7379 6e63 2064  post")...async d
+000123e0: 6566 2073 6574 5f73 7469 636b 6572 5f6d  ef set_sticker_m
+000123f0: 6173 6b5f 706f 7369 7469 6f6e 2874 6f6b  ask_position(tok
+00012400: 656e 2c20 7374 6963 6b65 722c 206d 6173  en, sticker, mas
+00012410: 6b5f 706f 7369 7469 6f6e 3d4e 6f6e 6529  k_position=None)
+00012420: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00012430: 203d 2022 7365 7453 7469 636b 6572 4d61   = "setStickerMa
+00012440: 736b 506f 7369 7469 6f6e 220a 2020 2020  skPosition".    
+00012450: 7061 796c 6f61 6420 3d20 7b22 7374 6963  payload = {"stic
+00012460: 6b65 7222 3a20 7374 6963 6b65 727d 0a20  ker": sticker}. 
+00012470: 2020 2069 6620 6d61 736b 5f70 6f73 6974     if mask_posit
+00012480: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
+00012490: 6c6f 6164 5b22 6d61 736b 5f70 6f73 6974  load["mask_posit
+000124a0: 696f 6e22 5d20 3d20 6d61 736b 5f70 6f73  ion"] = mask_pos
+000124b0: 6974 696f 6e2e 746f 5f6a 736f 6e28 290a  ition.to_json().
+000124c0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+000124d0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+000124e0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+000124f0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00012500: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
+00012510: 7422 290a 0a0a 6173 796e 6320 6465 6620  t")...async def 
+00012520: 7570 6c6f 6164 5f73 7469 636b 6572 5f66  upload_sticker_f
+00012530: 696c 6528 746f 6b65 6e2c 2075 7365 725f  ile(token, user_
+00012540: 6964 2c20 7374 6963 6b65 722c 2073 7469  id, sticker, sti
+00012550: 636b 6572 5f66 6f72 6d61 7429 3a0a 2020  cker_format):.  
+00012560: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
+00012570: 7570 6c6f 6164 5374 6963 6b65 7246 696c  uploadStickerFil
+00012580: 6522 0a20 2020 2070 6179 6c6f 6164 203d  e".    payload =
+00012590: 207b 2275 7365 725f 6964 223a 2075 7365   {"user_id": use
+000125a0: 725f 6964 2c20 2273 7469 636b 6572 5f66  r_id, "sticker_f
+000125b0: 6f72 6d61 7422 3a20 7374 6963 6b65 725f  ormat": sticker_
+000125c0: 666f 726d 6174 7d0a 2020 2020 6669 6c65  format}.    file
+000125d0: 7320 3d20 7b22 7374 6963 6b65 7222 3a20  s = {"sticker": 
+000125e0: 7374 6963 6b65 727d 0a20 2020 2072 6574  sticker}.    ret
+000125f0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+00012600: 7373 5f72 6571 7565 7374 280a 2020 2020  ss_request(.    
+00012610: 2020 2020 746f 6b65 6e2c 206d 6574 686f      token, metho
+00012620: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012630: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00012640: 6573 2c20 6d65 7468 6f64 3d22 706f 7374  es, method="post
+00012650: 220a 2020 2020 290a 0a0a 6173 796e 6320  ".    )...async 
+00012660: 6465 6620 7365 745f 7374 6963 6b65 725f  def set_sticker_
+00012670: 656d 6f6a 695f 6c69 7374 2874 6f6b 656e  emoji_list(token
+00012680: 2c20 7374 6963 6b65 722c 2065 6d6f 6a69  , sticker, emoji
+00012690: 5f6c 6973 7429 3a0a 2020 2020 6d65 7468  _list):.    meth
+000126a0: 6f64 5f75 726c 203d 2022 7365 7453 7469  od_url = "setSti
+000126b0: 636b 6572 456d 6f6a 694c 6973 7422 0a20  ckerEmojiList". 
+000126c0: 2020 2070 6179 6c6f 6164 203d 207b 2273     payload = {"s
+000126d0: 7469 636b 6572 223a 2073 7469 636b 6572  ticker": sticker
+000126e0: 2c20 2265 6d6f 6a69 5f6c 6973 7422 3a20  , "emoji_list": 
+000126f0: 6a73 6f6e 2e64 756d 7073 2865 6d6f 6a69  json.dumps(emoji
+00012700: 5f6c 6973 7429 7d0a 2020 2020 7265 7475  _list)}.    retu
+00012710: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+00012720: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+00012730: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00012740: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+00012750: 686f 643d 2270 6f73 7422 290a 0a0a 6173  hod="post")...as
+00012760: 796e 6320 6465 6620 6465 6c65 7465 5f73  ync def delete_s
+00012770: 7469 636b 6572 5f73 6574 2874 6f6b 656e  ticker_set(token
+00012780: 2c20 6e61 6d65 293a 0a20 2020 206d 6574  , name):.    met
+00012790: 686f 645f 7572 6c20 3d20 2264 656c 6574  hod_url = "delet
+000127a0: 6553 7469 636b 6572 5365 7422 0a20 2020  eStickerSet".   
+000127b0: 2070 6179 6c6f 6164 203d 207b 226e 616d   payload = {"nam
+000127c0: 6522 3a20 6e61 6d65 7d0a 2020 2020 7265  e": name}.    re
+000127d0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+000127e0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+000127f0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00012800: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+00012810: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
+00012820: 6173 796e 6320 6465 6620 7365 745f 6375  async def set_cu
+00012830: 7374 6f6d 5f65 6d6f 6a69 5f73 7469 636b  stom_emoji_stick
+00012840: 6572 5f73 6574 5f74 6875 6d62 6e61 696c  er_set_thumbnail
+00012850: 2874 6f6b 656e 2c20 6e61 6d65 2c20 6375  (token, name, cu
+00012860: 7374 6f6d 5f65 6d6f 6a69 5f69 643d 4e6f  stom_emoji_id=No
+00012870: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
+00012880: 7572 6c20 3d20 2273 6574 4375 7374 6f6d  url = "setCustom
+00012890: 456d 6f6a 6953 7469 636b 6572 5365 7454  EmojiStickerSetT
+000128a0: 6875 6d62 6e61 696c 220a 2020 2020 7061  humbnail".    pa
+000128b0: 796c 6f61 6420 3d20 7b22 6e61 6d65 223a  yload = {"name":
+000128c0: 206e 616d 657d 0a20 2020 2069 6620 6375   name}.    if cu
+000128d0: 7374 6f6d 5f65 6d6f 6a69 5f69 6420 6973  stom_emoji_id is
+000128e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000128f0: 2020 2070 6179 6c6f 6164 5b22 6375 7374     payload["cust
+00012900: 6f6d 5f65 6d6f 6a69 5f69 6422 5d20 3d20  om_emoji_id"] = 
+00012910: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 640a  custom_emoji_id.
+00012920: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00012930: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+00012940: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00012950: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00012960: 6f61 642c 206d 6574 686f 643d 2270 6f73  oad, method="pos
+00012970: 7422 290a 0a0a 6173 796e 6320 6465 6620  t")...async def 
+00012980: 7365 745f 7374 6963 6b65 725f 7365 745f  set_sticker_set_
+00012990: 7469 746c 6528 746f 6b65 6e2c 206e 616d  title(token, nam
+000129a0: 652c 2074 6974 6c65 293a 0a20 2020 206d  e, title):.    m
+000129b0: 6574 686f 645f 7572 6c20 3d20 2273 6574  ethod_url = "set
+000129c0: 5374 6963 6b65 7253 6574 5469 746c 6522  StickerSetTitle"
+000129d0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000129e0: 226e 616d 6522 3a20 6e61 6d65 2c20 2274  "name": name, "t
+000129f0: 6974 6c65 223a 2074 6974 6c65 7d0a 2020  itle": title}.  
+00012a00: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+00012a10: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+00012a20: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00012a30: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00012a40: 642c 206d 6574 686f 643d 2270 6f73 7422  d, method="post"
+00012a50: 290a 0a0a 6173 796e 6320 6465 6620 6372  )...async def cr
+00012a60: 6561 7465 5f6e 6577 5f73 7469 636b 6572  eate_new_sticker
+00012a70: 5f73 6574 280a 2020 2020 746f 6b65 6e2c  _set(.    token,
+00012a80: 2075 7365 725f 6964 2c20 6e61 6d65 2c20   user_id, name, 
+00012a90: 7469 746c 652c 2073 7469 636b 6572 732c  title, stickers,
+00012aa0: 2073 7469 636b 6572 5f74 7970 653d 4e6f   sticker_type=No
+00012ab0: 6e65 2c20 6e65 6564 735f 7265 7061 696e  ne, needs_repain
+00012ac0: 7469 6e67 3d4e 6f6e 650a 293a 0a20 2020  ting=None.):.   
+00012ad0: 206d 6574 686f 645f 7572 6c20 3d20 2263   method_url = "c
+00012ae0: 7265 6174 654e 6577 5374 6963 6b65 7253  reateNewStickerS
+00012af0: 6574 220a 2020 2020 7061 796c 6f61 6420  et".    payload 
+00012b00: 3d20 7b22 7573 6572 5f69 6422 3a20 7573  = {"user_id": us
+00012b10: 6572 5f69 642c 2022 6e61 6d65 223a 206e  er_id, "name": n
+00012b20: 616d 652c 2022 7469 746c 6522 3a20 7469  ame, "title": ti
+00012b30: 746c 657d 0a20 2020 2069 6620 7374 6963  tle}.    if stic
+00012b40: 6b65 725f 7479 7065 3a0a 2020 2020 2020  ker_type:.      
+00012b50: 2020 7061 796c 6f61 645b 2273 7469 636b    payload["stick
+00012b60: 6572 5f74 7970 6522 5d20 3d20 7374 6963  er_type"] = stic
+00012b70: 6b65 725f 7479 7065 0a20 2020 2069 6620  ker_type.    if 
+00012b80: 6e65 6564 735f 7265 7061 696e 7469 6e67  needs_repainting
+00012b90: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00012ba0: 2020 2020 2020 7061 796c 6f61 645b 226e        payload["n
+00012bb0: 6565 6473 5f72 6570 6169 6e74 696e 6722  eeds_repainting"
+00012bc0: 5d20 3d20 6e65 6564 735f 7265 7061 696e  ] = needs_repain
+00012bd0: 7469 6e67 0a0a 2020 2020 6669 6c65 7320  ting..    files 
+00012be0: 3d20 7b7d 0a20 2020 206c 7374 203d 205b  = {}.    lst = [
+00012bf0: 5d0a 0a20 2020 2066 6f72 2073 7469 636b  ]..    for stick
+00012c00: 6572 2069 6e20 7374 6963 6b65 7273 3a0a  er in stickers:.
+00012c10: 2020 2020 2020 2020 6a73 6f6e 5f64 6963          json_dic
+00012c20: 742c 2066 696c 6520 3d20 7374 6963 6b65  t, file = sticke
+00012c30: 722e 636f 6e76 6572 745f 696e 7075 745f  r.convert_input_
+00012c40: 7374 6963 6b65 7228 290a 2020 2020 2020  sticker().      
+00012c50: 2020 6a73 6f6e 5f64 6963 7420 3d20 7374    json_dict = st
+00012c60: 6963 6b65 722e 746f 5f64 6963 7428 290a  icker.to_dict().
+00012c70: 0a20 2020 2020 2020 2069 6620 6669 6c65  .        if file
+00012c80: 3a0a 2020 2020 2020 2020 2020 2020 6c69  :.            li
+00012c90: 7374 5f6b 6579 7320 3d20 6c69 7374 2866  st_keys = list(f
+00012ca0: 696c 652e 6b65 7973 2829 290a 2020 2020  ile.keys()).    
+00012cb0: 2020 2020 2020 2020 6669 6c65 735b 6c69          files[li
+00012cc0: 7374 5f6b 6579 735b 305d 5d20 3d20 6669  st_keys[0]] = fi
+00012cd0: 6c65 5b6c 6973 745f 6b65 7973 5b30 5d5d  le[list_keys[0]]
+00012ce0: 0a20 2020 2020 2020 206c 7374 2e61 7070  .        lst.app
+00012cf0: 656e 6428 6a73 6f6e 5f64 6963 7429 0a0a  end(json_dict)..
+00012d00: 2020 2020 7061 796c 6f61 645b 2273 7469      payload["sti
+00012d10: 636b 6572 7322 5d20 3d20 6a73 6f6e 2e64  ckers"] = json.d
+00012d20: 756d 7073 286c 7374 290a 0a20 2020 2072  umps(lst)..    r
+00012d30: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00012d40: 6365 7373 5f72 6571 7565 7374 280a 2020  cess_request(.  
+00012d50: 2020 2020 2020 746f 6b65 6e2c 206d 6574        token, met
+00012d60: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00012d70: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00012d80: 696c 6573 2c20 6d65 7468 6f64 3d22 706f  iles, method="po
+00012d90: 7374 220a 2020 2020 290a 0a0a 6173 796e  st".    )...asyn
+00012da0: 6320 6465 6620 6164 645f 7374 6963 6b65  c def add_sticke
+00012db0: 725f 746f 5f73 6574 2874 6f6b 656e 2c20  r_to_set(token, 
+00012dc0: 7573 6572 5f69 642c 206e 616d 652c 2073  user_id, name, s
+00012dd0: 7469 636b 6572 293a 0a20 2020 206d 6574  ticker):.    met
+00012de0: 686f 645f 7572 6c20 3d20 2261 6464 5374  hod_url = "addSt
+00012df0: 6963 6b65 7254 6f53 6574 220a 2020 2020  ickerToSet".    
+00012e00: 6a73 6f6e 5f64 6963 742c 2066 696c 6573  json_dict, files
+00012e10: 203d 2073 7469 636b 6572 2e63 6f6e 7665   = sticker.conve
+00012e20: 7274 5f69 6e70 7574 5f73 7469 636b 6572  rt_input_sticker
+00012e30: 2829 0a20 2020 2070 6179 6c6f 6164 203d  ().    payload =
+00012e40: 207b 2275 7365 725f 6964 223a 2075 7365   {"user_id": use
+00012e50: 725f 6964 2c20 226e 616d 6522 3a20 6e61  r_id, "name": na
+00012e60: 6d65 2c20 2273 7469 636b 6572 223a 206a  me, "sticker": j
+00012e70: 736f 6e5f 6469 6374 7d0a 0a20 2020 2072  son_dict}..    r
+00012e80: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00012e90: 6365 7373 5f72 6571 7565 7374 280a 2020  cess_request(.  
+00012ea0: 2020 2020 2020 746f 6b65 6e2c 206d 6574        token, met
+00012eb0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00012ec0: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00012ed0: 696c 6573 2c20 6d65 7468 6f64 3d22 706f  iles, method="po
+00012ee0: 7374 220a 2020 2020 290a 0a0a 6173 796e  st".    )...asyn
+00012ef0: 6320 6465 6620 7365 745f 7374 6963 6b65  c def set_sticke
+00012f00: 725f 706f 7369 7469 6f6e 5f69 6e5f 7365  r_position_in_se
+00012f10: 7428 746f 6b65 6e2c 2073 7469 636b 6572  t(token, sticker
+00012f20: 2c20 706f 7369 7469 6f6e 293a 0a20 2020  , position):.   
+00012f30: 206d 6574 686f 645f 7572 6c20 3d20 2273   method_url = "s
+00012f40: 6574 5374 6963 6b65 7250 6f73 6974 696f  etStickerPositio
+00012f50: 6e49 6e53 6574 220a 2020 2020 7061 796c  nInSet".    payl
+00012f60: 6f61 6420 3d20 7b22 7374 6963 6b65 7222  oad = {"sticker"
+00012f70: 3a20 7374 6963 6b65 722c 2022 706f 7369  : sticker, "posi
+00012f80: 7469 6f6e 223a 2070 6f73 6974 696f 6e7d  tion": position}
+00012f90: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+00012fa0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+00012fb0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00012fc0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00012fd0: 6c6f 6164 2c20 6d65 7468 6f64 3d22 706f  load, method="po
+00012fe0: 7374 2229 0a0a 0a61 7379 6e63 2064 6566  st")...async def
+00012ff0: 2064 656c 6574 655f 7374 6963 6b65 725f   delete_sticker_
+00013000: 6672 6f6d 5f73 6574 2874 6f6b 656e 2c20  from_set(token, 
+00013010: 7374 6963 6b65 7229 3a0a 2020 2020 6d65  sticker):.    me
+00013020: 7468 6f64 5f75 726c 203d 2022 6465 6c65  thod_url = "dele
+00013030: 7465 5374 6963 6b65 7246 726f 6d53 6574  teStickerFromSet
+00013040: 220a 2020 2020 7061 796c 6f61 6420 3d20  ".    payload = 
+00013050: 7b22 7374 6963 6b65 7222 3a20 7374 6963  {"sticker": stic
+00013060: 6b65 727d 0a20 2020 2072 6574 7572 6e20  ker}.    return 
+00013070: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00013080: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00013090: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+000130a0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
+000130b0: 3d22 706f 7374 2229 0a0a 0a61 7379 6e63  ="post")...async
+000130c0: 2064 6566 2063 7265 6174 655f 696e 766f   def create_invo
+000130d0: 6963 655f 6c69 6e6b 280a 2020 2020 746f  ice_link(.    to
+000130e0: 6b65 6e2c 0a20 2020 2074 6974 6c65 2c0a  ken,.    title,.
+000130f0: 2020 2020 6465 7363 7269 7074 696f 6e2c      description,
+00013100: 0a20 2020 2070 6179 6c6f 6164 2c0a 2020  .    payload,.  
+00013110: 2020 7072 6f76 6964 6572 5f74 6f6b 656e    provider_token
+00013120: 2c0a 2020 2020 6375 7272 656e 6379 2c0a  ,.    currency,.
+00013130: 2020 2020 7072 6963 6573 2c0a 2020 2020      prices,.    
+00013140: 6d61 785f 7469 705f 616d 6f75 6e74 3d4e  max_tip_amount=N
+00013150: 6f6e 652c 0a20 2020 2073 7567 6765 7374  one,.    suggest
+00013160: 6564 5f74 6970 5f61 6d6f 756e 7473 3d4e  ed_tip_amounts=N
+00013170: 6f6e 652c 0a20 2020 2070 726f 7669 6465  one,.    provide
+00013180: 725f 6461 7461 3d4e 6f6e 652c 0a20 2020  r_data=None,.   
+00013190: 2070 686f 746f 5f75 726c 3d4e 6f6e 652c   photo_url=None,
+000131a0: 0a20 2020 2070 686f 746f 5f73 697a 653d  .    photo_size=
+000131b0: 4e6f 6e65 2c0a 2020 2020 7068 6f74 6f5f  None,.    photo_
+000131c0: 7769 6474 683d 4e6f 6e65 2c0a 2020 2020  width=None,.    
+000131d0: 7068 6f74 6f5f 6865 6967 6874 3d4e 6f6e  photo_height=Non
+000131e0: 652c 0a20 2020 206e 6565 645f 6e61 6d65  e,.    need_name
+000131f0: 3d4e 6f6e 652c 0a20 2020 206e 6565 645f  =None,.    need_
+00013200: 7068 6f6e 655f 6e75 6d62 6572 3d4e 6f6e  phone_number=Non
+00013210: 652c 0a20 2020 206e 6565 645f 656d 6169  e,.    need_emai
+00013220: 6c3d 4e6f 6e65 2c0a 2020 2020 6e65 6564  l=None,.    need
+00013230: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
+00013240: 733d 4e6f 6e65 2c0a 2020 2020 7365 6e64  s=None,.    send
+00013250: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
+00013260: 5f70 726f 7669 6465 723d 4e6f 6e65 2c0a  _provider=None,.
+00013270: 2020 2020 7365 6e64 5f65 6d61 696c 5f74      send_email_t
+00013280: 6f5f 7072 6f76 6964 6572 3d4e 6f6e 652c  o_provider=None,
+00013290: 0a20 2020 2069 735f 666c 6578 6962 6c65  .    is_flexible
+000132a0: 3d4e 6f6e 652c 0a29 3a0a 2020 2020 6d65  =None,.):.    me
+000132b0: 7468 6f64 5f75 726c 203d 2072 2263 7265  thod_url = r"cre
+000132c0: 6174 6549 6e76 6f69 6365 4c69 6e6b 220a  ateInvoiceLink".
+000132d0: 2020 2020 7061 796c 6f61 6420 3d20 7b0a      payload = {.
+000132e0: 2020 2020 2020 2020 2274 6974 6c65 223a          "title":
+000132f0: 2074 6974 6c65 2c0a 2020 2020 2020 2020   title,.        
+00013300: 2264 6573 6372 6970 7469 6f6e 223a 2064  "description": d
+00013310: 6573 6372 6970 7469 6f6e 2c0a 2020 2020  escription,.    
+00013320: 2020 2020 2270 6179 6c6f 6164 223a 2070      "payload": p
+00013330: 6179 6c6f 6164 2c0a 2020 2020 2020 2020  ayload,.        
+00013340: 2270 726f 7669 6465 725f 746f 6b65 6e22  "provider_token"
+00013350: 3a20 7072 6f76 6964 6572 5f74 6f6b 656e  : provider_token
+00013360: 2c0a 2020 2020 2020 2020 2263 7572 7265  ,.        "curre
+00013370: 6e63 7922 3a20 6375 7272 656e 6379 2c0a  ncy": currency,.
+00013380: 2020 2020 2020 2020 2270 7269 6365 7322          "prices"
+00013390: 3a20 6177 6169 7420 5f63 6f6e 7665 7274  : await _convert
+000133a0: 5f6c 6973 745f 6a73 6f6e 5f73 6572 6961  _list_json_seria
+000133b0: 6c69 7a61 626c 6528 7072 6963 6573 292c  lizable(prices),
+000133c0: 0a20 2020 207d 0a20 2020 2069 6620 6d61  .    }.    if ma
+000133d0: 785f 7469 705f 616d 6f75 6e74 3a0a 2020  x_tip_amount:.  
+000133e0: 2020 2020 2020 7061 796c 6f61 645b 226d        payload["m
+000133f0: 6178 5f74 6970 5f61 6d6f 756e 7422 5d20  ax_tip_amount"] 
+00013400: 3d20 6d61 785f 7469 705f 616d 6f75 6e74  = max_tip_amount
+00013410: 0a20 2020 2069 6620 7375 6767 6573 7465  .    if suggeste
+00013420: 645f 7469 705f 616d 6f75 6e74 733a 0a20  d_tip_amounts:. 
+00013430: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00013440: 7375 6767 6573 7465 645f 7469 705f 616d  suggested_tip_am
+00013450: 6f75 6e74 7322 5d20 3d20 6a73 6f6e 2e64  ounts"] = json.d
+00013460: 756d 7073 2873 7567 6765 7374 6564 5f74  umps(suggested_t
+00013470: 6970 5f61 6d6f 756e 7473 290a 2020 2020  ip_amounts).    
+00013480: 6966 2070 726f 7669 6465 725f 6461 7461  if provider_data
+00013490: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000134a0: 645b 2270 726f 7669 6465 725f 6461 7461  d["provider_data
+000134b0: 225d 203d 2070 726f 7669 6465 725f 6461  "] = provider_da
+000134c0: 7461 0a20 2020 2069 6620 7068 6f74 6f5f  ta.    if photo_
+000134d0: 7572 6c3a 0a20 2020 2020 2020 2070 6179  url:.        pay
+000134e0: 6c6f 6164 5b22 7068 6f74 6f5f 7572 6c22  load["photo_url"
+000134f0: 5d20 3d20 7068 6f74 6f5f 7572 6c0a 2020  ] = photo_url.  
+00013500: 2020 6966 2070 686f 746f 5f73 697a 653a    if photo_size:
+00013510: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00013520: 5b22 7068 6f74 6f5f 7369 7a65 225d 203d  ["photo_size"] =
+00013530: 2070 686f 746f 5f73 697a 650a 2020 2020   photo_size.    
+00013540: 6966 2070 686f 746f 5f77 6964 7468 3a0a  if photo_width:.
+00013550: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00013560: 2270 686f 746f 5f77 6964 7468 225d 203d  "photo_width"] =
+00013570: 2070 686f 746f 5f77 6964 7468 0a20 2020   photo_width.   
+00013580: 2069 6620 7068 6f74 6f5f 6865 6967 6874   if photo_height
+00013590: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000135a0: 645b 2270 686f 746f 5f68 6569 6768 7422  d["photo_height"
+000135b0: 5d20 3d20 7068 6f74 6f5f 6865 6967 6874  ] = photo_height
+000135c0: 0a20 2020 2069 6620 6e65 6564 5f6e 616d  .    if need_nam
+000135d0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+000135e0: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+000135f0: 6e65 6564 5f6e 616d 6522 5d20 3d20 6e65  need_name"] = ne
+00013600: 6564 5f6e 616d 650a 2020 2020 6966 206e  ed_name.    if n
+00013610: 6565 645f 7068 6f6e 655f 6e75 6d62 6572  eed_phone_number
+00013620: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00013630: 2020 2020 2020 7061 796c 6f61 645b 226e        payload["n
+00013640: 6565 645f 7068 6f6e 655f 6e75 6d62 6572  eed_phone_number
+00013650: 225d 203d 206e 6565 645f 7068 6f6e 655f  "] = need_phone_
+00013660: 6e75 6d62 6572 0a20 2020 2069 6620 6e65  number.    if ne
+00013670: 6564 5f65 6d61 696c 2069 7320 6e6f 7420  ed_email is not 
+00013680: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00013690: 796c 6f61 645b 226e 6565 645f 656d 6169  yload["need_emai
+000136a0: 6c22 5d20 3d20 6e65 6564 5f65 6d61 696c  l"] = need_email
+000136b0: 0a20 2020 2069 6620 6e65 6564 5f73 6869  .    if need_shi
+000136c0: 7070 696e 675f 6164 6472 6573 7320 6973  pping_address is
+000136d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000136e0: 2020 2070 6179 6c6f 6164 5b22 6e65 6564     payload["need
+000136f0: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
+00013700: 7322 5d20 3d20 6e65 6564 5f73 6869 7070  s"] = need_shipp
+00013710: 696e 675f 6164 6472 6573 730a 2020 2020  ing_address.    
+00013720: 6966 2073 656e 645f 7068 6f6e 655f 6e75  if send_phone_nu
+00013730: 6d62 6572 5f74 6f5f 7072 6f76 6964 6572  mber_to_provider
+00013740: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00013750: 2020 2020 2020 7061 796c 6f61 645b 2273        payload["s
+00013760: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
+00013770: 5f74 6f5f 7072 6f76 6964 6572 225d 203d  _to_provider"] =
+00013780: 2073 656e 645f 7068 6f6e 655f 6e75 6d62   send_phone_numb
+00013790: 6572 5f74 6f5f 7072 6f76 6964 6572 0a20  er_to_provider. 
+000137a0: 2020 2069 6620 7365 6e64 5f65 6d61 696c     if send_email
+000137b0: 5f74 6f5f 7072 6f76 6964 6572 2069 7320  _to_provider is 
+000137c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000137d0: 2020 7061 796c 6f61 645b 2273 656e 645f    payload["send_
+000137e0: 656d 6169 6c5f 746f 5f70 726f 7669 6465  email_to_provide
+000137f0: 7222 5d20 3d20 7365 6e64 5f65 6d61 696c  r"] = send_email
+00013800: 5f74 6f5f 7072 6f76 6964 6572 0a20 2020  _to_provider.   
+00013810: 2069 6620 6973 5f66 6c65 7869 626c 6520   if is_flexible 
+00013820: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00013830: 2020 2020 2070 6179 6c6f 6164 5b22 6973       payload["is
+00013840: 5f66 6c65 7869 626c 6522 5d20 3d20 6973  _flexible"] = is
+00013850: 5f66 6c65 7869 626c 650a 2020 2020 7265  _flexible.    re
+00013860: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+00013870: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+00013880: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00013890: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+000138a0: 6574 686f 643d 2270 6f73 7422 290a 0a0a  ethod="post")...
+000138b0: 2320 6e6f 696e 7370 6563 7469 6f6e 2050  # noinspection P
+000138c0: 7953 6861 646f 7769 6e67 4275 696c 7469  yShadowingBuilti
+000138d0: 6e73 0a61 7379 6e63 2064 6566 2073 656e  ns.async def sen
+000138e0: 645f 706f 6c6c 280a 2020 2020 2020 2020  d_poll(.        
+000138f0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00013900: 7175 6573 7469 6f6e 2c20 6f70 7469 6f6e  question, option
+00013910: 732c 0a20 2020 2020 2020 2069 735f 616e  s,.        is_an
+00013920: 6f6e 796d 6f75 7320 3d20 4e6f 6e65 2c20  onymous = None, 
+00013930: 7479 7065 203d 204e 6f6e 652c 2061 6c6c  type = None, all
+00013940: 6f77 735f 6d75 6c74 6970 6c65 5f61 6e73  ows_multiple_ans
+00013950: 7765 7273 203d 204e 6f6e 652c 2063 6f72  wers = None, cor
+00013960: 7265 6374 5f6f 7074 696f 6e5f 6964 203d  rect_option_id =
+00013970: 204e 6f6e 652c 0a20 2020 2020 2020 2065   None,.        e
+00013980: 7870 6c61 6e61 7469 6f6e 203d 204e 6f6e  xplanation = Non
+00013990: 652c 2065 7870 6c61 6e61 7469 6f6e 5f70  e, explanation_p
+000139a0: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c20  arse_mode=None, 
+000139b0: 6f70 656e 5f70 6572 696f 6420 3d20 4e6f  open_period = No
+000139c0: 6e65 2c20 636c 6f73 655f 6461 7465 203d  ne, close_date =
+000139d0: 204e 6f6e 652c 2069 735f 636c 6f73 6564   None, is_closed
+000139e0: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+000139f0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00013a00: 6174 696f 6e3d 4661 6c73 652c 2020 0a20  ation=False,  . 
+00013a10: 2020 2020 2020 2072 6570 6c79 5f6d 6172         reply_mar
+00013a20: 6b75 703d 4e6f 6e65 2c20 7469 6d65 6f75  kup=None, timeou
+00013a30: 743d 4e6f 6e65 2c20 6578 706c 616e 6174  t=None, explanat
+00013a40: 696f 6e5f 656e 7469 7469 6573 3d4e 6f6e  ion_entities=Non
+00013a50: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
+00013a60: 6e74 3d4e 6f6e 652c 206d 6573 7361 6765  nt=None, message
+00013a70: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
+00013a80: 0a20 2020 2020 2020 2072 6570 6c79 5f70  .        reply_p
+00013a90: 6172 616d 6574 6572 733d 4e6f 6e65 2c62  arameters=None,b
+00013aa0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00013ab0: 6f6e 5f69 643d 4e6f 6e65 2c20 7175 6573  on_id=None, ques
+00013ac0: 7469 6f6e 5f70 6172 7365 5f6d 6f64 653d  tion_parse_mode=
+00013ad0: 4e6f 6e65 2c20 7175 6573 7469 6f6e 5f65  None, question_e
+00013ae0: 6e74 6974 6965 733d 4e6f 6e65 293a 0a20  ntities=None):. 
+00013af0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00013b00: 7227 7365 6e64 506f 6c6c 270a 2020 2020  r'sendPoll'.    
+00013b10: 7061 796c 6f61 6420 3d20 7b0a 2020 2020  payload = {.    
+00013b20: 2020 2020 2763 6861 745f 6964 273a 2073      'chat_id': s
+00013b30: 7472 2863 6861 745f 6964 292c 0a20 2020  tr(chat_id),.   
+00013b40: 2020 2020 2027 7175 6573 7469 6f6e 273a       'question':
+00013b50: 2071 7565 7374 696f 6e2c 0a20 2020 2020   question,.     
+00013b60: 2020 2027 6f70 7469 6f6e 7327 3a20 6a73     'options': js
+00013b70: 6f6e 2e64 756d 7073 285b 6f70 7469 6f6e  on.dumps([option
+00013b80: 2e74 6f5f 6469 6374 2829 2066 6f72 206f  .to_dict() for o
+00013b90: 7074 696f 6e20 696e 206f 7074 696f 6e73  ption in options
+00013ba0: 5d29 0a20 2020 207d 0a0a 2020 2020 6966  ]).    }..    if
+00013bb0: 2069 735f 616e 6f6e 796d 6f75 7320 6973   is_anonymous is
+00013bc0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00013bd0: 2020 2070 6179 6c6f 6164 5b22 6973 5f61     payload["is_a
+00013be0: 6e6f 6e79 6d6f 7573 225d 203d 2069 735f  nonymous"] = is_
+00013bf0: 616e 6f6e 796d 6f75 730a 2020 2020 6966  anonymous.    if
+00013c00: 2074 7970 6520 6973 206e 6f74 204e 6f6e   type is not Non
+00013c10: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00013c20: 6164 5b22 7479 7065 225d 203d 2074 7970  ad["type"] = typ
+00013c30: 650a 2020 2020 6966 2061 6c6c 6f77 735f  e.    if allows_
+00013c40: 6d75 6c74 6970 6c65 5f61 6e73 7765 7273  multiple_answers
+00013c50: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00013c60: 2020 2020 2020 7061 796c 6f61 645b 2261        payload["a
+00013c70: 6c6c 6f77 735f 6d75 6c74 6970 6c65 5f61  llows_multiple_a
+00013c80: 6e73 7765 7273 225d 203d 2061 6c6c 6f77  nswers"] = allow
+00013c90: 735f 6d75 6c74 6970 6c65 5f61 6e73 7765  s_multiple_answe
+00013ca0: 7273 0a20 2020 2069 6620 636f 7272 6563  rs.    if correc
+00013cb0: 745f 6f70 7469 6f6e 5f69 6420 6973 206e  t_option_id is n
+00013cc0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00013cd0: 2070 6179 6c6f 6164 5b22 636f 7272 6563   payload["correc
+00013ce0: 745f 6f70 7469 6f6e 5f69 6422 5d20 3d20  t_option_id"] = 
+00013cf0: 636f 7272 6563 745f 6f70 7469 6f6e 5f69  correct_option_i
+00013d00: 640a 2020 2020 6966 2065 7870 6c61 6e61  d.    if explana
+00013d10: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+00013d20: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00013d30: 645b 2265 7870 6c61 6e61 7469 6f6e 225d  d["explanation"]
+00013d40: 203d 2065 7870 6c61 6e61 7469 6f6e 0a20   = explanation. 
+00013d50: 2020 2069 6620 6578 706c 616e 6174 696f     if explanatio
+00013d60: 6e5f 7061 7273 655f 6d6f 6465 2069 7320  n_parse_mode is 
+00013d70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00013d80: 2020 7061 796c 6f61 645b 2265 7870 6c61    payload["expla
+00013d90: 6e61 7469 6f6e 5f70 6172 7365 5f6d 6f64  nation_parse_mod
+00013da0: 6522 5d20 3d20 6578 706c 616e 6174 696f  e"] = explanatio
+00013db0: 6e5f 7061 7273 655f 6d6f 6465 0a20 2020  n_parse_mode.   
+00013dc0: 2069 6620 6f70 656e 5f70 6572 696f 6420   if open_period 
+00013dd0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00013de0: 2020 2020 2070 6179 6c6f 6164 5b22 6f70       payload["op
+00013df0: 656e 5f70 6572 696f 6422 5d20 3d20 6f70  en_period"] = op
+00013e00: 656e 5f70 6572 696f 640a 2020 2020 6966  en_period.    if
+00013e10: 2063 6c6f 7365 5f64 6174 6520 6973 206e   close_date is n
+00013e20: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00013e30: 2069 6620 6973 696e 7374 616e 6365 2863   if isinstance(c
+00013e40: 6c6f 7365 5f64 6174 652c 2064 6174 6574  lose_date, datet
+00013e50: 696d 6529 3a0a 2020 2020 2020 2020 2020  ime):.          
+00013e60: 2020 7061 796c 6f61 645b 2263 6c6f 7365    payload["close
+00013e70: 5f64 6174 6522 5d20 3d20 636c 6f73 655f  _date"] = close_
+00013e80: 6461 7465 2e74 696d 6573 7461 6d70 2829  date.timestamp()
+00013e90: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00013ea0: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+00013eb0: 6164 5b22 636c 6f73 655f 6461 7465 225d  ad["close_date"]
+00013ec0: 203d 2063 6c6f 7365 5f64 6174 650a 2020   = close_date.  
+00013ed0: 2020 6966 2069 735f 636c 6f73 6564 2069    if is_closed i
+00013ee0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00013ef0: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
+00013f00: 636c 6f73 6564 275d 203d 2069 735f 636c  closed'] = is_cl
+00013f10: 6f73 6564 0a20 2020 2069 6620 6469 7361  osed.    if disa
+00013f20: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00013f30: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00013f40: 645b 2264 6973 6162 6c65 5f6e 6f74 6966  d["disable_notif
+00013f50: 6963 6174 696f 6e22 5d20 3d20 6469 7361  ication"] = disa
+00013f60: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00013f70: 0a20 2020 2069 6620 7265 706c 795f 7061  .    if reply_pa
+00013f80: 7261 6d65 7465 7273 2069 7320 6e6f 7420  rameters is not 
+00013f90: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00013fa0: 796c 6f61 645b 2272 6570 6c79 5f70 6172  yload["reply_par
+00013fb0: 616d 6574 6572 7322 5d20 3d20 6a73 6f6e  ameters"] = json
+00013fc0: 2e64 756d 7073 2872 6570 6c79 5f70 6172  .dumps(reply_par
+00013fd0: 616d 6574 6572 732e 746f 5f64 6963 7428  ameters.to_dict(
+00013fe0: 2929 0a20 2020 2069 6620 7265 706c 795f  )).    if reply_
+00013ff0: 6d61 726b 7570 2069 7320 6e6f 7420 4e6f  markup is not No
+00014000: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00014010: 6f61 645b 2272 6570 6c79 5f6d 6172 6b75  oad["reply_marku
+00014020: 7022 5d20 3d20 6177 6169 7420 5f63 6f6e  p"] = await _con
+00014030: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+00014040: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
+00014050: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00014060: 2020 7061 796c 6f61 645b 2274 696d 656f    payload["timeo
+00014070: 7574 225d 203d 2074 696d 656f 7574 0a20  ut"] = timeout. 
+00014080: 2020 2069 6620 6578 706c 616e 6174 696f     if explanatio
+00014090: 6e5f 656e 7469 7469 6573 3a0a 2020 2020  n_entities:.    
+000140a0: 2020 2020 7061 796c 6f61 645b 2265 7870      payload["exp
+000140b0: 6c61 6e61 7469 6f6e 5f65 6e74 6974 6965  lanation_entitie
+000140c0: 7322 5d20 3d20 6a73 6f6e 2e64 756d 7073  s"] = json.dumps
+000140d0: 280a 2020 2020 2020 2020 2020 2020 7479  (.            ty
+000140e0: 7065 732e 4d65 7373 6167 6545 6e74 6974  pes.MessageEntit
+000140f0: 792e 746f 5f6c 6973 745f 6f66 5f64 6963  y.to_list_of_dic
+00014100: 7473 2865 7870 6c61 6e61 7469 6f6e 5f65  ts(explanation_e
+00014110: 6e74 6974 6965 7329 0a20 2020 2020 2020  ntities).       
+00014120: 2029 0a20 2020 2069 6620 7072 6f74 6563   ).    if protec
+00014130: 745f 636f 6e74 656e 743a 0a20 2020 2020  t_content:.     
+00014140: 2020 2070 6179 6c6f 6164 5b22 7072 6f74     payload["prot
+00014150: 6563 745f 636f 6e74 656e 7422 5d20 3d20  ect_content"] = 
+00014160: 7072 6f74 6563 745f 636f 6e74 656e 740a  protect_content.
+00014170: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
+00014180: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
+00014190: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
+000141a0: 6765 5f74 6872 6561 645f 6964 225d 203d  ge_thread_id"] =
+000141b0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+000141c0: 6964 0a20 2020 2069 6620 6275 7369 6e65  id.    if busine
+000141d0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+000141e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000141f0: 645b 2762 7573 696e 6573 735f 636f 6e6e  d['business_conn
+00014200: 6563 7469 6f6e 5f69 6427 5d20 3d20 6275  ection_id'] = bu
+00014210: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00014220: 6e5f 6964 0a20 2020 2069 6620 7175 6573  n_id.    if ques
+00014230: 7469 6f6e 5f70 6172 7365 5f6d 6f64 653a  tion_parse_mode:
+00014240: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00014250: 5b27 7175 6573 7469 6f6e 5f70 6172 7365  ['question_parse
+00014260: 5f6d 6f64 6527 5d20 3d20 7175 6573 7469  _mode'] = questi
+00014270: 6f6e 5f70 6172 7365 5f6d 6f64 650a 2020  on_parse_mode.  
+00014280: 2020 6966 2071 7565 7374 696f 6e5f 656e    if question_en
+00014290: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
+000142a0: 7061 796c 6f61 645b 2771 7565 7374 696f  payload['questio
+000142b0: 6e5f 656e 7469 7469 6573 275d 203d 206a  n_entities'] = j
+000142c0: 736f 6e2e 6475 6d70 7328 7479 7065 732e  son.dumps(types.
+000142d0: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
+000142e0: 5f6c 6973 745f 6f66 5f64 6963 7473 2871  _list_of_dicts(q
+000142f0: 7565 7374 696f 6e5f 656e 7469 7469 6573  uestion_entities
+00014300: 2929 0a20 2020 2072 6574 7572 6e20 6177  )).    return aw
+00014310: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+00014320: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00014330: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00014340: 6179 6c6f 6164 290a 0a0a 6173 796e 6320  ayload)...async 
+00014350: 6465 6620 6372 6561 7465 5f66 6f72 756d  def create_forum
+00014360: 5f74 6f70 6963 280a 2020 2020 746f 6b65  _topic(.    toke
+00014370: 6e2c 2063 6861 745f 6964 2c20 6e61 6d65  n, chat_id, name
+00014380: 2c20 6963 6f6e 5f63 6f6c 6f72 3d4e 6f6e  , icon_color=Non
+00014390: 652c 2069 636f 6e5f 6375 7374 6f6d 5f65  e, icon_custom_e
+000143a0: 6d6f 6a69 5f69 643d 4e6f 6e65 0a29 3a0a  moji_id=None.):.
+000143b0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000143c0: 2072 2263 7265 6174 6546 6f72 756d 546f   r"createForumTo
+000143d0: 7069 6322 0a20 2020 2070 6179 6c6f 6164  pic".    payload
+000143e0: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
+000143f0: 6861 745f 6964 2c20 226e 616d 6522 3a20  hat_id, "name": 
+00014400: 6e61 6d65 7d0a 2020 2020 6966 2069 636f  name}.    if ico
+00014410: 6e5f 636f 6c6f 723a 0a20 2020 2020 2020  n_color:.       
+00014420: 2070 6179 6c6f 6164 5b22 6963 6f6e 5f63   payload["icon_c
+00014430: 6f6c 6f72 225d 203d 2069 636f 6e5f 636f  olor"] = icon_co
+00014440: 6c6f 720a 2020 2020 6966 2069 636f 6e5f  lor.    if icon_
+00014450: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 643a  custom_emoji_id:
+00014460: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00014470: 5b22 6963 6f6e 5f63 7573 746f 6d5f 656d  ["icon_custom_em
+00014480: 6f6a 695f 6964 225d 203d 2069 636f 6e5f  oji_id"] = icon_
+00014490: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 640a  custom_emoji_id.
+000144a0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+000144b0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+000144c0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+000144d0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+000144e0: 6f61 6429 0a0a 0a61 7379 6e63 2064 6566  oad)...async def
+000144f0: 2065 6469 745f 666f 7275 6d5f 746f 7069   edit_forum_topi
+00014500: 6328 0a20 2020 2074 6f6b 656e 2c20 6368  c(.    token, ch
+00014510: 6174 5f69 642c 206d 6573 7361 6765 5f74  at_id, message_t
+00014520: 6872 6561 645f 6964 2c20 6e61 6d65 3d4e  hread_id, name=N
+00014530: 6f6e 652c 2069 636f 6e5f 6375 7374 6f6d  one, icon_custom
+00014540: 5f65 6d6f 6a69 5f69 643d 4e6f 6e65 0a29  _emoji_id=None.)
+00014550: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00014560: 203d 2072 2265 6469 7446 6f72 756d 546f   = r"editForumTo
+00014570: 7069 6322 0a20 2020 2070 6179 6c6f 6164  pic".    payload
+00014580: 203d 207b 2263 6861 745f 6964 223a 2063   = {"chat_id": c
+00014590: 6861 745f 6964 2c20 226d 6573 7361 6765  hat_id, "message
+000145a0: 5f74 6872 6561 645f 6964 223a 206d 6573  _thread_id": mes
+000145b0: 7361 6765 5f74 6872 6561 645f 6964 7d0a  sage_thread_id}.
+000145c0: 2020 2020 6966 206e 616d 6520 6973 206e      if name is n
+000145d0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000145e0: 2070 6179 6c6f 6164 5b22 6e61 6d65 225d   payload["name"]
+000145f0: 203d 206e 616d 650a 2020 2020 6966 2069   = name.    if i
+00014600: 636f 6e5f 6375 7374 6f6d 5f65 6d6f 6a69  con_custom_emoji
+00014610: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
+00014620: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00014630: 5b22 6963 6f6e 5f63 7573 746f 6d5f 656d  ["icon_custom_em
+00014640: 6f6a 695f 6964 225d 203d 2069 636f 6e5f  oji_id"] = icon_
+00014650: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 640a  custom_emoji_id.
+00014660: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00014670: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+00014680: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00014690: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+000146a0: 6f61 6429 0a0a 0a61 7379 6e63 2064 6566  oad)...async def
+000146b0: 2063 6c6f 7365 5f66 6f72 756d 5f74 6f70   close_forum_top
+000146c0: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+000146d0: 642c 206d 6573 7361 6765 5f74 6872 6561  d, message_threa
+000146e0: 645f 6964 293a 0a20 2020 206d 6574 686f  d_id):.    metho
+000146f0: 645f 7572 6c20 3d20 7222 636c 6f73 6546  d_url = r"closeF
+00014700: 6f72 756d 546f 7069 6322 0a20 2020 2070  orumTopic".    p
+00014710: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+00014720: 6964 223a 2063 6861 745f 6964 2c20 226d  id": chat_id, "m
+00014730: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00014740: 223a 206d 6573 7361 6765 5f74 6872 6561  ": message_threa
+00014750: 645f 6964 7d0a 2020 2020 7265 7475 726e  d_id}.    return
+00014760: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00014770: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00014780: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00014790: 733d 7061 796c 6f61 6429 0a0a 0a61 7379  s=payload)...asy
+000147a0: 6e63 2064 6566 2072 656f 7065 6e5f 666f  nc def reopen_fo
+000147b0: 7275 6d5f 746f 7069 6328 746f 6b65 6e2c  rum_topic(token,
+000147c0: 2063 6861 745f 6964 2c20 6d65 7373 6167   chat_id, messag
+000147d0: 655f 7468 7265 6164 5f69 6429 3a0a 2020  e_thread_id):.  
+000147e0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+000147f0: 2272 656f 7065 6e46 6f72 756d 546f 7069  "reopenForumTopi
+00014800: 6322 0a20 2020 2070 6179 6c6f 6164 203d  c".    payload =
+00014810: 207b 2263 6861 745f 6964 223a 2063 6861   {"chat_id": cha
+00014820: 745f 6964 2c20 226d 6573 7361 6765 5f74  t_id, "message_t
+00014830: 6872 6561 645f 6964 223a 206d 6573 7361  hread_id": messa
+00014840: 6765 5f74 6872 6561 645f 6964 7d0a 2020  ge_thread_id}.  
+00014850: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+00014860: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+00014870: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00014880: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00014890: 6429 0a0a 0a61 7379 6e63 2064 6566 2064  d)...async def d
+000148a0: 656c 6574 655f 666f 7275 6d5f 746f 7069  elete_forum_topi
+000148b0: 6328 746f 6b65 6e2c 2063 6861 745f 6964  c(token, chat_id
+000148c0: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
+000148d0: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
+000148e0: 5f75 726c 203d 2072 2264 656c 6574 6546  _url = r"deleteF
+000148f0: 6f72 756d 546f 7069 6322 0a20 2020 2070  orumTopic".    p
+00014900: 6179 6c6f 6164 203d 207b 2263 6861 745f  ayload = {"chat_
+00014910: 6964 223a 2063 6861 745f 6964 2c20 226d  id": chat_id, "m
+00014920: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00014930: 223a 206d 6573 7361 6765 5f74 6872 6561  ": message_threa
+00014940: 645f 6964 7d0a 2020 2020 7265 7475 726e  d_id}.    return
+00014950: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00014960: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00014970: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00014980: 733d 7061 796c 6f61 6429 0a0a 0a61 7379  s=payload)...asy
+00014990: 6e63 2064 6566 2075 6e70 696e 5f61 6c6c  nc def unpin_all
+000149a0: 5f66 6f72 756d 5f74 6f70 6963 5f6d 6573  _forum_topic_mes
+000149b0: 7361 6765 7328 746f 6b65 6e2c 2063 6861  sages(token, cha
+000149c0: 745f 6964 2c20 6d65 7373 6167 655f 7468  t_id, message_th
+000149d0: 7265 6164 5f69 6429 3a0a 2020 2020 6d65  read_id):.    me
+000149e0: 7468 6f64 5f75 726c 203d 2072 2275 6e70  thod_url = r"unp
+000149f0: 696e 416c 6c46 6f72 756d 546f 7069 634d  inAllForumTopicM
+00014a00: 6573 7361 6765 7322 0a20 2020 2070 6179  essages".    pay
+00014a10: 6c6f 6164 203d 207b 2263 6861 745f 6964  load = {"chat_id
+00014a20: 223a 2063 6861 745f 6964 2c20 226d 6573  ": chat_id, "mes
+00014a30: 7361 6765 5f74 6872 6561 645f 6964 223a  sage_thread_id":
+00014a40: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00014a50: 6964 7d0a 2020 2020 7265 7475 726e 2061  id}.    return a
+00014a60: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+00014a70: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00014a80: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00014a90: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
+00014aa0: 2064 6566 2067 6574 5f66 6f72 756d 5f74   def get_forum_t
+00014ab0: 6f70 6963 5f69 636f 6e5f 7374 6963 6b65  opic_icon_sticke
+00014ac0: 7273 2874 6f6b 656e 293a 0a20 2020 206d  rs(token):.    m
+00014ad0: 6574 686f 645f 7572 6c20 3d20 7222 6765  ethod_url = r"ge
+00014ae0: 7446 6f72 756d 546f 7069 6349 636f 6e53  tForumTopicIconS
+00014af0: 7469 636b 6572 7322 0a20 2020 2072 6574  tickers".    ret
+00014b00: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+00014b10: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+00014b20: 2c20 6d65 7468 6f64 5f75 726c 290a 0a0a  , method_url)...
+00014b30: 6173 796e 6320 6465 6620 6564 6974 5f67  async def edit_g
+00014b40: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
+00014b50: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00014b60: 642c 206e 616d 6529 3a0a 2020 2020 6d65  d, name):.    me
+00014b70: 7468 6f64 5f75 726c 203d 2072 2265 6469  thod_url = r"edi
+00014b80: 7447 656e 6572 616c 466f 7275 6d54 6f70  tGeneralForumTop
+00014b90: 6963 220a 2020 2020 7061 796c 6f61 6420  ic".    payload 
+00014ba0: 3d20 7b22 6368 6174 5f69 6422 3a20 6368  = {"chat_id": ch
+00014bb0: 6174 5f69 642c 2022 6e61 6d65 223a 206e  at_id, "name": n
+00014bc0: 616d 657d 0a20 2020 2072 6574 7572 6e20  ame}.    return 
+00014bd0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00014be0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00014bf0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00014c00: 3d70 6179 6c6f 6164 290a 0a0a 6173 796e  =payload)...asyn
+00014c10: 6320 6465 6620 636c 6f73 655f 6765 6e65  c def close_gene
+00014c20: 7261 6c5f 666f 7275 6d5f 746f 7069 6328  ral_forum_topic(
+00014c30: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
+00014c40: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00014c50: 3d20 7222 636c 6f73 6547 656e 6572 616c  = r"closeGeneral
+00014c60: 466f 7275 6d54 6f70 6963 220a 2020 2020  ForumTopic".    
+00014c70: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+00014c80: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
+00014c90: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00014ca0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00014cb0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00014cc0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00014cd0: 6164 290a 0a0a 6173 796e 6320 6465 6620  ad)...async def 
+00014ce0: 7265 6f70 656e 5f67 656e 6572 616c 5f66  reopen_general_f
+00014cf0: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
+00014d00: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
+00014d10: 6d65 7468 6f64 5f75 726c 203d 2072 2272  method_url = r"r
+00014d20: 656f 7065 6e47 656e 6572 616c 466f 7275  eopenGeneralForu
+00014d30: 6d54 6f70 6963 220a 2020 2020 7061 796c  mTopic".    payl
+00014d40: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
+00014d50: 3a20 6368 6174 5f69 647d 0a20 2020 2072  : chat_id}.    r
+00014d60: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00014d70: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00014d80: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00014d90: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
+00014da0: 0a0a 6173 796e 6320 6465 6620 6869 6465  ..async def hide
+00014db0: 5f67 656e 6572 616c 5f66 6f72 756d 5f74  _general_forum_t
+00014dc0: 6f70 6963 2874 6f6b 656e 2c20 6368 6174  opic(token, chat
+00014dd0: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
+00014de0: 5f75 726c 203d 2072 2268 6964 6547 656e  _url = r"hideGen
+00014df0: 6572 616c 466f 7275 6d54 6f70 6963 220a  eralForumTopic".
+00014e00: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00014e10: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+00014e20: 647d 0a20 2020 2072 6574 7572 6e20 6177  d}.    return aw
+00014e30: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+00014e40: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00014e50: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00014e60: 6179 6c6f 6164 290a 0a0a 6173 796e 6320  ayload)...async 
+00014e70: 6465 6620 756e 6869 6465 5f67 656e 6572  def unhide_gener
+00014e80: 616c 5f66 6f72 756d 5f74 6f70 6963 2874  al_forum_topic(t
+00014e90: 6f6b 656e 2c20 6368 6174 5f69 6429 3a0a  oken, chat_id):.
+00014ea0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00014eb0: 2072 2275 6e68 6964 6547 656e 6572 616c   r"unhideGeneral
+00014ec0: 466f 7275 6d54 6f70 6963 220a 2020 2020  ForumTopic".    
+00014ed0: 7061 796c 6f61 6420 3d20 7b22 6368 6174  payload = {"chat
+00014ee0: 5f69 6422 3a20 6368 6174 5f69 647d 0a20  _id": chat_id}. 
+00014ef0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00014f00: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00014f10: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00014f20: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00014f30: 6164 290a 0a0a 6173 796e 6320 6465 6620  ad)...async def 
+00014f40: 6465 6c65 7465 5f6d 6573 7361 6765 7328  delete_messages(
+00014f50: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00014f60: 6d65 7373 6167 655f 6964 7329 3a0a 2020  message_ids):.  
+00014f70: 2020 6d65 7468 6f64 5f75 726c 203d 2022    method_url = "
+00014f80: 6465 6c65 7465 4d65 7373 6167 6573 220a  deleteMessages".
+00014f90: 2020 2020 7061 796c 6f61 6420 3d20 7b22      payload = {"
+00014fa0: 6368 6174 5f69 6422 3a20 6368 6174 5f69  chat_id": chat_i
+00014fb0: 642c 2022 6d65 7373 6167 655f 6964 7322  d, "message_ids"
+00014fc0: 3a20 6a73 6f6e 2e64 756d 7073 286d 6573  : json.dumps(mes
+00014fd0: 7361 6765 5f69 6473 297d 0a20 2020 2072  sage_ids)}.    r
+00014fe0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00014ff0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00015000: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00015010: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
+00015020: 0a0a 6173 796e 6320 6465 6620 666f 7277  ..async def forw
+00015030: 6172 645f 6d65 7373 6167 6573 280a 2020  ard_messages(.  
+00015040: 2020 746f 6b65 6e2c 0a20 2020 2063 6861    token,.    cha
+00015050: 745f 6964 2c0a 2020 2020 6672 6f6d 5f63  t_id,.    from_c
+00015060: 6861 745f 6964 2c0a 2020 2020 6d65 7373  hat_id,.    mess
+00015070: 6167 655f 6964 732c 0a20 2020 2064 6973  age_ids,.    dis
+00015080: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00015090: 6e3d 4e6f 6e65 2c0a 2020 2020 6d65 7373  n=None,.    mess
+000150a0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
+000150b0: 6e65 2c0a 2020 2020 7072 6f74 6563 745f  ne,.    protect_
+000150c0: 636f 6e74 656e 743d 4e6f 6e65 2c0a 293a  content=None,.):
+000150d0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+000150e0: 3d20 2266 6f72 7761 7264 4d65 7373 6167  = "forwardMessag
+000150f0: 6573 220a 2020 2020 7061 796c 6f61 6420  es".    payload 
+00015100: 3d20 7b0a 2020 2020 2020 2020 2263 6861  = {.        "cha
+00015110: 745f 6964 223a 2063 6861 745f 6964 2c0a  t_id": chat_id,.
+00015120: 2020 2020 2020 2020 2266 726f 6d5f 6368          "from_ch
+00015130: 6174 5f69 6422 3a20 6672 6f6d 5f63 6861  at_id": from_cha
+00015140: 745f 6964 2c0a 2020 2020 2020 2020 226d  t_id,.        "m
+00015150: 6573 7361 6765 5f69 6473 223a 206a 736f  essage_ids": jso
+00015160: 6e2e 6475 6d70 7328 6d65 7373 6167 655f  n.dumps(message_
+00015170: 6964 7329 2c0a 2020 2020 7d0a 2020 2020  ids),.    }.    
+00015180: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00015190: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+000151a0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+000151b0: 6c6f 6164 5b22 6469 7361 626c 655f 6e6f  load["disable_no
+000151c0: 7469 6669 6361 7469 6f6e 225d 203d 2064  tification"] = d
+000151d0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+000151e0: 696f 6e0a 2020 2020 6966 206d 6573 7361  ion.    if messa
+000151f0: 6765 5f74 6872 6561 645f 6964 2069 7320  ge_thread_id is 
+00015200: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00015210: 2020 7061 796c 6f61 645b 226d 6573 7361    payload["messa
+00015220: 6765 5f74 6872 6561 645f 6964 225d 203d  ge_thread_id"] =
+00015230: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00015240: 6964 0a20 2020 2069 6620 7072 6f74 6563  id.    if protec
+00015250: 745f 636f 6e74 656e 7420 6973 206e 6f74  t_content is not
+00015260: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00015270: 6179 6c6f 6164 5b22 7072 6f74 6563 745f  ayload["protect_
+00015280: 636f 6e74 656e 7422 5d20 3d20 7072 6f74  content"] = prot
+00015290: 6563 745f 636f 6e74 656e 740a 0a20 2020  ect_content..   
+000152a0: 2072 6573 756c 7420 3d20 6177 6169 7420   result = await 
+000152b0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+000152c0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+000152d0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+000152e0: 6164 290a 2020 2020 7265 7475 726e 2072  ad).    return r
+000152f0: 6573 756c 740a 0a0a 6173 796e 6320 6465  esult...async de
+00015300: 6620 636f 7079 5f6d 6573 7361 6765 7328  f copy_messages(
+00015310: 0a20 2020 2074 6f6b 656e 2c0a 2020 2020  .    token,.    
+00015320: 6368 6174 5f69 642c 0a20 2020 2066 726f  chat_id,.    fro
+00015330: 6d5f 6368 6174 5f69 642c 0a20 2020 206d  m_chat_id,.    m
+00015340: 6573 7361 6765 5f69 6473 2c0a 2020 2020  essage_ids,.    
+00015350: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00015360: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 206d  tion=None,.    m
+00015370: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00015380: 3d4e 6f6e 652c 0a20 2020 2070 726f 7465  =None,.    prote
+00015390: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
+000153a0: 0a20 2020 2072 656d 6f76 655f 6361 7074  .    remove_capt
+000153b0: 696f 6e3d 4e6f 6e65 2c0a 293a 0a20 2020  ion=None,.):.   
+000153c0: 206d 6574 686f 645f 7572 6c20 3d20 2263   method_url = "c
+000153d0: 6f70 794d 6573 7361 6765 7322 0a20 2020  opyMessages".   
+000153e0: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
+000153f0: 2020 2020 2022 6368 6174 5f69 6422 3a20       "chat_id": 
+00015400: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
+00015410: 2022 6672 6f6d 5f63 6861 745f 6964 223a   "from_chat_id":
+00015420: 2066 726f 6d5f 6368 6174 5f69 642c 0a20   from_chat_id,. 
+00015430: 2020 2020 2020 2022 6d65 7373 6167 655f         "message_
+00015440: 6964 7322 3a20 6a73 6f6e 2e64 756d 7073  ids": json.dumps
+00015450: 286d 6573 7361 6765 5f69 6473 292c 0a20  (message_ids),. 
+00015460: 2020 207d 0a20 2020 2069 6620 6469 7361     }.    if disa
+00015470: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00015480: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00015490: 2020 2020 2020 7061 796c 6f61 645b 2264        payload["d
+000154a0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+000154b0: 696f 6e22 5d20 3d20 6469 7361 626c 655f  ion"] = disable_
+000154c0: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
+000154d0: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
+000154e0: 6164 5f69 6420 6973 206e 6f74 204e 6f6e  ad_id is not Non
+000154f0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00015500: 6164 5b22 6d65 7373 6167 655f 7468 7265  ad["message_thre
+00015510: 6164 5f69 6422 5d20 3d20 6d65 7373 6167  ad_id"] = messag
+00015520: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
+00015530: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
+00015540: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
+00015550: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00015560: 2270 726f 7465 6374 5f63 6f6e 7465 6e74  "protect_content
+00015570: 225d 203d 2070 726f 7465 6374 5f63 6f6e  "] = protect_con
+00015580: 7465 6e74 0a20 2020 2069 6620 7265 6d6f  tent.    if remo
+00015590: 7665 5f63 6170 7469 6f6e 2069 7320 6e6f  ve_caption is no
+000155a0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000155b0: 7061 796c 6f61 645b 2272 656d 6f76 655f  payload["remove_
+000155c0: 6361 7074 696f 6e22 5d20 3d20 7265 6d6f  caption"] = remo
+000155d0: 7665 5f63 6170 7469 6f6e 0a0a 2020 2020  ve_caption..    
+000155e0: 7265 7375 6c74 203d 2061 7761 6974 205f  result = await _
+000155f0: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+00015600: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00015610: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00015620: 6429 0a20 2020 2072 6574 7572 6e20 7265  d).    return re
+00015630: 7375 6c74 0a0a 0a61 7379 6e63 2064 6566  sult...async def
+00015640: 205f 636f 6e76 6572 745f 6c69 7374 5f6a   _convert_list_j
+00015650: 736f 6e5f 7365 7269 616c 697a 6162 6c65  son_serializable
+00015660: 2872 6573 756c 7473 293a 0a20 2020 2072  (results):.    r
+00015670: 6574 203d 2022 220a 2020 2020 666f 7220  et = "".    for 
+00015680: 7220 696e 2072 6573 756c 7473 3a0a 2020  r in results:.  
+00015690: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000156a0: 6e63 6528 722c 2074 7970 6573 2e4a 736f  nce(r, types.Jso
+000156b0: 6e53 6572 6961 6c69 7a61 626c 6529 3a0a  nSerializable):.
+000156c0: 2020 2020 2020 2020 2020 2020 7265 7420              ret 
+000156d0: 3d20 7265 7420 2b20 722e 746f 5f6a 736f  = ret + r.to_jso
+000156e0: 6e28 2920 2b20 222c 220a 2020 2020 6966  n() + ",".    if
+000156f0: 206c 656e 2872 6574 2920 3e20 303a 0a20   len(ret) > 0:. 
+00015700: 2020 2020 2020 2072 6574 203d 2072 6574         ret = ret
+00015710: 5b3a 2d31 5d0a 2020 2020 7265 7475 726e  [:-1].    return
+00015720: 2022 5b22 202b 2072 6574 202b 2022 5d22   "[" + ret + "]"
+00015730: 0a0a 0a61 7379 6e63 2064 6566 2063 6f6e  ...async def con
+00015740: 7665 7274 5f69 6e70 7574 5f6d 6564 6961  vert_input_media
+00015750: 286d 6564 6961 293a 0a20 2020 2069 6620  (media):.    if 
+00015760: 6973 696e 7374 616e 6365 286d 6564 6961  isinstance(media
+00015770: 2c20 7479 7065 732e 496e 7075 744d 6564  , types.InputMed
+00015780: 6961 293a 0a20 2020 2020 2020 2072 6574  ia):.        ret
+00015790: 7572 6e20 6d65 6469 612e 636f 6e76 6572  urn media.conver
+000157a0: 745f 696e 7075 745f 6d65 6469 6128 290a  t_input_media().
+000157b0: 2020 2020 7265 7475 726e 204e 6f6e 652c      return None,
+000157c0: 204e 6f6e 650a 0a0a 6173 796e 6320 6465   None...async de
+000157d0: 6620 636f 6e76 6572 745f 696e 7075 745f  f convert_input_
+000157e0: 6d65 6469 615f 6172 7261 7928 6172 7261  media_array(arra
+000157f0: 7929 3a0a 2020 2020 6d65 6469 6120 3d20  y):.    media = 
+00015800: 5b5d 0a20 2020 2066 696c 6573 203d 207b  [].    files = {
+00015810: 7d0a 2020 2020 666f 7220 696e 7075 745f  }.    for input_
+00015820: 6d65 6469 6120 696e 2061 7272 6179 3a0a  media in array:.
+00015830: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00015840: 7461 6e63 6528 696e 7075 745f 6d65 6469  tance(input_medi
+00015850: 612c 2074 7970 6573 2e49 6e70 7574 4d65  a, types.InputMe
+00015860: 6469 6129 3a0a 2020 2020 2020 2020 2020  dia):.          
+00015870: 2020 6d65 6469 615f 6469 6374 203d 2069    media_dict = i
+00015880: 6e70 7574 5f6d 6564 6961 2e74 6f5f 6469  nput_media.to_di
+00015890: 6374 2829 0a20 2020 2020 2020 2020 2020  ct().           
+000158a0: 2069 6620 6d65 6469 615f 6469 6374 5b22   if media_dict["
+000158b0: 6d65 6469 6122 5d2e 7374 6172 7473 7769  media"].startswi
+000158c0: 7468 2822 6174 7461 6368 3a2f 2f22 293a  th("attach://"):
+000158d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000158e0: 206b 6579 203d 206d 6564 6961 5f64 6963   key = media_dic
+000158f0: 745b 226d 6564 6961 225d 2e72 6570 6c61  t["media"].repla
+00015900: 6365 2822 6174 7461 6368 3a2f 2f22 2c20  ce("attach://", 
+00015910: 2222 290a 2020 2020 2020 2020 2020 2020  "").            
+00015920: 2020 2020 6669 6c65 735b 6b65 795d 203d      files[key] =
+00015930: 2069 6e70 7574 5f6d 6564 6961 2e6d 6564   input_media.med
+00015940: 6961 0a20 2020 2020 2020 2020 2020 206d  ia.            m
+00015950: 6564 6961 2e61 7070 656e 6428 6d65 6469  edia.append(medi
+00015960: 615f 6469 6374 290a 2020 2020 7265 7475  a_dict).    retu
+00015970: 726e 206a 736f 6e2e 6475 6d70 7328 6d65  rn json.dumps(me
+00015980: 6469 6129 2c20 6669 6c65 730a 0a0a 6173  dia), files...as
+00015990: 796e 6320 6465 6620 5f6e 6f5f 656e 636f  ync def _no_enco
+000159a0: 6465 2866 756e 6329 3a0a 2020 2020 6465  de(func):.    de
+000159b0: 6620 7772 6170 7065 7228 6b65 792c 2076  f wrapper(key, v
+000159c0: 616c 293a 0a20 2020 2020 2020 2069 6620  al):.        if 
+000159d0: 6b65 7920 3d3d 2022 6669 6c65 6e61 6d65  key == "filename
+000159e0: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
+000159f0: 6574 7572 6e20 227b 307d 3d7b 317d 222e  eturn "{0}={1}".
+00015a00: 666f 726d 6174 286b 6579 2c20 7661 6c29  format(key, val)
+00015a10: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00015a20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00015a30: 6e20 6675 6e63 286b 6579 2c20 7661 6c29  n func(key, val)
+00015a40: 0a0a 2020 2020 7265 7475 726e 2077 7261  ..    return wra
+00015a50: 7070 6572 0a0a 0a61 7379 6e63 2064 6566  pper...async def
+00015a60: 2073 746f 705f 706f 6c6c 2874 6f6b 656e   stop_poll(token
+00015a70: 2c20 6368 6174 5f69 642c 206d 6573 7361  , chat_id, messa
+00015a80: 6765 5f69 642c 2072 6570 6c79 5f6d 6172  ge_id, reply_mar
+00015a90: 6b75 703d 4e6f 6e65 293a 0a20 2020 206d  kup=None):.    m
+00015aa0: 6574 686f 645f 7572 6c20 3d20 7222 7374  ethod_url = r"st
+00015ab0: 6f70 506f 6c6c 220a 2020 2020 7061 796c  opPoll".    payl
+00015ac0: 6f61 6420 3d20 7b22 6368 6174 5f69 6422  oad = {"chat_id"
+00015ad0: 3a20 7374 7228 6368 6174 5f69 6429 2c20  : str(chat_id), 
+00015ae0: 226d 6573 7361 6765 5f69 6422 3a20 6d65  "message_id": me
+00015af0: 7373 6167 655f 6964 7d0a 2020 2020 6966  ssage_id}.    if
+00015b00: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
+00015b10: 2020 2020 2020 2070 6179 6c6f 6164 5b22         payload["
+00015b20: 7265 706c 795f 6d61 726b 7570 225d 203d  reply_markup"] =
+00015b30: 2061 7761 6974 205f 636f 6e76 6572 745f   await _convert_
+00015b40: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+00015b50: 6b75 7029 0a20 2020 2072 6574 7572 6e20  kup).    return 
+00015b60: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00015b70: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00015b80: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00015b90: 3d70 6179 6c6f 6164 290a 0a0a 2320 6578  =payload)...# ex
+00015ba0: 6365 7074 696f 6e73 0a63 6c61 7373 2041  ceptions.class A
+00015bb0: 7069 4578 6365 7074 696f 6e28 4578 6365  piException(Exce
+00015bc0: 7074 696f 6e29 3a0a 2020 2020 2222 220a  ption):.    """.
+00015bd0: 2020 2020 5468 6973 2063 6c61 7373 2072      This class r
+00015be0: 6570 7265 7365 6e74 7320 6120 6261 7365  epresents a base
+00015bf0: 2045 7863 6570 7469 6f6e 2074 6872 6f77   Exception throw
+00015c00: 6e20 7768 656e 2061 2063 616c 6c20 746f  n when a call to
+00015c10: 2074 6865 2054 656c 6567 7261 6d20 4150   the Telegram AP
+00015c20: 4920 6661 696c 732e 0a20 2020 2049 6e20  I fails..    In 
+00015c30: 6164 6469 7469 6f6e 2074 6f20 616e 2069  addition to an i
+00015c40: 6e66 6f72 6d61 7469 7665 206d 6573 7361  nformative messa
+00015c50: 6765 2c20 6974 2068 6173 2061 2060 6675  ge, it has a `fu
+00015c60: 6e63 7469 6f6e 5f6e 616d 6560 2061 6e64  nction_name` and
+00015c70: 2061 2060 7265 7375 6c74 6020 6174 7472   a `result` attr
+00015c80: 6962 7574 652c 2077 6869 6368 2072 6573  ibute, which res
+00015c90: 7065 6374 6976 656c 790a 2020 2020 636f  pectively.    co
+00015ca0: 6e74 6169 6e20 7468 6520 6e61 6d65 206f  ntain the name o
+00015cb0: 6620 7468 6520 6661 696c 6564 2066 756e  f the failed fun
+00015cc0: 6374 696f 6e20 616e 6420 7468 6520 7265  ction and the re
+00015cd0: 7475 726e 6564 2072 6573 756c 7420 7468  turned result th
+00015ce0: 6174 206d 6164 6520 7468 6520 6675 6e63  at made the func
+00015cf0: 7469 6f6e 2074 6f20 6265 2063 6f6e 7369  tion to be consi
+00015d00: 6465 7265 6420 2061 730a 2020 2020 6661  dered  as.    fa
+00015d10: 696c 6564 2e0a 2020 2020 2222 220a 0a20  iled..    """.. 
+00015d20: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00015d30: 7365 6c66 2c20 6d73 672c 2066 756e 6374  self, msg, funct
+00015d40: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+00015d50: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
+00015d60: 2841 7069 4578 6365 7074 696f 6e2c 2073  (ApiException, s
+00015d70: 656c 6629 2e5f 5f69 6e69 745f 5f28 0a20  elf).__init__(. 
+00015d80: 2020 2020 2020 2020 2020 2022 4120 7265             "A re
+00015d90: 7175 6573 7420 746f 2074 6865 2054 656c  quest to the Tel
+00015da0: 6567 7261 6d20 4150 4920 7761 7320 756e  egram API was un
+00015db0: 7375 6363 6573 7366 756c 2e20 7b30 7d22  successful. {0}"
+00015dc0: 2e66 6f72 6d61 7428 6d73 6729 0a20 2020  .format(msg).   
+00015dd0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+00015de0: 656c 662e 6675 6e63 7469 6f6e 5f6e 616d  elf.function_nam
+00015df0: 6520 3d20 6675 6e63 7469 6f6e 5f6e 616d  e = function_nam
+00015e00: 650a 2020 2020 2020 2020 7365 6c66 2e72  e.        self.r
+00015e10: 6573 756c 7420 3d20 7265 7375 6c74 0a0a  esult = result..
+00015e20: 0a63 6c61 7373 2041 7069 4854 5450 4578  .class ApiHTTPEx
+00015e30: 6365 7074 696f 6e28 4170 6945 7863 6570  ception(ApiExcep
+00015e40: 7469 6f6e 293a 0a20 2020 2022 2222 0a20  tion):.    """. 
+00015e50: 2020 2054 6869 7320 636c 6173 7320 7265     This class re
+00015e60: 7072 6573 656e 7473 2061 6e20 4578 6365  presents an Exce
+00015e70: 7074 696f 6e20 7468 726f 776e 2077 6865  ption thrown whe
+00015e80: 6e20 6120 6361 6c6c 2074 6f20 7468 650a  n a call to the.
+00015e90: 2020 2020 5465 6c65 6772 616d 2041 5049      Telegram API
+00015ea0: 2073 6572 7665 7220 7265 7475 726e 7320   server returns 
+00015eb0: 4854 5450 2063 6f64 6520 7468 6174 2069  HTTP code that i
+00015ec0: 7320 6e6f 7420 3230 302e 0a20 2020 2022  s not 200..    "
+00015ed0: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00015ee0: 6974 5f5f 2873 656c 662c 2066 756e 6374  it__(self, funct
+00015ef0: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+00015f00: 3a20 6169 6f68 7474 702e 436c 6965 6e74  : aiohttp.Client
+00015f10: 5265 7370 6f6e 7365 293a 0a20 2020 2020  Response):.     
+00015f20: 2020 2073 7570 6572 2841 7069 4854 5450     super(ApiHTTP
+00015f30: 4578 6365 7074 696f 6e2c 2073 656c 6629  Exception, self)
+00015f40: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
+00015f50: 2020 2020 2020 2022 5468 6520 7365 7276         "The serv
+00015f60: 6572 2072 6574 7572 6e65 6420 4854 5450  er returned HTTP
+00015f70: 207b 307d 207b 317d 2e20 5265 7370 6f6e   {0} {1}. Respon
+00015f80: 7365 2062 6f64 793a 5c6e 5b7b 327d 5d22  se body:\n[{2}]"
+00015f90: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
+00015fa0: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00015fb0: 7374 6174 7573 2c20 7265 7375 6c74 2e72  status, result.r
+00015fc0: 6561 736f 6e2c 2072 6573 756c 742e 7265  eason, result.re
+00015fd0: 7175 6573 745f 696e 666f 0a20 2020 2020  quest_info.     
+00015fe0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+00015ff0: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+00016000: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+00016010: 2072 6573 756c 742c 0a20 2020 2020 2020   result,.       
+00016020: 2029 0a0a 0a63 6c61 7373 2041 7069 496e   )...class ApiIn
+00016030: 7661 6c69 644a 534f 4e45 7863 6570 7469  validJSONExcepti
+00016040: 6f6e 2841 7069 4578 6365 7074 696f 6e29  on(ApiException)
+00016050: 3a0a 2020 2020 2222 220a 2020 2020 5468  :.    """.    Th
+00016060: 6973 2063 6c61 7373 2072 6570 7265 7365  is class represe
+00016070: 6e74 7320 616e 2045 7863 6570 7469 6f6e  nts an Exception
+00016080: 2074 6872 6f77 6e20 7768 656e 2061 2063   thrown when a c
+00016090: 616c 6c20 746f 2074 6865 0a20 2020 2054  all to the.    T
+000160a0: 656c 6567 7261 6d20 4150 4920 7365 7276  elegram API serv
+000160b0: 6572 2072 6574 7572 6e73 2069 6e76 616c  er returns inval
+000160c0: 6964 206a 736f 6e2e 0a20 2020 2022 2222  id json..    """
+000160d0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+000160e0: 5f5f 2873 656c 662c 2066 756e 6374 696f  __(self, functio
+000160f0: 6e5f 6e61 6d65 2c20 7265 7375 6c74 293a  n_name, result):
+00016100: 0a20 2020 2020 2020 2073 7570 6572 2841  .        super(A
+00016110: 7069 496e 7661 6c69 644a 534f 4e45 7863  piInvalidJSONExc
+00016120: 6570 7469 6f6e 2c20 7365 6c66 292e 5f5f  eption, self).__
+00016130: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+00016140: 2020 2020 2254 6865 2073 6572 7665 7220      "The server 
+00016150: 7265 7475 726e 6564 2061 6e20 696e 7661  returned an inva
+00016160: 6c69 6420 4a53 4f4e 2072 6573 706f 6e73  lid JSON respons
+00016170: 652e 2052 6573 706f 6e73 6520 626f 6479  e. Response body
+00016180: 3a5c 6e5b 7b30 7d5d 222e 666f 726d 6174  :\n[{0}]".format
+00016190: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000161a0: 2020 7265 7375 6c74 0a20 2020 2020 2020    result.       
+000161b0: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+000161c0: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+000161d0: 652c 0a20 2020 2020 2020 2020 2020 2072  e,.            r
+000161e0: 6573 756c 742c 0a20 2020 2020 2020 2029  esult,.        )
+000161f0: 0a0a 0a63 6c61 7373 2041 7069 5465 6c65  ...class ApiTele
+00016200: 6772 616d 4578 6365 7074 696f 6e28 4170  gramException(Ap
+00016210: 6945 7863 6570 7469 6f6e 293a 0a20 2020  iException):.   
+00016220: 2022 2222 0a20 2020 2054 6869 7320 636c   """.    This cl
+00016230: 6173 7320 7265 7072 6573 656e 7473 2061  ass represents a
+00016240: 6e20 4578 6365 7074 696f 6e20 7468 726f  n Exception thro
+00016250: 776e 2077 6865 6e20 6120 5465 6c65 6772  wn when a Telegr
+00016260: 616d 2041 5049 2072 6574 7572 6e73 2065  am API returns e
+00016270: 7272 6f72 2063 6f64 652e 0a20 2020 2022  rror code..    "
+00016280: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00016290: 6974 5f5f 2873 656c 662c 2066 756e 6374  it__(self, funct
+000162a0: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+000162b0: 2c20 7265 7375 6c74 5f6a 736f 6e29 3a0a  , result_json):.
+000162c0: 2020 2020 2020 2020 7375 7065 7228 4170          super(Ap
+000162d0: 6954 656c 6567 7261 6d45 7863 6570 7469  iTelegramExcepti
+000162e0: 6f6e 2c20 7365 6c66 292e 5f5f 696e 6974  on, self).__init
+000162f0: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
+00016300: 2245 7272 6f72 2063 6f64 653a 207b 307d  "Error code: {0}
+00016310: 2e20 4465 7363 7269 7074 696f 6e3a 207b  . Description: {
+00016320: 317d 222e 666f 726d 6174 280a 2020 2020  1}".format(.    
+00016330: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00016340: 6c74 5f6a 736f 6e5b 2265 7272 6f72 5f63  lt_json["error_c
+00016350: 6f64 6522 5d2c 2072 6573 756c 745f 6a73  ode"], result_js
+00016360: 6f6e 5b22 6465 7363 7269 7074 696f 6e22  on["description"
+00016370: 5d0a 2020 2020 2020 2020 2020 2020 292c  ].            ),
+00016380: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
+00016390: 6374 696f 6e5f 6e61 6d65 2c0a 2020 2020  ction_name,.    
+000163a0: 2020 2020 2020 2020 7265 7375 6c74 2c0a          result,.
+000163b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000163c0: 2020 7365 6c66 2e72 6573 756c 745f 6a73    self.result_js
+000163d0: 6f6e 203d 2072 6573 756c 745f 6a73 6f6e  on = result_json
+000163e0: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
+000163f0: 726f 725f 636f 6465 203d 2072 6573 756c  ror_code = resul
+00016400: 745f 6a73 6f6e 5b22 6572 726f 725f 636f  t_json["error_co
+00016410: 6465 225d 0a20 2020 2020 2020 2073 656c  de"].        sel
+00016420: 662e 6465 7363 7269 7074 696f 6e20 3d20  f.description = 
+00016430: 7265 7375 6c74 5f6a 736f 6e5b 2264 6573  result_json["des
+00016440: 6372 6970 7469 6f6e 225d 0a0a 0a63 6c61  cription"]...cla
+00016450: 7373 2052 6571 7565 7374 5469 6d65 6f75  ss RequestTimeou
+00016460: 7428 4578 6365 7074 696f 6e29 3a0a 2020  t(Exception):.  
+00016470: 2020 2222 220a 2020 2020 5468 6973 2063    """.    This c
+00016480: 6c61 7373 2072 6570 7265 7365 6e74 7320  lass represents 
+00016490: 6120 7265 7175 6573 7420 7469 6d65 6f75  a request timeou
+000164a0: 742e 0a20 2020 2022 2222 0a0a 2020 2020  t..    """..    
+000164b0: 7061 7373 0a                             pass.
```

### Comparing `telegram_bale_bot-4.17.3/telebot/callback_data.py` & `telegram_bale_bot-4.18.3/telebot/callback_data.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/custom_filters.py` & `telegram_bale_bot-4.18.3/telebot/custom_filters.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/formatting.py` & `telegram_bale_bot-4.18.3/telebot/formatting.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/handler_backends.py` & `telegram_bale_bot-4.18.3/telebot/handler_backends.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/service_utils.py` & `telegram_bale_bot-4.18.3/telebot/service_utils.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/types.py` & `telegram_bale_bot-4.18.3/telebot/types.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,14 +5,15 @@
 import os
 from abc import ABC
 from io import IOBase
 from pathlib import Path
 from typing import Dict, List, Optional, Union
 
 try:
+    # noinspection PyPackageRequirements
     import ujson as json
 except ImportError:
     import json
 
 from telebot import service_utils
 from telebot.formatting import apply_html_entities
 
@@ -186,15 +187,15 @@
     :param business_message: Optional. New non-service message from a connected business account
     :type business_message: :class:`telebot.types.Message`
 
     :param edited_business_message: Optional. New version of a non-service message from a connected business account that is known to the bot and was edited
     :type edited_business_message: :class:`telebot.types.Message`
 
     :param deleted_business_messages: Optional. Service message: the chat connected to the business account was deleted
-    :type deleted_business_messages: :class:`telebot.types.Message`
+    :type deleted_business_messages: :class:`telebot.types.BusinessMessagesDeleted`
 
     :return: Instance of the class
     :rtype: :class:`telebot.types.Update`
 
     """
 
     @classmethod
@@ -228,67 +229,25 @@
         business_connection = BusinessConnection.de_json(obj.get("business_connection"))
         business_message = Message.de_json(obj.get("business_message"))
         edited_business_message = Message.de_json(obj.get("edited_business_message"))
         deleted_business_messages = BusinessMessagesDeleted.de_json(
             obj.get("deleted_business_messages")
         )
 
-        return cls(
-            update_id,
-            message,
-            edited_message,
-            channel_post,
-            edited_channel_post,
-            inline_query,
-            chosen_inline_result,
-            callback_query,
-            shipping_query,
-            pre_checkout_query,
-            poll,
-            poll_answer,
-            my_chat_member,
-            chat_member,
-            chat_join_request,
-            message_reaction,
-            message_reaction_count,
-            removed_chat_boost,
-            chat_boost,
-            business_connection,
-            business_message,
-            edited_business_message,
-            deleted_business_messages,
-        )
-
-    def __init__(
-        self,
-        update_id,
-        message,
-        edited_message,
-        channel_post,
-        edited_channel_post,
-        inline_query,
-        chosen_inline_result,
-        callback_query,
-        shipping_query,
-        pre_checkout_query,
-        poll,
-        poll_answer,
-        my_chat_member,
-        chat_member,
-        chat_join_request,
-        message_reaction,
-        message_reaction_count,
-        removed_chat_boost,
-        chat_boost,
-        business_connection,
-        business_message,
-        edited_business_message,
-        deleted_business_messages,
-        **kwargs,
-    ):
+        return cls(update_id, message, edited_message, channel_post, edited_channel_post, inline_query,
+                   chosen_inline_result, callback_query, shipping_query, pre_checkout_query, poll, poll_answer,
+                   my_chat_member, chat_member, chat_join_request, message_reaction, message_reaction_count,
+                   removed_chat_boost, chat_boost, business_connection, business_message, edited_business_message,
+                   deleted_business_messages)
+
+    def __init__(self, update_id, message, edited_message, channel_post, edited_channel_post, inline_query,
+                 chosen_inline_result, callback_query, shipping_query, pre_checkout_query, poll, poll_answer,
+                 my_chat_member, chat_member, chat_join_request, message_reaction, message_reaction_count,
+                 removed_chat_boost, chat_boost, business_connection, business_message, edited_business_message,
+                 deleted_business_messages, **kwargs):
         self.update_id = update_id
         self.message = message
         self.edited_message = edited_message
         self.channel_post = channel_post
         self.edited_channel_post = edited_channel_post
         self.inline_query = inline_query
         self.chosen_inline_result = chosen_inline_result
@@ -331,14 +290,17 @@
     :param new_chat_member: New information about the chat member
     :type new_chat_member: :class:`telebot.types.ChatMember`
 
     :param invite_link: Optional. Chat invite link, which was used by the user to join the chat; for joining by invite
         link events only.
     :type invite_link: :class:`telebot.types.ChatInviteLink`
 
+    :param via_join_request: Optional. True, if the user joined the chat after sending a direct join request without using an invite link and being approved by an administrator
+    :type via_join_request: :obj:`bool`
+
     :param via_chat_folder_invite_link: Optional. True, if the user joined the chat via a chat folder invite link
     :type via_chat_folder_invite_link: :obj:`bool`
 
     :return: Instance of the class
     :rtype: :class:`telebot.types.ChatMemberUpdated`
     """
 
@@ -349,32 +311,25 @@
         obj = cls.check_json(json_string)
         obj["chat"] = Chat.de_json(obj["chat"])
         obj["from_user"] = User.de_json(obj.pop("from"))
         obj["old_chat_member"] = ChatMember.de_json(obj["old_chat_member"])
         obj["new_chat_member"] = ChatMember.de_json(obj["new_chat_member"])
         obj["invite_link"] = ChatInviteLink.de_json(obj.get("invite_link"))
         return cls(**obj)
-
-    def __init__(
-        self,
-        chat,
-        from_user,
-        date,
-        old_chat_member,
-        new_chat_member,
-        invite_link=None,
-        via_chat_folder_invite_link=None,
-        **kwargs,
-    ):
+    
+    def __init__(self, chat, from_user, date, old_chat_member, new_chat_member, invite_link=None,
+                 via_join_request=None, via_chat_folder_invite_link=None,
+                 **kwargs):
         self.chat: Chat = chat
         self.from_user: User = from_user
         self.date: int = date
         self.old_chat_member: ChatMember = old_chat_member
         self.new_chat_member: ChatMember = new_chat_member
         self.invite_link: Optional[ChatInviteLink] = invite_link
+        self.via_join_request: Optional[bool] = via_join_request
         self.via_chat_folder_invite_link: Optional[bool] = via_chat_folder_invite_link
 
     @property
     def difference(self) -> Dict[str, List]:
         """
         Get the difference between `old_chat_member` and `new_chat_member`
         as a dict in the following format {'parameter': [old_value, new_value]}
@@ -573,30 +528,18 @@
     @classmethod
     def de_json(cls, json_string):
         if json_string is None:
             return None
         obj = cls.check_json(json_string, dict_copy=False)
         return cls(**obj)
 
-    def __init__(
-        self,
-        id,
-        is_bot,
-        first_name,
-        last_name=None,
-        username=None,
-        language_code=None,
-        can_join_groups=None,
-        can_read_all_group_messages=None,
-        supports_inline_queries=None,
-        is_premium=None,
-        added_to_attachment_menu=None,
-        can_connect_to_business=None,
-        **kwargs,
-    ):
+    # noinspection PyShadowingBuiltins
+    def __init__(self, id, is_bot, first_name, last_name=None, username=None, language_code=None,
+                 can_join_groups=None, can_read_all_group_messages=None, supports_inline_queries=None, 
+                 is_premium=None, added_to_attachment_menu=None, can_connect_to_business=None, **kwargs):
         self.id: int = id
         self.is_bot: bool = is_bot
         self.first_name: str = first_name
         self.username: str = username
         self.last_name: str = last_name
         self.language_code: str = language_code
         self.can_join_groups: bool = can_join_groups
@@ -616,30 +559,29 @@
             full_name += " {0}".format(self.last_name)
         return full_name
 
     def to_json(self):
         return json.dumps(self.to_dict())
 
     def to_dict(self):
-        return {
-            "id": self.id,
-            "is_bot": self.is_bot,
-            "first_name": self.first_name,
-            "last_name": self.last_name,
-            "username": self.username,
-            "language_code": self.language_code,
-            "can_join_groups": self.can_join_groups,
-            "can_read_all_group_messages": self.can_read_all_group_messages,
-            "supports_inline_queries": self.supports_inline_queries,
-            "is_premium": self.is_premium,
-            "added_to_attachment_menu": self.added_to_attachment_menu,
-            "can_connect_to_business": self.can_connect_to_business,
-        }
+        return {'id': self.id,
+                'is_bot': self.is_bot,
+                'first_name': self.first_name,
+                'last_name': self.last_name,
+                'username': self.username,
+                'language_code': self.language_code,
+                'can_join_groups': self.can_join_groups,
+                'can_read_all_group_messages': self.can_read_all_group_messages,
+                'supports_inline_queries': self.supports_inline_queries,
+                'is_premium': self.is_premium,
+                'added_to_attachment_menu': self.added_to_attachment_menu,
+                'can_connect_to_business': self.can_connect_to_business}
 
 
+# noinspection PyShadowingBuiltins
 class GroupChat(JsonDeserializable):
     """
     :meta private:
     """
 
     @classmethod
     def de_json(cls, json_string):
@@ -649,15 +591,16 @@
         return cls(**obj)
 
     def __init__(self, id, title, **kwargs):
         self.id: int = id
         self.title: str = title
 
 
-class Chat(JsonDeserializable):
+# noinspection PyShadowingBuiltins
+class ChatFullInfo(JsonDeserializable):
     """
     This object represents a chat.
 
     Telegram Documentation: https://core.telegram.org/bots/api#chat
 
     :param id: Unique identifier for this chat. This number may have more than 32 significant bits and some programming
         languages may have difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed
@@ -678,19 +621,21 @@
 
     :param last_name: Optional. Last name of the other party in a private chat
     :type last_name: :obj:`str`
 
     :param is_forum: Optional. True, if the supergroup chat is a forum (has topics enabled)
     :type is_forum: :obj:`bool`
 
+    :param max_reaction_count: Optional. The maximum number of reactions that can be set on a message in the chat
+    :type max_reaction_count: :obj:`int`
+
     :param photo: Optional. Chat photo. Returned only in getChat.
     :type photo: :class:`telebot.types.ChatPhoto`
 
-    :param active_usernames: Optional. If non-empty, the list of all active chat usernames; for private chats, supergroups and channels.
-        Returned only in getChat.
+    :param active_usernames: Optional. If non-empty, the list of all active chat usernames; for private chats, supergroups and channels. Returned only in getChat.
     :type active_usernames: :obj:`list` of :obj:`str`
 
     :param birthdate: Optional. Birthdate of the other party in a private chat. Returned only in getChat.
     :type birthdate: :obj:`str`
 
     :param business_intro: Optional. Business intro for the chat. Returned only in getChat.
     :type business_intro: :class:`telebot.types.BusinessIntro`
@@ -700,126 +645,105 @@
 
     :param business_opening_hours : Optional. Business opening hours for the chat. Returned only in getChat.
     :type business_opening_hours: :class:`telebot.types.BusinessHours`
 
     :param personal_chat: Optional. For private chats, the personal channel of the user. Returned only in getChat.
     :type personal_chat: :class:`telebot.types.Chat`
 
-    :param available_reactions: Optional. List of available chat reactions; for private chats, supergroups and channels.
-        Returned only in getChat.
+    :param available_reactions: Optional. List of available chat reactions; for private chats, supergroups and channels. Returned only in getChat.
     :type available_reactions: :obj:`list` of :class:`telebot.types.ReactionType`
 
     :param accent_color_id: Optional. Optional. Identifier of the accent color for the chat name and backgrounds of the chat photo,
         reply header, and link preview. See accent colors for more details. Returned only in getChat. Always returned in getChat.
     :type accent_color_id: :obj:`int`
 
-    :param background_custom_emoji_id: Optional. Custom emoji identifier of emoji chosen by the chat for the reply header
-        and link preview background. Returned only in getChat.
+    :param background_custom_emoji_id: Optional. Custom emoji identifier of emoji chosen by the chat for the reply header and link preview background. Returned only in getChat.
     :type background_custom_emoji_id: :obj:`str`
 
-    :param profile_accent_color_id: Optional. Identifier of the accent color for the chat's profile background.
-        See profile accent colors for more details. Returned only in getChat.
+    :param profile_accent_color_id: Optional. Identifier of the accent color for the chat's profile background. See profile accent colors for more details. Returned only in getChat.
     :type profile_accent_color_id: :obj:`int`
 
-    :param profile_background_custom_emoji_id: Optional. Custom emoji identifier of the emoji chosen by the chat for its profile background.
-        Returned only in getChat.
+    :param profile_background_custom_emoji_id: Optional. Custom emoji identifier of the emoji chosen by the chat for its profile background. Returned only in getChat.
     :type profile_background_custom_emoji_id: :obj:`str`
 
-    :param emoji_status_custom_emoji_id: Optional. Custom emoji identifier of emoji status of the other party in a private chat.
-        Returned only in getChat.
+    :param emoji_status_custom_emoji_id: Optional. Custom emoji identifier of emoji status of the other party in a private chat. Returned only in getChat.
     :type emoji_status_custom_emoji_id: :obj:`str`
 
-    :param emoji_status_expiration_date: Optional. Expiration date of the emoji status of the other party in a private chat,
-        if any. Returned only in getChat.
+    :param emoji_status_expiration_date: Optional. Expiration date of the emoji status of the other party in a private chat, if any. Returned only in getChat.
     :type emoji_status_expiration_date: :obj:`int`
 
     :param bio: Optional. Bio of the other party in a private chat. Returned only in getChat.
     :type bio: :obj:`str`
 
-    :param has_private_forwards: Optional. :obj:`bool`, if privacy settings of the other party in the private chat
-        allows to use tg://user?id=<user_id> links only in chats with the user. Returned only in getChat.
+    :param has_private_forwards: Optional. :obj:`bool`, if privacy settings of the other party in the private chat allows to use tg://user?id=<user_id> links only in chats with the user. Returned only in getChat.
     :type has_private_forwards: :obj:`bool`
 
-    :param has_restricted_voice_and_video_messages: Optional. True, if the privacy settings of the other party restrict sending voice and video note messages
-        in the private chat. Returned only in getChat.
+    :param has_restricted_voice_and_video_messages: Optional. True, if the privacy settings of the other party restrict sending voice and video note messages in the private chat. Returned only in getChat.
     :type :obj:`bool`
 
-    :param join_to_send_messages: Optional. :obj:`bool`, if users need to join the supergroup before they can send
-        messages. Returned only in getChat.
+    :param join_to_send_messages: Optional. :obj:`bool`, if users need to join the supergroup before they can send messages. Returned only in getChat.
     :type join_to_send_messages: :obj:`bool`
 
-    :param join_by_request: Optional. :obj:`bool`, if all users directly joining the supergroup need to be approved
-        by supergroup administrators. Returned only in getChat.
+    :param join_by_request: Optional. :obj:`bool`, if all users directly joining the supergroup need to be approved by supergroup administrators. Returned only in getChat.
     :type join_by_request: :obj:`bool`
 
     :param description: Optional. Description, for groups, supergroups and channel chats. Returned only in getChat.
     :type description: :obj:`str`
 
-    :param invite_link: Optional. Primary invite link, for groups, supergroups and channel chats. Returned only in
-        getChat.
+    :param invite_link: Optional. Primary invite link, for groups, supergroups and channel chats. Returned only in getChat.
     :type invite_link: :obj:`str`
 
     :param pinned_message: Optional. The most recent pinned message (by sending date). Returned only in getChat.
     :type pinned_message: :class:`telebot.types.Message`
 
-    :param permissions: Optional. Default chat member permissions, for groups and supergroups. Returned only in
-        getChat.
+    :param permissions: Optional. Default chat member permissions, for groups and supergroups. Returned only in getChat.
     :type permissions: :class:`telebot.types.ChatPermissions`
 
-    :param slow_mode_delay: Optional. For supergroups, the minimum allowed delay between consecutive messages sent
-        by each unpriviledged user; in seconds. Returned only in getChat.
+    :param slow_mode_delay: Optional. For supergroups, the minimum allowed delay between consecutive messages sent by each unpriviledged user; in seconds. Returned only in getChat.
     :type slow_mode_delay: :obj:`int`
 
-    :param unrestrict_boost_count: Optional. For supergroups, the minimum number of boosts that a non-administrator
-        user needs to add in order to ignore slow mode and chat permissions. Returned only in getChat.
+    :param unrestrict_boost_count: Optional. For supergroups, the minimum number of boosts that a non-administrator user needs to add in order to ignore slow mode and chat permissions. Returned only in getChat.
     :type unrestrict_boost_count: :obj:`int`
 
-    :param message_auto_delete_time: Optional. The time after which all messages sent to the chat will be
-        automatically deleted; in seconds. Returned only in getChat.
+    :param message_auto_delete_time: Optional. The time after which all messages sent to the chat will be automatically deleted; in seconds. Returned only in getChat.
     :type message_auto_delete_time: :obj:`int`
 
-    :param has_aggressive_anti_spam_enabled: Optional. :obj:`bool`, if the chat has enabled aggressive anti-spam
-        protection. Returned only in getChat.
+    :param has_aggressive_anti_spam_enabled: Optional. :obj:`bool`, if the chat has enabled aggressive anti-spam protection. Returned only in getChat.
     :type has_aggressive_anti_spam_enabled: :obj:`bool`
 
-    :param has_hidden_members: Optional. :obj:`bool`, if the chat has enabled hidden members. Returned only in
-        getChat.
+    :param has_hidden_members: Optional. :obj:`bool`, if the chat has enabled hidden members. Returned only in getChat.
     :type has_hidden_members: :obj:`bool`
 
-    :param has_protected_content: Optional. :obj:`bool`, if messages from the chat can't be forwarded to other
-        chats. Returned only in getChat.
+    :param has_protected_content: Optional. :obj:`bool`, if messages from the chat can't be forwarded to other chats. Returned only in getChat.
     :type has_protected_content: :obj:`bool`
 
-    :param has_visible_history: Optional. True, if new chat members will have access to old messages;
-        available only to chat administrators. Returned only in getChat.
+    :param has_visible_history: Optional. True, if new chat members will have access to old messages; available only to chat administrators. Returned only in getChat.
     :type has_visible_history: :obj:`bool`
 
     :param sticker_set_name: Optional. For supergroups, name of group sticker set. Returned only in getChat.
     :type sticker_set_name: :obj:`str`
 
-    :param can_set_sticker_set: Optional. :obj:`bool`, if the bot can change the group sticker set. Returned only in
-        getChat.
+    :param can_set_sticker_set: Optional. :obj:`bool`, if the bot can change the group sticker set. Returned only in getChat.
     :type can_set_sticker_set: :obj:`bool`
 
     :param custom_emoji_sticker_set_name: Optional. For supergroups, the name of the group's custom emoji sticker set.
         Custom emoji from this set can be used by all users and bots in the group. Returned only in getChat.
     :param custom_emoji_sticker_set_name: :obj:`str`
 
     :param linked_chat_id: Optional. Unique identifier for the linked chat, i.e. the discussion group identifier for
         a channel and vice versa; for supergroups and channel chats. This identifier may be greater than 32 bits and some
         programming languages may have difficulty/silent defects in interpreting it. But it is smaller than 52 bits, so a
         signed 64 bit integer or double-precision float type are safe for storing this identifier. Returned only in getChat.
     :type linked_chat_id: :obj:`int`
 
-    :param location: Optional. For supergroups, the location to which the supergroup is connected. Returned only in
-        getChat.
+    :param location: Optional. For supergroups, the location to which the supergroup is connected. Returned only in getChat.
     :type location: :class:`telebot.types.ChatLocation`
 
     :return: Instance of the class
-    :rtype: :class:`telebot.types.Chat`
+    :rtype: :class:`telebot.types.ChatFullInfo`
     """
 
     @classmethod
     def de_json(cls, json_string):
         if json_string is None:
             return None
         obj = cls.check_json(json_string)
@@ -847,67 +771,35 @@
             )
         if "personal_chat" in obj:
             obj["personal_chat"] = Chat.de_json(obj["personal_chat"])
         if "birthdate" in obj:
             obj["birthdate"] = Birthdate.de_json(obj["birthdate"])
         return cls(**obj)
 
-    def __init__(
-        self,
-        id,
-        type,
-        title=None,
-        username=None,
-        first_name=None,
-        last_name=None,
-        photo=None,
-        bio=None,
-        has_private_forwards=None,
-        description=None,
-        invite_link=None,
-        pinned_message=None,
-        permissions=None,
-        slow_mode_delay=None,
-        message_auto_delete_time=None,
-        has_protected_content=None,
-        sticker_set_name=None,
-        can_set_sticker_set=None,
-        linked_chat_id=None,
-        location=None,
-        join_to_send_messages=None,
-        join_by_request=None,
-        has_restricted_voice_and_video_messages=None,
-        is_forum=None,
-        active_usernames=None,
-        emoji_status_custom_emoji_id=None,
-        has_hidden_members=None,
-        has_aggressive_anti_spam_enabled=None,
-        emoji_status_expiration_date=None,
-        available_reactions=None,
-        accent_color_id=None,
-        background_custom_emoji_id=None,
-        profile_accent_color_id=None,
-        profile_background_custom_emoji_id=None,
-        has_visible_history=None,
-        unrestrict_boost_count=None,
-        custom_emoji_sticker_set_name=None,
-        business_intro=None,
-        business_location=None,
-        business_opening_hours=None,
-        personal_chat=None,
-        birthdate=None,
-        **kwargs,
-    ):
+    def __init__(self, id, type, title=None, username=None, first_name=None,
+                 last_name=None, photo=None, bio=None, has_private_forwards=None,
+                 description=None, invite_link=None, pinned_message=None, 
+                 permissions=None, slow_mode_delay=None,
+                 message_auto_delete_time=None, has_protected_content=None, sticker_set_name=None,
+                 can_set_sticker_set=None, linked_chat_id=None, location=None, 
+                 join_to_send_messages=None, join_by_request=None, has_restricted_voice_and_video_messages=None, 
+                 is_forum=None, max_reaction_count=None, active_usernames=None, emoji_status_custom_emoji_id=None,
+                 has_hidden_members=None, has_aggressive_anti_spam_enabled=None, emoji_status_expiration_date=None, 
+                 available_reactions=None, accent_color_id=None, background_custom_emoji_id=None, profile_accent_color_id=None,
+                 profile_background_custom_emoji_id=None, has_visible_history=None, 
+                 unrestrict_boost_count=None, custom_emoji_sticker_set_name=None, business_intro=None, business_location=None,
+                    business_opening_hours=None, personal_chat=None, birthdate=None, **kwargs):
         self.id: int = id
         self.type: str = type
         self.title: str = title
         self.username: str = username
         self.first_name: str = first_name
         self.last_name: str = last_name
         self.is_forum: bool = is_forum
+        self.max_reaction_count: int = max_reaction_count
         self.photo: ChatPhoto = photo
         self.bio: str = bio
         self.join_to_send_messages: bool = join_to_send_messages
         self.join_by_request: bool = join_by_request
         self.has_private_forwards: bool = has_private_forwards
         self.has_restricted_voice_and_video_messages: bool = (
             has_restricted_voice_and_video_messages
@@ -941,14 +833,26 @@
         self.business_intro: BusinessIntro = business_intro
         self.business_location: BusinessLocation = business_location
         self.business_opening_hours: BusinessOpeningHours = business_opening_hours
         self.personal_chat: Chat = personal_chat
         self.birthdate: Birthdate = birthdate
 
 
+class Chat(ChatFullInfo):
+    """
+    In BotAPI 7.3 Chat was reduced and full info moved to ChatFullInfo:
+    "Split out the class ChatFullInfo from the class Chat and changed the return type of the method getChat to ChatFullInfo."
+
+    https://core.telegram.org/bots/api#chatfullinfo
+
+    Currently Chat is left as full copy of ChatFullInfo for compatibility.
+    """
+    pass
+
+
 class MessageID(JsonDeserializable):
     """
     This object represents a unique message identifier.
 
     Telegram Documentation: https://core.telegram.org/bots/api#messageid
 
     :param message_id: Unique message identifier
@@ -1228,14 +1132,17 @@
     :param proximity_alert_triggered: Optional. Service message. A user in the chat triggered another user's
         proximity alert while sharing Live Location.
     :type proximity_alert_triggered: :class:`telebot.types.ProximityAlertTriggered`
 
     :param boost_added: Optional. Service message: user boosted the chat
     :type boost_added: :class:`telebot.types.ChatBoostAdded`
 
+    :param chat_background_set: Optional. Service message: chat background set
+    :type chat_background_set: :class:`telebot.types.ChatBackground`
+
     :param forum_topic_created: Optional. Service message: forum topic created
     :type forum_topic_created: :class:`telebot.types.ForumTopicCreated`
 
     :param forum_topic_edited: Optional. Service message: forum topic edited
     :type forum_topic_edited: :class:`telebot.types.ForumTopicEdited`
 
     :param forum_topic_closed: Optional. Service message: forum topic closed
@@ -1273,16 +1180,15 @@
 
     :param video_chat_participants_invited: Optional. Service message: new participants invited to a video chat
     :type video_chat_participants_invited: :class:`telebot.types.VideoChatParticipantsInvited`
 
     :param web_app_data: Optional. Service message: data sent by a Web App
     :type web_app_data: :class:`telebot.types.WebAppData`
 
-    :param reply_markup: Optional. Inline keyboard attached to the message. login_url buttons are represented as
-        ordinary url buttons.
+    :param reply_markup: Optional. Inline keyboard attached to the message. login_url buttons are represented as ordinary url buttons.
     :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
 
     :return: Instance of the class
     :rtype: :class:`telebot.types.Message`
     """
 
     @classmethod
@@ -1400,153 +1306,125 @@
             content_type = "migrate_from_chat_id"
         if "pinned_message" in obj:
             pinned_message = obj["pinned_message"]
             if pinned_message["date"] == 0:
                 # date.	Always 0. The field can be used to differentiate regular and inaccessible messages.
                 opts["pinned_message"] = InaccessibleMessage.de_json(pinned_message)
             else:
-                opts["pinned_message"] = Message.de_json(pinned_message)
-            content_type = "pinned_message"
-        if "invoice" in obj:
-            opts["invoice"] = Invoice.de_json(obj["invoice"])
-            content_type = "invoice"
-        if "successful_payment" in obj:
-            opts["successful_payment"] = SuccessfulPayment.de_json(
-                obj["successful_payment"]
-            )
-            content_type = "successful_payment"
-        if "connected_website" in obj:
-            opts["connected_website"] = obj["connected_website"]
-            content_type = "connected_website"
-        if "poll" in obj:
-            opts["poll"] = Poll.de_json(obj["poll"])
-            content_type = "poll"
-        if "passport_data" in obj:
-            opts["passport_data"] = obj["passport_data"]
-            content_type = "passport_data"
-        if "proximity_alert_triggered" in obj:
-            opts["proximity_alert_triggered"] = ProximityAlertTriggered.de_json(
-                obj["proximity_alert_triggered"]
-            )
-            content_type = "proximity_alert_triggered"
-        if "video_chat_scheduled" in obj:
-            opts["video_chat_scheduled"] = VideoChatScheduled.de_json(
-                obj["video_chat_scheduled"]
-            )
-            content_type = "video_chat_scheduled"
-        if "video_chat_started" in obj:
-            opts["video_chat_started"] = VideoChatStarted.de_json(
-                obj["video_chat_started"]
-            )
-            content_type = "video_chat_started"
-        if "video_chat_ended" in obj:
-            opts["video_chat_ended"] = VideoChatEnded.de_json(obj["video_chat_ended"])
-            content_type = "video_chat_ended"
-        if "video_chat_participants_invited" in obj:
-            opts["video_chat_participants_invited"] = (
-                VideoChatParticipantsInvited.de_json(
-                    obj["video_chat_participants_invited"]
-                )
-            )
-            content_type = "video_chat_participants_invited"
-        if "web_app_data" in obj:
-            opts["web_app_data"] = WebAppData.de_json(obj["web_app_data"])
-            content_type = "web_app_data"
-        if "message_auto_delete_timer_changed" in obj:
-            opts["message_auto_delete_timer_changed"] = (
-                MessageAutoDeleteTimerChanged.de_json(
-                    obj["message_auto_delete_timer_changed"]
-                )
-            )
-            content_type = "message_auto_delete_timer_changed"
-        if "reply_markup" in obj:
-            opts["reply_markup"] = InlineKeyboardMarkup.de_json(obj["reply_markup"])
-        if "forum_topic_created" in obj:
-            opts["forum_topic_created"] = ForumTopicCreated.de_json(
-                obj["forum_topic_created"]
-            )
-            content_type = "forum_topic_created"
-        if "forum_topic_closed" in obj:
-            opts["forum_topic_closed"] = ForumTopicClosed.de_json(
-                obj["forum_topic_closed"]
-            )
-            content_type = "forum_topic_closed"
-        if "forum_topic_reopened" in obj:
-            opts["forum_topic_reopened"] = ForumTopicReopened.de_json(
-                obj["forum_topic_reopened"]
-            )
-            content_type = "forum_topic_reopened"
-        if "has_media_spoiler" in obj:
-            opts["has_media_spoiler"] = obj["has_media_spoiler"]
-        if "forum_topic_edited" in obj:
-            opts["forum_topic_edited"] = ForumTopicEdited.de_json(
-                obj["forum_topic_edited"]
-            )
-            content_type = "forum_topic_edited"
-        if "general_forum_topic_hidden" in obj:
-            opts["general_forum_topic_hidden"] = GeneralForumTopicHidden.de_json(
-                obj["general_forum_topic_hidden"]
-            )
-            content_type = "general_forum_topic_hidden"
-        if "general_forum_topic_unhidden" in obj:
-            opts["general_forum_topic_unhidden"] = GeneralForumTopicUnhidden.de_json(
-                obj["general_forum_topic_unhidden"]
-            )
-            content_type = "general_forum_topic_unhidden"
-        if "write_access_allowed" in obj:
-            opts["write_access_allowed"] = WriteAccessAllowed.de_json(
-                obj["write_access_allowed"]
-            )
-            content_type = "write_access_allowed"
-        if "users_shared" in obj:
-            opts["users_shared"] = UsersShared.de_json(obj["users_shared"])
-            content_type = "users_shared"  # COMPATIBILITY BROKEN!
-        if "chat_shared" in obj:
-            opts["chat_shared"] = ChatShared.de_json(obj["chat_shared"])
-            content_type = "chat_shared"
-        if "story" in obj:
-            opts["story"] = Story.de_json(obj["story"])
-            content_type = "story"
-        if "external_reply" in obj:
-            opts["external_reply"] = ExternalReplyInfo.de_json(obj["external_reply"])
-        if "quote" in obj:
-            opts["quote"] = TextQuote.de_json(obj["quote"])
-        if "link_preview_options" in obj:
-            opts["link_preview_options"] = LinkPreviewOptions.de_json(
-                obj["link_preview_options"]
-            )
-        if "giveaway_created" in obj:
-            opts["giveaway_created"] = GiveawayCreated.de_json(obj["giveaway_created"])
-            content_type = "giveaway_created"
-        if "giveaway" in obj:
-            opts["giveaway"] = Giveaway.de_json(obj["giveaway"])
-            content_type = "giveaway"
-        if "giveaway_winners" in obj:
-            opts["giveaway_winners"] = GiveawayWinners.de_json(obj["giveaway_winners"])
-            content_type = "giveaway_winners"
-        if "giveaway_completed" in obj:
-            opts["giveaway_completed"] = GiveawayCompleted.de_json(
-                obj["giveaway_completed"]
-            )
-            content_type = "giveaway_completed"
-        if "forward_origin" in obj:
-            opts["forward_origin"] = MessageOrigin.de_json(obj["forward_origin"])
-        if "boost_added" in obj:
-            opts["boost_added"] = ChatBoostAdded.de_json(obj["boost_added"])
-            content_type = "boost_added"
-        if "sender_boost_count" in obj:
-            opts["sender_boost_count"] = obj["sender_boost_count"]
-        if "reply_to_story" in obj:
-            opts["reply_to_story"] = Story.de_json(obj["reply_to_story"])
-        if "sender_business_bot" in obj:
-            opts["sender_business_bot"] = User.de_json(obj["sender_business_bot"])
-        if "business_connection_id" in obj:
-            opts["business_connection_id"] = obj["business_connection_id"]
-        if "is_from_offline" in obj:
-            opts["is_from_offline"] = obj["is_from_offline"]
+                opts['pinned_message'] = Message.de_json(pinned_message)
+            content_type = 'pinned_message'
+        if 'invoice' in obj:
+            opts['invoice'] = Invoice.de_json(obj['invoice'])
+            content_type = 'invoice'
+        if 'successful_payment' in obj:
+            opts['successful_payment'] = SuccessfulPayment.de_json(obj['successful_payment'])
+            content_type = 'successful_payment'
+        if 'connected_website' in obj:
+            opts['connected_website'] = obj['connected_website']
+            content_type = 'connected_website'
+        if 'poll' in obj:
+            opts['poll'] = Poll.de_json(obj['poll'])
+            content_type = 'poll'
+        if 'passport_data' in obj:
+            opts['passport_data'] = obj['passport_data']
+            content_type = 'passport_data'
+        if 'proximity_alert_triggered' in obj:
+            opts['proximity_alert_triggered'] = ProximityAlertTriggered.de_json(obj[
+                'proximity_alert_triggered'])
+            content_type = 'proximity_alert_triggered'
+        if 'video_chat_scheduled' in obj:
+            opts['video_chat_scheduled'] = VideoChatScheduled.de_json(obj['video_chat_scheduled'])
+            content_type = 'video_chat_scheduled'
+        if 'video_chat_started' in obj:
+            opts['video_chat_started'] = VideoChatStarted.de_json(obj['video_chat_started'])
+            content_type = 'video_chat_started'
+        if 'video_chat_ended' in obj:
+            opts['video_chat_ended'] = VideoChatEnded.de_json(obj['video_chat_ended'])
+            content_type = 'video_chat_ended'
+        if 'video_chat_participants_invited' in obj:
+            opts['video_chat_participants_invited'] = VideoChatParticipantsInvited.de_json(obj['video_chat_participants_invited'])
+            content_type = 'video_chat_participants_invited'
+        if 'web_app_data' in obj:
+            opts['web_app_data'] = WebAppData.de_json(obj['web_app_data'])
+            content_type = 'web_app_data'
+        if 'message_auto_delete_timer_changed' in obj:
+            opts['message_auto_delete_timer_changed'] = MessageAutoDeleteTimerChanged.de_json(obj['message_auto_delete_timer_changed'])
+            content_type = 'message_auto_delete_timer_changed'
+        if 'reply_markup' in obj:
+            opts['reply_markup'] = InlineKeyboardMarkup.de_json(obj['reply_markup'])
+        if 'chat_background_set' in obj:
+            opts['chat_background_set'] = ChatBackground.de_json(obj['chat_background_set'])
+            content_type = 'chat_background_set'
+        if 'forum_topic_created' in obj:
+            opts['forum_topic_created'] = ForumTopicCreated.de_json(obj['forum_topic_created'])
+            content_type = 'forum_topic_created'
+        if 'forum_topic_closed' in obj:
+            opts['forum_topic_closed'] = ForumTopicClosed.de_json(obj['forum_topic_closed'])
+            content_type = 'forum_topic_closed'
+        if 'forum_topic_reopened' in obj:
+            opts['forum_topic_reopened'] = ForumTopicReopened.de_json(obj['forum_topic_reopened'])
+            content_type = 'forum_topic_reopened'
+        if 'has_media_spoiler' in obj:
+            opts['has_media_spoiler'] = obj['has_media_spoiler']
+        if 'forum_topic_edited' in obj:
+            opts['forum_topic_edited'] = ForumTopicEdited.de_json(obj['forum_topic_edited'])
+            content_type = 'forum_topic_edited'
+        if 'general_forum_topic_hidden' in obj:
+            opts['general_forum_topic_hidden'] = GeneralForumTopicHidden.de_json(obj['general_forum_topic_hidden'])
+            content_type = 'general_forum_topic_hidden'
+        if 'general_forum_topic_unhidden' in obj:
+            opts['general_forum_topic_unhidden'] = GeneralForumTopicUnhidden.de_json(obj['general_forum_topic_unhidden'])
+            content_type = 'general_forum_topic_unhidden'
+        if 'write_access_allowed' in obj:
+            opts['write_access_allowed'] = WriteAccessAllowed.de_json(obj['write_access_allowed'])
+            content_type = 'write_access_allowed'
+        if 'users_shared' in obj:
+            opts['users_shared'] = UsersShared.de_json(obj['users_shared'])
+            content_type = 'users_shared' # COMPATIBILITY BROKEN!
+        if 'chat_shared' in obj:
+            opts['chat_shared'] = ChatShared.de_json(obj['chat_shared'])
+            content_type = 'chat_shared'
+        if 'story' in obj:
+            opts['story'] = Story.de_json(obj['story'])
+            content_type = 'story'
+        if 'external_reply' in obj:
+            opts['external_reply'] = ExternalReplyInfo.de_json(obj['external_reply'])
+        if 'quote' in obj:
+            opts['quote'] = TextQuote.de_json(obj['quote'])
+        if 'link_preview_options' in obj:
+            opts['link_preview_options'] = LinkPreviewOptions.de_json(obj['link_preview_options'])
+        if 'giveaway_created' in obj:
+            opts['giveaway_created'] = GiveawayCreated.de_json(obj['giveaway_created'])
+            content_type = 'giveaway_created'
+        if 'giveaway' in obj:
+            opts['giveaway'] = Giveaway.de_json(obj['giveaway'])
+            content_type = 'giveaway'
+        if 'giveaway_winners' in obj:
+            opts['giveaway_winners'] = GiveawayWinners.de_json(obj['giveaway_winners'])
+            content_type = 'giveaway_winners'
+        if 'giveaway_completed' in obj:
+            opts['giveaway_completed'] = GiveawayCompleted.de_json(obj['giveaway_completed'])
+            content_type = 'giveaway_completed'
+        if 'forward_origin' in obj:
+            opts['forward_origin'] = MessageOrigin.de_json(obj['forward_origin'])
+        if 'boost_added' in obj:
+            opts['boost_added'] = ChatBoostAdded.de_json(obj['boost_added'])
+            content_type = 'boost_added'
+        if 'sender_boost_count' in obj:
+            opts['sender_boost_count'] = obj['sender_boost_count']
+        if 'reply_to_story' in obj:
+            opts['reply_to_story'] = Story.de_json(obj['reply_to_story'])
+        if 'sender_business_bot' in obj:
+            opts['sender_business_bot'] = User.de_json(obj['sender_business_bot'])
+        if 'business_connection_id' in obj:
+            opts['business_connection_id'] = obj['business_connection_id']
+        if 'is_from_offline' in obj:
+            opts['is_from_offline'] = obj['is_from_offline']
+
+
 
         return cls(message_id, from_user, date, chat, content_type, opts, json_string)
 
     @classmethod
     def parse_chat(cls, chat):
         """
         Parses chat.
@@ -1624,14 +1502,15 @@
         self.pinned_message: Optional[Union[Message, InaccessibleMessage]] = None
         self.invoice: Optional[Invoice] = None
         self.successful_payment: Optional[SuccessfulPayment] = None
         self.connected_website: Optional[str] = None
         self.reply_markup: Optional[InlineKeyboardMarkup] = None
         self.message_thread_id: Optional[int] = None
         self.is_topic_message: Optional[bool] = None
+        self.chat_background_set: Optional[ChatBackground] = None
         self.forum_topic_created: Optional[ForumTopicCreated] = None
         self.forum_topic_closed: Optional[ForumTopicClosed] = None
         self.forum_topic_reopened: Optional[ForumTopicReopened] = None
         self.has_media_spoiler: Optional[bool] = None
         self.forum_topic_edited: Optional[ForumTopicEdited] = None
         self.general_forum_topic_hidden: Optional[GeneralForumTopicHidden] = None
         self.general_forum_topic_unhidden: Optional[GeneralForumTopicUnhidden] = None
@@ -1785,14 +1664,15 @@
     def user_shared(self):
         logger.warning(
             'The parameter "user_shared" is deprecated, use "users_shared" instead'
         )
         return self.users_shared
 
 
+# noinspection PyShadowingBuiltins
 class MessageEntity(Dictionaryable, JsonSerializable, JsonDeserializable):
     """
     This object represents one special entity in a text message. For example, hashtags, usernames, URLs, etc.
 
     Telegram Documentation: https://core.telegram.org/bots/api#messageentity
 
     :param type: Type of the entity. Currently, can be “mention” (@username), “hashtag” (#hashtag), “cashtag”
@@ -2798,29 +2678,28 @@
         if self.input_field_placeholder:
             json_dict["input_field_placeholder"] = self.input_field_placeholder
         if self.is_persistent is not None:
             json_dict["is_persistent"] = self.is_persistent
         return json.dumps(json_dict)
 
 
+# noinspection PyShadowingBuiltins
 class KeyboardButtonPollType(Dictionaryable):
     """
     This object represents type of a poll, which is allowed to be created and sent when the corresponding button is pressed.
 
     Telegram Documentation: https://core.telegram.org/bots/api#keyboardbuttonpolltype
 
-    :param type: Optional. If quiz is passed, the user will be allowed to create only polls in the quiz mode. If regular is
-        passed, only regular polls will be allowed. Otherwise, the user will be allowed to create a poll of any type.
+    :param type: Optional. If quiz is passed, the user will be allowed to create only polls in the quiz mode. If regular is passed, only regular polls will be allowed. Otherwise, the user will be allowed to create a poll of any type.
     :type type: :obj:`str`
 
     :return: Instance of the class
     :rtype: :class:`telebot.types.KeyboardButtonPollType`
     """
-
-    def __init__(self, type=""):
+    def __init__(self, type=None):
         self.type: str = type
 
     def to_dict(self):
         return {"type": self.type}
 
 
 class KeyboardButtonRequestUsers(Dictionaryable):
@@ -3414,14 +3293,15 @@
         if self.bot_username:
             json_dict["bot_username"] = self.bot_username
         if self.request_write_access is not None:
             json_dict["request_write_access"] = self.request_write_access
         return json_dict
 
 
+# noinspection PyShadowingBuiltins
 class CallbackQuery(JsonDeserializable):
     """
     This object represents an incoming callback query from a callback button in an inline keyboard. If the button that originated the query was attached to a message sent by the bot, the field message will be present. If the button was attached to a message sent via the bot (in inline mode), the field inline_message_id will be present. Exactly one of the fields data or game_short_name will be present.
 
     Telegram Documentation: https://core.telegram.org/bots/api#callbackquery
 
     :param id: Unique identifier for this query
@@ -4076,15 +3956,15 @@
 
     def to_dict(self):
         return {"command": self.command, "description": self.description}
 
 
 # BotCommandScopes
 
-
+# noinspection PyShadowingBuiltins
 class BotCommandScope(ABC, JsonSerializable):
     """
     This object represents the scope to which bot commands are applied. Currently, the following 7 scopes are supported:
 
     * :class:`BotCommandScopeDefault`
     * :class:`BotCommandScopeAllPrivateChats`
     * :class:`BotCommandScopeAllGroupChats`
@@ -4296,15 +4176,15 @@
         super(BotCommandScopeChatMember, self).__init__(
             type="chat_member", chat_id=chat_id, user_id=user_id
         )
 
 
 # InlineQuery
 
-
+# noinspection PyShadowingBuiltins
 class InlineQuery(JsonDeserializable):
     """
     This object represents an incoming inline query. When the user sends an empty query, your bot could return some default or trending results.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequery
 
     :param id: Unique identifier for this query
@@ -4428,24 +4308,21 @@
 
     :param longitude: Longitude of the location in degrees
     :type longitude: :obj:`float`
 
     :param horizontal_accuracy: Optional. The radius of uncertainty for the location, measured in meters; 0-1500
     :type horizontal_accuracy: :obj:`float` number
 
-    :param live_period: Optional. Period in seconds for which the location can be updated, should be between 60 and
-        86400.
+    :param live_period: Optional. Period in seconds during which the location can be updated, should be between 60 and 86400, or 0x7FFFFFFF for live locations that can be edited indefinitely.
     :type live_period: :obj:`int`
 
-    :param heading: Optional. For live locations, a direction in which the user is moving, in degrees. Must be between 1
-        and 360 if specified.
+    :param heading: Optional. For live locations, a direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
     :type heading: :obj:`int`
 
-    :param proximity_alert_radius: Optional. For live locations, a maximum distance for proximity alerts about
-        approaching another chat member, in meters. Must be between 1 and 100000 if specified.
+    :param proximity_alert_radius: Optional. For live locations, a maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
     :type proximity_alert_radius: :obj:`int`
 
     :return: Instance of the class
     :rtype: :class:`telebot.types.InputLocationMessageContent`
     """
 
     def __init__(
@@ -4905,15 +4782,15 @@
     def to_dict(self):
         json_dict = {}
         if self.inline_message_id:
             json_dict["inline_message_id"] = self.inline_message_id
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultArticle(InlineQueryResultBase):
     """
     Represents a link to an article or web page.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultarticle
 
     :param type: Type of the result, must be article
@@ -5014,15 +4891,15 @@
         if self.thumbnail_width:
             json_dict["thumbnail_width"] = self.thumbnail_width
         if self.thumbnail_height:
             json_dict["thumbnail_height"] = self.thumbnail_height
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultPhoto(InlineQueryResultBase):
     """
     Represents a link to a photo. By default, this photo will be sent by the user with optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the photo.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultphoto
 
     :param type: Type of the result, must be photo
@@ -5117,15 +4994,15 @@
         if self.photo_height:
             json_dict["photo_height"] = self.photo_height
         if self.description:
             json_dict["description"] = self.description
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultGif(InlineQueryResultBase):
     """
     Represents a link to an animated GIF file. By default, this animated GIF file will be sent by the user with optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the animation.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultgif
 
     :param type: Type of the result, must be gif
@@ -5234,15 +5111,15 @@
         if self.gif_duration:
             json_dict["gif_duration"] = self.gif_duration
         if self.thumbnail_mime_type:
             json_dict["thumbnail_mime_type"] = self.thumbnail_mime_type
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultMpeg4Gif(InlineQueryResultBase):
     """
     Represents a link to a video animation (H.264/MPEG-4 AVC video without sound). By default, this animated MPEG-4 file will be sent by the user with optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the animation.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultmpeg4gif
 
     :param type: Type of the result, must be mpeg4_gif
@@ -5351,15 +5228,15 @@
         if self.mpeg4_duration:
             json_dict["mpeg4_duration "] = self.mpeg4_duration
         if self.thumbnail_mime_type:
             json_dict["thumbnail_mime_type"] = self.thumbnail_mime_type
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultVideo(InlineQueryResultBase):
     """
     Represents a link to a page containing an embedded video player or a video file. By default, this video file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the video.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultvideo
 
     :param type: Type of the result, must be video
@@ -5466,15 +5343,15 @@
         if self.video_duration:
             json_dict["video_duration"] = self.video_duration
         if self.description:
             json_dict["description"] = self.description
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultAudio(InlineQueryResultBase):
     """
     Represents a link to an MP3 audio file. By default, this audio file will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the audio.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultaudio
 
     :param type: Type of the result, must be audio
@@ -5549,15 +5426,15 @@
         if self.performer:
             json_dict["performer"] = self.performer
         if self.audio_duration:
             json_dict["audio_duration"] = self.audio_duration
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultVoice(InlineQueryResultBase):
     """
     Represents a link to a voice recording in an .OGG container encoded with OPUS. By default, this voice recording will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the the voice message.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultvoice
 
     :param type: Type of the result, must be voice
@@ -5625,15 +5502,15 @@
         json_dict = super().to_dict()
         json_dict["voice_url"] = self.voice_url
         if self.voice_duration:
             json_dict["voice_duration"] = self.voice_duration
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultDocument(InlineQueryResultBase):
     """
     Represents a link to a file. By default, this file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the file. Currently, only .PDF and .ZIP files can be sent using this method.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultdocument
 
     :param type: Type of the result, must be document
@@ -5749,15 +5626,15 @@
         if self.thumbnail_width:
             json_dict["thumbnail_width"] = self.thumbnail_width
         if self.thumbnail_height:
             json_dict["thumbnail_height"] = self.thumbnail_height
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultLocation(InlineQueryResultBase):
     """
     Represents a location on a map. By default, the location will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the location.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultlocation
 
     :param type: Type of the result, must be location
@@ -5774,24 +5651,21 @@
 
     :param title: Location title
     :type title: :obj:`str`
 
     :param horizontal_accuracy: Optional. The radius of uncertainty for the location, measured in meters; 0-1500
     :type horizontal_accuracy: :obj:`float` number
 
-    :param live_period: Optional. Period in seconds for which the location can be updated, should be between 60 and
-        86400.
+    :param live_period: Optional. Period in seconds during which the location can be updated, should be between 60 and 86400, or 0x7FFFFFFF for live locations that can be edited indefinitely.
     :type live_period: :obj:`int`
 
-    :param heading: Optional. For live locations, a direction in which the user is moving, in degrees. Must be between 1
-        and 360 if specified.
+    :param heading: Optional. For live locations, a direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
     :type heading: :obj:`int`
 
-    :param proximity_alert_radius: Optional. For live locations, a maximum distance for proximity alerts about
-        approaching another chat member, in meters. Must be between 1 and 100000 if specified.
+    :param proximity_alert_radius: Optional. For live locations, a maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
     :type proximity_alert_radius: :obj:`int`
 
     :param reply_markup: Optional. Inline keyboard attached to the message
     :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
 
     :param input_message_content: Optional. Content of the message to be sent instead of the location
     :type input_message_content: :class:`telebot.types.InputMessageContent`
@@ -5880,15 +5754,15 @@
         if self.thumbnail_width:
             json_dict["thumbnail_width"] = self.thumbnail_width
         if self.thumbnail_height:
             json_dict["thumbnail_height"] = self.thumbnail_height
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultVenue(InlineQueryResultBase):
     """
     Represents a venue. By default, the venue will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the venue.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultvenue
 
     :param type: Type of the result, must be venue
@@ -6015,15 +5889,15 @@
         if self.thumbnail_width:
             json_dict["thumbnail_width"] = self.thumbnail_width
         if self.thumbnail_height:
             json_dict["thumbnail_height"] = self.thumbnail_height
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultContact(InlineQueryResultBase):
     """
     Represents a contact with a phone number. By default, this contact will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the contact.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcontact
 
     :param type: Type of the result, must be contact
@@ -6124,15 +5998,15 @@
         if self.thumbnail_width:
             json_dict["thumbnail_width"] = self.thumbnail_width
         if self.thumbnail_height:
             json_dict["thumbnail_height"] = self.thumbnail_height
         return json_dict
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultGame(InlineQueryResultBase):
     """
     Represents a Game.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultgame
 
     :param type: Type of the result, must be game
@@ -6197,15 +6071,15 @@
         if self.caption_entities:
             json_dict["caption_entities"] = MessageEntity.to_list_of_dicts(
                 self.caption_entities
             )
         return json.dumps(json_dict)
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedPhoto(InlineQueryResultCachedBase):
     """
     Represents a link to a photo stored on the Telegram servers. By default, this photo will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the photo.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedphoto
 
     :param type: Type of the result, must be photo
@@ -6266,15 +6140,15 @@
         self.caption_entities = caption_entities
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.parse_mode = parse_mode
         self.payload_dic["photo_file_id"] = photo_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedGif(InlineQueryResultCachedBase):
     """
     Represents a link to an animated GIF file stored on the Telegram servers. By default, this animated GIF file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with specified content instead of the animation.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedgif
 
     :param type: Type of the result, must be gif
@@ -6331,15 +6205,15 @@
         self.caption_entities = caption_entities
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.parse_mode = parse_mode
         self.payload_dic["gif_file_id"] = gif_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedMpeg4Gif(InlineQueryResultCachedBase):
     """
     Represents a link to a video animation (H.264/MPEG-4 AVC video without sound) stored on the Telegram servers. By default, this animated MPEG-4 file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the animation.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedmpeg4gif
 
     :param type: Type of the result, must be mpeg4_gif
@@ -6396,15 +6270,15 @@
         self.caption_entities = caption_entities
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.parse_mode = parse_mode
         self.payload_dic["mpeg4_file_id"] = mpeg4_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedSticker(InlineQueryResultCachedBase):
     """
     Represents a link to a sticker stored on the Telegram servers. By default, this sticker will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the sticker.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedsticker
 
     :param type: Type of the result, must be sticker
@@ -6434,15 +6308,15 @@
         self.id = id
         self.sticker_file_id = sticker_file_id
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.payload_dic["sticker_file_id"] = sticker_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedDocument(InlineQueryResultCachedBase):
     """
     Represents a link to a file stored on the Telegram servers. By default, this file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the file.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcacheddocument
 
     :param type: Type of the result, must be document
@@ -6503,15 +6377,15 @@
         self.caption_entities = caption_entities
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.parse_mode = parse_mode
         self.payload_dic["document_file_id"] = document_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedVideo(InlineQueryResultCachedBase):
     """
     Represents a link to a video file stored on the Telegram servers. By default, this video file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the video.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedvideo
 
     :param type: Type of the result, must be video
@@ -6572,15 +6446,15 @@
         self.caption_entities = caption_entities
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.parse_mode = parse_mode
         self.payload_dic["video_file_id"] = video_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedVoice(InlineQueryResultCachedBase):
     """
     Represents a link to a voice message stored on the Telegram servers. By default, this voice message will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the voice message.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedvoice
 
     :param type: Type of the result, must be voice
@@ -6636,15 +6510,15 @@
         self.caption_entities = caption_entities
         self.reply_markup = reply_markup
         self.input_message_content = input_message_content
         self.parse_mode = parse_mode
         self.payload_dic["voice_file_id"] = voice_file_id
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class InlineQueryResultCachedAudio(InlineQueryResultCachedBase):
     """
     Represents a link to an MP3 audio file stored on the Telegram servers. By default, this audio file will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the audio.
 
     Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedaudio
 
     :param type: Type of the result, must be audio
@@ -7052,15 +6926,15 @@
     ):
         self.name: str = name
         self.phone_number: str = phone_number
         self.email: str = email
         self.shipping_address: ShippingAddress = shipping_address
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class ShippingOption(JsonSerializable):
     """
     This object represents one shipping option.
 
     Telegram Documentation: https://core.telegram.org/bots/api#shippingoption
 
     :param id: Shipping option identifier
@@ -7161,14 +7035,15 @@
         self.invoice_payload: str = invoice_payload
         self.shipping_option_id: str = shipping_option_id
         self.order_info: OrderInfo = order_info
         self.telegram_payment_charge_id: str = telegram_payment_charge_id
         self.provider_payment_charge_id: str = provider_payment_charge_id
 
 
+# noinspection PyShadowingBuiltins
 class ShippingQuery(JsonDeserializable):
     """
     This object contains information about an incoming shipping query.
 
     Telegram Documentation: https://core.telegram.org/bots/api#shippingquery
 
     :param id: Unique query identifier
@@ -7199,14 +7074,15 @@
     def __init__(self, id, from_user, invoice_payload, shipping_address, **kwargs):
         self.id: str = id
         self.from_user: User = from_user
         self.invoice_payload: str = invoice_payload
         self.shipping_address: ShippingAddress = shipping_address
 
 
+# noinspection PyShadowingBuiltins
 class PreCheckoutQuery(JsonDeserializable):
     """
     This object contains information about an incoming pre-checkout query.
 
     Telegram Documentation: https://core.telegram.org/bots/api#precheckoutquery
 
     :param id: Unique query identifier
@@ -7347,14 +7223,15 @@
         """
         logger.warning(
             'The parameter "is_video" is deprecated since Bot API 7.2. Stickers can now be mixed'
         )
         return False
 
 
+# noinspection PyShadowingBuiltins
 class Sticker(JsonDeserializable):
     """
     This object represents a sticker.
 
     Telegram Documentation: https://core.telegram.org/bots/api#sticker
 
     :param file_id: Identifier for this file, which can be used to download or reuse the file
@@ -7514,15 +7391,15 @@
             "y_shift": self.y_shift,
             "scale": self.scale,
         }
 
 
 # InputMedia
 
-
+# noinspection PyShadowingBuiltins
 class InputMedia(Dictionaryable, JsonSerializable):
     """
     This object represents the content of a media message to be sent. It should be one of
 
     * :class:`InputMediaAnimation`
     * :class:`InputMediaDocument`
     * :class:`InputMediaAudio`
@@ -7976,35 +7853,77 @@
 
     :param text: Option text, 1-100 characters
     :type text: :obj:`str`
 
     :param voter_count: Number of users that voted for this option
     :type voter_count: :obj:`int`
 
+    :param text_entities: Optional. Special entities that appear in the option text. Currently, only custom emoji entities are allowed in poll option texts
+    :type text_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
     :return: Instance of the class
     :rtype: :class:`telebot.types.PollOption`
     """
 
     @classmethod
     def de_json(cls, json_string):
         if json_string is None:
             return None
         obj = cls.check_json(json_string, dict_copy=False)
+        if 'text_entities' in obj:
+            obj['text_entities'] = Message.parse_entities(obj['text_entities'])
         return cls(**obj)
 
-    def __init__(self, text, voter_count=0, **kwargs):
+    def __init__(self, text, voter_count = 0, text_entities=None, **kwargs):
         self.text: str = text
         self.voter_count: int = voter_count
-
+        self.text_entities: List[MessageEntity] = text_entities
     # Converted in _convert_poll_options
     # def to_json(self):
     #     # send_poll Option is a simple string: https://core.telegram.org/bots/api#sendpoll
     #     return json.dumps(self.text)
 
 
+class InputPollOption(JsonSerializable):
+    """
+    This object contains information about one answer option in a poll to send.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputpolloption
+
+    :param text: Option text, 1-100 characters
+    :type text: :obj:`str`
+
+    :param text_parse_mode: Optional. Mode for parsing entities in the text. See formatting options for more details. Currently, only custom emoji entities are allowed
+    :type text_parse_mode: :obj:`str`
+
+    :param text_entities: Optional. A JSON-serialized list of special entities that appear in the poll option text. It can be specified instead of text_parse_mode
+    :type text_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.PollOption`
+    """
+    def __init__(self, text, text_parse_mode=None, text_entities=None, **kwargs):
+        self.text: str = text
+        self.text_parse_mode: Optional[str] = text_parse_mode
+        self.text_entities: List[MessageEntity] = text_entities
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = {
+            "text": self.text,
+        }
+        if self.text_parse_mode:
+            json_dict["text_parse_mode"] = self.text_parse_mode
+        if self.text_entities:
+            json_dict['text_entities'] = [entity.to_dict() for entity in self.text_entities]
+        return json_dict
+
+
 class Poll(JsonDeserializable):
     """
     This object contains information about a poll.
 
     Telegram Documentation: https://core.telegram.org/bots/api#poll
 
     :param id: Unique poll identifier
@@ -8027,71 +7946,60 @@
 
     :param type: Poll type, currently can be “regular” or “quiz”
     :type type: :obj:`str`
 
     :param allows_multiple_answers: True, if the poll allows multiple answers
     :type allows_multiple_answers: :obj:`bool`
 
-    :param correct_option_id: Optional. 0-based identifier of the correct answer option. Available only for polls in
-        the quiz mode, which are closed, or was sent (not forwarded) by the bot or to the private chat with the bot.
+    :param correct_option_id: Optional. 0-based identifier of the correct answer option. Available only for polls in the quiz mode, which are closed, or was sent (not forwarded) by the bot or to the private chat with the bot.
     :type correct_option_id: :obj:`int`
 
-    :param explanation: Optional. Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a
-        quiz-style poll, 0-200 characters
+    :param explanation: Optional. Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a quiz-style poll, 0-200 characters
     :type explanation: :obj:`str`
 
-    :param explanation_entities: Optional. Special entities like usernames, URLs, bot commands, etc. that appear in
-        the explanation
+    :param explanation_entities: Optional. Special entities like usernames, URLs, bot commands, etc. that appear in the explanation
     :type explanation_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
 
     :param open_period: Optional. Amount of time in seconds the poll will be active after creation
     :type open_period: :obj:`int`
 
     :param close_date: Optional. Point in time (Unix timestamp) when the poll will be automatically closed
     :type close_date: :obj:`int`
 
+    :param question_entities: Optional. Special entities that appear in the question. Currently, only custom emoji entities are allowed in poll questions
+    :type question_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
     :return: Instance of the class
     :rtype: :class:`telebot.types.Poll`
     """
 
     @classmethod
     def de_json(cls, json_string):
         if json_string is None:
             return None
         obj = cls.check_json(json_string)
         obj["poll_id"] = obj.pop("id")
         options = []
         for opt in obj["options"]:
             options.append(PollOption.de_json(opt))
-        obj["options"] = options or None
-        if "explanation_entities" in obj:
-            obj["explanation_entities"] = Message.parse_entities(
-                obj["explanation_entities"]
-            )
+        obj['options'] = options or None
+        if 'explanation_entities' in obj:
+            obj['explanation_entities'] = Message.parse_entities(obj['explanation_entities'])
+        if 'question_entities' in obj:
+            obj['question_entities'] = Message.parse_entities(obj['question_entities'])
         return cls(**obj)
 
     # noinspection PyShadowingBuiltins
     def __init__(
-        self,
-        question,
-        options,
-        poll_id=None,
-        total_voter_count=None,
-        is_closed=None,
-        is_anonymous=None,
-        type=None,
-        allows_multiple_answers=None,
-        correct_option_id=None,
-        explanation=None,
-        explanation_entities=None,
-        open_period=None,
-        close_date=None,
-        poll_type=None,
-        **kwargs,
-    ):
+            self,
+            question, options,
+            poll_id=None, total_voter_count=None, is_closed=None, is_anonymous=None, type=None,
+            allows_multiple_answers=None, correct_option_id=None, explanation=None, explanation_entities=None,
+            open_period=None, close_date=None, poll_type=None, question_entities=None,
+            **kwargs):
         self.id: str = poll_id
         self.question: str = question
         self.options: List[PollOption] = options
         self.total_voter_count: int = total_voter_count
         self.is_closed: bool = is_closed
         self.is_anonymous: bool = is_anonymous
         self.type: str = type
@@ -8099,14 +8007,15 @@
             logger.warning("Poll: poll_type parameter is deprecated. Use type instead.")
             if type is None:
                 self.type: str = poll_type
         self.allows_multiple_answers: bool = allows_multiple_answers
         self.correct_option_id: int = correct_option_id
         self.explanation: str = explanation
         self.explanation_entities: List[MessageEntity] = explanation_entities
+        self.question_entities: List[MessageEntity] = question_entities
         self.open_period: int = open_period
         self.close_date: int = close_date
 
     def add(self, option):
         """
         Add an option to the poll.
 
@@ -8499,34 +8408,35 @@
     """
 
     @classmethod
     def de_json(cls, json_string):
         if json_string is None:
             return None
         obj = cls.check_json(json_string)
-        map = {
-            "commands": MenuButtonCommands,
-            "web_app": MenuButtonWebApp,
-            "default": MenuButtonDefault,
+        types = {
+            'commands': MenuButtonCommands,
+            'web_app': MenuButtonWebApp,
+            'default': MenuButtonDefault
         }
-        return map[obj["type"]](**obj)
-
+        return types[obj['type']](**obj)
+    
     def to_json(self):
         """
         :meta private:
         """
         raise NotImplementedError
 
     def to_dict(self):
         """
         :meta private:
         """
         raise NotImplementedError
 
 
+# noinspection PyUnusedLocal
 class MenuButtonCommands(MenuButton):
     """
     Represents a menu button, which opens the bot's list of commands.
 
     Telegram Documentation: https://core.telegram.org/bots/api#menubuttoncommands
 
     :param type: Type of the button, must be commands
@@ -8542,14 +8452,15 @@
     def to_dict(self):
         return {"type": self.type}
 
     def to_json(self):
         return json.dumps(self.to_dict())
 
 
+# noinspection PyUnusedLocal
 class MenuButtonWebApp(MenuButton):
     """
     Represents a menu button, which launches a Web App.
 
     Telegram Documentation: https://core.telegram.org/bots/api#menubuttonwebapp
 
     :param type: Type of the button, must be web_app
@@ -8574,14 +8485,15 @@
     def to_dict(self):
         return {"type": self.type, "text": self.text, "web_app": self.web_app.to_dict()}
 
     def to_json(self):
         return json.dumps(self.to_dict())
 
 
+# noinspection PyUnusedLocal
 class MenuButtonDefault(MenuButton):
     """
     Describes that no specific value for the menu button was set.
 
     Telegram Documentation: https://core.telegram.org/bots/api#menubuttondefault
 
     :param type: Type of the button, must be default
@@ -9110,14 +9022,15 @@
         obj = cls.check_json(json_string)
         return cls(**obj)
 
     def __init__(self, short_description: str, **kwargs) -> None:
         self.short_description: str = short_description
 
 
+# noinspection PyShadowingBuiltins
 class InputSticker(Dictionaryable, JsonSerializable):
     """
     This object describes a sticker to be added to a sticker set.
 
     :param sticker: The added sticker. Pass a file_id as a String to send a file that already exists on the Telegram servers,
         pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
         Animated and video stickers can't be uploaded via HTTP URL.
@@ -9364,14 +9277,15 @@
 
     def __init__(self, chat: Chat, id: int, **kwargs) -> None:
         self.chat: Chat = chat
         self.id: int = id
 
 
 # base class
+# noinspection PyShadowingBuiltins
 class ReactionType(JsonDeserializable, Dictionaryable, JsonSerializable):
     """
     This object represents a reaction type.
 
     Telegram documentation: https://core.telegram.org/bots/api#reactiontype
 
     :param type: Type of the reaction
@@ -9572,14 +9486,15 @@
     ) -> None:
         self.chat: Chat = chat
         self.message_id: int = message_id
         self.date: int = date
         self.reactions: List[ReactionCount] = reactions
 
 
+# noinspection PyShadowingBuiltins
 class ReactionCount(JsonDeserializable):
     """
     This object represents a reaction added to a message along with the number of times it was added.
 
     Telegram documentation: https://core.telegram.org/bots/api#reactioncount
 
     :param type: Type of the reaction
@@ -9783,15 +9698,15 @@
         self.giveaway_winners: Optional[GiveawayWinners] = giveaway_winners
         self.invoice: Optional[Invoice] = invoice
         self.location: Optional[Location] = location
         self.poll: Optional[Poll] = poll
         self.venue: Optional[Venue] = venue
 
 
-# noinspection PyUnresolvedReferences
+# noinspection PyUnresolvedReferences,PyShadowingBuiltins
 class MessageOrigin(JsonDeserializable):
     """
     This object describes the origin of a message.
 
     Telegram documentation: https://core.telegram.org/bots/api#messageorigin
 
     :param type: Type of the message origin
@@ -10682,85 +10597,27 @@
         logger.warning(
             f'Deprecation warning: the filed "{property_name}" is not accessible for InaccessibleMessage. You should check if your object is Message instance before access.'
         )
         return None
 
     def __getattr__(self, item):
         if item in [
-            "message_thread_id",
-            "from_user",
-            "sender_chat",
-            "forward_origin",
-            "is_topic_message",
-            "is_automatic_forward",
-            "reply_to_message",
-            "external_reply",
-            "qoute",
-            "via_bot",
-            "edit_date",
-            "has_protected_content",
-            "media_group_id",
-            "author_signature",
-            "text",
-            "entities",
-            "link_preview_options",
-            "animation",
-            "audio",
-            "document",
-            "photo",
-            "sticker",
-            "story",
-            "video",
-            "video_note",
-            "voice",
-            "caption",
-            "caption_entities",
-            "has_media_spoiler",
-            "contact",
-            "dice",
-            "game",
-            "poll",
-            "venue",
-            "location",
-            "new_chat_members",
-            "left_chat_member",
-            "new_chat_title",
-            "new_chat_photo",
-            "delete_chat_photo",
-            "group_chat_created",
-            "supergroup_chat_created",
-            "channel_chat_created",
-            "message_auto_delete_timer_changed",
-            "migrate_to_chat_id",
-            "migrate_from_chat_id",
-            "pinned_message",
-            "invoice",
-            "successful_payment",
-            "users_shared",
-            "chat_shared",
-            "connected_website",
-            "write_access_allowed",
-            "passport_data",
-            "proximity_alert_triggered",
-            "forum_topic_created",
-            "forum_topic_edited",
-            "forum_topic_closed",
-            "forum_topic_reopened",
-            "general_forum_topic_hidden",
-            "general_forum_topic_unhidden",
-            "giveaway_created",
-            "giveaway",
-            "giveaway_winners",
-            "giveaway_completed",
-            "video_chat_scheduled",
-            "video_chat_started",
-            "video_chat_ended",
-            "video_chat_participants_invited",
-            "web_app_data",
-            "reply_markup",
+            'message_thread_id', 'from_user', 'sender_chat', 'forward_origin', 'is_topic_message',
+            'is_automatic_forward', 'reply_to_message', 'external_reply', 'qoute', 'via_bot', 'edit_date',
+            'has_protected_content', 'media_group_id', 'author_signature', 'text', 'entities', 'link_preview_options',
+            'animation', 'audio', 'document', 'photo', 'sticker', 'story', 'video', 'video_note', 'voice', 'caption',
+            'caption_entities', 'has_media_spoiler', 'contact', 'dice', 'game', 'poll', 'venue', 'location',
+            'new_chat_members', 'left_chat_member', 'new_chat_title', 'new_chat_photo', 'delete_chat_photo',
+            'group_chat_created', 'supergroup_chat_created', 'channel_chat_created', 'message_auto_delete_timer_changed',
+            'migrate_to_chat_id', 'migrate_from_chat_id', 'pinned_message', 'invoice', 'successful_payment',
+            'users_shared', 'chat_shared', 'connected_website', 'write_access_allowed', 'passport_data',
+            'proximity_alert_triggered', 'chat_background_set', 'forum_topic_created', 'forum_topic_edited', 'forum_topic_closed',
+            'forum_topic_reopened', 'general_forum_topic_hidden', 'general_forum_topic_unhidden', 'giveaway_created',
+            'giveaway', 'giveaway_winners', 'giveaway_completed', 'video_chat_scheduled', 'video_chat_started',
+            'video_chat_ended', 'video_chat_participants_invited', 'web_app_data', 'reply_markup'
         ]:
             return self.__universal_deprecation(item)
         else:
             raise AttributeError(
                 f'"{self.__class__.__name__}" object has no attribute "{item}"'
             )
 
@@ -10785,14 +10642,15 @@
         obj = cls.check_json(json_string)
         return cls(**obj)
 
     def __init__(self, boost_count, **kwargs):
         self.boost_count: int = boost_count
 
 
+# noinspection PyShadowingBuiltins
 class BusinessConnection(JsonDeserializable):
     """
     This object describes the connection of the bot with a business account.
 
     Telegram documentation: https://core.telegram.org/bots/api#businessconnection
 
     :param id: Unique identifier of the business connection
@@ -11069,7 +10927,327 @@
         obj = cls.check_json(json_string)
         return cls(**obj)
 
     def __init__(self, day, month, year=None, **kwargs):
         self.day: int = day
         self.month: int = month
         self.year: Optional[int] = year
+
+
+class BackgroundFill(ABC, JsonDeserializable):
+    """
+    This object describes the way a background is filled based on the selected colors. Currently, it can be one of
+        BackgroundFillSolid
+        BackgroundFillGradient
+        BackgroundFillFreeformGradient
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundfill
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundFillSolid` or :class:`BackgroundFillGradient` or :class:`BackgroundFillFreeformGradient`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if obj["type"] == "solid":
+            return BackgroundFillSolid.de_json(obj)
+        elif obj["type"] == "gradient":
+            return BackgroundFillGradient.de_json(obj)
+        elif obj["type"] == "freeform_gradient":
+            return BackgroundFillFreeformGradient.de_json(obj)
+        return None
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundFillSolid(BackgroundFill):
+    """
+    The background is filled using the selected color.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundfillsolid
+
+    :param type: Type of the background fill, always “solid”
+    :type type: :obj:`str`
+
+    :param color: The color of the background fill in the RGB24 format
+    :type color: :class:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundFillSolid`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, type, color, **kwargs):
+        self.type: str = type
+        self.color: int = color
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundFillGradient(BackgroundFill):
+    """
+    The background is a gradient fill.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundfillgradient
+
+    :param type: Type of the background fill, always “gradient”
+    :type type: :obj:`str`
+
+    :param top_color: Top color of the gradient in the RGB24 format
+    :type top_color: :class:`int`
+
+    :param bottom_color: Bottom color of the gradient in the RGB24 format
+    :type bottom_color: :class:`int`
+
+    :param rotation_angle: Clockwise rotation angle of the background fill in degrees; 0-359
+    :type rotation_angle: :class:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundFillGradient`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, type, top_color, bottom_color, rotation_angle, **kwargs):
+        self.type: str = type
+        self.top_color: int = top_color
+        self.bottom_color: int = bottom_color
+        self.rotation_angle: int = rotation_angle
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundFillFreeformGradient(BackgroundFill):
+    """
+    The background is a freeform gradient that rotates after every message in the chat.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundfillfreeformgradient
+
+    :param type: Type of the background fill, always “freeform_gradient”
+    :type type: :obj:`str`
+
+    :param colors: A list of the 3 or 4 base colors that are used to generate the freeform gradient in the RGB24 format
+    :type colors: :obj:`list` of :class:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundFillFreeformGradient`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, type, colors, **kwargs):
+        self.type: str = type
+        self.colors: List[int] = colors
+
+
+class BackgroundType(ABC, JsonDeserializable):
+    """
+    This object describes the type of a background. Currently, it can be one of
+        BackgroundTypeFill
+        BackgroundTypeWallpaper
+        BackgroundTypePattern
+        BackgroundTypeChatTheme
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundtype
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundTypeFill` or :class:`BackgroundTypeWallpaper` or :class:`BackgroundTypePattern` or :class:`BackgroundTypeChatTheme`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if obj["type"] == "fill":
+            return BackgroundTypeFill.de_json(obj)
+        elif obj["type"] == "wallpaper":
+            return BackgroundTypeWallpaper.de_json(obj)
+        elif obj["type"] == "pattern":
+            return BackgroundTypePattern.de_json(obj)
+        elif obj["type"] == "chat_theme":
+            return BackgroundTypeChatTheme.de_json(obj)
+        return None
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundTypeFill(BackgroundFill):
+    """
+    The background is automatically filled based on the selected colors.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundtypefill
+
+    :param type: Type of the background, always “fill”
+    :type type: :obj:`str`
+
+    :param fill: The background fill
+    :type fill: :class:`BackgroundFill`
+
+    :param dark_theme_dimming: Dimming of the background in dark themes, as a percentage; 0-100
+    :type dark_theme_dimming: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundTypeFill`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['fill'] = BackgroundFill.de_json(obj['fill'])
+        return cls(**obj)
+
+    def __init__(self, type, fill, dark_theme_dimming, **kwargs):
+        self.type: str = type
+        self.fill: BackgroundFill = fill
+        self.dark_theme_dimming: int = dark_theme_dimming
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundTypeWallpaper(BackgroundFill):
+    """
+    The background is a wallpaper in the JPEG format.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundtypewallpaper
+
+    :param type: Type of the background, always “wallpaper”
+    :type type: :obj:`str`
+
+    :param document: Document with the wallpaper
+    :type document: :class:`Document`
+
+    :param dark_theme_dimming: Dimming of the background in dark themes, as a percentage; 0-100
+    :type dark_theme_dimming: :obj:`int`
+
+    :param is_blurred: Optional. True, if the wallpaper is downscaled to fit in a 450x450 square and then box-blurred with radius 12
+    :type is_blurred: :obj:`bool`
+
+    :param is_moving: Optional. True, if the background moves slightly when the device is tilted
+    :type is_moving: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundTypeWallpaper`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['document'] = Document.de_json(obj['document'])
+        obj['fill'] = BackgroundFill.de_json(obj['fill'])
+        return cls(**obj)
+
+    def __init__(self, type, document, dark_theme_dimming, is_blurred=None, is_moving=None, **kwargs):
+        self.type: str = type
+        self.document: Document = document
+        self.dark_theme_dimming: int = dark_theme_dimming
+        self.is_blurred: Optional[bool] = is_blurred
+        self.is_moving: Optional[bool] = is_moving
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundTypePattern(BackgroundFill):
+    """
+    The background is a wallpaper in the JPEG format.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundtypepattern
+
+    :param type: Type of the background, always “pattern”
+    :type type: :obj:`str`
+
+    :param document: Document with the pattern
+    :type document: :class:`Document`
+
+    :param fill: The background fill that is combined with the pattern
+    :type fill: :class:`BackgroundFill`
+
+    :param intensity: Intensity of the pattern when it is shown above the filled background; 0-100
+    :type intensity: :obj:`int`
+
+    :param is_inverted: Optional. True, if the background fill must be applied only to the pattern itself. All other pixels are black in this case. For dark themes only
+    :type is_inverted: :obj:`bool`
+
+    :param is_moving: Optional. True, if the background moves slightly when the device is tilted
+    :type is_moving: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundTypePattern`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['document'] = Document.de_json(obj['document'])
+        return cls(**obj)
+
+    def __init__(self, type, document, fill, intensity, is_inverted=None, is_moving=None, **kwargs):
+        self.type: str = type
+        self.document: Document = document
+        self.fill: BackgroundFill = fill
+        self.intensity: int = intensity
+        self.is_inverted: Optional[bool] = is_inverted
+        self.is_moving: Optional[bool] = is_moving
+
+
+# noinspection PyShadowingBuiltins
+class BackgroundTypeChatTheme(BackgroundFill):
+    """
+    The background is taken directly from a built-in chat theme.
+
+    Telegram documentation: https://core.telegram.org/bots/api#backgroundtypechattheme
+
+    :param type: Type of the background, always “chat_theme”
+    :type type: :obj:`str`
+
+    :param theme_name: Intensity of the pattern when it is shown above the filled background; 0-100
+    :type theme_name: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`BackgroundTypeChatTheme`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, type, theme_name, **kwargs):
+        self.type: str = type
+        self.theme_name: str = theme_name
+
+
+# noinspection PyShadowingBuiltins
+class ChatBackground(JsonDeserializable):
+    """
+    This object represents a chat background.
+
+    Telegram documentation: https://core.telegram.org/bots/api#chatbackground
+
+    :param type: Type of the background
+    :type type: :class:`BackgroundType`
+
+    :return: Instance of the class
+    :rtype: :class:`ChatBackground`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['type'] = BackgroundType.de_json(obj['type'])
+        return cls(**obj)
+
+    def __init__(self, type, **kwargs):
+        self.type: BackgroundType = type
```

### Comparing `telegram_bale_bot-4.17.3/telebot/util.py` & `telegram_bale_bot-4.18.3/telebot/util.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_storage/base_storage.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_storage/base_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_storage/memory_storage.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_storage/memory_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_storage/pickle_storage.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_storage/pickle_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/asyncio_storage/redis_storage.py` & `telegram_bale_bot-4.18.3/telebot/asyncio_storage/redis_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/ext/reloader.py` & `telegram_bale_bot-4.18.3/telebot/ext/reloader.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/ext/aio/webhooks.py` & `telegram_bale_bot-4.18.3/telebot/ext/aio/webhooks.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/ext/sync/webhooks.py` & `telegram_bale_bot-4.18.3/telebot/ext/sync/webhooks.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/storage/base_storage.py` & `telegram_bale_bot-4.18.3/telebot/storage/base_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/storage/memory_storage.py` & `telegram_bale_bot-4.18.3/telebot/storage/memory_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/storage/pickle_storage.py` & `telegram_bale_bot-4.18.3/telebot/storage/pickle_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/telebot/storage/redis_storage.py` & `telegram_bale_bot-4.18.3/telebot/storage/redis_storage.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_handler_backends.py` & `telegram_bale_bot-4.18.3/tests/test_handler_backends.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_telebot.py` & `telegram_bale_bot-4.18.3/tests/test_telebot.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_types.py` & `telegram_bale_bot-4.18.3/tests/test_types.py`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_data/record.mp3` & `telegram_bale_bot-4.18.3/tests/test_data/record.mp3`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_data/record.ogg` & `telegram_bale_bot-4.18.3/tests/test_data/record.ogg`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_data/record.wav` & `telegram_bale_bot-4.18.3/tests/test_data/record.wav`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/tests/test_data/test_video.mp4` & `telegram_bale_bot-4.18.3/tests/test_data/test_video.mp4`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/.gitignore` & `telegram_bale_bot-4.18.3/.gitignore`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/LICENSE` & `telegram_bale_bot-4.18.3/LICENSE`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/README.md` & `telegram_bale_bot-4.18.3/README.md`

 * *Files identical despite different names*

### Comparing `telegram_bale_bot-4.17.3/pyproject.toml` & `telegram_bale_bot-4.18.3/pyproject.toml`

 * *Files 7% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 [build-system]
 requires = ["hatchling"]
 build-backend = "hatchling.build"
 
 [project]
 name = "telegram-bale-bot"
-version = "4.17.3"
-description = "A simple and easy-to-use library for creating Telegram bots and Bale messenger bots."
+version = "4.18.3"
+description = "A simple and easy-to-use library for creating Telegram bots and Bale messenger bots, forked from pyTelegramBotAPI"
 authors = [{name = "Mahdi Kiani", email = "mahdikiany@gmail.com"}]
 license = {text = "GPL2"}
 readme = "README.md"
 requires-python = ">=3.8"
 keywords = ["telegram", "bot", "api", "tools"]
 classifiers = [
     "Development Status :: 5 - Production/Stable",
```

### Comparing `telegram_bale_bot-4.17.3/PKG-INFO` & `telegram_bale_bot-4.18.3/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 Metadata-Version: 2.3
 Name: telegram-bale-bot
-Version: 4.17.3
-Summary: A simple and easy-to-use library for creating Telegram bots and Bale messenger bots.
+Version: 4.18.3
+Summary: A simple and easy-to-use library for creating Telegram bots and Bale messenger bots, forked from pyTelegramBotAPI
 Project-URL: Homepage, https://github.com/mahdikiani/telegram-bale-bot
 Project-URL: OriginalPackage, https://github.com/eternnoir/pyTelegramBotAPI
 Project-URL: Documentation, https://pytba.readthedocs.org
 Project-URL: Repository, https://github.com/eternnoir/pyTelegramBotAPI
 Project-URL: Issues, https://github.com/eternnoir/pyTelegramBotAPI/issues
 Author-email: Mahdi Kiani <mahdikiany@gmail.com>
 License: GPL2
```

